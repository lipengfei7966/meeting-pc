(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52d3d222"],{"18af":function(t,e,i){},"5f25":function(t,e,i){t.exports=i.p+"img/返回.25769739.png"},6575:function(t,e,i){"use strict";i("9889")},9889:function(t,e,i){},b40c:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.info?s("div",{class:t.readonly?"orderInfo seeInfo":"orderInfo"},[s("div",{staticClass:"title"},[t._v(" 我的订单 - 结算单 - "),t.info?[t._v(" "+t._s(t.info.ordernum)+" ")]:t._e(),s("p",{staticStyle:{color:"#ffffff",float:"right"}},[1==t.info.event_info_configure.jsqrisdisplay?s("a",{staticStyle:{cursor:"pointer",margin:"0 10px"},attrs:{download:""},on:{click:t.downloadSettlementConfirm}},[s("span",{staticClass:"el-icon-document"}),t._v("下载结算确认单")]):t._e(),0==this.$route.params.issubmit?s("a",{staticStyle:{cursor:"pointer",margin:"0 10px"},attrs:{download:""},on:{click:t.excelDownload}},[s("span",{staticClass:"el-icon-document"}),t._v(" 下载结算Excel")]):t._e()])],2),s("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"a_click",attrs:{href:t.downloadUrl,target:"_blank",download:""}}),t.info?s("div",{staticClass:"content"},[t.info.settlement_status===t.status_draft?s("div",{staticClass:"tips"},[s("p",[t._v("该草稿保存于"+t._s(t.info.submit_time?t.getFormatDate(t.info.submit_time):""))])]):t._e(),s("div",{staticClass:"step"},[t._v("确认订单基本信息")]),t.readonly?s("div",{staticClass:"see_info"},[s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("订单号")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.ordernum))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("联系人")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.event_info.fullname))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("下单时间")]),s("div",{staticClass:"context"},[t._v(" "+t._s(t.info.orderdate?t.getFormatDate(t.info.orderdate):"")+" ")])])]),s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("联系方式")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.event_info.mobile))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("活动日期")]),s("div",{staticClass:"context"},[t._v(" "+t._s(t.info.event_info.event_startdate?t.getFormatDate(t.info.event_info.event_startdate).slice(0,10):"")+" 至 "+t._s(t.info.event_info.event_enddate?t.getFormatDate(t.info.event_info.event_enddate).slice(0,10):"")+" ")])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("实际参会人数")]),s("div",{staticClass:"context"},[t._v("外部人数"+t._s(t.info.external_number)+"人 内部人数"+t._s(t.info.internal_number)+"人 总人数"+t._s(t.positiveInteger(t.info.external_number)+t.positiveInteger(t.info.internal_number))+"人")])])]),s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("客户名称")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.event_info.company_name))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("旅行社陪同人员")]),s("div",{staticClass:"context hotel"},[t._v(t._s(t.info.travel_agency_escort)+"人")])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("活动名称")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.event_info.event_name))])])]),s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("PO单号")]),s("div",{staticClass:"context"},[t._v(" "+t._s(t.info.event_info.pocode)+" ")])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("报价日期")]),s("div",{staticClass:"context"},[t._v(" "+t._s(t.info.quotedpricedate?t.getFormatDate(t.info.quotedpricedate):"")+" ")])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("采购酒店")]),s("div",{staticClass:"context"},[t._v(" "+t._s(t.info.hotelname)+" "),s("el-checkbox",{staticStyle:{"line-height":"30px"},attrs:{disabled:"","true-label":1,"false-label":0},model:{value:t.info.isuser_preferred_hotel,callback:function(e){t.$set(t.info,"isuser_preferred_hotel",e)},expression:"info.isuser_preferred_hotel"}},[t._v("是否使用首选酒店")])],1)])])]):s("div",{staticClass:"info"},[s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("订单号")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.ordernum))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("联系人")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.event_info.fullname))])])]),s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("下单时间")]),s("div",{staticClass:"context"},[t._v(" "+t._s(t.info.orderdate?t.getFormatDate(t.info.orderdate):"")+" ")])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("联系方式")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.event_info.mobile))])])]),s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("活动日期")]),s("div",{staticClass:"context"},[t._v(" "+t._s(t.info.event_info.event_startdate?t.getFormatDate(t.info.event_info.event_startdate).slice(0,10):"")+" 至 "+t._s(t.info.event_info.event_enddate?t.getFormatDate(t.info.event_info.event_enddate).slice(0,10):"")+" ")])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("实际参会人数")]),s("div",{staticClass:"context"},[t._v(" 外部人数 "),s("el-input",{staticClass:"input_line",attrs:{readonly:t.readonly},on:{input:function(e){t.info.external_number=t.formatNum(t.info.external_number,1)}},model:{value:t.info.external_number,callback:function(e){t.$set(t.info,"external_number",e)},expression:"info.external_number"}}),t._v(" 人 内部人数 "),s("el-input",{staticClass:"input_line",attrs:{readonly:t.readonly},on:{input:function(e){t.info.internal_number=t.formatNum(t.info.internal_number,1)}},model:{value:t.info.internal_number,callback:function(e){t.$set(t.info,"internal_number",e)},expression:"info.internal_number"}}),t._v(" 人 总人数 "+t._s(t.positiveInteger(t.info.external_number)+t.positiveInteger(t.info.internal_number))+" 人 ")],1)])]),s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("客户名称")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.event_info.company_name))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("旅行社陪同人员")]),s("div",{staticClass:"context hotel"},[s("el-input",{staticClass:"input_line",staticStyle:{width:"160px"},attrs:{readonly:t.readonly},on:{input:function(e){t.info.travel_agency_escort=t.formatNum(t.info.travel_agency_escort,1)}},model:{value:t.info.travel_agency_escort,callback:function(e){t.$set(t.info,"travel_agency_escort",e)},expression:"info.travel_agency_escort"}}),t._v(" 人 ")],1)])]),s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("活动名称")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.event_info.event_name))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("PO单号")]),s("div",{staticClass:"context"},[s("el-input",{staticClass:"input_line",staticStyle:{width:"160px"},attrs:{disabled:!0},model:{value:t.info.event_info.pocode,callback:function(e){t.$set(t.info.event_info,"pocode",e)},expression:"info.event_info.pocode"}})],1)])]),s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("报价日期")]),s("div",{staticClass:"context"},[t._v(" "+t._s(t.info.quotedpricedate?t.getFormatDate(t.info.quotedpricedate):"")+" ")])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("采购酒店")]),s("div",{staticClass:"context"},[s("el-input",{staticClass:"input_line",staticStyle:{width:"160px"},attrs:{readonly:t.readonly},model:{value:t.info.hotelname,callback:function(e){t.$set(t.info,"hotelname",e)},expression:"info.hotelname"}}),s("el-checkbox",{staticStyle:{"line-height":"30px","margin-left":"10px"},attrs:{"true-label":1,"false-label":0},model:{value:t.info.isuser_preferred_hotel,callback:function(e){t.$set(t.info,"isuser_preferred_hotel",e)},expression:"info.isuser_preferred_hotel"}},[t._v("是否使用首选酒店")])],1)])])]),s("div",{staticClass:"step step_upflod"},[t._v(" 上传结算相关凭证"),"0029-2"!==t.info.settlement_status&&"0029-3"!==t.info.settlement_status?s("span",[t._v("（必填）")]):t._e(),s("div",{staticClass:"showBase_tap",on:{click:function(e){t.showInfo=!t.showInfo}}},[s("span",[t._v(t._s(t.showInfo?"收起":"展开"))]),s("span",{class:t.showInfo?"el-icon-arrow-down":"el-icon-arrow-up"})])]),s("table",{directives:[{name:"show",rawName:"v-show",value:t.showInfo&&!["0020-2","0020-3","0020-5","0020-6"].includes(t.info.orderstatus),expression:"showInfo && !['0020-2', '0020-3', '0020-5', '0020-6'].includes(info.orderstatus)"}],staticClass:"step_table"},[t._m(0),t._l(t.arrayList,(function(e,i){return s("tbody",{key:i},[s("tr",[s("td",{staticClass:"t666"},[t._v(t._s(e.name))]),s("td",{staticClass:"pad_10"},[s("el-upload",{ref:"upload",refInFor:!0,attrs:{action:"","on-change":function(i,s){t.handleChangeAttach(i,s,t.type=e.type)},"on-remove":function(i,s){t.handleRemoveAttach(i,s,t.type=e.type)},"on-preview":t.handlePreview,"auto-upload":!1,"file-list":e.fileList,"show-file-list":!1,multiple:!1}},["0029-2"!==t.info.settlement_status&&"0029-3"!==t.info.settlement_status?s("el-button",{staticClass:"text_button",attrs:{slot:"trigger",size:"small",type:"text"},slot:"trigger"},[t._v("从电脑选择文件")]):t._e(),s("ul",{staticStyle:{"margin-top":"5px"}},t._l(e.fileList,(function(o,n){return s("li",{key:n,staticClass:"pitchOn",on:{click:function(e){return t.handlePreview(o)}}},[s("p",{staticClass:"t333 file_name"},[s("span",[t._v(t._s(o.name))]),"0029-2"!==t.info.settlement_status&&"0029-3"!==t.info.settlement_status?s("span",{staticStyle:{color:"#1890ff",cursor:"pointer","margin-left":"15px"},on:{click:function(e){return e.stopPropagation(),t.fileRename(o,i,n)}}},[t._v("重命名")]):t._e(),"0029-2"!==t.info.settlement_status&&"0029-3"!==t.info.settlement_status?s("span",{staticStyle:{color:"#1890ff",cursor:"pointer","margin-left":"15px"},on:{click:function(s){return s.stopPropagation(),t.deleteFile(o,i,n,e.arrayLength)}}},[t._v("删除")]):t._e()]),o.create_date?s("p",{staticClass:"t666 file_name"},[t._v("于"+t._s(t.getFormatDate(o.create_date))+"上传")]):t._e(),o.create_date?t._e():s("p",{staticClass:"t666 file_name"},[t._v("于"+t._s(t._f("date_ex_day")(o.date))+"上传")]),e.arrayLength==n&&t.isFail?s("span",{staticStyle:{color:"red","margin-left":"15px"}},[t._v("上传失败")]):t._e()])})),0)],1),s("el-dialog",{attrs:{"close-on-click-modal":!1,visible:t.rename,title:"请输入附件名称",width:"500px"},on:{"update:visible":function(e){t.rename=e}}},[s("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.fileName,callback:function(e){t.fileName=e},expression:"fileName"}},[s("template",{slot:"append"},[t._v(" "+t._s(t.suffix)+" ")])],2),s("span",{staticClass:"dialog-footer flex_row justify_center mar_t20",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.saveFileName()}}},[t._v("保存")])],1)],1)],1),s("td",[s("span",{staticClass:"t666"},[t._v(t._s(e.dissent))])]),s("td",["0029-2"!==t.info.settlement_status&&"0029-3"!==t.info.settlement_status?s("el-input",{model:{value:e.remark,callback:function(i){t.$set(e,"remark",i)},expression:"item.remark"}}):s("span",{staticClass:"t666"},[t._v(t._s(e.remark))])],1)])])}))],2),s("table",{directives:[{name:"show",rawName:"v-show",value:t.showInfo&&["0020-2","0020-3","0020-5","0020-6"].includes(t.info.orderstatus),expression:"showInfo && ['0020-2', '0020-3', '0020-5', '0020-6'].includes(info.orderstatus)"}],staticClass:"step_table"},[t._m(1),t._l(t.arrayList,(function(e,i){return s("tbody",{key:i},[""!==e.dissent||""!==e.remark||0!==e.fileList.length?s("tr",[s("td",{staticClass:"t666"},[t._v(t._s(e.name))]),s("td",{staticClass:"pad_10"},[s("el-upload",{ref:"upload",refInFor:!0,attrs:{action:"","on-change":function(i,s){t.handleChangeAttach(i,s,t.type=e.type)},"on-remove":function(i,s){t.handleRemoveAttach(i,s,t.type=e.type)},"on-preview":t.handlePreview,"auto-upload":!1,"file-list":e.fileList,"show-file-list":!1,multiple:!1}},["0029-2"!==t.info.settlement_status&&"0029-3"!==t.info.settlement_status?s("el-button",{staticClass:"text_button",attrs:{slot:"trigger",size:"small",type:"text"},slot:"trigger"},[t._v("从电脑选择文件")]):t._e(),s("ul",{staticStyle:{"margin-top":"5px"}},t._l(e.fileList,(function(o,n){return s("li",{key:n,staticClass:"pitchOn",on:{click:function(e){return t.handlePreview(o)}}},[s("p",{staticClass:"t333 file_name"},[s("span",[t._v(t._s(o.name))]),"0029-2"!==t.info.settlement_status&&"0029-3"!==t.info.settlement_status?s("span",{staticStyle:{color:"#1890ff",cursor:"pointer","margin-left":"15px"},on:{click:function(e){return e.stopPropagation(),t.fileRename(o,i,n)}}},[t._v("重命名")]):t._e(),"0029-2"!==t.info.settlement_status&&"0029-3"!==t.info.settlement_status?s("span",{staticStyle:{color:"#1890ff",cursor:"pointer","margin-left":"15px"},on:{click:function(s){return s.stopPropagation(),t.deleteFile(o,i,n,e.arrayLength)}}},[t._v("删除")]):t._e()]),o.create_date?s("p",{staticClass:"t666 file_name"},[t._v("于"+t._s(t.getFormatDate(o.create_date))+"上传")]):t._e(),e.arrayLength==n&&t.isFail?s("span",{staticStyle:{color:"red","margin-left":"15px"}},[t._v("上传失败")]):t._e()])})),0)],1),s("el-dialog",{attrs:{"close-on-click-modal":!1,visible:t.rename,title:"请输入附件名称",width:"500px"},on:{"update:visible":function(e){t.rename=e}}},[s("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.fileName,callback:function(e){t.fileName=e},expression:"fileName"}},[s("template",{slot:"append"},[t._v(" "+t._s(t.suffix)+" ")])],2),s("span",{staticClass:"dialog-footer flex_row justify_center mar_t20",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.saveFileName()}}},[t._v("保存")])],1)],1)],1),s("td",[t.readonly?s("span",{staticClass:"t666"},[t._v(t._s(e.dissent))]):t._e()]),s("td",["0029-2"!==t.info.settlement_status&&"0029-3"!==t.info.settlement_status?s("el-input",{model:{value:e.remark,callback:function(i){t.$set(e,"remark",i)},expression:"item.remark"}}):s("span",{staticClass:"t666"},[t._v(t._s(e.remark))])],1)]):t._e()])}))],2),s("div",{staticClass:"step step_upflod"},[t._v(" 填写结算明细"),"0029-2"!==t.info.settlement_status&&"0029-3"!==t.info.settlement_status?s("span",[t._v("（必填）")]):t._e(),s("div",{staticClass:"showBase_tap",on:{click:function(e){t.showPriceInfo=!t.showPriceInfo}}},[s("span",[t._v(t._s(t.showPriceInfo?"收起":"展开"))]),s("span",{class:t.showPriceInfo?"el-icon-arrow-down":"el-icon-arrow-up"})])]),s("table",{directives:[{name:"show",rawName:"v-show",value:t.showPriceInfo,expression:"showPriceInfo"}],staticClass:"price_table"},[s("thead",[s("tr",{staticClass:"color_2 all_price"},[t._m(2),s("th",{staticClass:"color_3",staticStyle:{"border-left":"none",padding:"10px"},attrs:{colspan:"3",width:"30%"}},[s("div",{staticClass:"price_box"},[t._m(3),s("ol",[s("li",[s("span",{staticClass:"font_orange"},[t._v("¥"+t._s(t.positiveFloat(t.price[0]).toFixed(2)))])]),s("li",[s("span",{staticClass:"font_orange"},[t._v("¥"+t._s(t.positiveFloat(t.positiveFloat(t.servicePrice[0])+(0===t.info.zhicai_service?t.positiveFloat(t.servicePrice[4]):t.positiveFloat(t.servicePrice[8]))+t.positiveFloat(t.price_no[0])).toFixed(2)))])]),s("li",[s("span",{staticClass:"font_orange"},[t._v("¥"+t._s(t.positiveFloat(t.price_no[0]).toFixed(2)))])])])])]),s("th",{staticClass:"color_4",staticStyle:{position:"relative","border-right":"none",padding:"10px"},attrs:{colspan:"4",width:"37%"}},[s("div",{staticClass:"price_box"},[t._m(4),s("ol",[s("li",[s("span",{staticClass:"font_orange"},[t._v("¥"+t._s(t.positiveFloat(t.price[1]).toFixed(2)))])]),s("li",[s("span",{staticClass:"font_orange"},[t._v("¥"+t._s(t.positiveFloat(t.positiveFloat(t.servicePrice[1])+(0===t.info.zhicai_service?t.positiveFloat(t.servicePrice[5]):t.positiveFloat(t.servicePrice[9]))+t.positiveFloat(t.price_no[1])).toFixed(2)))])]),s("li",[s("span",{staticClass:"font_orange"},[t._v("¥"+t._s(t.positiveFloat(t.price_no[1]).toFixed(2)))])])])])]),s("th",{staticClass:"color_4",staticStyle:{"border-left":"none"},attrs:{width:"13.2%"}},[t.readonly?t._e():s("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.openAddSettle}},[s("span",{staticClass:"el-icon-folder-add icon"}),t._v("添加结算项目 ")])],1)])]),t.roomVisible?s("tbody",[s("tr",{staticClass:"color_2 t333"},[t._m(5),s("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.roomPrice[0].all).toFixed(2)))]),s("th",{staticClass:"color_4",staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.roomPrice[1].all).toFixed(2)))]),s("th",{staticClass:"color_4"})])]):t._e(),t._l(t.info.roomlist,(function(e,i){return s("thead",{key:"kefang"+i},[s("tr",{staticClass:"color_2 t333"},[s("th",{staticClass:"color_3",staticStyle:{"border-right":"none"}},[s("b",[t._v(t._s(t._f("date_day")(e.date)))])]),s("th",{staticClass:"color_3",staticStyle:{"text-align":"right","border-left":"none"},attrs:{colspan:"3"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.roomPrice[0].subtotal["sub_"+i]).toFixed(2)))]),s("th",{staticClass:"color_4",staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.roomPrice[1].subtotal["sub_"+i]).toFixed(2)))]),s("th",{staticClass:"color_4"},[t.issubmit?s("el-button",{staticClass:"add_new",attrs:{type:"text",size:"mini"},on:{click:function(i){return t.addroom(e)}}},[s("span",{staticClass:"el-icon-circle-plus-outline"}),t._v("添加客房")]):t._e()],1)]),s("tr",[s("td",{staticClass:"tip_table",attrs:{colspan:"9"}},[s("table",[s("thead",[s("tr",{staticClass:"color_2 price_tab"},[s("th",{staticClass:"color_3 t666",attrs:{width:"10%"}},[t._v("消费项目")]),s("th",{staticClass:"color_3 t666",attrs:{width:"10%"}},[t._v("单价(元)")]),s("th",{staticClass:"color_3 t666",attrs:{width:"8%"}},[t._v("数量")]),s("th",{staticClass:"color_3 t666",attrs:{width:"11.85%"}},[t._v("金额(元)")]),s("th",{staticClass:"color_4 t666",attrs:{width:"8%"}},[t._v("单价(元)")]),"0"==t.info.is_Inside_outside?s("th",{staticClass:"color_4 t666",attrs:{width:"8%"}},[t._v("数量")]):t._e(),"1"==t.info.is_Inside_outside?s("th",{staticClass:"color_4 t666",attrs:{width:"8%"}},[t._v("内部间数 外部间数")]):t._e(),s("th",{staticClass:"color_4 t666",attrs:{width:"10%"}},[t._v("金额(元)")]),s("th",{staticClass:"color_4 t666",attrs:{width:"11%"}},[t._v("客户异议")]),s("th",{staticClass:"color_4 t666",attrs:{width:"13.15%"}},[t._v("结算说明")])])]),s("tbody",t._l(e.roomlists,(function(i,o){return s("tr",{key:"room"+o,class:{difference:i.difference}},[s("td",{staticClass:"color_2",style:{padding:i.quoted_price_room_id?"10px":"0 3px"}},[i.quoted_price_room_id?[t._v(" "+t._s(i.roomtypename)+" ")]:[t.readonly?s("p",{staticClass:"pad_lr10"},t._l(t.roomcostProjects,(function(e){return s("span",{directives:[{name:"show",rawName:"v-show",value:e.value==i.settlement_itemid,expression:"item.value == room.settlement_itemid"}],key:e.value},[t._v(t._s(e.label))])})),0):s("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(e){return t.changekefang(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"room.settlement_itemid"}},t._l(t.roomcostProjects,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_room_id&&(i.otherrequirements||i.remarks)?s("el-tooltip",{attrs:{effect:"light",placement:"top-end"}},[s("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.otherrequirements?s("div",[t._v("需求说明："+t._s(i.otherrequirements))]):t._e(),i.remarks?s("div",[t._v("报价备注："+t._s(i.remarks))]):t._e()]),s("el-button",{staticClass:"remarks",attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),s("td",{staticClass:"color_2 text_right"},[t._v("¥ "+t._s(t.positiveFloat(i.unitprice).toFixed(2)))]),s("td",{staticClass:"color_2 text_right",style:{padding:"0"==t.info.is_Inside_outside?"0 10px":"0 3px"}},["0"==t.info.is_Inside_outside?s("p",[t._v(" "+t._s(i.provide_count||"0")+" ")]):t._e(),"1"==t.info.is_Inside_outside?s("div",[s("p",[t._v("内部人员："+t._s(i.inside_roomcount))]),s("p",[t._v("外部人员："+t._s(i.outside_roomcount))])]):t._e()]),s("td",{staticClass:"color_2 text_right"},[t._v("¥ "+t._s(t.positiveFloat(i.quotationsumprice).toFixed(2)))]),s("td",{staticStyle:{padding:"0 3px"}},[t.readonly||i.lineoroffline?s("p",{staticClass:"text_right pad_r10"},[t._v("¥ "+t._s(i.settlement_unitprice))]):s("el-input",{class:{lineBack:!!i.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_unitprice=t.formatNum(i.settlement_unitprice,2)}},model:{value:i.settlement_unitprice,callback:function(e){t.$set(i,"settlement_unitprice",e)},expression:"room.settlement_unitprice"}})],1),s("td",{staticStyle:{padding:"0 3px"}},[t.readonly||i.lineoroffline?s("p",{staticClass:"text_right pad_r10"},[t._v(t._s(i.settlement_count))]):s("div",["0"==t.info.is_Inside_outside?s("el-input",{class:{lineBack:!!i.lineoroffline},staticStyle:{width:"100%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,3)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"room.settlement_count"}}):t._e(),"1"==t.info.is_Inside_outside?s("div",{staticStyle:{display:"flex"}},[s("el-input",{class:{lineBack:!!i.lineoroffline},staticStyle:{width:"100%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_inside_roomcount=t.formatNum(i.settlement_inside_roomcount,3),i.settlement_count=t.positiveFloat(i.settlement_inside_roomcount)+t.positiveFloat(i.settlement_outside_roomcount)}},model:{value:i.settlement_inside_roomcount,callback:function(e){t.$set(i,"settlement_inside_roomcount",e)},expression:"room.settlement_inside_roomcount"}}),s("el-input",{class:{lineBack:!!i.lineoroffline},staticStyle:{width:"100%","margin-left":"10px"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_outside_roomcount=t.formatNum(i.settlement_outside_roomcount,3),i.settlement_count=t.positiveFloat(i.settlement_inside_roomcount)+t.positiveFloat(i.settlement_outside_roomcount)}},model:{value:i.settlement_outside_roomcount,callback:function(e){t.$set(i,"settlement_outside_roomcount",e)},expression:"room.settlement_outside_roomcount"}})],1):t._e()],1)]),i.lineoroffline?t._e():s("td",{staticClass:"text_right"},[t._v("¥ "+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_unitprice)*t.positiveFloat(i.settlement_count)).toFixed(2)))]),s("td",[t._v(t._s(i.settlement_customer_objection))]),s("td",{staticClass:"delete_button_info input_td"},[t.readonly||i.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(i.settlement_comments))]):s("el-input",{class:{difference:t.roomDifference(i),line:!i.quoted_price_room_id,lineBack:!!i.lineoroffline},style:{width:!i.quoted_price_room_id&&t.issubmit?"calc(80% - 3px)":"100%"},attrs:{readonly:t.readonly||!!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"room.settlement_comments"}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"点击删除",placement:"top"}},[!i.quoted_price_room_id&&t.issubmit?s("el-button",{staticClass:"delete_button",attrs:{icon:"el-icon-delete",type:"danger",disabled:t.readonly||!!i.lineoroffline,circle:"",size:"mini"},on:{click:function(i){return t.delroom(e,o)}}}):t._e()],1)],1)])})),0)])])])])})),t.roomVisible?s("tbody",[s("tr",{staticClass:"color_2"},[s("th",{staticClass:"color_3 t333"},[t._v("杂费小计")]),s("th",{staticClass:"color_3",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_3",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_3",staticStyle:{"border-left":"none"}}),s("th",{staticClass:"color_4",staticStyle:{"border-right":"none"}}),s("th",{staticClass:"color_4",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_4 t333 text_right",staticStyle:{"border-left":"none"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.roomPrice[2]).toFixed(2)))]),s("th",{staticClass:"color_4 t666",staticStyle:{"font-weight":"500"}},[t._v("客户异议")]),s("th",{staticClass:"color_4"},[t.issubmit?s("el-button",{staticClass:"add_new",attrs:{type:"text",size:"mini"},on:{click:function(e){return t.addOther(1)}}},[s("span",{staticClass:"el-icon-circle-plus-outline"}),t._v("添加杂费")]):t._e()],1)]),t._l(t.roomincidental,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"color_2",staticStyle:{padding:"0 3px"}},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(e.content))]):s("el-input",{attrs:{readonly:t.readonly||!!e.lineoroffline,placeholder:"杂费项名称"},model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"roomzf.content"}})],1),s("td",{staticClass:"color_2",staticStyle:{"border-right":"none"}},[s("el-checkbox",{attrs:{disabled:t.readonly||!!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"roomzf.isnotservice"}},[t._v("计入服务费")])],1),s("td",{staticClass:"color_2",staticStyle:{border:"none"}}),s("td",{staticClass:"color_2",staticStyle:{border:"none"}}),s("td",{staticStyle:{padding:"0 3px"}},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v("¥ "+t._s(e.price))]):s("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"roomzf.price"}})],1),s("td",{staticStyle:{padding:"0 3px"}},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v(t._s(e.count))]):s("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"roomzf.count"}})],1),e.lineoroffline?t._e():s("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count)).toFixed(2)))]),s("td",[t._v(t._s(e.settlement_customer_objection))]),s("td",{staticClass:"delete_button_info",style:{padding:t.issubmit?"0 3px":"0 10px"}},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(e.comments))]):s("el-input",{staticClass:"line",class:{lineBack:!!e.lineoroffline},style:{width:t.issubmit?"calc(80% - 3px)":"100%"},attrs:{readonly:t.readonly||!!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"roomzf.comments"}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"点击删除",placement:"top"}},[t.issubmit?s("el-button",{staticClass:"delete_button",attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)],1)])}))],2):t._e(),t.conferenceVisible?s("tbody",[s("tr",{staticClass:"color_2 t333"},[t._m(6),s("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.conferencePrice[0].all).toFixed(2)))]),s("th",{staticClass:"color_4",staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.conferencePrice[1].all).toFixed(2)))]),s("th",{staticClass:"color_4"})])]):t._e(),t._l(t.info.conferencelist,(function(e,i){return s("tbody",{key:"huiyi"+i},[s("tr",{staticClass:"color_2 t333"},[s("th",{staticClass:"color_3 t333",staticStyle:{"border-right":"none"}},[s("b",[t._v(t._s(t._f("date_day")(e.date)))])]),s("th",{staticClass:"color_3",staticStyle:{"text-align":"right","border-left":"none"},attrs:{colspan:"3"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.conferencePrice[0].subtotal["sub_"+i]).toFixed(2)))]),s("th",{staticClass:"color_4",staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.conferencePrice[1].subtotal["sub_"+i]).toFixed(2)))]),s("th",{staticClass:"color_4"},[t.issubmit?s("el-button",{staticClass:"add_new",attrs:{type:"text",size:"mini"},on:{click:function(i){return t.addconference(e)}}},[s("span",{staticClass:"el-icon-circle-plus-outline"}),t._v("添加会场")]):t._e()],1)]),s("tr",[s("td",{staticClass:"tip_table",attrs:{colspan:"9"}},[s("table",[t._m(7,!0),s("tbody",t._l(e.conferencelists,(function(i,o){return s("tr",{key:"conference"+o},[s("td",{staticClass:"color_2",style:{padding:i.type?"10px":"0 3px"}},[i.quoted_price_conference_id?[1==i.type?[t._v(" "+t._s("场租-会场"+i.order_name+"("+i.roomsetuptypename+";会议时间:"+i.starttime+"~"+i.endtime+";出席人数:"+i.attendees+"人)")+" ")]:t._e(),2==i.type?[t._v(" "+t._s("会场搭建费-"+i.related_information+" ("+i.roomsetuptypename+")")+" ")]:t._e(),3==i.type?[t._v(" "+t._s("设备-会场"+i.order_name+"("+i.roomsetuptypename+";"+i.equipment+")")+" ")]:t._e(),4==i.type?[t._v(" "+t._s(i.settlement_itemname)+" ")]:t._e()]:[t.readonly?s("p",{staticClass:"pad_lr10"},t._l(t.meetingcostProjects,(function(e){return s("span",{directives:[{name:"show",rawName:"v-show",value:e.value==i.settlement_itemid,expression:"item.value == conference.settlement_itemid"}],key:e.value},[t._v(t._s(e.label))])})),0):s("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(e){return t.changehuichang(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"conference.settlement_itemid"}},t._l(t.meetingcostProjects,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_conference_id&&(i.describe||i.comments)?s("el-tooltip",{attrs:{effect:"light",placement:"top-end"}},[s("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.describe?s("div",[t._v("需求说明："+t._s(i.describe))]):t._e(),i.comments?s("div",[t._v("报价备注："+t._s(i.comments))]):t._e()]),s("el-button",{staticClass:"remarks",attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),s("td",{staticClass:"color_2 text_right"},[t._v("¥ "+t._s(t.positiveFloat(i.price).toFixed(2)))]),s("td",{staticClass:"color_2 text_right"},[t._v(t._s(i.count))]),s("td",{staticClass:"color_2 text_right"},[t._v("¥ "+t._s(t.positiveFloat(i.quotationsumprice?i.quotationsumprice:0).toFixed(2)))]),s("td",{staticStyle:{padding:"0 3px"}},[t.readonly||i.lineoroffline?s("p",{staticClass:"text_right pad_r10"},[t._v("¥ "+t._s(i.settlement_price))]):s("el-input",{class:{lineBack:!!i.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_price=t.formatNum(i.settlement_price,2)}},model:{value:i.settlement_price,callback:function(e){t.$set(i,"settlement_price",e)},expression:"conference.settlement_price"}})],1),s("td",{staticStyle:{padding:"0 3px"}},[t.readonly||i.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v(t._s(i.settlement_count))]):s("el-input",{class:{lineBack:!!i.lineoroffline},staticStyle:{width:"100%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,2)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"conference.settlement_count"}})],1),i.lineoroffline?t._e():s("td",{staticClass:"text_right"},[t._v("¥ "+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_price)*t.positiveFloat(i.settlement_count)).toFixed(2)))]),s("td",[t._v(t._s(i.settlement_customer_objection))]),s("td",{staticClass:"delete_button_info input_td"},[t.readonly||i.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(i.settlement_comments))]):s("div",[s("el-input",{class:{difference:t.conferenceDifference(i),line:!i.quoted_price_conference_id,lineBack:!!i.lineoroffline},style:{width:!i.quoted_price_conference_id&&t.issubmit?"calc(80% - 3px)":"100%"},attrs:{readonly:t.readonly||!!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"conference.settlement_comments"}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"点击删除",placement:"top"}},[!i.quoted_price_conference_id&&t.issubmit?s("el-button",{staticClass:"delete_button",attrs:{icon:"el-icon-delete",type:"danger",size:"mini",disabled:t.readonly||!!i.lineoroffline},on:{click:function(i){return t.delconference(e,o)}}}):t._e()],1)],1)])])})),0)])])])])})),t.conferenceVisible?s("tbody",[s("tr",{staticClass:"color_2"},[s("th",{staticClass:"color_3 t333"},[t._v("杂费小计")]),s("th",{staticClass:"color_3",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_3",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_3",staticStyle:{"border-left":"none"}}),s("th",{staticClass:"color_4",staticStyle:{"border-right":"none"}}),s("th",{staticClass:"color_4",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_4 t333 text_right",staticStyle:{"border-left":"none"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.conferencePrice[2]).toFixed(2)))]),s("th",{staticClass:"color_4 t666",staticStyle:{"font-weight":"500"}},[t._v("客户异议")]),s("th",{staticClass:"color_4"},[t.issubmit?s("el-button",{staticClass:"add_new",attrs:{type:"text",size:"mini"},on:{click:function(e){return t.addOther(2)}}},[s("span",{staticClass:"el-icon-circle-plus-outline"}),t._v("添加杂费")]):t._e()],1)]),t._l(t.meetingcidental,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"color_2",staticStyle:{padding:"0 3px"}},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(e.content))]):s("el-input",{attrs:{readonly:t.readonly||!!e.lineoroffline,placeholder:"杂费项名称"},model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"conferencezf.content"}})],1),s("td",{staticClass:"color_2",staticStyle:{"border-right":"none"}},[s("el-checkbox",{attrs:{disabled:t.readonly||!!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"conferencezf.isnotservice"}},[t._v(" 计入服务费 ")])],1),s("td",{staticClass:"color_2",staticStyle:{border:"none"}}),s("td",{staticClass:"color_2",staticStyle:{border:"none"}}),s("td",{staticStyle:{padding:"0 3px"}},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v("¥ "+t._s(e.price))]):s("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"conferencezf.price"}})],1),s("td",{staticStyle:{padding:"0 3px"}},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v(t._s(e.count))]):s("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"conferencezf.count"}})],1),e.lineoroffline?t._e():s("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count)).toFixed(2)))]),s("td",[t._v(t._s(e.settlement_customer_objection))]),s("td",{staticClass:"delete_button_info",style:{padding:t.issubmit?"0 3px":"0 10px"}},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(e.comments))]):s("el-input",{staticClass:"line",class:{lineBack:!!e.lineoroffline},style:{width:t.issubmit?"calc(80% - 3px)":"100%"},attrs:{readonly:t.readonly||!!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"conferencezf.comments"}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"点击删除",placement:"top"}},[t.issubmit?s("el-button",{staticClass:"delete_button",attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)],1)])}))],2):t._e(),t.foodVisible?s("tbody",[s("tr",{staticClass:"color_2 t333"},[t._m(8),s("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.foodPrice[0].all).toFixed(2)))]),s("th",{staticClass:"color_4",staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.foodPrice[1].all).toFixed(2)))]),s("th",{staticClass:"color_4"})])]):t._e(),t._l(t.info.foodlist,(function(e,i){return s("tbody",{key:"hotelcanyininside"+i},[s("tr",{staticClass:"color_2 t333"},[s("th",{staticClass:"color_3",staticStyle:{"border-right":"none"}},[s("b",[t._v(t._s(t._f("date_day")(e.date)))])]),s("th",{staticClass:"color_3",staticStyle:{"text-align":"right","border-left":"none"},attrs:{colspan:"3"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.foodPrice[0].subtotal["sub_"+i]).toFixed(2)))]),s("th",{staticClass:"color_4",staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.foodPrice[1].subtotal["sub_"+i]).toFixed(2)))]),s("th",{staticClass:"color_4"},[t.issubmit?s("el-button",{staticClass:"add_new",attrs:{type:"text",size:"mini"},on:{click:function(i){return t.addfood(e)}}},[s("span",{staticClass:"el-icon-circle-plus-outline"}),t._v("添加餐饮")]):t._e()],1)]),s("tr",[s("td",{staticClass:"tip_table",attrs:{colspan:"9"}},[s("table",[t._m(9,!0),s("tbody",t._l(e.foodlists,(function(i,o){return s("tr",{key:"food"+o},[s("td",{staticClass:"color_2",style:{padding:i.quoted_price_food_id?"10px":"0 3px"}},[i.quoted_price_food_id?[t._v(" "+t._s(i.foodtypename)+" "),i.usetypename?s("span",[t._v("["+t._s(i.usetypename)+"]")]):t._e()]:[t.readonly?s("p",{staticClass:"pad_lr10"},t._l(t.foodcostProjects,(function(e){return s("span",{directives:[{name:"show",rawName:"v-show",value:e.value==i.settlement_itemid,expression:"item.value == food.settlement_itemid"}],key:e.value},[t._v(t._s(e.label))])})),0):s("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(e){return t.changehotelnei(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"food.settlement_itemid"}},t._l(t.foodcostProjects,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_food_id&&(i.comments||i.offer_remarks)?s("el-tooltip",{attrs:{effect:"light",placement:"top-end"}},[s("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.comments?s("div",[t._v("需求说明："+t._s(i.comments))]):t._e(),i.offer_remarks?s("div",[t._v("报价备注："+t._s(i.offer_remarks))]):t._e()]),s("el-button",{staticClass:"remarks",attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),s("td",{staticClass:"color_2 text_right"},[t._v("¥ "+t._s(t.positiveFloat(i.price).toFixed(2)))]),s("td",{staticClass:"color_2 text_right"},[t._v(t._s(i.personcount))]),s("td",{staticClass:"color_2 text_right"},[t._v("¥ "+t._s(t.positiveFloat(i.quotationsumprice).toFixed(2)))]),s("td",{staticClass:"input_td"},[t.readonly||i.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v("¥ "+t._s(i.settlement_unitprice))]):s("el-input",{class:{lineBack:!!i.lineoroffline},attrs:{readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_unitprice=t.formatNum(i.settlement_unitprice,2)}},model:{value:i.settlement_unitprice,callback:function(e){t.$set(i,"settlement_unitprice",e)},expression:"food.settlement_unitprice"}})],1),s("td",{staticClass:"input_td"},[t.readonly||i.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v(t._s(i.settlement_count))]):s("el-input",{class:{lineBack:!!i.lineoroffline},staticStyle:{width:"100%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,2)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"food.settlement_count"}})],1),i.lineoroffline?t._e():s("td",{staticClass:"text_right"},[t._v("¥ "+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_unitprice)*t.positiveFloat(i.settlement_count)).toFixed(2)))]),s("td",[t._v(t._s(i.settlement_customer_objection))]),s("td",{staticClass:"delete_button_info input_td"},[t.readonly||i.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(i.settlement_comments))]):s("div",[s("el-input",{class:{difference:t.foodDifference(i),line:!i.quoted_price_food_id,lineBack:!!i.lineoroffline},style:{width:!i.quoted_price_food_id&&t.issubmit?"calc(80% - 3px)":"100%"},attrs:{readonly:t.readonly||!!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"food.settlement_comments"}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"点击删除",placement:"top"}},[!i.quoted_price_food_id&&t.issubmit?s("el-button",{staticClass:"delete_button",attrs:{icon:"el-icon-delete",type:"danger",disabled:t.readonly||!!i.lineoroffline,circle:"",size:"mini"},on:{click:function(i){return t.delfood(e,o)}}}):t._e()],1)],1)])])})),0)])])])])})),t.foodVisible?s("tbody",[s("tr",{staticClass:"color_2"},[s("th",{staticClass:"color_3 t333"},[t._v("杂费小计")]),s("th",{staticClass:"color_3",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_3",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_3",staticStyle:{"border-left":"none"}}),s("th",{staticClass:"color_4",staticStyle:{"border-right":"none"}}),s("th",{staticClass:"color_4",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_4 t333 text_right",staticStyle:{"border-left":"none"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.foodPrice[2]).toFixed(2)))]),s("th",{staticClass:"color_4 t666",staticStyle:{"font-weight":"500"}},[t._v("客户异议")]),s("th",{staticClass:"color_4"},[t.issubmit?s("el-button",{staticClass:"add_new",attrs:{type:"text",size:"mini"},on:{click:function(e){return t.addOther(3)}}},[s("span",{staticClass:"el-icon-circle-plus-outline"}),t._v("添加杂费")]):t._e()],1)]),t._l(t.foodincidental,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"color_2 input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(e.content))]):s("el-input",{attrs:{readonly:t.readonly||!!e.lineoroffline,placeholder:"杂费项名称"},model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"foodzf.content"}})],1),s("td",{staticClass:"color_2",staticStyle:{"border-right":"none"}},[s("el-checkbox",{attrs:{disabled:t.readonly||!!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"foodzf.isnotservice"}},[t._v("计入服务费")])],1),s("td",{staticClass:"color_2",staticStyle:{border:"none"}}),s("td",{staticClass:"color_2",staticStyle:{border:"none"}}),s("td",{staticClass:"input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v("¥ "+t._s(e.price))]):s("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"foodzf.price"}})],1),s("td",{staticClass:"input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v(t._s(e.count))]):s("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"foodzf.count"}})],1),e.lineoroffline?t._e():s("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count)).toFixed(2)))]),s("td",[t._v(t._s(e.settlement_customer_objection))]),s("td",{staticClass:"delete_button_info input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(e.comments))]):s("el-input",{staticClass:"line",class:{lineBack:!!e.lineoroffline},style:{width:t.issubmit?"calc(80% - 3px)":"100%"},attrs:{readonly:t.readonly||!!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"foodzf.comments"}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"点击删除",placement:"top"}},[t.issubmit?s("el-button",{staticClass:"delete_button",attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)],1)])}))],2):t._e(),t.otherfoodVisible?s("tbody",[s("tr",{staticClass:"color_2 t333"},[t._m(10),s("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.otherfoodPrice[0].all).toFixed(2)))]),s("th",{staticClass:"color_4",staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.otherfoodPrice[1].all).toFixed(2)))]),s("th",{staticClass:"color_4"})])]):t._e(),t._l(t.info.otherfoodlist,(function(e,i){return s("tbody",{key:"otherhotelcanyininside"+i},[s("tr",{staticClass:"color_2 t333"},[s("th",{staticClass:"color_3",staticStyle:{"border-right":"none"}},[s("b",[t._v(t._s(t._f("date_day")(e.date)))])]),s("th",{staticClass:"color_3",staticStyle:{"text-align":"right","border-left":"none"},attrs:{colspan:"3"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.otherfoodPrice[0].subtotal["sub_"+i]).toFixed(2)))]),s("th",{staticClass:"color_4",staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.otherfoodPrice[1].subtotal["sub_"+i]).toFixed(2)))]),s("th",{staticClass:"color_4"},[t.issubmit?s("el-button",{staticClass:"add_new",attrs:{type:"text",size:"mini"},on:{click:function(i){return t.addotherfood(e)}}},[s("span",{staticClass:"el-icon-circle-plus-outline"}),t._v("添加餐饮")]):t._e()],1)]),s("tr",[s("td",{staticClass:"tip_table",attrs:{colspan:"9"}},[s("table",[t._m(11,!0),s("tbody",t._l(e.foodlists,(function(i,o){return s("tr",{key:"food"+o},[s("td",{staticClass:"color_2",style:{padding:i.quoted_price_food_id?"10px":"0 3px"}},[i.quoted_price_food_id?[t._v(" "+t._s(i.foodtypename)+" "),i.usetypename?s("span",[t._v("["+t._s(i.usetypename)+"]")]):t._e()]:[t.readonly?s("p",{staticClass:"pad_lr10"},t._l(t.foodcostProjects,(function(e){return s("span",{directives:[{name:"show",rawName:"v-show",value:e.value==i.settlement_itemid,expression:"item.value == food.settlement_itemid"}],key:e.value},[t._v(t._s(e.label))])})),0):t._e(),s("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(e){return t.changehotelwai(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"food.settlement_itemid"}},t._l(t.otherfoodcostProjects,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_food_id&&(i.comments||i.offer_remarks)?s("el-tooltip",{attrs:{effect:"light",placement:"top-end"}},[s("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.comments?s("div",[t._v("需求说明："+t._s(i.comments))]):t._e(),i.offer_remarks?s("div",[t._v("报价备注："+t._s(i.offer_remarks))]):t._e()]),s("el-button",{staticClass:"remarks",attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),s("td",{staticClass:"color_2 text_right"},[t._v("¥ "+t._s(t.positiveFloat(i.price).toFixed(2)))]),s("td",{staticClass:"color_2 text_right"},[t._v(t._s(i.personcount))]),s("td",{staticClass:"color_2 text_right"},[t._v("¥ "+t._s(t.positiveFloat(i.quotationsumprice).toFixed(2)))]),s("td",{staticClass:"input_td"},[t.readonly||i.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v("¥ "+t._s(i.settlement_unitprice))]):s("el-input",{class:{lineBack:!!i.lineoroffline},attrs:{readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_unitprice=t.formatNum(i.settlement_unitprice,2)}},model:{value:i.settlement_unitprice,callback:function(e){t.$set(i,"settlement_unitprice",e)},expression:"food.settlement_unitprice"}})],1),s("td",{staticClass:"input_td"},[t.readonly||i.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v(t._s(i.settlement_count))]):s("el-input",{class:{lineBack:!!i.lineoroffline},staticStyle:{width:"100%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,2)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"food.settlement_count"}})],1),i.lineoroffline?t._e():s("td",{staticClass:"text_right"},[t._v("¥ "+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_unitprice)*t.positiveFloat(i.settlement_count)).toFixed(2)))]),s("td",[t._v(t._s(i.settlement_customer_objection))]),s("td",{staticClass:"delete_button_info input_td"},[t.readonly||i.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(i.settlement_comments))]):s("div",[s("el-input",{class:{difference:t.otherFoodDifference(i),line:!i.quoted_price_food_id,lineBack:!!i.lineoroffline},style:{width:!i.quoted_price_food_id&&t.issubmit?"calc(80% - 3px)":"100%"},attrs:{readonly:t.readonly||!!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"food.settlement_comments"}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"点击删除",placement:"top"}},[!i.quoted_price_food_id&&t.issubmit?s("el-button",{staticClass:"delete_button",attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!i.lineoroffline},on:{click:function(i){return t.delotherfood(e,o)}}}):t._e()],1)],1)])])})),0)])])])])})),t.otherfoodVisible?s("tbody",[s("tr",{staticClass:"color_2"},[s("th",{staticClass:"color_3 t333"},[t._v("杂费小计")]),s("th",{staticClass:"color_3",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_3",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_3",staticStyle:{"border-left":"none"}}),s("th",{staticClass:"color_4",staticStyle:{"border-right":"none"}}),s("th",{staticClass:"color_4",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_4 t333 text_right",staticStyle:{"border-left":"none"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.otherfoodPrice[2]).toFixed(2)))]),s("th",{staticClass:"color_4 t666",staticStyle:{"font-weight":"500"}},[t._v("客户异议")]),s("th",{staticClass:"color_4"},[t.issubmit?s("el-button",{staticClass:"add_new",attrs:{type:"text",size:"mini"},on:{click:function(e){return t.addOther(7)}}},[s("span",{staticClass:"el-icon-circle-plus-outline"}),t._v("添加杂费")]):t._e()],1)]),t._l(t.otherfoodincidental,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"color_2 input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(e.content))]):s("el-input",{attrs:{readonly:t.readonly||!!e.lineoroffline,placeholder:"杂费项名称"},model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"foodzf.content"}})],1),s("td",{staticClass:"color_2",staticStyle:{"border-right":"none"}},[s("el-checkbox",{attrs:{disabled:t.readonly||!!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"foodzf.isnotservice"}},[t._v("计入服务费")])],1),s("td",{staticClass:"color_2",staticStyle:{border:"none"}}),s("td",{staticClass:"color_2",staticStyle:{border:"none"}}),s("td",{staticClass:"input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v("¥ "+t._s(e.price))]):t._e(),s("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"foodzf.price"}})],1),s("td",{staticClass:"input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v(t._s(e.count))]):t._e(),s("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"foodzf.count"}})],1),e.lineoroffline?t._e():s("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count)).toFixed(2)))]),s("td",[t._v(t._s(e.settlement_customer_objection))]),s("td",{staticClass:"delete_button_info input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(e.comments))]):t._e(),s("el-input",{staticClass:"line",class:{lineBack:!!e.lineoroffline},style:{width:t.issubmit?"calc(80% - 3px)":"100%"},attrs:{readonly:t.readonly||!!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"foodzf.comments"}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"点击删除",placement:"top"}},[t.issubmit?s("el-button",{staticClass:"delete_button",attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)],1)])}))],2):t._e(),t.transportationVisible?s("tbody",[s("tr",{staticClass:"color_2 t333"},[t._m(12),s("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.intercitytrafficPrice[0].all).toFixed(2)))]),s("th",{staticClass:"color_4",staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.intercitytrafficPrice[1].all).toFixed(2)))]),s("th",{staticClass:"color_4"})])]):t._e(),t._l(t.info.transportationlist,(function(e,i){return s("tbody",{key:"chengji"+i},[s("tr",{staticClass:"color_2 t333"},[s("th",{staticClass:"color_3",staticStyle:{"border-right":"none"}},[s("b",[t._v(t._s(t._f("date_day")(e.date)))])]),s("th",{staticClass:"color_3",staticStyle:{"text-align":"right","border-left":"none"},attrs:{colspan:"3"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.intercitytrafficPrice[0].subtotal["sub_"+i]).toFixed(2)))]),s("th",{staticClass:"color_4",staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.intercitytrafficPrice[1].subtotal["sub_"+i]).toFixed(2)))]),s("th",{staticClass:"color_4"},[t.issubmit?s("el-button",{staticClass:"add_new",attrs:{type:"text",size:"mini"},on:{click:function(i){return t.addstransportation(e)}}},[s("span",{staticClass:"el-icon-circle-plus-outline"}),t._v("添加交通")]):t._e()],1)]),s("tr",[s("td",{staticClass:"tip_table",attrs:{colspan:"9"}},[s("table",[t._m(13,!0),s("tbody",t._l(e.tranlists,(function(i,o){return s("tr",{key:"transportation"+o},[s("td",{staticClass:"color_2",style:{padding:i.quoted_price_transportation_id?"10px":"0 3px"}},[i.quoted_price_transportation_id?[t._v(" "+t._s(i.joinname)+" ")]:[t.readonly?s("p",{staticClass:"pad_lr10"},t._l(t.transportationcostProjects,(function(e){return s("span",{directives:[{name:"show",rawName:"v-show",value:e.value==i.settlement_itemid,expression:"item.value == transportation.settlement_itemid"}],key:e.value},[t._v(t._s(e.label))])})),0):s("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(e){return t.changebigcar(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"transportation.settlement_itemid"}},t._l(t.transportationcostProjects,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_transportation_id&&(i.requirement||i.offerremarks)?s("el-tooltip",{attrs:{effect:"light",placement:"top-end"}},[s("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.requirement?s("div",[t._v("需求说明："+t._s(i.requirement))]):t._e(),i.offerremarks?s("div",[t._v("报价备注："+t._s(i.offerremarks))]):t._e()]),s("el-button",{staticClass:"remarks",attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),s("td",{staticClass:"color_2 text_right"},[t._v("¥ "+t._s(t.positiveFloat(i.unitprice).toFixed(2)))]),s("td",{staticClass:"color_2 text_right"},[t._v(t._s(i.passengercount))]),s("td",{staticClass:"color_2 text_right"},[t._v("¥ "+t._s(t.positiveFloat(i.quotationsumprice).toFixed(2)))]),s("td",{staticClass:"input_td"},[t.readonly||i.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v("¥ "+t._s(i.settlement_unitprice))]):s("el-input",{class:{lineBack:!!i.lineoroffline},attrs:{readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_unitprice=t.formatNum(i.settlement_unitprice,2)}},model:{value:i.settlement_unitprice,callback:function(e){t.$set(i,"settlement_unitprice",e)},expression:"transportation.settlement_unitprice"}})],1),s("td",{staticClass:"input_td"},[t.readonly||i.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v(t._s(i.settlement_count))]):s("el-input",{class:{lineBack:!!i.lineoroffline},staticStyle:{width:"100%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,2)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"transportation.settlement_count"}})],1),i.lineoroffline?t._e():s("td",{staticClass:"text_right"},[t._v("¥ "+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_unitprice)*t.positiveFloat(i.settlement_count)).toFixed(2)))]),s("td",[t._v(t._s(i.settlement_customer_objection))]),s("td",{staticClass:"delete_button_info input_td"},[t.readonly||i.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(i.settlement_comments))]):s("div",[s("el-input",{class:{difference:t.transportationDifference(i),line:!i.quoted_price_transportation_id,lineBack:!!i.lineoroffline},style:{width:!i.quoted_price_transportation_id&&t.issubmit?"calc(80% - 3px)":"100%"},attrs:{readonly:t.readonly||!!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"transportation.settlement_comments"}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"点击删除",placement:"top"}},[!i.quoted_price_transportation_id&&t.issubmit?s("el-button",{staticClass:"delete_button",attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!i.lineoroffline},on:{click:function(i){return t.delstransportation(e,o)}}}):t._e()],1)],1)])])})),0)])])])])})),t.transportationVisible?s("tbody",[s("tr",{staticClass:"color_2"},[s("th",{staticClass:"color_3 t333"},[t._v("杂费小计")]),s("th",{staticClass:"color_3",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_3",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_3",staticStyle:{"border-left":"none"}}),s("th",{staticClass:"color_4",staticStyle:{"border-right":"none"}}),s("th",{staticClass:"color_4",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_4 t333 text_right",staticStyle:{"border-left":"none"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.intercitytrafficPrice[2]).toFixed(2)))]),s("th",{staticClass:"color_4 t666",staticStyle:{"font-weight":"500"}},[t._v("客户异议")]),s("th",{staticClass:"color_4"},[t.issubmit?s("el-button",{staticClass:"add_new",attrs:{type:"text",size:"mini"},on:{click:function(e){return t.addOther(4)}}},[s("span",{staticClass:"el-icon-circle-plus-outline"}),t._v("添加杂费")]):t._e()],1)]),t._l(t.intercitytrafficincidental,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"color_2 input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10"},t._l(t.info.trantypelist,(function(i){return s("span",{directives:[{name:"show",rawName:"v-show",value:i.trancode==e.itemcode,expression:"item.trancode == transportationzf.itemcode"}],key:i.trancode},[t._v(t._s(i.tranname))])})),0):s("el-select",{attrs:{disabled:t.readonly||!!e.lineoroffline,placeholder:"请选择乘坐工具"},model:{value:e.itemcode,callback:function(i){t.$set(e,"itemcode",i)},expression:"transportationzf.itemcode"}},t._l(t.info.trantypelist,(function(t){return s("el-option",{key:t.trancode,attrs:{value:t.trancode,label:t.tranname}})})),1)],1),s("td",{staticClass:"color_2",staticStyle:{"border-right":"none"}},[s("el-checkbox",{attrs:{disabled:t.readonly||!!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"transportationzf.isnotservice"}},[t._v(" 计入服务费 ")])],1),s("td",{staticClass:"color_2",staticStyle:{border:"none"}}),s("td",{staticClass:"color_2",staticStyle:{border:"none"}}),s("td",{staticClass:"input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v("¥ "+t._s(e.price))]):s("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"transportationzf.price"}})],1),s("td",{staticClass:"input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v(t._s(e.count))]):s("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"transportationzf.count"}})],1),e.lineoroffline?t._e():s("td",{staticClass:"text_right"},[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count)).toFixed(2)))]),s("td",[t._v(t._s(e.settlement_customer_objection))]),s("td",{staticClass:"delete_button_info input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(e.comments))]):s("el-input",{staticClass:"line",class:{lineBack:!!e.lineoroffline},style:{width:t.issubmit?"calc(80% - 3px)":"100%"},attrs:{readonly:t.readonly||!!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"transportationzf.comments"}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"点击删除",placement:"top"}},[t.issubmit?s("el-button",{staticClass:"delete_button",attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)],1)])}))],2):t._e(),t.carVisible?s("tbody",[s("tr",{staticClass:"color_2 t333"},[t._m(14),s("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.carPrice[0].all).toFixed(2)))]),s("th",{staticClass:"color_4",staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.carPrice[1].all).toFixed(2)))]),s("th",{staticClass:"color_4"})])]):t._e(),t._l(t.info.carlist,(function(e,i){return s("tbody",{key:"shinei"+i},[s("tr",{staticClass:"color_2 t333"},[s("th",{staticClass:"color_3",staticStyle:{"border-right":"none"}},[s("b",[t._v(t._s(t._f("date_day")(e.date)))])]),s("th",{staticClass:"color_3",staticStyle:{"text-align":"right","border-left":"none"},attrs:{colspan:"3"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.carPrice[0].subtotal["sub_"+i]).toFixed(2)))]),s("th",{staticClass:"color_4",staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.carPrice[1].subtotal["sub_"+i]).toFixed(2)))]),s("th",{staticClass:"color_4"},[t.issubmit?s("el-button",{staticClass:"add_new",attrs:{type:"text",size:"mini"},on:{click:function(i){return t.addcar(e)}}},[s("span",{staticClass:"el-icon-circle-plus-outline"}),t._v("添加交通")]):t._e()],1)]),s("tr",[s("td",{staticClass:"tip_table",attrs:{colspan:"9"}},[s("table",[t._m(15,!0),s("tbody",t._l(e.carlists,(function(i,o){return s("tr",{key:"car"+o},[s("td",{staticClass:"color_2",style:{padding:i.quoted_price_car_id?"10px":"0 3px"}},[i.quoted_price_car_id?[t._v(" "+t._s(i.purposename+"("+i.vehicletypename+";搭乘人数:"+i.vehiclecount+"人;用车城市:"+i.city+";")+" "),i.brand_name?s("span",[t._v(" 车型名称: "+t._s(i.brand_name)+" ")]):t._e(),t._v(" ) ")]:[t.readonly?s("p",{staticClass:"pad_lr10"},t._l(t.carcostProjects,(function(e){return s("span",{directives:[{name:"show",rawName:"v-show",value:e.value==i.settlement_itemid,expression:"item.value == car.settlement_itemid"}],key:e.value},[t._v(t._s(e.label))])})),0):s("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(e){return t.changecar(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"car.settlement_itemid"}},t._l(t.carcostProjects,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_car_id&&(i.explain||i.offer_remarks)?s("el-tooltip",{attrs:{effect:"light",placement:"top-end"}},[s("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.explain?s("div",[t._v("需求说明："+t._s(i.explain))]):t._e(),i.offer_remarks?s("div",[t._v("报价备注："+t._s(i.offer_remarks))]):t._e()]),s("el-button",{staticClass:"remarks",attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),s("td",{staticClass:"color_2 text_right"},[t._v("¥ "+t._s(t.positiveFloat(i.price).toFixed(2)))]),s("td",{staticClass:"color_2 text_right"},[t._v(t._s(i.carcount))]),s("td",{staticClass:"color_2 text_right"},[t._v("¥ "+t._s(t.positiveFloat(i.quotationsumprice).toFixed(2)))]),s("td",{staticClass:"input_td"},[t.readonly||i.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v("¥ "+t._s(i.settlement_unitprice))]):s("el-input",{class:{lineBack:!!i.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_unitprice=t.formatNum(i.settlement_unitprice,2)}},model:{value:i.settlement_unitprice,callback:function(e){t.$set(i,"settlement_unitprice",e)},expression:"car.settlement_unitprice"}})],1),s("td",{staticClass:"input_td"},[t.readonly||i.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v(t._s(i.settlement_count))]):s("el-input",{class:{lineBack:!!i.lineoroffline},staticStyle:{width:"100%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,2)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"car.settlement_count"}})],1),i.lineoroffline?t._e():s("td",{staticClass:"text_right"},[t._v("¥ "+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_unitprice)*t.positiveFloat(i.settlement_count)).toFixed(2)))]),s("td",[t._v(t._s(i.settlement_customer_objection))]),s("td",{staticClass:"delete_button_info input_td"},[t.readonly||i.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(i.settlement_comments))]):s("div",[s("el-input",{class:{difference:t.carDifference(i),line:!i.quoted_price_car_id,lineBack:!!i.lineoroffline},style:{width:!i.quoted_price_car_id&&t.issubmit?"calc(80% - 3px)":"100%"},attrs:{readonly:t.readonly||!!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"car.settlement_comments"}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"点击删除",placement:"top"}},[!i.quoted_price_car_id&&t.issubmit?s("el-button",{staticClass:"delete_button",attrs:{icon:"el-icon-delete",type:"danger",disabled:t.readonly||!!i.lineoroffline,circle:"",size:"mini"},on:{click:function(i){return t.delcar(e,o)}}}):t._e()],1)],1)])])})),0)])])])])})),t.carVisible?s("tbody",[s("tr",{staticClass:"color_2"},[s("th",{staticClass:"color_3 t333"},[t._v("杂费小计")]),s("th",{staticClass:"color_3",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_3",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_3",staticStyle:{"border-left":"none"}}),s("th",{staticClass:"color_4",staticStyle:{"border-right":"none"}}),s("th",{staticClass:"color_4",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_4 t333 text_right",staticStyle:{"border-left":"none"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.carPrice[2]).toFixed(2)))]),s("th",{staticClass:"color_4 t666",staticStyle:{"font-weight":"500"}},[t._v("客户异议")]),s("th",{staticClass:"color_4"},[t.issubmit?s("el-button",{staticClass:"add_new",attrs:{type:"text",size:"mini"},on:{click:function(e){return t.addOther(5)}}},[s("span",{staticClass:"el-icon-circle-plus-outline"}),t._v("添加杂费")]):t._e()],1)]),t._l(t.carincidental,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"color_2 input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(e.content))]):s("el-input",{attrs:{readonly:t.readonly||!!e.lineoroffline,placeholder:"杂费项名称"},model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"carzf.content"}})],1),s("td",{staticClass:"color_2",staticStyle:{"border-right":"none"}},[s("el-checkbox",{attrs:{disabled:t.readonly||!!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"carzf.isnotservice"}},[t._v("计入服务费")])],1),s("td",{staticClass:"color_2",staticStyle:{border:"none"}}),s("td",{staticClass:"color_2",staticStyle:{border:"none"}}),s("td",{staticClass:"input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v("¥ "+t._s(e.price))]):s("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"carzf.price"}})],1),s("td",{staticClass:"input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v(t._s(e.count))]):s("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"carzf.count"}})],1),e.lineoroffline?t._e():s("td",{staticClass:"text_right"},[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count)).toFixed(2)))]),s("td",[t._v(t._s(e.settlement_customer_objection))]),s("td",{staticClass:"delete_button_info input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(e.comments))]):s("el-input",{staticClass:"line",class:{lineBack:!!e.lineoroffline},style:{width:t.issubmit?"calc(80% - 3px)":"100%"},attrs:{readonly:t.readonly||!!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"carzf.comments"}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"点击删除",placement:"top"}},[t.issubmit?s("el-button",{staticClass:"delete_button",attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)],1)])}))],2):t._e(),t.otherVisible?s("tbody",[s("tr",{staticClass:"color_2 t333"},[t._m(16),s("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.otherPrice[0]).toFixed(2)))]),s("th",{staticClass:"color_4",staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.otherPrice[1]).toFixed(2)))]),s("th",{staticClass:"color_4"},[t.issubmit?s("el-button",{staticClass:"add_new",attrs:{type:"text",size:"mini"},on:{click:function(e){return t.addsundry()}}},[s("span",{staticClass:"el-icon-circle-plus-outline"}),t._v("添加其他")]):t._e()],1)])]):t._e(),t.otherVisible?s("tbody",[s("tr",[s("td",{staticClass:"tip_table",attrs:{colspan:"9"}},[s("table",[t._m(17),s("tbody",t._l(t.info.otherlist,(function(e,i){return s("tr",{key:"other"+i},[s("td",{staticClass:"color_2",style:{padding:e.quoted_price_other_id?"10px":"0 3px"}},[e.quoted_price_other_id?s("div",[t._v(" "+t._s(e.servicetypename)+" ")]):s("div",[t.readonly?s("p",{staticClass:"pad_lr10"},t._l(t.othercostProjects,(function(i){return s("span",{directives:[{name:"show",rawName:"v-show",value:i.value==e.settlement_itemid,expression:"item.value == other.settlement_itemid"}],key:i.value},[t._v(t._s(i.label))])})),0):s("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(s){return t.changeOtherSel(e,i,s)}},model:{value:e.settlement_itemid,callback:function(i){t.$set(e,"settlement_itemid",i)},expression:"other.settlement_itemid"}},t._l(t.othercostProjects,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e.quoted_price_other_id&&(e.describe||e.offer_remarks)?s("el-tooltip",{attrs:{effect:"light",placement:"top-end"}},[s("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[e.describe?s("div",[t._v("需求说明："+t._s(e.describe))]):t._e(),e.offer_remarks?s("div",[t._v("报价备注："+t._s(e.offer_remarks))]):t._e()]),s("el-button",{staticClass:"remarks",attrs:{type:"text"}},[t._v("备注")])],1):t._e()],1),s("td",{staticClass:"color_2 text_right"},[t._v("¥ "+t._s(t.positiveFloat(e.price).toFixed(2)))]),s("td",{staticClass:"color_2 text_right"},[t._v(" "+t._s(e.offerparticipatecount)+" ")]),s("td",{staticClass:"color_2 text_right"},[t._v("¥ "+t._s(t.positiveFloat(e.quotationsumprice).toFixed(2)))]),s("td",{staticClass:"input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v("¥ "+t._s(e.settlement_unitprice))]):s("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.settlement_unitprice=t.formatNum(e.settlement_unitprice,2)}},model:{value:e.settlement_unitprice,callback:function(i){t.$set(e,"settlement_unitprice",i)},expression:"other.settlement_unitprice"}})],1),s("td",{staticClass:"input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v(t._s(e.settlement_count))]):s("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.settlement_count=t.positiveFloatOne(e.settlement_count)}},model:{value:e.settlement_count,callback:function(i){t.$set(e,"settlement_count",i)},expression:"other.settlement_count"}})],1),e.lineoroffline?t._e():s("td",{staticClass:"text_right"},[t._v("¥ "+t._s(t.positiveFloat(t.positiveFloatSix(e.settlement_unitprice)*t.positiveFloat(e.settlement_count)).toFixed(2)))]),s("td",[t._v(t._s(e.settlement_customer_objection))]),s("td",{staticClass:"delete_button_info input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(e.settlement_comments))]):s("div",[s("el-input",{class:{difference:t.otherDifference(e),line:!e.quoted_price_other_id,lineBack:!!e.lineoroffline},style:{width:!e.quoted_price_other_id&&t.issubmit?"calc(80% - 3px)":"100%"},attrs:{readonly:t.readonly||!!e.lineoroffline},model:{value:e.settlement_comments,callback:function(i){t.$set(e,"settlement_comments",i)},expression:"other.settlement_comments"}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"点击删除",placement:"top"}},[!e.quoted_price_other_id&&t.issubmit?s("el-button",{staticClass:"delete_button",attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!e.lineoroffline},on:{click:function(e){return t.delsother(t.item,i)}}}):t._e()],1)],1)])])})),0),s("tbody",[s("tr",{staticClass:"color_2"},[s("th",{staticClass:"color_3 t333"},[t._v("杂费小计")]),s("th",{staticClass:"color_3",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_3",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_3",staticStyle:{"border-left":"none"}}),s("th",{staticClass:"color_4",staticStyle:{"border-right":"none"}}),s("th",{staticClass:"color_4",staticStyle:{border:"none","border-top":"1px solid #e4e7ed"}}),s("th",{staticClass:"color_4 t333 text_right",staticStyle:{"border-left":"none"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.otherPrice[2]).toFixed(2)))]),s("th",{staticClass:"color_4 t666",staticStyle:{"font-weight":"500"}},[t._v("客户异议")]),s("th",{staticClass:"color_4"},[t.issubmit?s("el-button",{staticClass:"add_new",attrs:{type:"text",size:"mini"},on:{click:function(e){return t.addOther(6)}}},[s("span",{staticClass:"el-icon-circle-plus-outline"}),t._v("添加杂费")]):t._e()],1)]),t._l(t.otherincidental,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"color_2 input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(e.content))]):s("input",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"otherzf.content"}],attrs:{type:"text",readonly:t.readonly||!!e.lineoroffline,placeholder:"杂费项名称"},domProps:{value:e.content},on:{input:function(i){i.target.composing||t.$set(e,"content",i.target.value)}}})]),s("td",{staticClass:"color_2 otherFee",attrs:{colspan:"3"}},[s("el-checkbox",{attrs:{disabled:t.readonly||!!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"otherzf.isnotservice"}},[t._v(" 计入服务费 ")]),t.info.event_info_configure.service_fee_calculation_method?t._e():s("div",[s("span",[t._v("*")]),s("el-input",{staticStyle:{width:"30%"},attrs:{readonly:t.readonly,disabled:!e.isnotservice||!!t.info.event_info_configure.service_fee_calculation_method},on:{input:function(i){e.settlementservice_taxrate=t.formatNum(e.settlementservice_taxrate)}},model:{value:e.settlementservice_taxrate,callback:function(i){t.$set(e,"settlementservice_taxrate",i)},expression:"otherzf.settlementservice_taxrate"}}),t._v(" % ")],1)],1),s("td",{staticClass:"input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v("¥ "+t._s(e.price))]):s("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"otherzf.price"}})],1),s("td",{staticClass:"input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10 text_right"},[t._v(t._s(e.count))]):s("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"otherzf.count"}})],1),e.lineoroffline?t._e():s("td",{staticClass:"text_right"},[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count)).toFixed(2)))]),s("td",[t._v(t._s(e.settlement_customer_objection))]),s("td",{staticClass:"delete_button_info input_td"},[t.readonly||e.lineoroffline?s("p",{staticClass:"pad_lr10"},[t._v(t._s(e.comments))]):s("el-input",{staticClass:"line",class:{lineBack:!!e.lineoroffline},style:{width:t.issubmit?"calc(80% - 3px)":"100%"},attrs:{readonly:t.readonly||!!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"otherzf.comments"}}),s("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"点击删除",placement:"top"}},[t.issubmit?s("el-button",{staticClass:"delete_button",attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)],1)])}))],2)])])])]):t._e(),s("tbody",[s("tr",{staticClass:"color_2 t333"},[t._m(18),s("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.positiveFloatSix(t.servicePrice[0])+(0==t.info.zhicai_service?t.positiveFloatSix(t.servicePrice[4]):t.positiveFloatSix(t.servicePrice[8]))).toFixed(2)))]),s("th",{staticClass:"color_4",staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.positiveFloatSix(t.servicePrice[1])+(0==t.info.zhicai_service?t.positiveFloatSix(t.servicePrice[5]):t.positiveFloatSix(t.servicePrice[9]))).toFixed(2)))]),s("th",{staticClass:"color_4"})])]),s("tbody",[s("tr",[s("td",{staticClass:"tip_table",attrs:{colspan:"9"}},[s("table",[t._m(19),s("tbody",[s("tr",[s("td",{staticClass:"color_2"},[t._v("非直采服务费")]),s("td",{staticClass:"color_2 wordBreak",attrs:{colspan:"2"}},[t._v(t._s(t.servicePrice[2]))]),s("td",{staticClass:"color_2 text_right"},[t._v("¥ "+t._s(this.positiveFloat(t.servicePrice[0]).toFixed(2)))]),s("td",{staticClass:"wordBreak",attrs:{colspan:"2"}},[t._v(" "+t._s(t.servicePrice[3])+" "),t.info.event_info_configure.service_fee_ratio?s("span",[t._v(" * "),t.readonly?s("span",[t._v(t._s(t.info.sheet_fzc_service))]):s("el-input",{staticClass:"line",staticStyle:{width:"20%"},attrs:{size:"mini",readonly:t.readonly},model:{value:t.info.sheet_fzc_service,callback:function(e){t.$set(t.info,"sheet_fzc_service",e)},expression:"info.sheet_fzc_service"}}),t._v(" % ")],1):t._e()]),s("td",{staticClass:"text_right"},[t._v("¥ "+t._s(this.positiveFloat(t.servicePrice[1]).toFixed(2)))]),s("td"),s("td",{staticClass:"input_td"},[t.readonly?s("p",{staticClass:"pad_lr10"},[t._v(t._s(t.info.settlement_advance_remark))]):s("el-input",{attrs:{readonly:t.readonly},model:{value:t.info.settlement_service_remark,callback:function(e){t.$set(t.info,"settlement_service_remark",e)},expression:"info.settlement_service_remark"}})],1)]),1==t.info.zhicai_service?s("tr",[s("td",{staticClass:"color_2"},[t._v("直采服务费")]),s("td",{staticClass:"color_2",attrs:{colspan:"2"}},t._l(t.info.event_quoted_price_zhicai_service,(function(e,i){return s("p",{key:i,staticStyle:{margin:"3px 0px"}},[s("span",[t._v(" "+t._s(e.grade_name)+" ")]),s("span",[t._v(" ￥"+t._s(e.grade_price)+" ")]),s("span",[t._v(" * "+t._s(e.grade_count)+" ")])])})),0),s("td",{staticClass:"color_2 text_right"},[t._v("¥ "+t._s(this.positiveFloat(t.servicePrice[8]).toFixed(2)))]),s("td",{staticClass:"chaifen",staticStyle:{padding:"3px 10px"},attrs:{colspan:"2"}},t._l(t.info.event_settlement_sheet_zhicai_service,(function(e,i){return s("p",{key:i,staticStyle:{margin:"3px 0"}},[s("span",[t._v(" "+t._s(e.grade_name)+" ")]),s("span",[t._v(" ￥"+t._s(e.grade_price)+" ")]),s("span",[t._v(" * "),t.readonly?s("span",[t._v(t._s(e.grade_count))]):s("el-input",{staticClass:"small_inp",attrs:{size:"small",readonly:t.readonly},on:{input:function(i){e.grade_count=t.positiveFloatOne(e.grade_count)}},model:{value:e.grade_count,callback:function(i){t.$set(e,"grade_count",i)},expression:"item.grade_count"}})],1)])})),0),s("td",{staticClass:"text_right"},[t._v("¥"+t._s(t.positiveFloat(t.servicePrice[9]).toFixed(2)))]),s("td"),s("td",{staticClass:"input_td"},[t.readonly?s("p",{staticClass:"pad_lr10"},[t._v(t._s(t.info.settlement_advance_remark))]):s("el-input",{attrs:{readonly:t.readonly},model:{value:t.info.settlement_advance_remark,callback:function(e){t.$set(t.info,"settlement_advance_remark",e)},expression:"info.settlement_advance_remark"}})],1)]):s("tr",[s("td",{staticClass:"color_2"},[t._v("直采服务费")]),s("td",{staticClass:"color_2",attrs:{colspan:"2"}},[t._v(t._s(t.servicePrice[6]))]),s("td",{staticClass:"color_2 text_right"},[t._v("¥"+t._s(t.positiveFloat(t.servicePrice[4]).toFixed(2)))]),s("td",{staticClass:"chaifen",attrs:{colspan:"2"}},[t.readonly?s("span",[t._v(t._s(t.info.settlement_advance_amount))]):s("el-input",{staticStyle:{width:"20%"},attrs:{readonly:t.readonly},on:{input:function(e){t.info.settlement_advance_amount=t.formatNum(t.info.settlement_advance_amount)}},model:{value:t.info.settlement_advance_amount,callback:function(e){t.$set(t.info,"settlement_advance_amount",e)},expression:"info.settlement_advance_amount"}}),t._v(" * "),t.readonly?s("span",[t._v(t._s(t.info.settlement_advance_proportion))]):s("el-input",{staticStyle:{width:"20%"},attrs:{readonly:t.readonly},on:{input:function(e){t.info.settlement_advance_proportion=t.formatNum(t.info.settlement_advance_proportion)}},model:{value:t.info.settlement_advance_proportion,callback:function(e){t.$set(t.info,"settlement_advance_proportion",e)},expression:"info.settlement_advance_proportion"}})],1),s("td",{staticClass:"text_right"},[t._v("¥"+t._s(t.positiveFloat(t.servicePrice[5]).toFixed(2)))]),s("td"),s("td",[t.readonly?s("p",{staticClass:"pad_lr10"},[t._v(t._s(t.info.settlement_advance_remark))]):s("el-input",{attrs:{readonly:t.readonly},model:{value:t.info.settlement_advance_remark,callback:function(e){t.$set(t.info,"settlement_advance_remark",e)},expression:"info.settlement_advance_remark"}})],1)])])])])])]),s("tbody",[s("tr",{staticClass:"color_2 t333"},[t._m(20),s("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.vatPrice[0]).toFixed(2)))]),s("th",{staticClass:"color_4",staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.vatPrice[1]).toFixed(2)))]),s("th",{staticClass:"color_4"})])]),s("tbody",[s("tr",[s("td",{staticClass:"tip_table",attrs:{colspan:"9"}},[s("table",[t._m(21),s("tbody",[s("tr",[s("td",{staticClass:"color_2"},[t._v("VAT")]),s("td",{staticClass:"color_2 wordBreak",attrs:{colspan:"2"}},[t._v(t._s(t.vatPrice[2]))]),s("td",{staticClass:"color_2 text_right"},[t._v("¥ "+t._s(t.positiveFloat(t.vatPrice[0]).toFixed(2)))]),s("td",{staticClass:"wordBreak",attrs:{colspan:"2"}},[t._v(" "+t._s(t.vatPrice[3])+" "),s("span",[t._v(" * "),t.readonly?s("span",[t._v(t._s(t.info.settlement_taxrate))]):s("el-input",{staticClass:"line",staticStyle:{width:"18%"},attrs:{size:"mini",readonly:t.readonly,disabled:0==t.info.event_info_configure.vatcanedit},on:{input:function(e){t.info.settlement_taxrate=t.formatNum(t.info.settlement_taxrate)}},model:{value:t.info.settlement_taxrate,callback:function(e){t.$set(t.info,"settlement_taxrate",e)},expression:"info.settlement_taxrate"}}),t._v(" % ")],1)]),s("td",{staticClass:"text_right"},[t._v("¥ "+t._s(t.positiveFloat(t.vatPrice[1]).toFixed(2)))]),s("td"),s("td",{staticClass:"input_td"},[t.readonly?s("p",{staticClass:"pad_lr10"},[t._v(t._s(t.info.settlement_taxrate_comments))]):s("el-input",{attrs:{readonly:t.readonly},model:{value:t.info.settlement_taxrate_comments,callback:function(e){t.$set(t.info,"settlement_taxrate_comments",e)},expression:"info.settlement_taxrate_comments"}})],1)])])])])])])],2),s("div",{staticClass:"qita"},[s("div",{staticClass:"left"},[s("div",{staticClass:"stitle"},[t._v("客户异议")]),s("div",{staticClass:"context"},[s("div",{staticClass:"objectionDetailStyle t666",domProps:{innerHTML:t._s(t.info.settlement_customer_objection)},on:{click:function(e){return t.getImg(e)}}})])]),s("div",{staticClass:"right"},[s("div",{staticClass:"stitle"},[t._v("其他说明")]),s("div",{staticClass:"context"},["0029-2"===t.info.settlement_status||"0029-3"===t.info.settlement_status?s("span",{staticClass:"mar_l10 dis_block mar_tb10 t666"},[t._v(t._s(t.info.settlement_offer_remarks)+"331")]):s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.info.settlement_offer_remarks,expression:"info.settlement_offer_remarks"}],attrs:{readonly:t.readonly},domProps:{value:t.info.settlement_offer_remarks},on:{input:function(e){e.target.composing||t.$set(t.info,"settlement_offer_remarks",e.target.value)}}})])])])]):t._e(),s("div",{staticClass:"submit"},[["0020-1","0020-4","0020-5","0020-6","0020-7","0020-8"].includes(this.info.orderstatus)?s("span",{staticStyle:{color:"#428bca","font-size":"17px"}},[1==t.info.event_info_configure.jsqrisdisplay?s("a",{staticStyle:{"font-size":"14px",color:"#1890ff",cursor:"pointer",margin:"0 10px"},attrs:{download:""},on:{click:t.downloadSettlementConfirm}},[s("span",{staticClass:"el-icon-document"}),t._v("下载结算确认单")]):t._e(),s("a",{staticStyle:{"font-size":"14px",color:"#1890ff",cursor:"pointer",margin:"0 10px"},attrs:{download:""},on:{click:t.excelDownload}},[s("span",{staticClass:"el-icon-document"}),t._v("下载结算Excel")])]):t._e(),t.readonly?s("el-button",{staticClass:"back",attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.$router.go(-1)}}},[s("img",{attrs:{src:i("5f25"),alt:""}}),t._v(" 返回 ")]):s("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.$router.go(-1)}}},[s("span",{staticClass:"el-icon-circle-close"}),t._v("取消")]),["0020-4","0020-7","0020-8"].includes(this.info.orderstatus)?s("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:t.submit}},[s("span",{staticClass:"el-icon-upload2"}),t._v("提交结算单")]):t._e(),["0020-1","0020-4","0020-7","0020-8"].includes(this.info.orderstatus)?s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.draft}},[s("span",{staticClass:"el-icon-upload2"}),t._v("保存到草稿箱")]):t._e()],1),t.info.historylist&&t.info.historylist.length>0?s("div",{staticClass:"info bottom_info"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"header clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"tip_title",staticStyle:{"font-weight":"bold"}},[t._v("历史结算单：")])]),t._l(t.info.historylist,(function(e,i){return s("div",{key:e.id,staticClass:"text item"},[t._v("第"+t._s(i+1)+"次结算, 总价￥"+t._s(e.settlement_total_price?t.positiveFloat(e.settlement_total_price):"")+"元，[ "+t._s(t._f("date_ex")(e.submit_time))+" ]")])}))],2)],1):t._e(),s("el-dialog",{attrs:{visible:t.addSettleShow,title:"添加结算项目",center:"",width:"600px"},on:{"update:visible":function(e){t.addSettleShow=e},close:function(e){t.addSettleShow=!1}}},[s("el-form",{ref:"addSettleInfo",attrs:{model:t.addSettleInfo,rules:t.addSettleRules,"label-width":"200px"}},[s("el-form-item",{attrs:{label:"选择项目分类",prop:"projectClass"}},[s("el-select",{staticClass:"demand_300",attrs:{size:"small",clearable:"",filterable:""},on:{change:t.changeProjectClass},model:{value:t.addSettleInfo.projectClass,callback:function(e){t.$set(t.addSettleInfo,"projectClass",e)},expression:"addSettleInfo.projectClass"}},t._l(t.projectClass,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.needCostDate,expression:"needCostDate"}],attrs:{label:"选择费用发生日期",prop:"costDate"}},[s("el-select",{staticClass:"demand_300",attrs:{size:"small",clearable:"",filterable:""},model:{value:t.addSettleInfo.costDate,callback:function(e){t.$set(t.addSettleInfo,"costDate",e)},expression:"addSettleInfo.costDate"}},t._l(t.costDates,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),s("el-form-item",{attrs:{label:"选择费用项目",prop:"costProject"}},[s("el-select",{staticClass:"demand_300",attrs:{loading:t.cost_project_load,size:"small",clearable:"",filterable:""},on:{change:t.changecostProject},model:{value:t.addSettleInfo.costProject,callback:function(e){t.$set(t.addSettleInfo,"costProject",e)},expression:"addSettleInfo.costProject"}},t._l(t.costProjects,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),s("span",{staticClass:"dialog-footer flex_row justify_center",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(e){t.addSettleShow=!1}}},[t._v("取 消")]),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addSettle}},[t._v("添 加")])],1)],1)],1):t._e()},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",{staticClass:"color_2"},[i("th",[t._v("凭证名称")]),i("th",[t._v("文件")]),i("th",[t._v("客户异议")]),i("th",[t._v("说明")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",{staticClass:"color_2"},[i("th",[t._v("凭证名称")]),i("th",[t._v("文件")]),i("th",[t._v("客户异议")]),i("th",[t._v("说明")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3",staticStyle:{border:"none"},attrs:{width:"10%"}},[i("span",[t._v("结算项目")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ol",[i("li",[t._v("原订单总报价：")]),i("li",[t._v("原订单总报价(税前)：")]),i("li",[t._v("原订单总报价(净价)：")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ol",[i("li",[t._v("订单总结算价：")]),i("li",[t._v("订单总结算价(税前)：")]),i("li",[t._v("订单总结算价(净价)：")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3 text_left"},[i("span",{staticClass:"tip_title"},[t._v("客房")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3 text_left"},[i("span",{staticClass:"tip_title"},[t._v("会场")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",{staticClass:"color_2 price_tab"},[i("th",{staticClass:"color_3 t666",attrs:{width:"10%"}},[t._v("消费项目")]),i("th",{staticClass:"color_3 t666",attrs:{width:"10%"}},[t._v("单价(元)")]),i("th",{staticClass:"color_3 t666",attrs:{width:"8%"}},[t._v("数量")]),i("th",{staticClass:"color_3 t666",attrs:{width:"11.86%"}},[t._v("金额(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"8%"}},[t._v("单价(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"8%"}},[t._v("数量")]),i("th",{staticClass:"color_4 t666",attrs:{width:"10%"}},[t._v("金额(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"11%"}},[t._v("客户异议")]),i("th",{staticClass:"color_4 t666",attrs:{width:"13.15%"}},[t._v("结算说明")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3 text_left"},[i("span",{staticClass:"tip_title"},[t._v("酒店内餐饮")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",{staticClass:"color_2 price_tab"},[i("th",{staticClass:"color_3 t666",attrs:{width:"10%"}},[t._v("消费项目")]),i("th",{staticClass:"color_3 t666",attrs:{width:"10%"}},[t._v("单价(元)")]),i("th",{staticClass:"color_3 t666",attrs:{width:"8%"}},[t._v("数量")]),i("th",{staticClass:"color_3 t666",attrs:{width:"12%"}},[t._v("金额(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"8%"}},[t._v("单价(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"8%"}},[t._v("数量")]),i("th",{staticClass:"color_4 t666",attrs:{width:"10%"}},[t._v("金额(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"11%"}},[t._v("客户异议")]),i("th",{staticClass:"color_4 t666",attrs:{width:"13.15%"}},[t._v("结算说明")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3 text_left"},[i("span",{staticClass:"tip_title"},[t._v("酒店外餐饮")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",{staticClass:"color_2 price_tab"},[i("th",{staticClass:"color_3 t666",attrs:{width:"10%"}},[t._v("消费项目")]),i("th",{staticClass:"color_3 t666",attrs:{width:"10%"}},[t._v("单价(元)")]),i("th",{staticClass:"color_3 t666",attrs:{width:"8%"}},[t._v("数量")]),i("th",{staticClass:"color_3 t666",attrs:{width:"11.9%"}},[t._v("金额(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"8%"}},[t._v("单价(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"8%"}},[t._v("数量")]),i("th",{staticClass:"color_4 t666",attrs:{width:"10%"}},[t._v("金额(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"11%"}},[t._v("客户异议")]),i("th",{staticClass:"color_4 t666",attrs:{width:"13.15%"}},[t._v("结算说明")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3 text_left"},[i("span",{staticClass:"tip_title"},[t._v("大交通")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",{staticClass:"color_2 price_tab"},[i("th",{staticClass:"color_3 t666",attrs:{width:"10%"}},[t._v("消费项目")]),i("th",{staticClass:"color_3 t666",attrs:{width:"10%"}},[t._v("单价(元)")]),i("th",{staticClass:"color_3 t666",attrs:{width:"8%"}},[t._v("数量")]),i("th",{staticClass:"color_3 t666",attrs:{width:"11.9%"}},[t._v("金额(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"8%"}},[t._v("单价(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"8%"}},[t._v("数量")]),i("th",{staticClass:"color_4 t666",attrs:{width:"10%"}},[t._v("金额(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"11%"}},[t._v("客户异议")]),i("th",{staticClass:"color_4 t666",attrs:{width:"13.15%"}},[t._v("结算说明")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3 text_left"},[i("span",{staticClass:"tip_title"},[t._v("市内交通")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",{staticClass:"color_2 price_tab"},[i("th",{staticClass:"color_3 t666",attrs:{width:"10%"}},[t._v("消费项目")]),i("th",{staticClass:"color_3 t666",attrs:{width:"10%"}},[t._v("单价(元)")]),i("th",{staticClass:"color_3 t666",attrs:{width:"8%"}},[t._v("数量")]),i("th",{staticClass:"color_3 t666",attrs:{width:"11.9%"}},[t._v("金额(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"8%"}},[t._v("单价(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"8%"}},[t._v("数量")]),i("th",{staticClass:"color_4 t666",attrs:{width:"10%"}},[t._v("金额(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"11%"}},[t._v("客户异议")]),i("th",{staticClass:"color_4 t666",attrs:{width:"13.15%"}},[t._v("结算说明")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3 text_left"},[i("span",{staticClass:"tip_title"},[t._v("其他")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",{staticClass:"color_2 price_tab"},[i("th",{staticClass:"color_3 t666",attrs:{width:"10%"}},[t._v("消费项目")]),i("th",{staticClass:"color_3 t666",attrs:{width:"10%"}},[t._v("单价(元)")]),i("th",{staticClass:"color_3 t666",attrs:{width:"8%"}},[t._v("数量")]),i("th",{staticClass:"color_3 t666",attrs:{width:"11.9%"}},[t._v("金额(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"8%"}},[t._v("单价(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"8%"}},[t._v("数量")]),i("th",{staticClass:"color_4 t666",attrs:{width:"10%"}},[t._v("金额(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"11%"}},[t._v("客户异议")]),i("th",{staticClass:"color_4 t666",attrs:{width:"13.15%"}},[t._v("结算说明")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3 text_left"},[i("span",{staticClass:"tip_title"},[t._v("服务费")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",{staticClass:"color_2 price_tab"},[i("th",{staticClass:"color_3 t666",attrs:{width:"10%"}},[t._v("消费项目")]),i("th",{staticClass:"color_3 t666",attrs:{colspan:"2",width:"18%"}},[t._v("服务费计算")]),i("th",{staticClass:"color_3 t666",attrs:{width:"11.85%"}},[t._v("金额(元)")]),i("th",{staticClass:"color_4 t666",attrs:{colspan:"2",width:"16%"}},[t._v("服务费计算")]),i("th",{staticClass:"color_4 t666",attrs:{width:"10%"}},[t._v("金额(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"11%"}}),i("th",{staticClass:"color_4 t666",attrs:{width:"13.15%"}},[t._v("结算说明")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3 text_left"},[i("span",{staticClass:"tip_title"},[t._v("税费")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",{staticClass:"color_2 price_tab"},[i("th",{staticClass:"color_3 t666",attrs:{width:"10%"}},[t._v("消费项目")]),i("th",{staticClass:"color_3 t666",attrs:{colspan:"2",width:"18%"}},[t._v("税费计算")]),i("th",{staticClass:"color_3 t666",attrs:{width:"11.85%"}},[t._v("金额(元)")]),i("th",{staticClass:"color_4 t666",attrs:{colspan:"2",width:"16%"}},[t._v("税费计算")]),i("th",{staticClass:"color_4 t666",attrs:{width:"10%"}},[t._v("金额(元)")]),i("th",{staticClass:"color_4 t666",attrs:{width:"11%"}}),i("th",{staticClass:"color_4 t666",attrs:{width:"13.15%"}},[t._v("结算说明")])])])}],n=i("2909"),a=i("1da1"),r=(i("96cf"),i("caad"),i("4de4"),i("d3b7"),i("159b"),i("4e82"),i("ac1f"),i("5319"),i("b0c0"),i("fb6a"),i("d81d"),i("a630"),i("3ca3"),i("a434"),i("cf45")),l=i("0e5c"),c=i("c1df"),_=i.n(c),d=i("df68"),f=i("acd6"),u=(i("b587"),{data:function(){return{info:null,status_draft:"0029-1",status_tobeconfirmed:"0029-2",status_confirm:"0029-3",status_supplement:"0029-5",status_reject:"0029-4",settlement_status:"0029-3",errormsg:[],quoted_price_food_option:[{value:0,label:"酒店内用餐"},{value:1,label:"酒店外用餐"}],orderIDList:[],isopen:!1,arrayList:[{type:6,fileList:[],name:"客户结算单",remark:"",dissent:"",arrayLength:null},{type:7,fileList:[],name:"客户结算确认邮件",remark:"",dissent:"",arrayLength:null},{type:8,fileList:[],name:"PO单",remark:"",dissent:"",arrayLength:null},{type:5,fileList:[],name:"供应商发票及账单",remark:"",dissent:"",arrayLength:null},{type:1,fileList:[],name:"酒店住宿发票+小联",remark:"",dissent:"",arrayLength:null},{type:2,fileList:[],name:"酒店餐饮发票+小联",remark:"",dissent:"",arrayLength:null},{type:3,fileList:[],name:"酒店会场发票+小联",remark:"",dissent:"",arrayLength:null},{type:9,fileList:[],name:"外出用餐发票+小联",remark:"",dissent:"",arrayLength:null},{type:10,fileList:[],name:"注册费发票+小联",remark:"",dissent:"",arrayLength:null},{type:11,fileList:[],name:"用车发票+小联",remark:"",dissent:"",arrayLength:null},{type:12,fileList:[],name:"制作物发票+小联",remark:"",dissent:"",arrayLength:null},{type:13,fileList:[],name:"保险发票+小联",remark:"",dissent:"",arrayLength:null},{type:14,fileList:[],name:"签到表",remark:"",dissent:"",arrayLength:null},{type:15,fileList:[],name:"会议照片-全景",remark:"",dissent:"",arrayLength:null},{type:4,fileList:[],name:"其他",remark:"",dissent:"",arrayLength:null}],updateIndex:0,updateFileIndex:0,rename:!1,fileName:"",suffix:"",showInfo:!0,showPriceInfo:!0,isFail:1,downloadUrl:"",addSettleShow:!1,projectClass:[{value:"0034",label:"客房"},{value:"0049",label:"会场"},{value:"0050",label:"酒店内餐饮"},{value:"0051",label:"酒店外餐饮"},{value:"003",label:"大交通"},{value:"006",label:"地面交通"},{value:"009",label:"其他服务"}],costDates:[],cost_project_load:!1,costProjects:[],roomcostProjects:[],meetingcostProjects:[],costProjefoodcostProjectscts:[],otherfoodcostProjects:[],transportationcostProjects:[],carcostProjects:[],othercostProjects:[],dijielist:[],addSettleRules:{projectClass:[{required:!0,message:"请选择项目分类",trigger:"change"}],costDate:[{required:!0,message:"请选择费用发生日期",trigger:"change"}],costProject:[{required:!0,message:"请选择费用项目",trigger:"change"}]},addSettleInfo:{projectClass:"0034",costDate:"",costProject:""},needCostDate:!0}},computed:{issubmit:function(){return this.info.settlement_status!=this.status_supplement},readonly:function(){return["0020-2","0020-3","0020-5","0020-6","0020-8"].includes(this.info.orderstatus)},issupplement:function(){return this.info.settlement_status==this.status_supplement},isshowPriceInfo:function(){return this.showPriceInfo="0020-1"!=this.info.orderstatus,"0020-1"!=this.info.orderstatus},formateDate:function(){return function(t){return Object(r["d"])("YYYY年mm月dd日",new Date(t))}},roomVisible:function(){return this.info.roomlist&&this.info.roomlist.length>0},conferenceVisible:function(){return this.info.conferencelist&&this.info.conferencelist.length>0},foodVisible:function(){return this.info.foodlist&&this.info.foodlist.length>0},otherfoodVisible:function(){return this.info.otherfoodlist&&this.info.otherfoodlist.length>0},transportationVisible:function(){return this.info.transportationlist&&this.info.transportationlist.length>0},carVisible:function(){return this.info.carlist&&this.info.carlist.length>0},otherVisible:function(){return this.info.otherlist&&this.info.otherlist.length>0},roomincidental:function(){return this.info.sundrieslist.filter((function(t){return 1==t.type&&!t.isdelete}))},meetingcidental:function(){return this.info.sundrieslist.filter((function(t){return 2==t.type&&!t.isdelete}))},foodincidental:function(){return this.info.sundrieslist.filter((function(t){return 3==t.type&&!t.isdelete}))},otherfoodincidental:function(){return this.info.sundrieslist.filter((function(t){return 7==t.type&&!t.isdelete}))},intercitytrafficincidental:function(){return this.info.sundrieslist.filter((function(t){return 4==t.type&&!t.isdelete}))},carincidental:function(){return this.info.sundrieslist.filter((function(t){return 5==t.type&&!t.isdelete}))},otherincidental:function(){return this.info.sundrieslist.filter((function(t){return 6==t.type&&!t.isdelete}))},roomPrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,s=e[1].subtotal;void 0==this.info.event_info_configure.room_inquiry_service_taxrate&&(this.info.event_info_configure["room_inquiry_service_taxrate"]=0);var o=null!=this.info.event_info_configure.room_inquiry_service_taxrate?this.info.event_info_configure.room_inquiry_service_taxrate:0;this.info.roomlist.forEach((function(o,n){i["sub_".concat(n)]||(i["sub_".concat(n)]=0),s["sub_".concat(n)]||(s["sub_".concat(n)]=0),o.roomlists.forEach((function(o,a){var l=0;l=0==t.info.is_Inside_outside?o.settlement_count:Object(r["m"])(o.settlement_inside_roomcount)+Object(r["m"])(o.settlement_outside_roomcount);var c=1==o.lineoroffline?Object(r["o"])(o.settlementsumprice):Object(r["o"])(o.settlement_unitprice)*Object(r["m"])(l);i["sub_".concat(n)]+=Object(r["o"])(o.quotationsumprice),e[0].all+=Object(r["o"])(o.quotationsumprice),s["sub_".concat(n)]+=Object(r["o"])(c),e[1].all+=Object(r["o"])(c),1==t.info.event_info_configure.hotel_food_inquiry_isnotservice&&(e[3]+=Object(r["o"])(c),e[4]+=Object(r["o"])(o.quotationsumprice),e[5]+=Object(r["o"])(o.quotationsumprice),e[6]+=Object(r["o"])(c))}))}));var n=0;return e[3]=Object(r["o"])(e[3])*Object(r["o"])(o/100),e[4]=Object(r["o"])(e[4])*Object(r["o"])(o/100),this.roomincidental.forEach((function(t){var i=1==t.lineoroffline?Object(r["o"])(t.sumprice):Object(r["o"])(t.price)*Object(r["m"])(t.count);e[1].all+=Object(r["o"])(i),e[2]+=Object(r["o"])(i),1==t.isnotservice&&(n+=Object(r["o"])(i),e[6]+=Object(r["o"])(i))})),e[3]=Object(r["o"])(e[3])+Object(r["o"])(n)*Object(r["o"])(o/100),e[7]+="+"+Object(r["o"])(e[5])+"*"+Object(r["o"])(o)+"%",e[8]+="+"+Object(r["o"])(e[6])+"*"+Object(r["o"])(o)+"%",e},adddifferenceerrormsg:function(){return function(t,e,i){var s="";1==t?s=this.formateDate(e)+"客房,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":2==t?s=this.formateDate(e)+"会场,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":3==t?s=this.formateDate(e)+"酒店内餐饮,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":4==t?s=this.formateDate(e)+"大交通,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":5==t?s=this.formateDate(e)+"地面交通,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":6==t?s="其他服务,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":7==t&&(s=this.formateDate(e)+"酒店外餐饮,第"+i+"行,单价(元)或数量存在差异,请填写结算说明"),this.errormsg.push(s)}},addnewitemhasnocommments:function(){return function(t,e,i){var s="";1==t?s=this.formateDate(e)+"新增客房,第"+i+"行,结算说明为必填项,请填写结算说明":2==t?s=this.formateDate(e)+"新增会场,第"+i+"行,结算说明为必填项,请填写结算说明":3==t?s=this.formateDate(e)+"新增酒店内餐饮,第"+i+"行,结算说明为必填项,请填写结算说明":4==t?s=this.formateDate(e)+"新增大交通,第"+i+"行,结算说明为必填项,请填写结算说明":5==t?s=this.formateDate(e)+"新增地面交通,第"+i+"行,结算说明为必填项,请填写结算说明":6==t?s="新增其他服务,第"+i+"行,结算说明为必填项,请选择消费项目名称":7==t&&(s=this.formateDate(e)+"新增酒店外餐饮,第"+i+"行,结算说明为必填项,请填写结算说明"),this.errormsg.push(s)}},addnewitemerrormsg:function(){return function(t,e,i){var s="";1==t?s=this.formateDate(e)+"新增客房,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":2==t?s=this.formateDate(e)+"新增会场,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":3==t?s=this.formateDate(e)+"新增酒店内餐饮,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":4==t?s=this.formateDate(e)+"新增大交通,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":5==t?s=this.formateDate(e)+"新增地面交通,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":6==t?s="新增其他服务,第"+i+"行,消费项目名称为必填项,请选择消费项目名称":7==t&&(s=this.formateDate(e)+"新增酒店外餐饮,第"+i+"行,消费项目名称为必填项,请填写消费项目名称"),this.errormsg.push(s)}},roomDifference:function(){return function(t){return(Object(r["o"])(t.unitprice)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.provide_count)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_room_id||!t.quoted_price_room_id&&""==t.settlement_comments}},checkRoomDifference:function(){var t=this,e=!1;this.info.roomlist&&this.info.roomlist.length>0&&this.info.roomlist.forEach((function(i){if(i.roomlists&&i.roomlists.length>0){i.roomlists.forEach((function(s,o){e=t.roomDifference(s),!e||null==s.quoted_price_room_id||null!=s.settlement_comments&&""!=s.settlement_comments||t.adddifferenceerrormsg(1,i.date,o+1),!e||null!=s.quoted_price_room_id||null!=s.settlement_comments&&""!=s.settlement_comments||t.addnewitemhasnocommments(1,i.date,o+1)}));var s=i.roomlists.filter((function(t){return null==t.quoted_price_room_id&&""==t.settlement_itemname}));s.length>0&&s.forEach((function(e,s){t.addnewitemerrormsg(1,i.date,s+1)}))}}))},conferencePrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,s=e[1].subtotal;void 0==this.info.event_info_configure.conference_inquiry_service_taxrate&&(this.info.event_info_configure["conference_inquiry_service_taxrate"]=0);var o=null!=this.info.event_info_configure.conference_inquiry_service_taxrate?this.info.event_info_configure.conference_inquiry_service_taxrate:0;this.info.conferencelist.forEach((function(o,n){i["sub_".concat(n)]||(i["sub_".concat(n)]=0),s["sub_".concat(n)]||(s["sub_".concat(n)]=0),o.conferencelists.forEach((function(o){var a=Object(r["o"])(o.quotationsumprice),l=1==o.lineoroffline?Object(r["o"])(o.settlementsumprice):Object(r["o"])(o.settlement_price)*Object(r["m"])(o.settlement_count);i["sub_".concat(n)]+=a,e[0].all+=a,s["sub_".concat(n)]+=l,e[1].all+=l,1==t.info.event_info_configure.conference_inquiry_isnotservice&&(e[3]+=l,e[4]+=a,e[5]+=a,e[6]+=l)}))}));var n=0;return e[3]=Object(r["o"])(e[3])*Object(r["o"])(o/100),e[4]=Object(r["o"])(e[4])*Object(r["o"])(o/100),this.meetingcidental.forEach((function(t){var i=1==t.lineoroffline?Object(r["o"])(t.sumprice):Object(r["o"])(t.price)*Object(r["m"])(t.count);e[1].all+=i,e[2]+=i,1==t.isnotservice&&(n+=i,e[6]+=i)})),e[3]=Object(r["o"])(e[3])+Object(r["o"])(n)*Object(r["o"])(o/100),e[7]="+"+Object(r["o"])(e[5])+"*"+Object(r["o"])(o)+"%",e[8]="+"+Object(r["o"])(e[6])+"*"+Object(r["o"])(o)+"%",e},conferenceDifference:function(){return function(t){return(Object(r["o"])(t.price)!==Object(r["o"])(t.settlement_price)||Object(r["m"])(t.count)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_conference_id||!t.quoted_price_conference_id&&""==t.settlement_comments}},checkConferenceDifference:function(){var t=this,e=!1;this.info.conferencelist&&this.info.conferencelist.length>0&&this.info.conferencelist.forEach((function(i){if(i.conferencelists&&i.conferencelists.length>0){i.conferencelists.forEach((function(s,o){e=t.conferenceDifference(s),!e||null==s.quoted_price_conference_id||null!=s.settlement_comments&&""!=s.settlement_comments||t.adddifferenceerrormsg(2,i.date,o+1),!e||null!=s.quoted_price_conference_id||null!=s.settlement_comments&&""!=s.settlement_comments||t.addnewitemhasnocommments(2,i.date,o+1)}));var s=i.conferencelists.filter((function(t){return null==t.quoted_price_conference_id&&""==t.settlement_itemname}));s.length>0&&s.forEach((function(e,s){t.addnewitemerrormsg(2,i.date,s+1)}))}}))},foodPrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,s=e[1].subtotal;void 0==this.info.event_info_configure.hotel_food_inquiry_service_taxrate&&(this.info.event_info_configure["hotel_food_inquiry_service_taxrate"]=0);var o=null!=this.info.event_info_configure.hotel_food_inquiry_service_taxrate?this.info.event_info_configure.hotel_food_inquiry_service_taxrate:0;this.info.foodlist.forEach((function(o,n){i["sub_".concat(n)]||(i["sub_".concat(n)]=0),s["sub_".concat(n)]||(s["sub_".concat(n)]=0),o.foodlists.forEach((function(o){var a=Object(r["o"])(o.quotationsumprice),l=1==o.lineoroffline?Object(r["o"])(o.settlementsumprice):Object(r["o"])(o.settlement_unitprice)*Object(r["m"])(o.settlement_count);i["sub_".concat(n)]+=a,e[0].all+=a,s["sub_".concat(n)]+=l,e[1].all+=l,1==t.info.event_info_configure.hotel_food_inquiry_isnotservice&&(e[3]+=l,e[4]+=a,e[5]+=a,e[6]+=l)}))}));var n=0;return e[3]=Object(r["o"])(e[3])*Object(r["o"])(o/100),e[4]=Object(r["o"])(e[4])*Object(r["o"])(o/100),this.foodincidental.forEach((function(t){var i=1==t.lineoroffline?Object(r["o"])(t.sumprice):Object(r["o"])(t.price)*Object(r["m"])(t.count);e[1].all+=i,e[2]+=i,1==t.isnotservice&&(n+=i,e[6]+=i)})),e[3]=Object(r["o"])(e[3])+Object(r["o"])(n)*Object(r["o"])(o/100),e[7]+="+"+Object(r["o"])(e[5])+"*"+Object(r["o"])(o)+"%",e[8]+="+"+Object(r["o"])(e[6])+"*"+Object(r["o"])(o)+"%",e},foodDifference:function(){return function(t){return(Object(r["o"])(t.price)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.personcount)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_food_id||!t.quoted_price_food_id&&""==t.settlement_comments}},checkFoodDifference:function(){var t=this,e=!1;this.info.foodlist&&this.info.foodlist.length>0&&this.info.foodlist.forEach((function(i){if(i.foodlists&&i.foodlists.length>0){i.foodlists.forEach((function(s,o){e=t.foodDifference(s),!e||null==s.quoted_price_food_id||null!=s.settlement_comments&&""!=s.settlement_comments||t.adddifferenceerrormsg(3,i.date,o+1),!e||null!=s.quoted_price_food_id||null!=s.settlement_comments&&""!=s.settlement_comments||t.addnewitemhasnocommments(3,i.date,o+1)}));var s=i.foodlists.filter((function(t){return null==t.quoted_price_food_id&&""==t.settlement_itemname}));s.length>0&&s.forEach((function(e,s){t.addnewitemerrormsg(3,i.date,s+1)}))}}))},otherfoodPrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,s=e[1].subtotal;void 0==this.info.event_info_configure.others_food_inquiry_service_taxrate&&(this.info.event_info_configure["others_food_inquiry_service_taxrate"]=0);var o=null!=this.info.event_info_configure.others_food_inquiry_service_taxrate?this.info.event_info_configure.others_food_inquiry_service_taxrate:0;this.info.otherfoodlist.forEach((function(o,n){i["sub_".concat(n)]||(i["sub_".concat(n)]=0),s["sub_".concat(n)]||(s["sub_".concat(n)]=0),o.foodlists.forEach((function(o){var a=Object(r["o"])(o.quotationsumprice),l=1==o.lineoroffline?Object(r["o"])(o.settlementsumprice):Object(r["o"])(o.settlement_unitprice)*Object(r["m"])(o.settlement_count);i["sub_".concat(n)]+=a,e[0].all+=a,s["sub_".concat(n)]+=l,e[1].all+=l,1==t.info.event_info_configure.others_food_inquiry_isnotservice&&(e[3]+=l,e[4]+=a,e[5]+=a,e[6]+=l)}))}));var n=0;return e[3]=Object(r["o"])(e[3])*Object(r["o"])(o/100),e[4]=Object(r["o"])(e[4])*Object(r["o"])(o/100),this.otherfoodincidental.forEach((function(t){var i=1==t.lineoroffline?Object(r["o"])(t.sumprice):Object(r["o"])(t.price)*Object(r["m"])(t.count);e[1].all+=i,e[2]+=i,1==t.isnotservice&&(n+=i,e[6]+=i)})),e[3]=Object(r["o"])(e[3])+Object(r["o"])(n)*Object(r["o"])(o/100),e[7]+="+"+Object(r["o"])(e[5])+"*"+Object(r["o"])(o)+"%",e[8]+="+"+Object(r["o"])(e[6])+"*"+Object(r["o"])(o)+"%",e},otherFoodDifference:function(){return function(t){return(Object(r["o"])(t.price)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.personcount)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_food_id||!t.quoted_price_food_id&&""==t.settlement_comments}},checkOtherFoodDifference:function(){var t=this,e=!1;this.info.otherfoodlist&&this.info.otherfoodlist.length>0&&this.info.otherfoodlist.forEach((function(i){if(i.foodlists&&i.foodlists.length>0){i.foodlists.forEach((function(s,o){e=t.otherFoodDifference(s),!e||null==s.quoted_price_food_id||null!=s.settlement_comments&&""!=s.settlement_comments||t.adddifferenceerrormsg(7,i.date,o+1),!e||null!=s.quoted_price_food_id||null!=s.settlement_comments&&""!=s.settlement_comments||t.addnewitemhasnocommments(7,i.date,o+1)}));var s=i.foodlists.filter((function(t){return null==t.quoted_price_food_id&&""==t.settlement_itemname}));s.length>0&&s.forEach((function(e,s){t.addnewitemerrormsg(7,i.date,s+1)}))}}))},intercitytrafficPrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,s=e[1].subtotal;void 0==this.info.event_info_configure.transportation_inquiry_service_taxrate&&(this.info.event_info_configure["transportation_inquiry_service_taxrate"]=0);var o=null!=this.info.event_info_configure.transportation_inquiry_service_taxrate?this.info.event_info_configure.transportation_inquiry_service_taxrate:0;this.info.transportationlist.forEach((function(o,n){i["sub_".concat(n)]||(i["sub_".concat(n)]=0),s["sub_".concat(n)]||(s["sub_".concat(n)]=0),o.tranlists.forEach((function(o){var a=Object(r["o"])(o.quotationsumprice),l=1==o.lineoroffline?Object(r["o"])(o.settlementsumprice):Object(r["o"])(o.settlement_unitprice)*Object(r["m"])(o.settlement_count);i["sub_".concat(n)]+=a,e[0].all+=a,s["sub_".concat(n)]+=l,e[1].all+=l,1==t.info.event_info_configure.transportation_inquiry_isnotservice&&(e[3]+=l,e[4]+=a,e[5]+=a,e[6]+=l)}))}));var n=0;return e[3]=Object(r["o"])(e[3])*Object(r["o"])(o/100),e[4]=Object(r["o"])(e[4])*Object(r["o"])(o/100),this.intercitytrafficincidental.forEach((function(t){var i=1==t.lineoroffline?Object(r["o"])(t.sumprice):Object(r["o"])(t.price)*Object(r["m"])(t.count);e[1].all+=i,e[2]+=i,1==t.isnotservice&&(n+=i,e[6]+=i)})),e[3]=Object(r["o"])(e[3])+Object(r["o"])(n)*Object(r["o"])(o/100),e[7]="+"+Object(r["o"])(e[5])+"*"+Object(r["o"])(o)+"%",e[8]="+"+Object(r["o"])(e[6])+"*"+Object(r["o"])(o)+"%",e},transportationDifference:function(){return function(t){return(Object(r["o"])(t.unitprice)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.passengercount)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_transportation_id||!t.quoted_price_transportation_id&&""==t.settlement_comments}},checkTransportationDifference:function(){var t=this,e=!1;this.info.transportationlist&&this.info.transportationlist.length>0&&this.info.transportationlist.forEach((function(i){if(i.tranlists&&i.tranlists.length>0){i.tranlists.forEach((function(s,o){e=t.transportationDifference(s),!e||null==s.quoted_price_transportation_id||null!=s.settlement_comments&&""!=s.settlement_comments||t.adddifferenceerrormsg(4,i.date,o+1),!e||null!=s.quoted_price_transportation_id||null!=s.settlement_comments&&""!=s.settlement_comments||t.addnewitemhasnocommments(4,i.date,o+1)}));var s=i.tranlists.filter((function(t){return null==t.quoted_price_transportation_id&&null==t.settlement_itemid}));s.length>0&&s.forEach((function(e,s){t.addnewitemerrormsg(4,i.date,s+1)}))}}))},carPrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,s=e[1].subtotal;void 0==this.info.event_info_configure.car_inquiry_service_taxrate&&(this.info.event_info_configure["car_inquiry_service_taxrate"]=0);var o=null!=this.info.event_info_configure.car_inquiry_service_taxrate?this.info.event_info_configure.car_inquiry_service_taxrate:0;this.info.carlist.forEach((function(o,n){i["sub_".concat(n)]||(i["sub_".concat(n)]=0),s["sub_".concat(n)]||(s["sub_".concat(n)]=0),o.carlists.forEach((function(o){var a=Object(r["o"])(o.quotationsumprice),l=1==o.lineoroffline?Object(r["o"])(o.settlementsumprice):Object(r["o"])(o.settlement_unitprice)*Object(r["m"])(o.settlement_count);i["sub_".concat(n)]+=a,e[0].all+=a,s["sub_".concat(n)]+=l,e[1].all+=l,1==t.info.event_info_configure.car_inquiry_isnotservice&&(e[3]+=l,e[4]+=a,e[5]+=a,e[6]+=l)}))}));var n=0;return e[3]=Object(r["o"])(e[3])*Object(r["o"])(o/100),e[4]=Object(r["o"])(e[4])*Object(r["o"])(o/100),this.carincidental.forEach((function(t){var i=1==t.lineoroffline?Object(r["o"])(t.sumprice):Object(r["o"])(t.price)*Object(r["m"])(t.count);e[1].all+=i,e[2]+=i,1==t.isnotservice&&(n+=i,e[6]+=i)})),e[3]=Object(r["o"])(e[3])+Object(r["o"])(n)*Object(r["o"])(o/100),e[7]+="+"+Object(r["o"])(e[5])+"*"+Object(r["o"])(o)+"%",e[8]+="+"+Object(r["o"])(e[6])+"*"+Object(r["o"])(o)+"%",e},carDifference:function(){return function(t){return(Object(r["o"])(t.price)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.carcount)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_car_id||!t.quoted_price_car_id&&""==t.settlement_comments}},checkCarDifference:function(){var t=this,e=!1;this.info.carlist&&this.info.carlist.length>0&&this.info.carlist.forEach((function(i){if(i.carlists&&i.carlists.length>0){i.carlists.forEach((function(s,o){e=t.carDifference(s),!e||null==s.quoted_price_car_id||null!=s.settlement_comments&&""!=s.settlement_comments||t.adddifferenceerrormsg(5,i.date,o+1),!e||null!=s.quoted_price_car_id||null!=s.settlement_comments&&""!=s.settlement_comments||t.addnewitemhasnocommments(5,i.date,o+1)}));var s=i.carlists.filter((function(t){return null==t.quoted_price_car_id&&""==t.settlement_itemname}));s.length>0&&s.forEach((function(e,s){t.addnewitemerrormsg(5,i.date,s+1)}))}}))},otherPrice:function(){var t=this,e=[0,0,0,0,0,0,0,"",""],i=0,s=0,o=0;return this.info.otherlist.forEach((function(s,n){void 0==s.settlementservice_taxrate&&(s["settlementservice_taxrate"]=0),s.settlementservice_taxrate=null!=s.settlementservice_taxrate?s.settlementservice_taxrate:0,void 0==s.service_taxrate&&(s["service_taxrate"]=0),s.service_taxrate=null!=s.service_taxrate?s.service_taxrate:0;var a=null!=s.quoted_price_other_id?s.service_taxrate:s.settlementservice_taxrate,l=Object(r["o"])(s.quotationsumprice),c=1==s.lineoroffline?Object(r["o"])(s.settlementsumprice):Object(r["o"])(s.settlement_unitprice)*Object(r["m"])(s.settlement_count);e[0]=e[0]+l,e[1]=e[1]+c,t.info.eventinfoother.forEach((function(e,i){s.servicetype==e.othercode&&(t.info.otherlist[n].settlementservice_taxrate=e.servicerate)})),1==s.isnotservice&&(i+=Object(r["o"])(c)*Object(r["o"])(a/100),o+=Object(r["o"])(l)*Object(r["o"])(a/100),e[5]+=l,e[6]+=c,e[7]+="+"+Object(r["o"])(l)+"*"+Object(r["o"])(a)+"%",e[8]+="+"+Object(r["o"])(c)+"*"+Object(r["o"])(a)+"%")})),this.otherincidental.forEach((function(t){void 0==t.settlementservice_taxrate&&(t["settlementservice_taxrate"]=0),t.settlementservice_taxrate=null!=t.settlementservice_taxrate?t.settlementservice_taxrate:0;var i=1==t.lineoroffline?Object(r["o"])(t.sumprice):Object(r["o"])(t.price)*Object(r["m"])(t.count);e[1]=e[1]+i,e[2]=e[2]+i,1==t.isnotservice&&(s+=Object(r["o"])(i)*Object(r["o"])(t.settlementservice_taxrate/100),console.log(t.settlementservice_taxrate),e[6]+=i,e[8]+="+"+Object(r["o"])(i)+"*"+Object(r["o"])(t.settlementservice_taxrate)+"%")})),e[3]=Object(r["o"])(i)+Object(r["o"])(s),e[4]=Object(r["o"])(o),e},otherDifference:function(){return function(t){return Object(r["o"])(t.price)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.offerservicedaycount)*Object(r["m"])(t.offerparticipatecount)!==Object(r["m"])(t.settlement_count)||!t.quoted_price_other_id&&""==t.settlement_comments}},checkOtherDifference:function(){var t=this,e=!1;if(this.info.otherlist&&this.info.otherlist.length>0){this.info.otherlist.forEach((function(i,s){e=t.otherDifference(i),!e||null==i.quoted_price_other_id||null!=i.settlement_comments&&""!=i.settlement_comments||t.adddifferenceerrormsg(6,null,s+1),!e||null!=i.quoted_price_other_id||null!=i.settlement_comments&&""!=i.settlement_comments||t.addnewitemhasnocommments(6,null,s+1)}));var i=this.info.otherlist.filter((function(t){return null==t.quoted_price_other_id&&!t.servicetype}));i.length>0&&i.forEach((function(e,i){t.addnewitemerrormsg(6,null,i+1)}))}},servicePrice:function(){var t=this,e=[0,0,"","",0,0,"","",0,0];if(0==this.info.event_info_configure.service_fee_calculation_method)e[0]=Object(r["o"])(this.roomPrice[4])+Object(r["o"])(this.conferencePrice[4])+Object(r["o"])(this.foodPrice[4])+Object(r["o"])(this.otherfoodPrice[4])+Object(r["o"])(this.intercitytrafficPrice[4])+Object(r["o"])(this.carPrice[4])+Object(r["o"])(this.otherPrice[4]),e[1]=Object(r["o"])(this.roomPrice[3])+Object(r["o"])(this.conferencePrice[3])+Object(r["o"])(this.foodPrice[3])+Object(r["o"])(this.otherfoodPrice[3])+Object(r["o"])(this.intercitytrafficPrice[3])+Object(r["o"])(this.carPrice[3])+Object(r["o"])(this.otherPrice[3]),e[2]=this.roomPrice[7]+this.conferencePrice[7]+this.foodPrice[7]+this.otherfoodPrice[7]+this.intercitytrafficPrice[7]+this.carPrice[7]+this.otherPrice[7],e[3]=this.roomPrice[8]+this.conferencePrice[8]+this.foodPrice[8]+this.otherfoodPrice[8]+this.intercitytrafficPrice[8]+this.carPrice[8]+this.otherPrice[8];else if(1==this.info.event_info_configure.service_fee_calculation_method){this.info.event_info_ladder_taxrates&&this.info.event_info_ladder_taxrates.sort((function(t,e){var i=t["ladder_min"],s=e["ladder_min"];return i-s}));var i=this.price_no[2],s=this.price_no[3];this.info.event_info_ladder_taxrates.forEach((function(o,n){var a=0,l=0;t.info.event_info_ladder_taxrates[n-1]?(a=Object(r["p"])(o.ladder_max)-Object(r["p"])(t.info.event_info_ladder_taxrates[n-1].ladder_max?t.info.event_info_ladder_taxrates[n-1].ladder_max:0),l=Object(r["p"])(o.ladder_max)-Object(r["p"])(t.info.event_info_ladder_taxrates[n-1].ladder_max?t.info.event_info_ladder_taxrates[n-1].ladder_max:0)):(a=Object(r["p"])(o.ladder_max)-0,l=Object(r["p"])(o.ladder_max)-0),Object(r["p"])(i)>=Object(r["p"])(a)?t.info.event_info_ladder_taxrates.length-1==n?(e[0]+=Object(r["p"])(i)*Object(r["p"])(o.ladder_taxrate/100),e[2]+="+"+Object(r["o"])(i)+"*"+Object(r["o"])(o.ladder_taxrate)+"%"):(i=Object(r["p"])(i)-Object(r["p"])(a),e[0]+=Object(r["p"])(a)*Object(r["p"])(o.ladder_taxrate/100),e[2]+="+"+Object(r["o"])(a)+"*"+Object(r["o"])(o.ladder_taxrate)+"%"):(e[0]+=Object(r["p"])(i)*Object(r["p"])(o.ladder_taxrate/100),e[2]+="+"+Object(r["o"])(i)+"*"+Object(r["o"])(o.ladder_taxrate)+"%",i=0),Object(r["p"])(s)>=Object(r["p"])(l)?t.info.event_info_ladder_taxrates.length-1==n?(e[1]+=Object(r["p"])(s)*Object(r["p"])(o.ladder_taxrate/100),e[3]+="+"+Object(r["o"])(s)+"*"+Object(r["o"])(o.ladder_taxrate)+"%"):(s=Object(r["p"])(s)-Object(r["p"])(l),e[1]+=Object(r["p"])(l)*Object(r["p"])(o.ladder_taxrate/100),e[3]+="+"+Object(r["o"])(l)+"*"+Object(r["o"])(o.ladder_taxrate)+"%"):(e[1]+=Object(r["p"])(s)*Object(r["p"])(o.ladder_taxrate/100),e[3]+="+"+Object(r["o"])(s)+"*"+Object(r["o"])(o.ladder_taxrate)+"%",s=0)}))}else if(2==this.info.event_info_configure.service_fee_calculation_method){i=this.price_no[2],s=this.price_no[3];for(var o=0;o<this.info.event_info_grade_taxrates.length;o++)if(o==this.info.event_info_grade_taxrates.length-1||Object(r["o"])(i)>=this.info.event_info_grade_taxrates[o].grade_money&&Object(r["o"])(i)<this.info.event_info_grade_taxrates[o+1].grade_money){e[0]=Object(r["o"])(i)*this.info.event_info_grade_taxrates[o].grade_taxrate/100*this.info.fzc_service/100,e[2]=Object(r["m"])(i)+"*"+this.info.event_info_grade_taxrates[o].grade_taxrate+"%",1==this.info.event_info_configure.service_fee_ratio&&(e[2]+="*"+this.info.fzc_service+"%"),1==this.info.event_info_configure.minimum_service_fee&&e[0]<this.info.event_info_configure.minimum_service_fee_money&&(e[0]=this.info.event_info_configure.minimum_service_fee_money);break}for(o=0;o<this.info.event_info_grade_taxrates.length;o++)if(o==this.info.event_info_grade_taxrates.length-1||Object(r["o"])(s)>=this.info.event_info_grade_taxrates[o].grade_money&&Object(r["o"])(s)<this.info.event_info_grade_taxrates[o+1].grade_money){e[1]=Object(r["o"])(s)*this.info.event_info_grade_taxrates[o].grade_taxrate/100*this.info.sheet_fzc_service/100,e[3]=Object(r["m"])(s)+"*"+this.info.event_info_grade_taxrates[o].grade_taxrate+"%",1==this.info.event_info_configure.minimum_service_fee&&e[1]<this.info.event_info_configure.minimum_service_fee_money&&(e[1]=this.info.event_info_configure.minimum_service_fee_money);break}}return 1==this.info.zhicai_service&&(this.info.event_quoted_price_zhicai_service.forEach((function(t){var i;e[8]+=null!==(i=t.grade_price*t.grade_count)&&void 0!==i?i:0})),this.info.event_settlement_sheet_zhicai_service.forEach((function(t){var i;e[9]+=null!==(i=t.grade_price*t.grade_count)&&void 0!==i?i:0}))),e[2]=e[2].replace("+",""),e[3]=e[3].replace("+",""),this.info.quoted_travelagency_payment_money||(this.info.quoted_travelagency_payment_money=0),this.info.quoted_travelagency_payment_proportion||(this.info.quoted_travelagency_payment_proportion=0),e[4]=Object(r["p"])(this.info.quoted_travelagency_payment_money)*Object(r["p"])(this.info.quoted_travelagency_payment_proportion/100),e[5]=Object(r["p"])(this.info.settlement_advance_amount)*Object(r["p"])(this.info.settlement_advance_proportion/100),e[6]=Object(r["o"])(this.info.quoted_travelagency_payment_money)+"*"+Object(r["o"])(this.info.quoted_travelagency_payment_proportion)+"%",e[7]=Object(r["o"])(this.info.settlement_advance_amount)+"*"+Object(r["o"])(this.info.settlement_advance_proportion)+"%",this.info.feizhicai_service=e[1],e},vatPrice:function(){var t=[0,0,"",""];return t[0]=(Object(r["p"])(this.roomPrice[0].all)+Object(r["p"])(this.conferencePrice[0].all)+Object(r["p"])(this.foodPrice[0].all)+Object(r["p"])(this.otherfoodPrice[0].all)+Object(r["p"])(this.intercitytrafficPrice[0].all)+Object(r["p"])(this.carPrice[0].all)+Object(r["p"])(this.otherPrice[0])+(0==this.info.zhicai_service?Object(r["p"])(this.servicePrice[4]):Object(r["p"])(this.servicePrice[8])))*this.info.taxrate/100,1!=this.info.event_info_configure.fzc_service_fee_money&&null!=this.info.event_info_configure.fzc_service_fee_money||(t[0]+=Object(r["p"])(this.servicePrice[0])*Object(r["p"])(this.info.taxrate/100)),t[1]=(Object(r["p"])(this.roomPrice[1].all)+Object(r["p"])(this.conferencePrice[1].all)+Object(r["p"])(this.foodPrice[1].all)+Object(r["p"])(this.otherfoodPrice[1].all)+Object(r["p"])(this.intercitytrafficPrice[1].all)+Object(r["p"])(this.carPrice[1].all)+Object(r["p"])(this.otherPrice[1])+(0==this.info.zhicai_service?Object(r["p"])(this.servicePrice[5]):Object(r["p"])(this.servicePrice[9])))*this.info.settlement_taxrate/100,(this.info.event_info_configure.fzc_service_fee_money||null==this.info.event_info_configure.fzc_service_fee_money)&&(t[1]+=Object(r["p"])(this.servicePrice[1])*Object(r["p"])(this.info.settlement_taxrate/100)),t[2]="("+Object(r["m"])(this.price_no[0])+"+"+Object(r["m"])((0==this.info.event_info_configure.fzc_service_fee_money?0:Object(r["o"])(this.servicePrice[0]))+Object(r["o"])(0==this.info.zhicai_service?this.servicePrice[4]:this.servicePrice[8]))+") *"+Object(r["o"])(this.info.taxrate)+"%",t[3]="("+Object(r["m"])(this.price_no[1])+"+"+Object(r["m"])((0==this.info.event_info_configure.fzc_service_fee_money?0:Object(r["o"])(this.servicePrice[1]))+Object(r["o"])(0==this.info.zhicai_service?this.servicePrice[5]:this.servicePrice[9]))+") ",this.info.taxation=t[1],t},price_no:function(){var t=[0,0,0,0];return t[0]=this.roomPrice[0].all+this.conferencePrice[0].all+this.foodPrice[0].all+this.otherfoodPrice[0].all+this.intercitytrafficPrice[0].all+this.carPrice[0].all+this.otherPrice[0],t[1]=this.roomPrice[1].all+this.conferencePrice[1].all+this.foodPrice[1].all+this.otherfoodPrice[1].all+this.intercitytrafficPrice[1].all+this.carPrice[1].all+this.otherPrice[1],console.log(t[1],this.roomPrice[1].all,this.conferencePrice[1].all,this.foodPrice[1].all,this.otherfoodPrice[1].all,this.intercitytrafficPrice[1].all,this.carPrice[1].all,this.otherPrice[1]),this.info.settlement_total_price=t[1],t[2]=this.roomPrice[5]+this.conferencePrice[5]+this.foodPrice[5]+this.otherfoodPrice[5]+this.intercitytrafficPrice[5]+this.carPrice[5]+this.otherPrice[5],t[3]=this.roomPrice[6]+this.conferencePrice[6]+this.foodPrice[6]+this.otherfoodPrice[6]+this.intercitytrafficPrice[6]+this.carPrice[6]+this.otherPrice[6],t},price:function(){var t=[0,0];return t[0]=Object(r["o"])(this.price_no[0])+Object(r["m"])(this.servicePrice[0])+(0===this.info.zhicai_service?Object(r["m"])(this.servicePrice[4]):Object(r["m"])(this.servicePrice[8]))+Object(r["m"])(this.vatPrice[0]),t[1]=Object(r["o"])(this.price_no[1])+Object(r["m"])(this.servicePrice[1])+(0===this.info.zhicai_service?Object(r["m"])(this.servicePrice[5]):Object(r["m"])(this.servicePrice[9]))+Object(r["m"])(this.vatPrice[1]),this.info.total_amount=t[1],t}},methods:{guid:r["k"],positiveInteger:r["q"],positiveFloatOne:r["n"],positiveFloatSix:r["o"],positiveFloat:r["m"],formatNum:r["e"],positiveFloatZero:r["p"],excelExport:f["a"],getFormatDate:r["g"],limitsEffect:d["a"],changekefang:function(t,e){var i=this.roomcostProjects.filter((function(e){return e.code==t}));e.settlement_itemname=i[0].name},changehuichang:function(t,e){var i=this.meetingcostProjects.filter((function(e){return e.code==t}));e.settlement_itemname=i[0].name},changehotelnei:function(t,e){var i=this.foodcostProjects.filter((function(e){return e.code==t}));e.settlement_itemname=i[0].name},changehotelwai:function(t,e){var i=this.otherfoodcostProjects.filter((function(e){return e.code==t}));e.settlement_itemname=i[0].name},changebigcar:function(t,e){var i=this.transportationcostProjects.filter((function(e){return e.code==t}));food.settlement_itemname=i[0].name},changecar:function(t,e){var i=this.carcostProjects.filter((function(e){return e.code==t}));food.settlement_itemname=i[0].name},openAddSettle:function(){var t=this;this.cost_project_load=!0;var e=Object(r["g"])(this.info.event_info.event_startdate).slice(0,10),i=Object(r["g"])(this.info.event_info.event_enddate).slice(0,10),s=_()(e).subtract(3,"days").format("YYYY-MM-DD"),o=_()(i).add(1,"days").format("YYYY-MM-DD"),n=Object(r["f"])(s,o);this.costDates=[],n.forEach((function(e,i){t.costDates.push({value:e,label:e})})),this.changeProjectClass(),this.addSettleShow=!0},changecostProject:function(){"zafei"==this.addSettleInfo.costProject||"009"==this.addSettleInfo.projectClass?(this.needCostDate=!1,this.addSettleRules.costDate[0].required=!1):(this.needCostDate=!0,this.addSettleRules.costDate[0].required=!0)},changeProjectClass:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={"0034":{selects:"roomcostProjects"},"0049":{selects:"meetingcostProjects"},"0050":{selects:"foodcostProjects"},"0051":{selects:"otherfoodcostProjects"},"003":{selects:"transportationcostProjects"},"006":{selects:"carcostProjects"},"009":{selects:"othercostProjects"}},"009"==t.addSettleInfo.projectClass?(t.needCostDate=!1,t.addSettleRules.costDate[0].required=!1):(t.needCostDate=!0,t.addSettleRules.costDate[0].required=!0),t.cost_project_load=!0,{code:t.addSettleInfo.projectClass},t.addSettleInfo.projectClass,e.next=7,t.$api.getCostProjects({code:t.addSettleInfo.projectClass,meetingid:"009"==t.addSettleInfo.projectClass?t.info.meeting_id:""},"POST");case 7:s=e.sent,t.cost_project_load=!1,t.costProjects=s.map((function(t){return t.value=t.code,t.label=t.name,t})),t[i[t.addSettleInfo.projectClass].selects]=s.map((function(t){return t.value=t.code,t.label=t.name,t})),t.costProjects.push({label:"杂费",value:"zafei"}),t.addSettleInfo.costProject=t.costProjects[0].value;case 13:case"end":return e.stop()}}),e)})))()},initCostProject:function(){var t=this;this.$api.getCostProjects({code:""},"POST").then((function(e){var i=e.filter((function(t){return"0034"==t.event_dictionary_code})),s=e.filter((function(t){return"0049"==t.event_dictionary_code})),o=e.filter((function(t){return"0050"==t.event_dictionary_code})),n=e.filter((function(t){return"0051"==t.event_dictionary_code})),a=e.filter((function(t){return"003"==t.event_dictionary_code})),r=e.filter((function(t){return"006"==t.event_dictionary_code})),l=e.filter((function(t){return"009"==t.event_dictionary_code}));t.roomcostProjects=i.map((function(t){return t.label=t.name,t.value=t.code,t})),t.meetingcostProjects=s.map((function(t){return t.label=t.name,t.value=t.code,t})),t.foodcostProjects=o.map((function(t){return t.label=t.name,t.value=t.code,t})),t.otherfoodcostProjects=n.map((function(t){return t.label=t.name,t.value=t.code,t})),t.transportationcostProjects=a.map((function(t){return t.label=t.name,t.value=t.code,t})),t.carcostProjects=r.map((function(t){return t.label=t.name,t.value=t.code,t})),t.othercostProjects=l.map((function(t){return t.label=t.name,t.value=t.code,t}))}))},addSettle:function(){var t=this,e={"0034":{dataList:"roomlist",addBusinessBlock:"addroomBusiness",addDataBlock:"addroom",selects:"roomcostProjects"},"0049":{dataList:"conferencelist",addBusinessBlock:"addconferenceBusiness",addDataBlock:"addconference",selects:"meetingcostProjects"},"0050":{dataList:"foodlist",addBusinessBlock:"addfoodBusiness",addDataBlock:"addfood",selects:"foodcostProjects"},"0051":{dataList:"otherfoodlist",addBusinessBlock:"addotherfoodBusiness",addDataBlock:"addotherfood",selects:"otherfoodcostProjects"},"003":{dataList:"transportationlist",addBusinessBlock:"addstransportationBusiness",addDataBlock:"addstransportation",selects:"transportationcostProjects"},"006":{dataList:"carlist",addBusinessBlock:"addcarBusiness",addDataBlock:"addcar",selects:"carcostProjects"},"009":{dataList:"otherlist",addBusinessBlock:"addsundryBusiness",addDataBlock:"addsundry",selects:"othercostProjects"}},i={"0034":1,"0049":2,"0050":3,"0051":7,"003":4,"006":5,"009":6};this.$refs.addSettleInfo.validate((function(s){if(s){var o=e[t.addSettleInfo.projectClass];if(o)if(t[o.selects]=Object(n["a"])(t.costProjects),"zafei"==t.addSettleInfo.costProject)t.addOther(i[t.addSettleInfo.projectClass]);else if(t.info[o.dataList]&&t.info[o.dataList].length)if("009"==t.addSettleInfo.projectClass)t[o.addDataBlock](!0);else{var a=t.info[o.dataList].filter((function(e){return t.addSettleInfo.costDate==_()(e.date).format("YYYY-MM-DD")}));a&&a.length?t[o.addDataBlock](a[0],!0):t[o.addBusinessBlock](!0)}else t[o.addBusinessBlock](!0);t.addSettleShow=!1}}))},excelDownload:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!=t.$route.params.issubmit){e.next=6;break}return t.info.settlement_status=t.status_draft,e.next=4,t.save(2);case 4:e.next=8;break;case 6:i="DMC结算单",t.excelExport("/Template/GetTemplate",{eventid:t.info.event_info.id,type:4,param:t.$route.params.id},i);case 8:case"end":return e.stop()}}),e)})))()},downloadSettlementConfirm:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!=t.$route.params.issubmit){e.next=6;break}return t.info.settlement_status=t.status_draft,e.next=4,t.save(1);case 4:e.next=8;break;case 6:i="结算确认单",t.excelExport("/Template/GetTemplate",{eventid:t.info.event_info.id,type:6,param:t.$route.params.id},i);case 8:case"end":return e.stop()}}),e)})))()},handleChangeAttach:function(t,e,i){var s=this;console.log(e,3);var o=t.size/1024/1024<30,n=new Date;if(e[e.length-1].date=n,this.limitsEffect(t)){if(!o)return this.$message.error("上传附件大小不能超过 30MB!"),void this.arrayList.forEach((function(o,n){i==o.type&&s.$refs.upload[n].handleRemove(t,e,i)}));this.arrayList.forEach((function(t,s){i==t.type&&(t.fileList=e)})),this.initFileRename(),console.log(this.fileList,332)}else this.arrayList.forEach((function(o,n){i==o.type&&s.$refs.upload[n].handleRemove(t,e,i)}))},handleRemoveAttach:function(t,e,i){this.arrayList.forEach((function(t,s){i==t.type&&(t.fileList=e)})),this.initFileRename()},getImg:function(t){console.log(t),console.log(t.target.currentSrc);var e=t.target.currentSrc;e&&this.$hevueImgPreview(e)},handlePreview:function(t){var e=this;if(console.log(t,44),t.url){var i=t.url.substring(t.url.lastIndexOf(".")+1),s=["pdf","jpeg","jpg","png","txt"],o=["docx","doc","xls","xlsx","xlsm","ppt","pptx"];t.url=t.url.replace(/http:/,"https:"),this.downloadUrl=t.url,o.includes(i)?this.downloadUrl="https://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(t.url):s.includes(i)?this.downloadUrl=t.url:this.$message.info("文件格式不支持预览，下载后查看"),setTimeout((function(){e.$refs.a_click.click()}),100)}},initFileRename:function(){var t=this;this.$nextTick((function(){var e=document.getElementsByClassName("el-upload-list__item-name")||null;Array.from(e).forEach((function(e,i,s){var o=e.innerText;e.getElementsByTagName("span")[0]||(e.innerHTML+="<span style='color:#199ED8;cursor: pointer;'>重命名</span>"),e.getElementsByTagName("span")[0].addEventListener("click",(function(i){i.stopPropagation(),t.rename=!0,t.fileName=o.slice(0,o.lastIndexOf(".")),t.suffix=o.slice(o.lastIndexOf(".")),console.log(e.getElementsByTagName("span")[0].parentNode.parentNode.parentNode)}))}))}))},fileRename:function(t,e,i){this.rename=!0,this.updateIndex=e,this.updateFileIndex=i,this.fileName=t.name.slice(0,t.name.lastIndexOf(".")),this.suffix=t.name.slice(t.name.lastIndexOf("."))},saveFileName:function(){var t=this;if(this.arrayList[this.updateIndex].fileList[this.updateFileIndex].name=this.fileName+this.suffix,this.info.attachlist.forEach((function(e,i){e.id==t.arrayList[t.updateIndex].fileList[t.updateFileIndex].id&&(t.info.attachlist[i].filename=t.fileName+t.suffix)})),this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw){var e=new File([this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw],this.fileName+this.suffix,{lastModified:this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw.lastModified,lastModifiedDate:this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw.lastModifiedDate,type:this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw.type});this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw=e}this.rename=!1},deleteFile:function(t,e,i,s){i==s&&(this.isFail=0),this.arrayList[e].fileList.splice(i,1)},addOther:function(t){console.log(t,this.info.sundrieslist),this.info.sundrieslist.push({id:this.guid(),type:t,price:0,count:0,comments:"",content:"",isnotservice:0,settlementservice_taxrate:0,lineoroffline:0,sumprice:0})},delOther:function(t){1==this.info.sundrieslist.length?this.info.sundrieslist[0].isdelete=1:this.info.sundrieslist=this.info.sundrieslist.filter((function(e){return e.id!=t}))},addroom:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e){s.next=4;break}return i.addSettleInfo.projectClass="0034",s.next=4,i.changeProjectClass();case 4:t.roomlists.push({settlement_itemid:i.addSettleInfo.costProject,roomtypename:"",totalprice:0,unitprice:0,roomcount:0,inside_roomcount:0,settlement_inside_roomcount:0,outside_roomcount:0,settlement_outside_roomcount:0,settlement_unitprice:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return s.stop()}}),s)})))()},findCostProjectByKey:function(t){var e=this.costProjects.filter((function(e){return t==e.value}));return e&&e.length?e[0]:null},addroomBusiness:function(t){this.info.roomlist.push({date:_()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),roomlists:[{settlement_itemid:this.addSettleInfo.costProject,roomtypename:"",totalprice:0,unitprice:0,roomcount:0,inside_roomcount:0,settlement_inside_roomcount:0,outside_roomcount:0,settlement_outside_roomcount:0,settlement_unitprice:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0}]}),this.info.roomlist=this.info.roomlist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delroom:function(t,e){t.roomlists.splice(e,1)},addconference:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e){s.next=4;break}return i.addSettleInfo.projectClass="0049",s.next=4,i.changeProjectClass();case 4:t.conferencelists.push({settlement_itemid:i.addSettleInfo.costProject,is_important:"",price:0,count:0,settlement_price:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return s.stop()}}),s)})))()},addconferenceBusiness:function(t){this.info.conferencelist.push({date:_()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),conferencelists:[{settlement_itemid:this.addSettleInfo.costProject,is_important:"",price:0,count:0,settlement_price:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0}]}),this.info.conferencelist=this.info.conferencelist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delconference:function(t,e){t.conferencelists.splice(e,1)},addfood:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e){s.next=4;break}return i.addSettleInfo.projectClass="0050",s.next=4,i.changeProjectClass();case 4:t.foodlists.push({settlement_itemid:i.addSettleInfo.costProject,foodtypename:"",addresstype:"0",personcount:0,price:0,settlement_unitprice:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return s.stop()}}),s)})))()},addfoodBusiness:function(t){this.info.foodlist.push({date:_()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),foodlists:[{settlement_itemid:this.addSettleInfo.costProject,foodtypename:"",addresstype:"0",personcount:0,price:0,settlement_unitprice:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0}]}),this.info.foodlist=this.info.foodlist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delfood:function(t,e){t.foodlists.splice(e,1)},addotherfood:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e){s.next=4;break}return i.addSettleInfo.projectClass="0051",s.next=4,i.changeProjectClass();case 4:t.foodlists.push({settlement_itemid:i.addSettleInfo.costProject,foodtypename:"",addresstype:"0",personcount:0,price:0,settlement_unitprice:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return s.stop()}}),s)})))()},addotherfoodBusiness:function(t){this.info.otherfoodlist.push({date:_()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),foodlists:[{settlement_itemid:this.addSettleInfo.costProject,foodtypename:"",addresstype:"0",personcount:0,price:0,settlement_unitprice:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0}]}),this.info.otherfoodlist=this.info.otherfoodlist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delotherfood:function(t,e){t.foodlists.splice(e,1)},addstransportation:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e){s.next=4;break}return i.addSettleInfo.projectClass="003",s.next=4,i.changeProjectClass();case 4:t.tranlists.push({settlement_itemid:i.addSettleInfo.costProject,joinname:"",passengercount:0,unitprice:0,settlement_unitprice:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return s.stop()}}),s)})))()},addstransportationBusiness:function(t){this.info.transportationlist.push({date:_()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),tranlists:[{settlement_itemid:this.addSettleInfo.costProject,joinname:"",passengercount:0,unitprice:0,settlement_unitprice:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0}]}),this.info.transportationlist=this.info.transportationlist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delstransportation:function(t,e){t.tranlists.splice(e,1)},addcar:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e){s.next=4;break}return i.addSettleInfo.projectClass="006",s.next=4,i.changeProjectClass();case 4:t.carlists.push({settlement_itemid:i.addSettleInfo.costProject,purposename:"",carcount:0,price:0,settlement_unitprice:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return s.stop()}}),s)})))()},addcarBusiness:function(t){this.info.carlist.push({date:_()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),carlists:[{settlement_itemid:this.addSettleInfo.costProject,purposename:"",carcount:0,price:0,settlement_unitprice:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0}]}),this.info.carlist=this.info.carlist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delcar:function(t,e){t.carlists.splice(e,1)},addsundry:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){var s,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t){i.next=4;break}return e.addSettleInfo.projectClass="009",i.next=4,e.changeProjectClass();case 4:s=e.findCostProjectByKey(e.addSettleInfo.costProject),o={settlement_itemid:e.addSettleInfo.costProject,settlement_itemname:s.label,servicetype:e.addSettleInfo.costProject,servicetypename:s.label,offerparticipatecount:0,offerservicedaycount:0,price:0,settlement_unitprice:"0",settlement_count:"0",settlement_comments:"",isnotservice:s.isnotservice,service_taxrate:0,lineoroffline:0,settlementservice_taxrate:0,quotationsumprice:0,settlementsumprice:0,two_level_code:""},e.othercostProjects.forEach((function(t,i){console.log(e.addSettleInfo.costProject),e.addSettleInfo.costProject==t.code&&(o.servicetypename=t.name,o.detail=t.detail,o.two_level_code="",o.isnotservice=t.isnotservice)})),e.info.otherlist.push(o);case 8:case"end":return i.stop()}}),i)})))()},addsundryBusiness:function(t){this.info.otherlist.push({settlement_itemid:this.addSettleInfo.costProject,settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,servicetype:this.addSettleInfo.costProject,servicetypename:this.findCostProjectByKey(this.addSettleInfo.costProject).label,offerparticipatecount:0,offerservicedaycount:0,price:0,settlement_unitprice:"0",settlement_count:"0",settlement_comments:"",isnotservice:0,service_taxrate:0,lineoroffline:0,settlementservice_taxrate:0,quotationsumprice:0,settlementsumprice:0})},delsother:function(t,e){this.info.otherlist.splice(e,1)},submit:function(){var t=this;this.validate()&&(this.info.settlement_status!=this.status_confirm&&(this.info.settlement_status=this.status_tobeconfirmed),this.info.event_info.pocode?this.save():this.$confirm("当前会议活动未录入PO，不能提交结算单，请您先在“我的会议”-》查看详情-》录入PO 后，再返回当前页面提交结算单！","提示",{confirmButtonText:"确定",center:!0,showCancelButton:!1}).then((function(){t.draft(),t.$router.go(-1)})).catch((function(){})))},draft:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.info.settlement_status=t.status_draft,e.next=3,t.save();case 3:case"end":return e.stop()}}),e)})))()},differenceShowErrorMessage:function(){var t="";this.errormsg.forEach((function(e){t+="<p style='padding:5px;'>"+e+"</p>"})),this.$message({message:t,dangerouslyUseHTMLString:!0,type:"error",lockScroll:!1})},validate:function(){return this.errormsg=[],this.checkRoomDifference,this.checkConferenceDifference,this.checkFoodDifference,this.checkOtherFoodDifference,this.checkTransportationDifference,this.checkCarDifference,this.checkOtherDifference,this.errormsg.length>0&&this.differenceShowErrorMessage(),0==this.errormsg.length},save:function(t){var e=this;this.info.pre_settlement_status===this.status_reject&&(this.info.settlement_sheet_id=null),this.info.transportationlist.forEach((function(t,i){t.tranlists.forEach((function(t,s){e.info.trantypelist.forEach((function(o,n){t.settlement_itemid==o.trancode&&(e.info.transportationlist[i].tranlists[s].settlement_itemname||(e.info.transportationlist[i].tranlists[s].settlement_itemname=o.tranname))}))}))})),this.intercitytrafficincidental.forEach((function(t,i){e.info.trantypelist.forEach((function(s,o){t.itemcode==s.trancode&&(e.intercitytrafficincidental[i].content=s.tranname)}))})),this.info.settlement_settlementsheetexplain=this.arrayList[0].remark,this.info.settlement_confirmmail=this.arrayList[1].remark,this.info.settlement_po=this.arrayList[2].remark,this.info.settlement_invoice=this.arrayList[3].remark,this.info.settlement_voucher=this.arrayList[4].remark,this.info.settlement_contract=this.arrayList[5].remark,this.info.settlement_waterbill=this.arrayList[6].remark,this.info.settlement_outsidefoodinvoiceexplain=this.arrayList[7].remark,this.info.settlement_registinvoiceexplain=this.arrayList[8].remark,this.info.settlement_carinvoiceexplain=this.arrayList[9].remark,this.info.settlement_productsvoiceexplain=this.arrayList[10].remark,this.info.settlement_insureinvoiceexplain=this.arrayList[11].remark,this.info.settlement_signexplain=this.arrayList[12].remark,this.info.settlement_photoexplain=this.arrayList[13].remark,this.info.settlement_other=this.arrayList[14].remark,1==this.info.zhicai_service&&(this.info.settlement_advance_amount=this.servicePrice[9],this.info.settlement_advance_proportion=100);var i=[{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]}];i.forEach((function(t,i){if(e.arrayList[i]){e.arrayList[i].fileList.filter((function(t){return""!=t.uid}));if(1==e.arrayList.filter((function(t){return null!=t.arrayLength})).length){var s=null;e.arrayList.forEach((function(t,e){null!=t.arrayLength&&(s=e)})),e.arrayList[i].fileList.length>0&&(i>s||i==s)&&e.arrayList[i].fileList.forEach((function(e,i){t.urLs.push({key:e.uid,file:e.raw})}))}else e.arrayList[i].fileList.length>0&&e.arrayList[i].fileList.forEach((function(e){t.urLs.push({key:e.uid,file:e.raw})}))}})),this.isFail=1,this.arrayList.forEach((function(t,i){e.arrayList[i].arrayLength=null})),Object(l["a"])(i[0].urLs).then((function(t){return console.log(t),t&&void 0!=t.tag?(e.arrayList[0].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[0].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[0].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[0].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[0].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(l["a"])(i[1].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[1].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[1].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[1].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[1].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[1].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(l["a"])(i[2].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[2].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[2].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[2].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[2].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[2].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(l["a"])(i[3].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[3].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[3].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[3].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[3].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[3].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(l["a"])(i[4].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[4].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[4].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[4].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[4].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[4].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(l["a"])(i[5].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[5].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[5].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[5].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[5].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[5].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(l["a"])(i[6].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[6].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[6].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[6].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[6].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[6].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(l["a"])(i[7].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[7].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[7].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[7].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[7].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[7].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(l["a"])(i[8].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[8].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[8].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[8].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[8].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[8].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(l["a"])(i[9].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[9].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[9].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[9].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[9].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[9].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(l["a"])(i[10].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[10].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[10].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[10].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[10].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[10].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(l["a"])(i[11].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[11].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[11].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[11].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[11].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[11].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(l["a"])(i[12].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[12].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[12].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[12].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[12].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[12].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(l["a"])(i[13].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[13].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[13].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[13].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[13].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[13].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(l["a"])(i[14].urLs))})).then((function(t){if(t&&void 0!=t.tag)return e.arrayList[14].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[14].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}));if(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[14].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[14].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[14].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),e.info.attachlist.forEach((function(t){t.create_date=t.create_date?Object(r["g"])(t.create_date):""})),e.info.roomlist&&e.info.roomlist.forEach((function(t){for(var e=0;e<t.roomlists.length;e++)t.roomlists[e].indexs=e+1})),e.info.conferencelist&&e.info.conferencelist.forEach((function(t){for(var e=0;e<t.conferencelists.length;e++)t.conferencelists[e].indexs=e+1})),e.info.foodlist&&e.info.foodlist.forEach((function(t){for(var e=0;e<t.foodlists.length;e++)t.foodlists[e].indexs=e+1})),e.info.otherfoodlist&&e.info.otherfoodlist.forEach((function(t){for(var e=0;e<t.foodlists.length;e++)t.foodlists[e].indexs=e+1})),e.info.transportationlist&&e.info.transportationlist.forEach((function(t){for(var e=0;e<t.tranlists.length;e++)t.tranlists[e].indexs=e+1})),e.info.carlist&&e.info.carlist.forEach((function(t){for(var e=0;e<t.carlists.length;e++)t.carlists[e].indexs=e+1})),e.info.otherlist)for(var i=0;i<e.info.otherlist.length;i++)e.info.otherlist[i].indexs=i+1;return e.$api.DMCOnlineSubmit(e.info,"POST")})).then((function(i){if(i){if(1==t){var s="结算确认单";e.excelExport("/Template/GetTemplate",{eventid:e.info.event_info.id,type:6,param:e.$route.params.id},s)}else if(2==t){s="DMC结算单";e.excelExport("/Template/GetTemplate",{eventid:e.info.event_info.id,type:4,param:e.$route.params.id},s)}e.$message({message:"保存成功！",type:"success"}),e.$router.push({name:"orderInfo",params:{id:e.info.orderform_id}})}else e.$message({message:"保存失败！",type:"error"})}))},changeOtherSel:function(t,e,i){var s=this,o=this.othercostProjects.filter((function(t){return t.code==i}));t.settlement_itemname=o[0].name,t.isnotservice=o[0].isnotservice,this.othercostProjects.forEach((function(e,i){t.settlement_itemid==e.code&&(t.servicetypename=e.name,t.detail=e.detail.filter((function(t){return"0"!==t.detail_type})),t.two_level_code="",t.isnotservice=e.isnotservice)})),this.info.eventinfoother.forEach((function(i,o){t.settlement_itemid==i.othercode&&(s.info.otherlist[e].settlementservice_taxrate=i.servicerate,s.info.otherlist[e].isnotservice=i.iscalservice,console.log(s.info.otherlist[e].isnotservice,i.iscalservice))}))},initInfo:function(){var t=this;this.info.roomlist.forEach((function(e,i){e.roomlists.forEach((function(e){e.quoted_price_room_id&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.unitprice),"0"==t.info.is_Inside_outside&&(e.settlement_count=e.provide_count,e.settlement_inside_roomcount=0,e.settlement_outside_roomcount=e.provide_count),"1"==t.info.is_Inside_outside&&(e.settlement_count=e.provide_count,e.settlement_inside_roomcount=e.inside_roomcount,e.settlement_outside_roomcount=e.outside_roomcount))}))})),this.info.conferencelist.forEach((function(e,i){e.conferencelists.forEach((function(e){e.quoted_price_conference_id&&null==t.info.id&&(e.settlement_price=Object(r["o"])(e.price),e.settlement_count=Object(r["m"])(e.count))}))})),this.info.foodlist.forEach((function(e,i){e.foodlists.forEach((function(e){e.quoted_price_food_id&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.price),e.settlement_count=Object(r["m"])(e.personcount))}))})),this.info.otherfoodlist.forEach((function(e,i){e.foodlists.forEach((function(e){e.quoted_price_food_id&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.price),e.settlement_count=Object(r["m"])(e.personcount))}))})),this.info.transportationlist.forEach((function(e,i){e.tranlists.forEach((function(e){e.quoted_price_transportation_id&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.unitprice),e.settlement_count=Object(r["m"])(e.passengercount))}))})),this.info.carlist.forEach((function(e,i){e.carlists.forEach((function(e){e.quoted_price_car_id&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.price),e.settlement_count=Object(r["m"])(e.carcount))}))})),this.info.otherlist.forEach((function(e,i){e.quoted_price_other_id&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.price),e.settlement_count=Object(r["m"])(e.offerservicedaycount)*Object(r["m"])(e.offerparticipatecount))})),null==this.info.id&&(this.info.settlement_advance_amount=this.info.quoted_travelagency_payment_money,this.info.settlement_advance_proportion=this.info.quoted_travelagency_payment_proportion,this.info.settlement_taxrate=this.info.taxrate,this.info.settlement_advance_amount||(this.info.settlement_advance_amount=0),this.info.settlement_advance_proportion||(this.info.settlement_advance_proportion=0)),"0020-1"==this.info.orderstatus&&(this.showPriceInfo=!1)}},mounted:function(){var t=this;this.initCostProject(),this.$api.DMCOnlineInfo({orderformid:this.$route.params.id},"POST").then((function(e){t.info=e,console.log(e),0!=t.info.event_info_configure.service_fee_ratio&&null!=t.info.sheet_fzc_service||(t.info.sheet_fzc_service=t.info.fzc_service),t.initInfo(),t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){t.arrayList.forEach((function(i,s){e.filetype==i.type&&t.arrayList[s].fileList.push({id:e.id,uid:"",name:e.filename,url:t.info.fileuploaddomin+e.filepath,update_time:e.update_time,create_date:e.create_date})}))})),t.arrayList[0].remark=t.info.settlement_settlementsheetexplain,t.arrayList[1].remark=t.info.settlement_confirmmail,t.arrayList[2].remark=t.info.settlement_po,t.arrayList[3].remark=t.info.settlement_invoice,t.arrayList[4].remark=t.info.settlement_voucher,t.arrayList[5].remark=t.info.settlement_contract,t.arrayList[6].remark=t.info.settlement_waterbill,t.arrayList[7].remark=t.info.settlement_outsidefoodinvoiceexplain,t.arrayList[8].remark=t.info.settlement_registinvoiceexplain,t.arrayList[9].remark=t.info.settlement_carinvoiceexplain,t.arrayList[10].remark=t.info.settlement_productsvoiceexplain,t.arrayList[11].remark=t.info.settlement_insureinvoiceexplain,t.arrayList[12].remark=t.info.settlement_signexplain,t.arrayList[13].remark=t.info.settlement_photoexplain,t.arrayList[14].remark=t.info.settlement_other,t.arrayList[0].dissent=t.info.dissent_settlementsheetexplain,t.arrayList[1].dissent=t.info.dissent_confirmmail,t.arrayList[2].dissent=t.info.dissent_po,t.arrayList[3].dissent=t.info.dissent_invoice,t.arrayList[4].dissent=t.info.dissent_voucher,t.arrayList[5].dissent=t.info.dissent_contract,t.arrayList[6].dissent=t.info.dissent_waterbill,t.arrayList[7].dissent=t.info.dissent_outsidefoodinvoiceexplain,t.arrayList[8].dissent=t.info.dissent_registinvoiceexplain,t.arrayList[9].dissent=t.info.dissent_carinvoiceexplain,t.arrayList[10].dissent=t.info.dissent_productsvoiceexplain,t.arrayList[11].dissent=t.info.dissent_insureinvoiceexplain,t.arrayList[12].dissent=t.info.dissent_signexplain,t.arrayList[13].dissent=t.info.dissent_photoexplain,t.arrayList[14].dissent=t.info.dissent_other,t.initFileRename()}))}}),m=u,p=(i("6575"),i("d304"),i("2877")),h=Object(p["a"])(m,s,o,!1,null,"6f0476eb",null);e["default"]=h.exports},d304:function(t,e,i){"use strict";i("18af")}}]);