(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01c2c678"],{"6e9b":function(t,e,a){"use strict";a("da6c")},da6c:function(t,e,a){},e617:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"ItineraryList"},[n("div",{staticClass:"title"},[e._v("行程管理")]),n("div",{staticClass:"content"},[n("div",{staticClass:"tools"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addProjectStatus=!0}}},[e._v("添加新项目")])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.List,stripe:"",height:"100%"}},[n("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("date_day")(t.row.start_date))+" ")]}}])}),n("el-table-column",{attrs:{label:"行程日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("date_day")(t.row.start_date))+" - "+e._s(e._f("date_day")(t.row.end_date))+" ")]}}])}),n("el-table-column",{attrs:{prop:"event_name",label:"项目名称"}}),n("el-table-column",{attrs:{prop:"project_manager_name",label:"项目经理"}}),n("el-table-column",{attrs:{prop:"customer_company_name",label:"客户公司名称"}}),n("el-table-column",{attrs:{prop:"customer_name",label:"客户姓名"}}),n("el-table-column",{attrs:{prop:"contact_number",label:"联系方式"}}),n("el-table-column",{attrs:{prop:"number_of_participants",label:"参与人数"}}),n("el-table-column",{attrs:{prop:"statusname",label:"项目状态"}}),n("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticClass:"tools_btn",attrs:{size:"mini",type:"text"},on:{click:function(a){return e.goInfo(t.$index,t.row)}}},[e._v("查看项目")]),n("el-button",{staticClass:"tools_btn",attrs:{size:"mini",type:"text"},on:{click:function(a){return e.addStroke(t.$index,t.row)}}},[e._v("添加行程")]),t.row.status!=e.cancelprojectstatus?n("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定要取消此项目吗？"},on:{confirm:function(a){return e.onDelete(t.$index,t.row)}}},[n("el-button",{staticClass:"tools_btn",attrs:{slot:"reference",size:"mini",type:"text"},slot:"reference"},[e._v("取消项目")])],1):e._e(),n("el-button",{staticClass:"tools_btn",attrs:{size:"mini",type:"text"},on:{click:function(a){return e.update(t.$index,t.row)}}},[e._v("编辑")])]}}])})],1),n("el-pagination",{staticClass:"pages",attrs:{background:"",layout:"prev, pager, next",total:e.tableData.Counts,"current-page":e.tableData.CurrentPage},on:{"current-change":e.currentChange}})],1),n("el-dialog",{attrs:{title:e.projectTitle,visible:e.addProjectStatus,"before-close":function(e){t.projectTitle="添加项目",t.itemData=null,e()},width:"700px"},on:{"update:visible":function(t){e.addProjectStatus=t}}},[e.addProjectStatus?n("projectAdded",{attrs:{"item-data":e.itemData},on:{onColse:e.save}}):e._e()],1)],1)},s=[],o=a("97aa"),i={name:"ItineraryList",components:{projectAdded:o["a"]},data:function(){return{projectTitle:"添加项目",addProjectStatus:!1,cancelprojectstatus:"0022-4",itemData:null,tableData:{CurrentPage:1,List:[]}}},methods:{update:function(t,e){this.itemData=e,this.projectTitle="编辑项目",this.addProjectStatus=!0},offShelf:function(t,e){var a=this;this.$api.casefrozen({id:e.id},"POST").then((function(t){a.$message({message:"冻结成功！",type:"success"}),a.GetList()}))},onDelete:function(t,e){var a=this;this.$api.cancelproject({id:e.id},"POST").then((function(t){a.$message({message:"项目取消成功！",type:"success"}),a.GetList()}))},GetList:function(){var t=this;this.$api.projectlist({Page:this.tableData.CurrentPage,Rows:10},"POST").then((function(e){t.tableData=e}))},currentChange:function(t){this.tableData.CurrentPage=t,this.GetList()},save:function(t){var e=this;this.$api.projectsave(t,"POST").then((function(a){e.$message({message:t.id?"修改成功！":"添加成功！",type:"success"}),e.addProjectStatus=!1,t.id||(e.tableData.CurrentPage=1),e.GetList()}))},goInfo:function(t,e){this.$router.push({name:"ItineraryManagementInfo",params:{id:e.id}})},addStroke:function(t,e){this.$router.push({name:"addStroke",params:{id:e.id}})}},mounted:function(){this.GetList()}},r=i,l=(a("6e9b"),a("2877")),c=Object(l["a"])(r,n,s,!1,null,"3aed1a32",null);e["default"]=c.exports}}]);