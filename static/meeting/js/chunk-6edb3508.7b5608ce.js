(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6edb3508"],{"06c1":function(t,e,r){var a=r("17e9"),n=String,o=TypeError;t.exports=function(t){if("object"==typeof t||a(t))return t;throw o("Can't set "+n(t)+" as a prototype")}},"0e5c":function(t,e,r){"use strict";var a=r("5829"),n=r("8642");e["a"]=function(t){return new Promise((function(e,r){let o=[],i={},s=t.length;console.log(t.length,t);const c=()=>0==t.length?e(o):String(t[0].file).IsPicture()?(t.shift(),c()):void a["a"].upload({file:t[0].file},"POST",{type:"form"}).then(r=>{console.log(r);var a=!0;if(void 0!=r&&""==r.FilePath&&""==r.OriginalFileName&&(console.log("重复了"),r=void 0,a=!1),void 0==r&&a){n["default"].prototype.$alert("网络不稳定, 文件上传失败, 请重新上传","提示",{confirmButtonText:"确定",callback:t=>{n["default"].prototype.$message({message:"上传失败的文件已标记",type:"warning"})}});let r=s-t.length;return e({tag:r,uploadImageList:o})}i=r,o.push(i),t.shift(),c()});c()}))}},2654:function(t,e,r){"use strict";r.d(e,"j",(function(){return a})),r.d(e,"k",(function(){return n})),r.d(e,"i",(function(){return o})),r.d(e,"h",(function(){return i})),r.d(e,"l",(function(){return s})),r.d(e,"e",(function(){return c})),r.d(e,"f",(function(){return l})),r.d(e,"b",(function(){return u})),r.d(e,"g",(function(){return m})),r.d(e,"a",(function(){return p})),r.d(e,"c",(function(){return d})),r.d(e,"d",(function(){return f}));r("9b2a");function a(t,e,r){const a=/^((0\d{2,3}-\d{7,8})|(1[34578]\d{9}))$/;""==e||void 0==e||null==e||a.test(e)||""==e?r():r(new Error("请输入正确的电话号码或者固话号码"))}function n(t,e,r){const a=/0\d{2}-\d{7,8}/;""==e||void 0==e||null==e||a.test(e)||""==e?r():r(new Error("请输入正确的固话（格式：区号+号码,如010-1234567）"))}function o(t,e,r){const a=/^[1][3,4,5,7,8][0-9]{9}$/;""==e||void 0==e||null==e||a.test(e)||""==e?r():r(new Error("请输入正确的电话号码"))}function i(t,e,r){const a=/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;""==e||void 0==e||null==e||a.test(e)?r():r(new Error("请输入正确的邮箱地址"))}function s(t,e,r){const a=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/;""==e||void 0==e||null==e||a.test(e)?r():r(new Error("请输入正确的URL"))}function c(t,e,r){if(!e)return r(new Error("输入不可以为空"));setTimeout(()=>{if(Number(e)){const t=/^[0-9]*[1-9][0-9]*$/,a=t.test(e);a?r():r(new Error("请输入正整数"))}else r(new Error("请输入正整数"))},0)}function l(t,e,r){e||r(),setTimeout(()=>{if(Number(e)){const t=/^[0-9]*[1-9][0-9]*$/,a=t.test(e);a?r():r(new Error("请输入正整数"))}else r(new Error("请输入正整数"))},1e3)}function u(t,e){let r={},a=[];if(t=Array.isArray(t)?t:[],e)for(let n=0;n<t.length;n++)if(r[t[n].date]){for(let e=0;e<a.length;e++)if(t[n].date===a[e].date){a[e].settlement+=Number("object"==typeof t[n].settlement_total_price?t[n].settlement_total_price.value:t[n].settlement_total_price),a[e].orgSettlement+=Number("object"==typeof t[n].total_price?t[n].total_price.value:t[n].total_price),a[e].data.push(t[n]);break}}else a.push({date:t[n].date,settlement:Number("object"==typeof t[n].settlement_total_price?t[n].settlement_total_price.value:t[n].settlement_total_price),orgSettlement:Number("object"==typeof t[n].total_price?t[n].total_price.value:t[n].total_price),data:[t[n]]}),r[t[n].date]=t[n];else for(let n=0;n<t.length;n++)if(r[t[n].date]){for(let e=0;e<a.length;e++)if(t[n].date===a[e].date){a[e].settlement+="object"==typeof t[n].settlement_price?t[n].settlement_price.value:t[n].settlement_price,a[e].orgSettlement+="object"==typeof t[n].price?t[n].price.value:t[n].price,a[e].data.push(t[n]);break}}else a.push({date:t[n].date,settlement:"object"==typeof t[n].settlement_price?t[n].settlement_price.value:t[n].settlement_price,orgSettlement:"object"==typeof t[n].price?t[n].price.value:t[n].price,data:[t[n]]}),r[t[n].date]=t[n];return a}function m(t){let e={},r=[];t=Array.isArray(t)?t:[];for(let a=0;a<t.length;a++)if(e[t[a].checkindate]){for(let e=0;e<r.length;e++)if(t[a].checkindate===r[e].checkindate){"大床房"==t[a].roomtype?(r[e].bigBedNum=t[a].roomcount,r[e].totalNum+=t[a].roomcount):"双床房"==t[a].roomtype?(r[e].doubleBedNum=t[a].roomcount,r[e].totalNum+=t[a].roomcount):(r[e].suiteNum=t[a].roomcount,r[e].totalNum+=t[a].roomcount);break}}else t[a].bigBedNum=0,t[a].doubleBedNum=0,t[a].suiteNum=0,t[a].totalNum=0,"大床房"==t[a].roomtype?(t[a].bigBedNum=t[a].roomcount,t[a].totalNum+=t[a].roomcount):"双床房"==t[a].roomtype?(t[a].doubleBedNum=t[a].roomcount,t[a].totalNum+=t[a].roomcount):(t[a].suiteNum=t[a].roomcount,t[a].totalNum+=t[a].roomcount),r.push(t[a]),e[t[a].checkindate]=t[a];return r}function p(t){let e={},r=[];for(let a=0;a<t.length;a++){let n=(t[a].build?t[a].build.price:0)+(t[a].rentalCosts?t[a].rentalCosts.price:0);if(t[a].equipment&&t[a].equipment.forEach(t=>{n+=t.price||0}),e[t[a].rentalCosts.time]){for(let e=0;e<r.length;e++)if(t[a].rentalCosts.time===r[e].time){r[e].totalPrice+=(t[a].build?t[a].build.price:0)+(t[a].rentalCosts?t[a].rentalCosts.price:0),t[a].equipment&&t[a].equipment.forEach(t=>{r[e].totalPrice+=t.price||0}),r[e].data.push(t[a]);break}}else r.push({time:t[a].rentalCosts.time,totalPrice:n,data:[t[a]]}),e[t[a].rentalCosts.time]=t[a]}return r}function d(t,e="time"){let r={},a=[];t=t||[];for(let n=0;n<t.length;n++)if(r[t[n][e]]){for(let r=0;r<a.length;r++)if(t[n][e]===a[r].time){a[r].data.push(t[n]),a[r].car.push(t[n]);break}}else a.push({time:t[n][e],car_date:t[n][e].substring(0,10),breakfast:t[n].breakfast,networks:t[n].networks,describe:t[n].describe,otherrequirements:t[n].otherrequirements,type:t[n].type,room_budget:t[n].room_budget,purpose:t[n].purpose,offer_remarks:t[n].offer_remarks,comments:t[n].comments,data:[t[n]],car:[t[n]]}),r[t[n][e]]=t[n];return a}function f(t,e="time"){let r={},a=[];t=t||[];for(let n=0;n<t.length;n++)a.push({time:t[n][e],car_date:t[n][e].substring(0,10),breakfast:t[n].breakfast,networks:t[n].networks,describe:t[n].describe,otherrequirements:t[n].otherrequirements,type:t[n].type,room_budget:t[n].room_budget,purpose:t[n].purpose,offer_remarks:t[n].offer_remarks,comments:t[n].comments,data:[t[n]],car:[t[n]]}),r[t[n][e]]=t[n];return a}},3471:function(t,e,r){var a=r("17e9"),n=r("de03"),o=r("78a8");t.exports=function(t,e,r){var i,s;return o&&a(i=e.constructor)&&i!==r&&n(s=i.prototype)&&s!==r.prototype&&o(t,s),t}},"5aac":function(t,e,r){"use strict";r("60a2")},"60a2":function(t,e,r){},"672b":function(t,e,r){var a=r("b23f"),n=Function.prototype,o=n.apply,i=n.call;t.exports="object"==typeof Reflect&&Reflect.apply||(a?i.bind(o):function(){return i.apply(o,arguments)})},"6d96":function(t,e,r){},"76b8":function(t,e,r){var a=r("de03"),n=r("9c10");t.exports=function(t,e){a(e)&&"cause"in e&&n(t,"cause",e.cause)}},"78a8":function(t,e,r){var a=r("5d05"),n=r("50b4"),o=r("06c1");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{t=a(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),t(r,[]),e=r instanceof Array}catch(i){}return function(r,a){return n(r),o(a),e?t(r,a):r.__proto__=a,r}}():void 0)},"956c":function(t,e,r){var a=r("f44b"),n=String;t.exports=function(t){if("Symbol"===a(t))throw TypeError("Cannot convert a Symbol value to a string");return n(t)}},"97aa":function(t,e,r){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"project-added"},[e("el-form",{ref:"ruleForm",staticStyle:{overflow:"hidden"},attrs:{"label-width":"110px",model:t.FormData,rules:t.rules}},[0!=t.userList.length?e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"项目经理",prop:"project_manager"}},[e("el-select",{attrs:{placeholder:"选择项目经理"},model:{value:t.FormData.project_manager,callback:function(e){t.$set(t.FormData,"project_manager",e)},expression:"FormData.project_manager"}},t._l(t.userList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.real_name,value:t.id}})})),1)],1)],1):t._e(),0!=t.userList.length?e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"项目专员",prop:"project_specialist"}},[e("el-select",{attrs:{placeholder:"选择项目专员"},model:{value:t.FormData.project_specialist,callback:function(e){t.$set(t.FormData,"project_specialist",e)},expression:"FormData.project_specialist"}},t._l(t.userList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.real_name,value:t.id}})})),1)],1)],1):t._e(),e("el-col",[e("el-form-item",{attrs:{label:"订单号",prop:"event_orderform_num"}},[t.FormData.event_orderform_num?e("p",{staticClass:"orderid"},[t._v(" 已选择订单编号: "+t._s(t.FormData.event_orderform_num)+" ")]):t._e(),t.FormData.id?t._e():e("el-button",{on:{click:function(e){t.selectOrderStatus=!0}}},[t._v("选择订单")]),t.FormData.id?t._e():e("p",{staticClass:"ordertj"},[e("span",[t._v("推荐 添加订单号可以将项目关联到订单上，方便查阅")])])],1)],1),e("el-col",[e("el-form-item",{attrs:{label:"会议名称",prop:"event_name"}},[e("el-input",{attrs:{placeholder:"会议名称",disabled:t.FormData.id},model:{value:t.FormData.event_name,callback:function(e){t.$set(t.FormData,"event_name",e)},expression:"FormData.event_name"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"开始日期",prop:"start_date"}},[e("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.FormData.start_date,callback:function(e){t.$set(t.FormData,"start_date",e)},expression:"FormData.start_date"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"结束日期",prop:"end_date"}},[e("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.FormData.end_date,callback:function(e){t.$set(t.FormData,"end_date",e)},expression:"FormData.end_date"}})],1)],1),e("el-col",[e("el-form-item",{attrs:{label:"客户公司名",prop:"customer_company_name"}},[e("el-input",{attrs:{placeholder:"客户公司名"},model:{value:t.FormData.customer_company_name,callback:function(e){t.$set(t.FormData,"customer_company_name",e)},expression:"FormData.customer_company_name"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"客户姓名",prop:"customer_name"}},[e("el-input",{attrs:{placeholder:"客户姓名"},model:{value:t.FormData.customer_name,callback:function(e){t.$set(t.FormData,"customer_name",e)},expression:"FormData.customer_name"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"联系电话",prop:"contact_number"}},[e("el-input",{attrs:{placeholder:"联系电话"},model:{value:t.FormData.contact_number,callback:function(e){t.$set(t.FormData,"contact_number",e)},expression:"FormData.contact_number"}})],1)],1),e("el-col",[e("el-form-item",{attrs:{label:"联系邮箱",prop:"contact_email"}},[e("el-input",{attrs:{placeholder:"联系邮箱"},model:{value:t.FormData.contact_email,callback:function(e){t.$set(t.FormData,"contact_email",e)},expression:"FormData.contact_email"}})],1)],1),e("el-col",[e("el-form-item",{attrs:{label:"参与人数",prop:"number_of_participants"}},[e("el-input",{attrs:{placeholder:"参与人数"},model:{value:t.FormData.number_of_participants,callback:function(e){t.$set(t.FormData,"number_of_participants",e)},expression:"FormData.number_of_participants"}})],1)],1),e("el-col",[e("div",{staticClass:"btnGroup"},[e("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v(t._s(null==t.itemData?"立即添加":"确认修改"))])],1)])],1),e("el-dialog",{attrs:{title:"选择订单",visible:t.selectOrderStatus,modal:!1,width:"60%"},on:{"update:visible":function(e){t.selectOrderStatus=e}}},[e("selectOrder",{on:{selected:t.selectedorder}})],1)],1)},n=[],o=(r("0e5c"),r("2654")),i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"orderList"},[e("div",{staticClass:"tips"},[t._v(" 只有已签约的订单可以被关联，行程关联订单后，将不能重新关联其他订单，请谨慎选择 ")]),e("div",{staticClass:"content"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData.List,stripe:""}},[e("el-table-column",{attrs:{prop:"num",label:"订单号"}}),e("el-table-column",{attrs:{prop:"event_name",label:"活动名称"}}),e("el-table-column",{attrs:{prop:"company_name",label:"客户公司名"}}),e("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-button",{staticClass:"tools_btn",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.select(r.$index,r.row)}}},[t._v("查看")]),e("el-button",{staticClass:"tools_btn",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.onselected(r.$index,r.row)}}},[t._v("选择")])]}}])})],1),e("el-pagination",{staticClass:"pages",attrs:{background:"",layout:"prev, pager, next",total:t.tableData.Counts,"current-page":t.tableData.CurrentPage},on:{"current-change":t.currentChange}})],1)])},s=[],c={name:"orderList",data(){return{addProjectStatus:!1,itemData:null,tableData:{CurrentPage:1,List:[]}}},methods:{select(t,e){this.$router.push({name:"orderInfo_Hotel",params:{id:e.id}})},offShelf(t,e){this.$api.casefrozen({id:e.id},"POST").then(t=>{this.$message({message:"冻结成功！",type:"success"}),this.GetList()})},onDelete(t,e){this.$api.casedelete({id:e.id},"POST").then(t=>{this.$message({message:"删除成功！",type:"success"}),this.GetList()})},GetList(){this.$api.orderformList({Page:this.tableData.CurrentPage,Rows:5},"POST").then(t=>{this.tableData=t})},currentChange(t){this.tableData.CurrentPage=t,this.GetList()},save(t){this.$api.casesave(t,"POST").then(e=>{this.$message({message:t.id?"修改成功！":"添加成功！",type:"success"}),this.addProjectStatus=!1,t.id||(this.tableData.CurrentPage=1),this.GetList()})},onselected(t,e){this.$emit("selected",e)}},mounted(){this.GetList()}},l=c,u=(r("5aac"),r("0b56")),m=Object(u["a"])(l,i,s,!1,null,"541b6b42",null),p=m.exports,d={components:{selectOrder:p},props:{itemData:null|JSON},data(){return{selectOrderStatus:!1,FormData:{project_manager:"",project_specialist:"",event_orderform_id:"",event_orderform_num:"",event_name:"",start_date:"",end_date:"",customer_company_name:"",customer_name:"",contact_number:"",contact_email:"",number_of_participants:""},waitUpload:[],rules:{project_manager:[{required:!0,message:"项目经理不能为空",trigger:"change"}],project_specialist:[{required:!0,message:"项目专员不能为空",trigger:"change"}],event_orderform_id:[{required:!0,message:"订单不能为空",trigger:"change"}],event_name:[{required:!0,message:"会议名称不能为空",trigger:"change"}],start_date:[{required:!0,message:"请填写开始时间",trigger:"change"}],end_date:[{required:!0,message:"请填写结束时间",trigger:"change"}],customer_company_name:[{required:!0,message:"请填写客户公司名称",trigger:"change"}],customer_name:[{required:!0,message:"请填写客户姓名",trigger:"change"}],contact_number:[{required:!0,message:"请填写联系电话",trigger:"change"},{validator:o["i"],trigger:"blur"}],contact_email:[{required:!0,message:"请填写联系邮箱",trigger:"change"},{validator:o["h"],trigger:"blur"}],number_of_participants:[{required:!0,message:"请填写参与人数",trigger:"change"},{validator:o["e"],trigger:"change"}]},userList:[]}},mounted(){null!=this.itemData&&(this.FormData=JSON.parse(JSON.stringify(this.itemData))),this.$api.memberList({Page:1,Rows:999},"POST").then(t=>{this.userList=t.List})},methods:{add(){this.$refs["ruleForm"].validate(t=>{if(!t)return console.log("error submit!!"),!1;this.$emit("onColse",this.FormData)})},handlePreviewImage(t){this.waitUpload.push(t)},selectedorder(t){this.FormData.event_orderform_id=t.id,this.FormData.event_orderform_num=t.num,this.FormData.event_name=t.event_name,this.FormData.start_date=t.event_startdate,this.FormData.end_date=t.event_enddate,this.FormData.customer_company_name=t.company_name,this.FormData.customer_name=t.fullname,this.FormData.contact_number=t.mobile,this.FormData.contact_email=t.email,this.FormData.number_of_participants=t.attendee_no,this.selectOrderStatus=!1}}},f=d,_=(r("d18f"),Object(u["a"])(f,a,n,!1,null,"14188050",null));e["a"]=_.exports},"9b2a":function(t,e,r){var a=r("ebdc"),n=r("c8a2"),o=r("672b"),i=r("b438"),s="WebAssembly",c=n[s],l=7!==Error("e",{cause:7}).cause,u=function(t,e){var r={};r[t]=i(t,e,l),a({global:!0,constructor:!0,arity:1,forced:l},r)},m=function(t,e){if(c&&c[t]){var r={};r[t]=i(s+"."+t,e,l),a({target:s,stat:!0,constructor:!0,arity:1,forced:l},r)}};u("Error",(function(t){return function(e){return o(t,this,arguments)}})),u("EvalError",(function(t){return function(e){return o(t,this,arguments)}})),u("RangeError",(function(t){return function(e){return o(t,this,arguments)}})),u("ReferenceError",(function(t){return function(e){return o(t,this,arguments)}})),u("SyntaxError",(function(t){return function(e){return o(t,this,arguments)}})),u("TypeError",(function(t){return function(e){return o(t,this,arguments)}})),u("URIError",(function(t){return function(e){return o(t,this,arguments)}})),m("CompileError",(function(t){return function(e){return o(t,this,arguments)}})),m("LinkError",(function(t){return function(e){return o(t,this,arguments)}})),m("RuntimeError",(function(t){return function(e){return o(t,this,arguments)}}))},a3d4:function(t,e,r){var a=r("5557").f;t.exports=function(t,e,r){r in t||a(t,r,{configurable:!0,get:function(){return e[r]},set:function(t){e[r]=t}})}},b438:function(t,e,r){"use strict";var a=r("3726"),n=r("e72e"),o=r("9c10"),i=r("70b8"),s=r("78a8"),c=r("6ac1"),l=r("a3d4"),u=r("3471"),m=r("dbbd"),p=r("76b8"),d=r("c436"),f=r("dc0f"),_=r("8d06"),b=r("3f11");t.exports=function(t,e,r,h){var g="stackTraceLimit",v=h?2:1,y=t.split("."),D=y[y.length-1],k=a.apply(null,y);if(k){var F=k.prototype;if(!b&&n(F,"cause")&&delete F.cause,!r)return k;var w=a("Error"),j=e((function(t,e){var r=m(h?e:t,void 0),a=h?new k(t):new k;return void 0!==r&&o(a,"message",r),f&&o(a,"stack",d(a.stack,2)),this&&i(F,this)&&u(a,this,j),arguments.length>v&&p(a,arguments[v]),a}));if(j.prototype=F,"Error"!==D?s?s(j,w):c(j,w,{name:!0}):_&&g in k&&(l(j,k,g),l(j,k,"prepareStackTrace")),c(j,k),!b)try{F.name!==D&&o(F,"name",D),F.constructor=j}catch(S){}return j}}},c3c0:function(t,e,r){var a=r("ecc1"),n=a("toStringTag"),o={};o[n]="z",t.exports="[object z]"===String(o)},c436:function(t,e,r){var a=r("5d05"),n=Error,o=a("".replace),i=function(t){return String(n(t).stack)}("zxcasd"),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(i);t.exports=function(t,e){if(c&&"string"==typeof t&&!n.prepareStackTrace)while(e--)t=o(t,s,"");return t}},d18f:function(t,e,r){"use strict";r("6d96")},dbbd:function(t,e,r){var a=r("956c");t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:a(t)}},dc0f:function(t,e,r){var a=r("071a"),n=r("4d51");t.exports=!a((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",n(1,7)),7!==t.stack)}))},f44b:function(t,e,r){var a=r("c3c0"),n=r("17e9"),o=r("7ea6"),i=r("ecc1"),s=i("toStringTag"),c=Object,l="Arguments"==o(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(r){}};t.exports=a?o:function(t){var e,r,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=u(e=c(t),s))?r:l?o(e):"Object"==(a=o(e))&&n(e.callee)?"Arguments":a}}}]);