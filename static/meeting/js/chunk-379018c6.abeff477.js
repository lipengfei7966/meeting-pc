(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-379018c6"],{"60cc":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.info?n("div",{staticClass:"orderInfo"},[n("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"a_click",attrs:{href:t.url,target:"_blank"}}),n("div",{staticClass:"title"},[t._v(" 我的订单 - 结算单 - "),t.info?[t._v(" "+t._s(t.info.num)+" ")]:t._e()],2),n("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"a_click",attrs:{href:t.downloadUrl,target:"_blank",download:""}}),t.info?n("div",{staticClass:"content"},[t.info.settlement_status===t.status_draft?n("div",{staticClass:"tips"},[n("p",[t._v("该草稿保存于"+t._s(t.info.submit_time?t.getFormatDate(t.info.submit_time):""))])]):t._e(),n("div",{staticClass:"nformation"},[n("p",[t._v("会议基本信息")]),n("p",[t._v("Event Profile")]),n("p",[t._v("（敏感信息对供应商隐藏）")]),t.isopen?n("img",{attrs:{src:i("d991"),width:"20px",height:"20px",alt:""},on:{click:function(e){t.isopen=!t.isopen}}}):n("img",{attrs:{src:i("b93d"),width:"20px",height:"20px",alt:""},on:{click:function(e){t.isopen=!t.isopen}}})]),t.isopen?n("div",{staticClass:"information"},[n("ul",[n("li",[n("span",{attrs:{syle:"margin-left:6px;"}},[t._v("会议名称")]),n("span",{staticClass:"tl"},[t._v("Event Name")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.event_name))])]),n("li",[t._v(" Cvent号 "),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold","margin-left":"10px"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.cvent_no))])]),n("li",[t._v(" 客户 "),n("span",{staticStyle:{"margin-left":"10px",color:"#999999"}},[t._v("Consumer")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.company_name))])]),n("li",[t._v(" 团电脑号 "),n("span",{staticStyle:{"margin-left":"10px",color:"#999999"}},[t._v("Team No")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.tourist_group_no))])]),n("li",[t._v(" 会议城市 "),n("span",{staticStyle:{"margin-left":"10px",color:"#999999"}},[t._v("City")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.AbbreviationName))])]),n("li",[t._v(" 餐标限制 "),n("span",{staticStyle:{"margin-left":"10px",color:"#999999"}},[t._v("Food Limit")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.food_limit))])]),n("li",[t._v(" 参会人数 "),n("span",{staticStyle:{"margin-left":"10px",color:"#999999"}},[t._v("Attendee NO.")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.attendee_no))])]),n("li",[t._v(" 会议开始日期 "),n("span",{staticStyle:{"margin-left":"10px",color:"#999999"}},[t._v("Start Date")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.event_startdate?t.getFormatDate(t.info.event_info.event_startdate).slice(0,10):""))])]),n("li",[t._v(" 会议结束日期 "),n("span",{staticStyle:{"margin-left":"10px",color:"#999999"}},[t._v("End Date")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.event_enddate?t.getFormatDate(t.info.event_info.event_enddate).slice(0,10):""))])]),n("li",[t._v(" PR "),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold","margin-left":"4px"}},[t._v(":")]),n("span",[t._v(t._s(t.info.event_info.pr))])]),n("li",[t._v(" 会议总预算 "),n("span",{staticStyle:{"margin-left":"10px",color:"#999999"}},[t._v("Total Budget")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.total_budget))])]),n("li",[t._v(" 会议ID "),n("span",{staticStyle:{"margin-left":"10px",color:"#999999"}},[t._v("Event ID")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.id))])]),n("li",[t._v(" 会议创建人 "),n("span",{staticStyle:{"margin-left":"10px",color:"#999999"}},[t._v("Submitor")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.createusername))])]),n("li",[t._v(" 客户联系人 "),n("span",{staticStyle:{"margin-left":"10px",color:"#999999"}},[t._v("Event Owner")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.fullname))])]),n("li",[t._v(" 客户所属部门 "),n("span",{staticStyle:{"margin-left":"10px",color:"#999999"}},[t._v("Owner's Department")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.department_name))])]),n("li",[t._v(" 客户联系电话 "),n("span",{staticStyle:{"margin-left":"10px",color:"#999999"}},[t._v("Owner's Phone NO.")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.mobile))])]),n("li",[t._v(" 客户邮箱 "),n("span",{staticStyle:{"margin-left":"10px",color:"#999999"}},[t._v("Owner's E-mail")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.email))])]),n("li",[t._v(" 发票类型 "),n("span",{staticStyle:{"margin-left":"10px",color:"#999999"}},[t._v("Invoice Type")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.invoice_type?1==t.info.event_info.invoice_type?"专票":"免税":"普票"))])]),n("li",[t._v(" 是否办理免税 "),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.is_duty_free?"是":"否"))])]),n("li",[t._v(" 创建时间 "),n("span",{staticStyle:{"margin-left":"10px",color:"#999999"}},[t._v("Create Date")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.create_date?t.getFormatDate(t.info.event_info.create_date):""))])]),t._m(0),n("li",[t._v(" PO信息 "),n("span",{staticStyle:{"margin-left":"10px",color:"#999999"}},[t._v("PO information")]),n("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.info.event_info.pocode))])])])]):t._e(),n("div",{staticClass:"step"},[t._v("Step1 确认订单基本信息")]),n("div",{staticClass:"info"},[n("div",{staticClass:"line"},[n("div",{staticClass:"item"},[n("div",{staticClass:"label"},[t._v("PO单号")]),n("div",{staticClass:"context"},[t._v(t._s(t.info.event_info.pocode))])]),n("div",{staticClass:"item"},[n("div",{staticClass:"label"},[t._v("实际参会人数")]),n("div",{staticClass:"context"},[t._v(" 外部人数 "),n("el-input",{staticClass:"input_line",attrs:{readonly:t.readonly},on:{input:function(e){t.info.external_number=t.formatNum(t.info.external_number,1)}},model:{value:t.info.external_number,callback:function(e){t.$set(t.info,"external_number",e)},expression:"info.external_number"}}),t._v(" 人 内部人数 "),n("el-input",{staticClass:"input_line",attrs:{readonly:t.readonly},on:{input:function(e){t.info.internal_number=t.formatNum(t.info.internal_number,1)}},model:{value:t.info.internal_number,callback:function(e){t.$set(t.info,"internal_number",e)},expression:"info.internal_number"}}),t._v(" 人 总人数 "+t._s(t.positiveInteger(t.info.external_number)+t.positiveInteger(t.info.internal_number))+" 人 ")],1)])]),n("div",{staticClass:"line"},[n("div",{staticClass:"item"},[n("div",{staticClass:"label"},[t._v("旅行社陪同人员")]),n("div",{staticClass:"context hotel"},[n("el-input",{staticClass:"input_line",staticStyle:{width:"200px"},attrs:{readonly:t.readonly},on:{input:function(e){t.info.travel_agency_escort=t.formatNum(t.info.travel_agency_escort,1)}},model:{value:t.info.travel_agency_escort,callback:function(e){t.$set(t.info,"travel_agency_escort",e)},expression:"info.travel_agency_escort"}}),t._v(" 人 ")],1)]),n("div",{staticClass:"item"},[n("div",{staticClass:"label"},[t._v("供应商")]),n("div",{staticClass:"context"},t._l(t.info.hotelNameList,(function(e,i){return n("div",{key:i},[t._v(" "+t._s(e.hotelname)+" "),e.isHotel?n("el-checkbox",{staticStyle:{"line-height":"30px","margin-left":"20px"},attrs:{"true-label":1,"false-label":0},model:{value:e.isFirstHotel,callback:function(i){t.$set(e,"isFirstHotel",i)},expression:"item.isFirstHotel"}},[t._v("是否使用首选酒店")]):t._e()],1)})),0)])])]),n("div",{staticClass:"step"},[t._v("Step2 上传结算相关凭证（必填）")]),n("table",[t._m(1),t._l(t.arrayList,(function(e,i){return n("tbody",{key:i},[n("tr",[n("td",[t._v(t._s(e.name))]),n("td",[n("el-upload",{ref:"upload",refInFor:!0,attrs:{action:"","on-change":function(i,n){t.handleChangeAttach(i,n,t.type=e.type)},"on-remove":function(i,n){t.handleRemoveAttach(i,n,t.type=e.type)},disabled:t.isconfirm||t.readonly,"on-preview":t.handlePreview,"auto-upload":!1,"file-list":e.fileList,"show-file-list":!1,multiple:!1}},[!t.isconfirm||t.issupplement?n("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("从电脑选择文件")]):t._e(),n("ul",{staticStyle:{"margin-top":"5px"}},t._l(e.fileList,(function(o,s){return n("li",{key:s,staticClass:"pitchOn",on:{click:function(e){return t.handlePreview(o)}}},[n("span",[t._v(t._s(o.name))]),n("span",{staticStyle:{color:"#199ed8",cursor:"pointer","margin-left":"30px"},on:{click:function(e){return e.stopPropagation(),t.fileRename(o,i,s)}}},[t._v("重命名")]),n("span",{staticStyle:{color:"#199ed8",cursor:"pointer","margin-left":"10px"},on:{click:function(n){return n.stopPropagation(),t.deleteFile(o,i,s,e.arrayLength)}}},[t._v("删除")]),o.create_date?n("span",{staticStyle:{"margin-left":"10px"}},[t._v("于"+t._s(t.getFormatDate(o.create_date))+"上传")]):t._e(),e.arrayLength==s&&t.isFail?n("span",{staticStyle:{color:"red","margin-left":"30px"}},[t._v("上传失败")]):t._e()])})),0)],1),n("el-dialog",{attrs:{"close-on-click-modal":!1,visible:t.rename,title:"请输入附件名称",width:"500px"},on:{"update:visible":function(e){t.rename=e}}},[n("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.fileName,callback:function(e){t.fileName=e},expression:"fileName"}},[n("template",{slot:"append"},[t._v(" "+t._s(t.suffix)+" ")])],2),n("span",{staticClass:"dialog-footer flex_row justify_center mar_t20",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.saveFileName()}}},[t._v("保存")])],1)],1)],1),n("td",[11==e.type?n("span",[t._v(t._s(t.info.explainList[0].objection))]):t._e(),16==e.type?n("span",[t._v(t._s(t.info.explainList[1].objection))]):t._e(),17==e.type?n("span",[t._v(t._s(t.info.explainList[2].objection))]):n("span",[t._v(" "+t._s(e.dissent))])]),n("td",[n("el-input",{attrs:{readonly:t.isconfirm||t.readonly},model:{value:e.remark,callback:function(i){t.$set(e,"remark",i)},expression:"item.remark"}})],1)])])}))],2),n("div",{staticClass:"step"},[t._v("Step3 填写结算明细（必填）")]),n("table",[n("thead",[n("tr",{staticClass:"color_2"},[n("th",{staticClass:"color_3",attrs:{colspan:"4"}},[t._v(" 原订单总报价：¥"+t._s(t.positiveFloat(t.price[0]).toFixed(2))+" "),n("br"),t._v(" 原订单总报价(税前)：¥"+t._s((t.positiveFloat(t.servicePrice[0])+(0===t.info.zhicai_service?t.positiveFloat(t.servicePrice[4]):t.positiveFloat(t.servicePrice[8]))+t.positiveFloat(t.price_no[0])).toFixed(2))+" "),n("br"),t._v(" 原订单总报价(净价)：¥"+t._s(t.positiveFloat(t.price_no[0]).toFixed(2))+" ")]),n("th",{staticStyle:{position:"relative"},attrs:{colspan:"5"}},[t._v(" 订单总结算价：¥"+t._s(t.positiveFloat(t.price[1]).toFixed(2))+" "),n("br"),t._v(" 订单总结算价(税前)：¥"+t._s(t.positiveFloat(t.positiveFloat(t.servicePrice[1])+(0===t.info.zhicai_service?t.positiveFloat(t.servicePrice[5]):t.positiveFloat(t.servicePrice[9]))+t.positiveFloat(t.price_no[1])))+" "),n("br"),t._v(" 订单总结算价(净价)：¥"+t._s(t.positiveFloat(t.price_no[1]).toFixed(2))+" "),t.readonly?t._e():n("div",{staticClass:"add_settle"},[n("el-button",{staticClass:"el-icon-folder-add",attrs:{type:"primary",size:"mini"},on:{click:t.openAddSettle}},[t._v("添加结算项目")])],1)])])]),t.roomVisible?n("tbody",[n("tr",{staticClass:"color_2"},[t._m(2),n("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.roomPrice[0].all)))]),n("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.roomPrice[1].all)))]),n("th")])]):t._e(),t._l(t.info.roomlist,(function(e,i){return n("tbody",{key:"kefang"+i},[n("tr",{staticClass:"color_2"},[n("th",{staticClass:"color_3"},[n("i",[t._v(t._s(t._f("date_day_ex")(e.date)))])]),n("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.roomPrice[0].subtotal["sub_"+i])))]),n("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.roomPrice[1].subtotal["sub_"+i])))]),n("th",[t.issubmit?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.addroom(e)}}},[t._v("添加客房")]):t._e()],1)]),n("tr",{staticClass:"color_2"},[n("th",{staticClass:"color_3"},[t._v("消费项目")]),n("th",{staticClass:"color_3"},[t._v("单价(元)")]),n("th",{staticClass:"color_3"},[t._v("数量")]),n("th",{staticClass:"color_3"},[t._v("金额(元)")]),n("th",[t._v("单价(元)")]),"0"==t.info.is_Inside_outside?n("th",[t._v("数量")]):t._e(),"1"==t.info.is_Inside_outside?n("th",[t._v("内部间数 外部间数")]):t._e(),n("th",[t._v("金额(元)")]),n("th",[t._v("客户异议")]),n("th",[t._v("结算说明")])]),t._l(e.roomlists,(function(i,o){return n("tr",{key:"room"+o,class:{difference:i.difference}},[n("td",{staticClass:"color_2"},[i.quoted_price_room_id?[t._v(" "+t._s(i.roomtypename)+" ")]:[n("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(e){return t.changekefang(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"room.settlement_itemid"}},t._l(t.roomcostProjects,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_room_id&&(i.otherrequirements||i.remarks)?n("el-tooltip",{staticClass:"describe-tooltip",attrs:{effect:"dark",placement:"top-end"}},[n("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.otherrequirements?n("div",[t._v("需求说明："+t._s(i.otherrequirements))]):t._e(),i.remarks?n("div",[t._v("报价备注："+t._s(i.remarks))]):t._e()]),n("el-button",{attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),n("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.unitprice)))]),n("td",{staticClass:"color_2"},["0"==t.info.is_Inside_outside?n("p",[t._v(" "+t._s(i.provide_count)+" ")]):t._e(),"1"==t.info.is_Inside_outside?n("div",[n("p",[t._v("内部人员："+t._s(i.inside_roomcount))]),n("p",[t._v("外部人员："+t._s(i.outside_roomcount))])]):t._e()]),n("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.quotationsumprice)))]),n("td",[n("el-input",{class:{lineBack:!i.lineoroffline},attrs:{type:"text",readonly:t.readonly||!i.lineoroffline},on:{input:function(e){i.settlement_unitprice=t.formatNum(i.settlement_unitprice,2)}},model:{value:i.settlement_unitprice,callback:function(e){t.$set(i,"settlement_unitprice",e)},expression:"room.settlement_unitprice"}})],1),n("td",["0"==t.info.is_Inside_outside?n("el-input",{class:{lineBack:!i.lineoroffline},staticStyle:{width:"50%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,3)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"room.settlement_count"}}):t._e(),"1"==t.info.is_Inside_outside?n("div",{staticStyle:{display:"flex"}},[n("el-input",{class:{lineBack:!i.lineoroffline},staticStyle:{width:"55%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!i.lineoroffline},on:{input:function(e){i.settlement_inside_roomcount=t.formatNum(i.settlement_inside_roomcount,3),i.settlement_count=t.positiveFloat(i.settlement_inside_roomcount)+t.positiveFloat(i.settlement_outside_roomcount)}},model:{value:i.settlement_inside_roomcount,callback:function(e){t.$set(i,"settlement_inside_roomcount",e)},expression:"room.settlement_inside_roomcount"}}),n("el-input",{class:{lineBack:!i.lineoroffline},staticStyle:{width:"55%","margin-left":"10px"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!i.lineoroffline},on:{input:function(e){i.settlement_outside_roomcount=t.formatNum(i.settlement_outside_roomcount,3),i.settlement_count=t.positiveFloat(i.settlement_inside_roomcount)+t.positiveFloat(i.settlement_outside_roomcount)}},model:{value:i.settlement_outside_roomcount,callback:function(e){t.$set(i,"settlement_outside_roomcount",e)},expression:"room.settlement_outside_roomcount"}})],1):t._e()],1),i.lineoroffline?n("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_unitprice)*t.positiveFloat(i.settlement_count))))]):n("td",[t._v("¥"+t._s(t.positiveFloat(i.settlementsumprice)))]),n("td",[t._v(t._s(i.settlement_customer_objection))]),n("td",[n("el-input",{class:{difference:t.roomDifference(i),line:!i.quoted_price_room_id,lineBack:!i.lineoroffline},attrs:{readonly:t.readonly||!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"room.settlement_comments"}}),!i.quoted_price_room_id&&t.issubmit?n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",disabled:t.readonly||!i.lineoroffline,circle:"",size:"mini"},on:{click:function(i){return t.delroom(e,o)}}}):t._e()],1)])}))],2)})),t.roomVisible?n("tbody",[n("tr",{staticClass:"color_2"},[n("th",{staticClass:"color_3"},[t._v("杂费小计")]),n("th",{staticClass:"color_3"}),n("th",{staticClass:"color_3"}),n("th",{staticClass:"color_3"}),n("th"),n("th"),n("th",{staticStyle:{"text-align":"right"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.roomPrice[2])))]),n("th",[t._v("客户异议")]),n("th",[t.issubmit?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addOther(1)}}},[t._v("添加杂费")]):t._e()],1)]),t._l(t.roomincidental,(function(e){return n("tr",{key:e.id},[n("td",{staticClass:"color_2"},[n("el-input",{attrs:{readonly:t.readonly||!e.lineoroffline,placeholder:"杂费项名称"},model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"roomzf.content"}})],1),n("td",{staticClass:"color_2"},[n("el-checkbox",{attrs:{disabled:t.readonly||!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"roomzf.isnotservice"}},[t._v("计入服务费")])],1),n("td",{staticClass:"color_2"}),n("td",{staticClass:"color_2"}),n("td",[n("el-input",{class:{lineBack:!e.lineoroffline},attrs:{readonly:t.readonly||!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"roomzf.price"}})],1),n("td",[n("el-input",{class:{lineBack:!e.lineoroffline},attrs:{readonly:t.readonly||!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"roomzf.count"}})],1),e.lineoroffline?n("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count))))]):n("td",[t._v("¥"+t._s(t.positiveFloat(e.sumprice)))]),n("td",[t._v(t._s(e.settlement_customer_objection))]),n("td",[n("el-input",{staticClass:"line",class:{lineBack:!e.lineoroffline},attrs:{readonly:t.readonly||!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"roomzf.comments"}}),t.issubmit?n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)])}))],2):t._e(),t.conferenceVisible?n("tbody",[n("tr",{staticClass:"color_2"},[t._m(3),n("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.conferencePrice[0].all)))]),n("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.conferencePrice[1].all)))]),n("th")])]):t._e(),t._l(t.info.conferencelist,(function(e,i){return n("tbody",{key:"huiyi"+i},[n("tr",{staticClass:"color_2"},[n("th",{staticClass:"color_3"},[n("i",[t._v(t._s(t._f("date_day_ex")(e.date)))])]),n("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.conferencePrice[0].subtotal["sub_"+i])))]),n("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.conferencePrice[1].subtotal["sub_"+i])))]),n("th",[t.issubmit?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.addconference(e)}}},[t._v("添加会场")]):t._e()],1)]),t._m(4,!0),t._l(e.conferencelists,(function(i,o){return n("tr",{key:"conference"+o},[n("td",{staticClass:"color_2"},[i.quoted_price_conference_id?[1==i.type?[t._v(" "+t._s("场租-会场"+i.order_name+"("+i.roomsetuptypename+";会议时间:"+i.starttime+"~"+i.endtime+";出席人数:"+i.attendees+"人)")+" ")]:t._e(),2==i.type?[t._v(" "+t._s("会场搭建费-"+i.related_information+" ("+i.roomsetuptypename+")")+" ")]:t._e(),3==i.type?[t._v(" "+t._s("设备-会场"+i.order_name+"("+i.roomsetuptypename+";"+i.equipment+")")+" ")]:t._e(),4==i.type?[n("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:"",disabled:t.readonly||!i.lineoroffline},on:{change:function(e){return t.changehuichang(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"conference.settlement_itemid"}},t._l(t.meetingcostProjects,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)]:t._e()]:[n("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:"",readonly:t.readonly||!i.lineoroffline},on:{change:function(e){return t.changehuichang(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"conference.settlement_itemid"}},t._l(t.meetingcostProjects,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_conference_id&&(i.describe||i.comments)?n("el-tooltip",{staticClass:"describe-tooltip",attrs:{effect:"dark",placement:"top-end"}},[n("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.describe?n("div",[t._v("需求说明："+t._s(i.describe))]):t._e(),i.comments?n("div",[t._v("报价备注："+t._s(i.comments))]):t._e()]),n("el-button",{attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),n("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.price)))]),n("td",{staticClass:"color_2"},[t._v(t._s(i.count))]),n("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.quotationsumprice)))]),n("td",[n("el-input",{class:{lineBack:!i.lineoroffline},attrs:{type:"text",readonly:t.readonly||!i.lineoroffline},on:{input:function(e){i.settlement_price=t.formatNum(i.settlement_price,2)}},model:{value:i.settlement_price,callback:function(e){t.$set(i,"settlement_price",e)},expression:"conference.settlement_price"}})],1),n("td",[n("el-input",{class:{lineBack:!i.lineoroffline},staticStyle:{width:"50%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,2)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"conference.settlement_count"}})],1),i.lineoroffline?n("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_price)*t.positiveFloat(i.settlement_count))))]):n("td",[t._v("¥"+t._s(t.positiveFloat(i.settlementsumprice)))]),n("td",[t._v(t._s(i.settlement_customer_objection))]),n("td",[n("el-input",{class:{difference:t.conferenceDifference(i),line:!i.quoted_price_conference_id,lineBack:!i.lineoroffline},attrs:{readonly:t.readonly||!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"conference.settlement_comments"}}),!i.quoted_price_conference_id&&t.issubmit?n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!i.lineoroffline},on:{click:function(i){return t.delconference(e,o)}}}):t._e()],1)])}))],2)})),t.conferenceVisible?n("tbody",[n("tr",{staticClass:"color_2"},[n("th",{staticClass:"color_3"},[t._v("杂费小计")]),n("th",{staticClass:"color_3"}),n("th",{staticClass:"color_3"}),n("th",{staticClass:"color_3"}),n("th"),n("th"),n("th",{staticStyle:{"text-align":"right"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.conferencePrice[2])))]),n("th",[t._v("客户异议")]),n("th",[t.issubmit?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addOther(2)}}},[t._v("添加杂费")]):t._e()],1)]),t._l(t.meetingcidental,(function(e){return n("tr",{key:e.id},[n("td",{staticClass:"color_2"},[n("el-input",{attrs:{readonly:t.readonly||!e.lineoroffline,placeholder:"杂费项名称"},model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"conferencezf.content"}})],1),n("td",{staticClass:"color_2"},[n("el-checkbox",{attrs:{disabled:t.readonly||!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"conferencezf.isnotservice"}},[t._v(" 计入服务费 ")])],1),n("td",{staticClass:"color_2"}),n("td",{staticClass:"color_2"}),n("td",[n("el-input",{class:{lineBack:!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"conferencezf.price"}})],1),n("td",[n("el-input",{class:{lineBack:!e.lineoroffline},attrs:{readonly:t.readonly||!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"conferencezf.count"}})],1),e.lineoroffline?n("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count))))]):n("td",[t._v("¥"+t._s(t.positiveFloat(e.sumprice)))]),n("td",[t._v(t._s(e.settlement_customer_objection))]),n("td",[n("el-input",{staticClass:"line",class:{lineBack:!e.lineoroffline},attrs:{readonly:t.readonly||!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"conferencezf.comments"}}),t.issubmit?n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)])}))],2):t._e(),t.foodVisible?n("tbody",[n("tr",{staticClass:"color_2"},[t._m(5),n("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.foodPrice[0].all)))]),n("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.foodPrice[1].all)))]),n("th")])]):t._e(),t._l(t.info.foodlist,(function(e,i){return n("tbody",{key:"hotelcanyininside"+i},[n("tr",{staticClass:"color_2"},[n("th",{staticClass:"color_3"},[n("i",[t._v(t._s(t._f("date_day_ex")(e.date)))])]),n("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.foodPrice[0].subtotal["sub_"+i])))]),n("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.foodPrice[1].subtotal["sub_"+i])))]),n("th",[t.issubmit?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.addfood(e)}}},[t._v("添加餐饮")]):t._e()],1)]),t._m(6,!0),t._l(e.foodlists,(function(i,o){return n("tr",{key:"food"+o},[n("td",{staticClass:"color_2"},[i.quoted_price_food_id?[t._v(" "+t._s(i.foodtypename)+" "),i.usetypename?n("span",[t._v("["+t._s(i.usetypename)+"]")]):t._e()]:[n("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(e){return t.changehotelnei(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"food.settlement_itemid"}},t._l(t.foodcostProjects,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_food_id&&(i.comments||i.offer_remarks)?n("el-tooltip",{staticClass:"describe-tooltip",attrs:{effect:"dark",placement:"top-end"}},[n("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.comments?n("div",[t._v("需求说明："+t._s(i.comments))]):t._e(),i.offer_remarks?n("div",[t._v("报价备注："+t._s(i.offer_remarks))]):t._e()]),n("el-button",{attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),n("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.price)))]),n("td",{staticClass:"color_2"},[t._v(t._s(i.personcount))]),n("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.quotationsumprice)))]),n("td",[n("el-input",{class:{lineBack:!i.lineoroffline},attrs:{readonly:t.readonly||!i.lineoroffline},on:{input:function(e){i.settlement_unitprice=t.formatNum(i.settlement_unitprice,2)}},model:{value:i.settlement_unitprice,callback:function(e){t.$set(i,"settlement_unitprice",e)},expression:"food.settlement_unitprice"}})],1),n("td",[n("el-input",{class:{lineBack:!i.lineoroffline},staticStyle:{width:"50%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,2)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"food.settlement_count"}})],1),i.lineoroffline?n("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_unitprice)*t.positiveFloat(i.settlement_count))))]):n("td",[t._v("¥"+t._s(t.positiveFloat(i.settlementsumprice)))]),n("td",[t._v(t._s(i.settlement_customer_objection))]),n("td",[n("el-input",{class:{difference:t.foodDifference(i),line:!i.quoted_price_food_id,lineBack:!i.lineoroffline},attrs:{readonly:t.readonly||!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"food.settlement_comments"}}),!i.quoted_price_food_id&&t.issubmit?n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",disabled:t.readonly||!i.lineoroffline,circle:"",size:"mini"},on:{click:function(i){return t.delfood(e,o)}}}):t._e()],1)])}))],2)})),t.foodVisible?n("tbody",[n("tr",{staticClass:"color_2"},[n("th",{staticClass:"color_3"},[t._v("杂费小计")]),n("th",{staticClass:"color_3"}),n("th",{staticClass:"color_3"}),n("th",{staticClass:"color_3"}),n("th"),n("th"),n("th",{staticStyle:{"text-align":"right"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.foodPrice[2])))]),n("th",[t._v("客户异议")]),n("th",[t.issubmit?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addOther(3)}}},[t._v("添加杂费")]):t._e()],1)]),t._l(t.foodincidental,(function(e){return n("tr",{key:e.id},[n("td",{staticClass:"color_2"},[n("el-input",{attrs:{readonly:t.readonly||!e.lineoroffline,placeholder:"杂费项名称"},model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"foodzf.content"}})],1),n("td",{staticClass:"color_2"},[n("el-checkbox",{attrs:{disabled:t.readonly||!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"foodzf.isnotservice"}},[t._v("计入服务费")])],1),n("td",{staticClass:"color_2"}),n("td",{staticClass:"color_2"}),n("td",[n("el-input",{class:{lineBack:!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"foodzf.price"}})],1),n("td",[n("el-input",{class:{lineBack:!e.lineoroffline},attrs:{readonly:t.readonly||!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"foodzf.count"}})],1),e.lineoroffline?n("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count))))]):n("td",[t._v("¥"+t._s(t.positiveFloat(e.sumprice)))]),n("td",[t._v(t._s(e.settlement_customer_objection))]),n("td",[n("el-input",{staticClass:"line",class:{lineBack:!e.lineoroffline},attrs:{readonly:t.readonly||!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"foodzf.comments"}}),t.issubmit?n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)])}))],2):t._e(),t.otherfoodVisible?n("tbody",[n("tr",{staticClass:"color_2"},[t._m(7),n("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.otherfoodPrice[0].all)))]),n("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.otherfoodPrice[1].all)))]),n("th")])]):t._e(),t._l(t.info.otherfoodlist,(function(e,i){return n("tbody",{key:"otherhotelcanyininside"+i},[n("tr",{staticClass:"color_2"},[n("th",{staticClass:"color_3"},[n("i",[t._v(t._s(t._f("date_day_ex")(e.date)))])]),n("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.otherfoodPrice[0].subtotal["sub_"+i])))]),n("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.otherfoodPrice[1].subtotal["sub_"+i])))]),n("th",[t.issubmit?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.addotherfood(e)}}},[t._v("添加餐饮")]):t._e()],1)]),t._m(8,!0),t._l(e.foodlists,(function(i,o){return n("tr",{key:"food"+o},[n("td",{staticClass:"color_2"},[i.quoted_price_food_id?[t._v(" "+t._s(i.foodtypename)+" "),i.usetypename?n("span",[t._v("["+t._s(i.usetypename)+"]")]):t._e()]:[n("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(e){return t.changehotelwai(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"food.settlement_itemid"}},t._l(t.otherfoodcostProjects,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_food_id&&(i.comments||i.offer_remarks)?n("el-tooltip",{staticClass:"describe-tooltip",attrs:{effect:"dark",placement:"top-end"}},[n("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.comments?n("div",[t._v("需求说明："+t._s(i.comments))]):t._e(),i.offer_remarks?n("div",[t._v("报价备注："+t._s(i.offer_remarks))]):t._e()]),n("el-button",{attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),n("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.price)))]),n("td",{staticClass:"color_2"},[t._v(t._s(i.personcount))]),n("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.quotationsumprice)))]),n("td",[n("el-input",{class:{lineBack:!i.lineoroffline},attrs:{readonly:t.readonly||!i.lineoroffline},on:{input:function(e){i.settlement_unitprice=t.formatNum(i.settlement_unitprice,2)}},model:{value:i.settlement_unitprice,callback:function(e){t.$set(i,"settlement_unitprice",e)},expression:"food.settlement_unitprice"}})],1),n("td",[n("el-input",{class:{lineBack:!i.lineoroffline},staticStyle:{width:"50%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,2)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"food.settlement_count"}})],1),i.lineoroffline?n("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_unitprice)*t.positiveFloat(i.settlement_count))))]):n("td",[t._v("¥"+t._s(t.positiveFloat(i.settlementsumprice)))]),n("td",[t._v(t._s(i.settlement_customer_objection))]),n("td",[n("el-input",{class:{difference:t.otherFoodDifference(i),line:!i.quoted_price_food_id,lineBack:!i.lineoroffline},attrs:{readonly:t.readonly||!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"food.settlement_comments"}}),!i.quoted_price_food_id&&t.issubmit?n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!i.lineoroffline},on:{click:function(i){return t.delotherfood(e,o)}}}):t._e()],1)])}))],2)})),t.otherfoodVisible?n("tbody",[n("tr",{staticClass:"color_2"},[n("th",{staticClass:"color_3"},[t._v("杂费小计")]),n("th",{staticClass:"color_3"}),n("th",{staticClass:"color_3"}),n("th",{staticClass:"color_3"}),n("th"),n("th"),n("th",{staticStyle:{"text-align":"right"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.otherfoodPrice[2])))]),n("th",[t._v("客户异议")]),n("th",[t.issubmit?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addOther(7)}}},[t._v("添加杂费")]):t._e()],1)]),t._l(t.otherfoodincidental,(function(e){return n("tr",{key:e.id},[n("td",{staticClass:"color_2"},[n("el-input",{attrs:{readonly:t.readonly||!e.lineoroffline,placeholder:"杂费项名称"},model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"foodzf.content"}})],1),n("td",{staticClass:"color_2"},[n("el-checkbox",{attrs:{disabled:t.readonly||!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"foodzf.isnotservice"}},[t._v("计入服务费")])],1),n("td",{staticClass:"color_2"}),n("td",{staticClass:"color_2"}),n("td",[n("el-input",{class:{lineBack:!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"foodzf.price"}})],1),n("td",[n("el-input",{class:{lineBack:!e.lineoroffline},attrs:{readonly:t.readonly||!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"foodzf.count"}})],1),e.lineoroffline?n("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count))))]):n("td",[t._v("¥"+t._s(t.positiveFloat(e.sumprice)))]),n("td",[t._v(t._s(e.settlement_customer_objection))]),n("td",[n("el-input",{staticClass:"line",class:{lineBack:!e.lineoroffline},attrs:{readonly:t.readonly||!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"foodzf.comments"}}),t.issubmit?n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)])}))],2):t._e(),t.transportationVisible?n("tbody",[n("tr",{staticClass:"color_2"},[t._m(9),n("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.intercitytrafficPrice[0].all)))]),n("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.intercitytrafficPrice[1].all)))]),n("th")])]):t._e(),t._l(t.info.transportationlist,(function(e,i){return n("tbody",{key:"chengji"+i},[n("tr",{staticClass:"color_2"},[n("th",{staticClass:"color_3"},[n("i",[t._v(t._s(t._f("date_day_ex")(e.date)))])]),n("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.intercitytrafficPrice[0].subtotal["sub_"+i])))]),n("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.intercitytrafficPrice[1].subtotal["sub_"+i])))]),n("th",[t.issubmit?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.addstransportation(e)}}},[t._v("添加交通")]):t._e()],1)]),t._m(10,!0),t._l(e.tranlists,(function(i,o){return n("tr",{key:"transportation"+o},[n("td",{staticClass:"color_2"},[i.quoted_price_transportation_id?[t._v(" "+t._s(i.joinname)+" ")]:[n("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(e){return t.changebigcar(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"transportation.settlement_itemid"}},t._l(t.transportationcostProjects,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_transportation_id&&(i.requirement||i.offerremarks)?n("el-tooltip",{staticClass:"describe-tooltip",attrs:{effect:"dark",placement:"top-end"}},[n("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.requirement?n("div",[t._v("需求说明："+t._s(i.requirement))]):t._e(),i.offerremarks?n("div",[t._v("报价备注："+t._s(i.offerremarks))]):t._e()]),n("el-button",{attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),n("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.unitprice)))]),n("td",{staticClass:"color_2"},[t._v(t._s(i.passengercount))]),n("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.quotationsumprice)))]),n("td",[n("el-input",{class:{lineBack:!i.lineoroffline},attrs:{readonly:t.readonly||!i.lineoroffline},on:{input:function(e){i.settlement_unitprice=t.formatNum(i.settlement_unitprice,2)}},model:{value:i.settlement_unitprice,callback:function(e){t.$set(i,"settlement_unitprice",e)},expression:"transportation.settlement_unitprice"}})],1),n("td",[n("el-input",{class:{lineBack:!i.lineoroffline},staticStyle:{width:"50%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,2)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"transportation.settlement_count"}})],1),i.lineoroffline?n("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_unitprice)*t.positiveFloat(i.settlement_count))))]):n("td",[t._v("¥"+t._s(t.positiveFloat(i.settlementsumprice)))]),n("td",[t._v(t._s(i.settlement_customer_objection))]),n("td",[n("el-input",{class:{difference:t.transportationDifference(i),line:!i.quoted_price_transportation_id,lineBack:!i.lineoroffline},attrs:{readonly:t.readonly||!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"transportation.settlement_comments"}}),!i.quoted_price_transportation_id&&t.issubmit?n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!i.lineoroffline},on:{click:function(i){return t.delstransportation(e,o)}}}):t._e()],1)])}))],2)})),t.transportationVisible?n("tbody",[n("tr",{staticClass:"color_2"},[n("th",{staticClass:"color_3"},[t._v("杂费小计")]),n("th",{staticClass:"color_3"}),n("th",{staticClass:"color_3"}),n("th",{staticClass:"color_3"}),n("th"),n("th"),n("th",{staticStyle:{"text-align":"right"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.intercitytrafficPrice[2])))]),n("th",[t._v("客户异议")]),n("th",[t.issubmit?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addOther(4)}}},[t._v("添加杂费")]):t._e()],1)]),t._l(t.intercitytrafficincidental,(function(e){return n("tr",{key:e.id},[n("td",{staticClass:"color_2"},[n("el-select",{attrs:{disabled:t.readonly||!e.lineoroffline,placeholder:"请选择乘坐工具"},model:{value:e.itemcode,callback:function(i){t.$set(e,"itemcode",i)},expression:"transportationzf.itemcode"}},t._l(t.info.trantypelist,(function(t){return n("el-option",{key:t.trancode,attrs:{value:t.trancode,label:t.tranname}})})),1)],1),n("td",{staticClass:"color_2"},[n("el-checkbox",{attrs:{disabled:t.readonly||!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"transportationzf.isnotservice"}},[t._v(" 计入服务费 ")])],1),n("td",{staticClass:"color_2"}),n("td",{staticClass:"color_2"}),n("td",[n("el-input",{class:{lineBack:!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"transportationzf.price"}})],1),n("td",[n("el-input",{class:{lineBack:!e.lineoroffline},attrs:{readonly:t.readonly||!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"transportationzf.count"}})],1),e.lineoroffline?n("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count))))]):n("td",[t._v("¥"+t._s(t.positiveFloat(e.sumprice)))]),n("td",[t._v(t._s(e.settlement_customer_objection))]),n("td",[n("el-input",{staticClass:"line",class:{lineBack:!e.lineoroffline},attrs:{readonly:t.readonly||!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"transportationzf.comments"}}),t.issubmit?n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)])}))],2):t._e(),t.carVisible?n("tbody",[n("tr",{staticClass:"color_2"},[t._m(11),n("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.carPrice[0].all)))]),n("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.carPrice[1].all)))]),n("th")])]):t._e(),t._l(t.info.carlist,(function(e,i){return n("tbody",{key:"shinei"+i},[n("tr",{staticClass:"color_2"},[n("th",{staticClass:"color_3"},[n("i",[t._v(t._s(t._f("date_day_ex")(e.date)))])]),n("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.carPrice[0].subtotal["sub_"+i])))]),n("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.carPrice[1].subtotal["sub_"+i])))]),n("th",[t.issubmit?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.addcar(e)}}},[t._v("添加交通")]):t._e()],1)]),t._m(12,!0),t._l(e.carlists,(function(i,o){return n("tr",{key:"car"+o},[n("td",{staticClass:"color_2"},[i.quoted_price_car_id?[t._v(" "+t._s(i.purposename+"("+i.vehicletypename+";搭乘人数:"+i.vehiclecount+"人;用车城市:"+i.city+"; 车型名称: "+i.brand_name+")")+" ")]:[n("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(e){return t.changecar(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"car.settlement_itemid"}},t._l(t.carcostProjects,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_car_id&&(i.explain||i.offer_remarks)?n("el-tooltip",{staticClass:"describe-tooltip",attrs:{effect:"dark",placement:"top-end"}},[n("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.explain?n("div",[t._v("需求说明："+t._s(i.explain))]):t._e(),i.offer_remarks?n("div",[t._v("报价备注："+t._s(i.offer_remarks))]):t._e()]),n("el-button",{attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),n("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.price)))]),n("td",{staticClass:"color_2"},[t._v(t._s(i.carcount))]),n("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.quotationsumprice)))]),n("td",[n("el-input",{class:{lineBack:!i.lineoroffline},attrs:{type:"text",readonly:t.readonly||!i.lineoroffline},on:{input:function(e){i.settlement_unitprice=t.formatNum(i.settlement_unitprice,2)}},model:{value:i.settlement_unitprice,callback:function(e){t.$set(i,"settlement_unitprice",e)},expression:"car.settlement_unitprice"}})],1),n("td",[n("el-input",{class:{lineBack:!i.lineoroffline},staticStyle:{width:"50%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,2)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"car.settlement_count"}})],1),i.lineoroffline?n("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_unitprice)*t.positiveFloat(i.settlement_count))))]):n("td",[t._v("¥"+t._s(t.positiveFloat(i.settlementsumprice)))]),n("td",[t._v(t._s(i.settlement_customer_objection))]),n("td",[n("el-input",{class:{difference:t.carDifference(i),line:!i.quoted_price_car_id,lineBack:!i.lineoroffline},attrs:{readonly:t.readonly||!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"car.settlement_comments"}}),!i.quoted_price_car_id&&t.issubmit?n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",disabled:t.readonly||!i.lineoroffline,circle:"",size:"mini"},on:{click:function(i){return t.delcar(e,o)}}}):t._e()],1)])}))],2)})),t.carVisible?n("tbody",[n("tr",{staticClass:"color_2"},[n("th",{staticClass:"color_3"},[t._v("杂费小计")]),n("th",{staticClass:"color_3"}),n("th",{staticClass:"color_3"}),n("th",{staticClass:"color_3"}),n("th"),n("th"),n("th",{staticStyle:{"text-align":"right"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.carPrice[2])))]),n("th",[t._v("客户异议")]),n("th",[t.issubmit?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addOther(5)}}},[t._v("添加杂费")]):t._e()],1)]),t._l(t.carincidental,(function(e){return n("tr",{key:e.id},[n("td",{staticClass:"color_2"},[n("el-input",{attrs:{readonly:t.readonly||!e.lineoroffline,placeholder:"杂费项名称"},model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"carzf.content"}})],1),n("td",{staticClass:"color_2"},[n("el-checkbox",{attrs:{disabled:t.readonly||!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"carzf.isnotservice"}},[t._v("计入服务费")])],1),n("td",{staticClass:"color_2"}),n("td",{staticClass:"color_2"}),n("td",[n("el-input",{class:{lineBack:!e.lineoroffline},attrs:{readonly:t.readonly||!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"carzf.price"}})],1),n("td",[n("el-input",{class:{lineBack:!e.lineoroffline},attrs:{readonly:t.readonly||!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"carzf.count"}})],1),e.lineoroffline?n("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count))))]):n("td",[t._v("¥"+t._s(t.positiveFloat(e.sumprice)))]),n("td",[t._v(t._s(e.settlement_customer_objection))]),n("td",[n("el-input",{staticClass:"line",class:{lineBack:!e.lineoroffline},attrs:{readonly:t.readonly||!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"carzf.comments"}}),t.issubmit?n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)])}))],2):t._e(),n("tbody",[n("tr",{staticClass:"color_2"},[t._m(13),n("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.otherPrice[0])))]),n("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.otherPrice[1])))]),n("th",[t.issubmit?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addsundry()}}},[t._v("添加其他")]):t._e()],1)])]),n("tbody",[t._m(14),t._l(t.info.otherlist,(function(e,i){return n("tr",{key:"other"+i},[n("td",{staticClass:"color_2"},[e.quoted_price_other_id?n("div",[t._v(" "+t._s(e.servicetypename)+" ")]):n("div",[n("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:"",disabled:t.readonly||!e.lineoroffline},on:{change:function(n){return t.changeOtherSel(e,i,n)}},model:{value:e.settlement_itemid,callback:function(i){t.$set(e,"settlement_itemid",i)},expression:"other.settlement_itemid"}},t._l(t.othercostProjects,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e.quoted_price_other_id&&(e.describe||e.offer_remarks)?n("el-tooltip",{staticClass:"describe-tooltip",attrs:{effect:"dark",placement:"top-end"}},[n("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[e.describe?n("div",[t._v("需求说明："+t._s(e.describe))]):t._e(),e.offer_remarks?n("div",[t._v("报价备注："+t._s(e.offer_remarks))]):t._e()]),n("el-button",{attrs:{type:"text"}},[t._v("备注")])],1):t._e()],1),e.quoted_price_other_id?n("td",{staticClass:"color_2"},[t._v(" "+t._s(t.positiveFloat(e.price))+" ")]):t._e(),e.quoted_price_other_id?n("td",{staticClass:"color_2"},[t._v(" "+t._s(e.offerparticipatecount)+" ")]):t._e(),e.quoted_price_other_id?n("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(e.quotationsumprice)))]):t._e(),e.quoted_price_other_id?t._e():n("td",{staticClass:"color_2 otherFee",attrs:{colspan:"3"}},[n("div",[[n("el-select",{directives:[{name:"show",rawName:"v-show",value:["009-5","009-6","009-7","009-11","009-12"].includes(e.settlement_itemid),expression:"['009-5', '009-6', '009-7', '009-11', '009-12'].includes(other.settlement_itemid)"}],staticStyle:{width:"200px"},attrs:{disabled:t.readonly||!e.lineoroffline,clearable:"",size:"small"},model:{value:e.two_level_code,callback:function(i){t.$set(e,"two_level_code",i)},expression:"other.two_level_code"}},t._l(e.detail,(function(t){return n("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),1)],n("el-checkbox",{attrs:{disabled:t.readonly||!!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"other.isnotservice"}},[t._v("计入服务费")]),t._e()],2)]),n("td",[n("el-input",{class:{lineBack:!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!e.lineoroffline},on:{input:function(i){e.settlement_unitprice=t.formatNum(e.settlement_unitprice,2)}},model:{value:e.settlement_unitprice,callback:function(i){t.$set(e,"settlement_unitprice",i)},expression:"other.settlement_unitprice"}})],1),n("td",[n("el-input",{class:{lineBack:!e.lineoroffline},staticStyle:{width:"50%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!e.lineoroffline},on:{input:function(i){e.settlement_count=t.formatNum(e.settlement_count,2)}},model:{value:e.settlement_count,callback:function(i){t.$set(e,"settlement_count",i)},expression:"other.settlement_count"}})],1),e.lineoroffline?n("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.settlement_unitprice)*t.positiveFloat(e.settlement_count))))]):n("td",[t._v("¥"+t._s(t.positiveFloat(e.settlementsumprice)))]),n("td",[t._v(t._s(e.settlement_customer_objection))]),n("td",[n("el-input",{class:{difference:t.otherDifference(e),line:!e.quoted_price_other_id,lineBack:!e.lineoroffline},attrs:{readonly:t.readonly||!e.lineoroffline},model:{value:e.settlement_comments,callback:function(i){t.$set(e,"settlement_comments",i)},expression:"other.settlement_comments"}}),!e.quoted_price_other_id&&t.issubmit?n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!e.lineoroffline},on:{click:function(e){return t.delsother(t.item,i)}}}):t._e()],1)])}))],2),n("tbody",[n("tr",{staticClass:"color_2"},[n("th",{staticClass:"color_3"},[t._v("杂费小计")]),n("th",{staticClass:"color_3"}),n("th",{staticClass:"color_3"}),n("th",{staticClass:"color_3"}),n("th"),n("th"),n("th",{staticStyle:{"text-align":"right"}},[t._v("小计：¥"+t._s(t.positiveFloat(t.otherPrice[2])))]),n("th",[t._v("客户异议")]),n("th",[t.issubmit?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addOther(6)}}},[t._v("添加杂费")]):t._e()],1)]),t._l(t.otherincidental,(function(e){return n("tr",{key:e.id},[n("td",{staticClass:"color_2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"otherzf.content"}],attrs:{type:"text",readonly:t.readonly||!e.lineoroffline,placeholder:"杂费项名称"},domProps:{value:e.content},on:{input:function(i){i.target.composing||t.$set(e,"content",i.target.value)}}})]),n("td",{staticClass:"color_2 otherFee",attrs:{colspan:"3"}},[n("div",[n("el-checkbox",{attrs:{disabled:t.readonly||!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"otherzf.isnotservice"}},[t._v("计入服务费")]),t._e()],1)]),n("td",[n("el-input",{class:{lineBack:!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"otherzf.price"}})],1),n("td",[n("el-input",{class:{lineBack:!e.lineoroffline},attrs:{readonly:t.readonly||!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"otherzf.count"}})],1),e.lineoroffline?n("td",[t._v("¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count))))]):n("td",[t._v("¥"+t._s(t.positiveFloat(e.sumprice)))]),n("td",[t._v(t._s(e.settlement_customer_objection))]),n("td",[n("el-input",{staticClass:"line",class:{lineBack:!e.lineoroffline},attrs:{readonly:t.readonly||!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"otherzf.comments"}}),t.issubmit?n("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)])}))],2),n("tbody",[n("tr",{staticClass:"color_2"},[t._m(15),n("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.positiveFloatSix(t.servicePrice[0])+(0==t.info.zhicai_service?t.positiveFloatSix(t.servicePrice[4]):t.positiveFloatSix(t.servicePrice[8])))))]),n("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.positiveFloatSix(t.servicePrice[1])+(0==t.info.zhicai_service?t.positiveFloatSix(t.servicePrice[5]):t.positiveFloatSix(t.servicePrice[9])))))]),n("th")])]),n("tbody",[t._m(16),n("tr",[n("td",{staticClass:"color_2"},[t._v("非直采服务费")]),n("td",{staticClass:"color_2 wordBreak",attrs:{colspan:"2"}},[t._v(t._s(t.servicePrice[2]))]),n("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(t.servicePrice[0])))]),n("td",{staticClass:"wordBreak",attrs:{colspan:"2"}},[t._v(" "+t._s(t.servicePrice[3])+" "),t.info.event_info_configure.service_fee_ratio?n("span",[t._v(" * "),n("el-input",{staticClass:"line",staticStyle:{width:"20%"},attrs:{size:"mini",readonly:t.readonly},model:{value:t.info.sheet_fzc_service,callback:function(e){t.$set(t.info,"sheet_fzc_service",e)},expression:"info.sheet_fzc_service"}}),t._v(" % ")],1):t._e()]),n("td",[t._v("¥"+t._s(t.positiveFloat(t.servicePrice[1])))]),n("td"),n("td",[n("el-input",{attrs:{readonly:t.readonly},model:{value:t.info.settlement_service_remark,callback:function(e){t.$set(t.info,"settlement_service_remark",e)},expression:"info.settlement_service_remark"}})],1)]),1==t.info.zhicai_service?n("tr",[n("td",{staticClass:"color_2"},[t._v("直采服务费")]),n("td",{staticClass:"color_2",attrs:{colspan:"2"}},t._l(t.info.event_quoted_price_zhicai_service,(function(e,i){return n("p",{key:i},[n("span",[t._v(" "+t._s(e.grade_name)+" ")]),n("span",[t._v(" ￥"+t._s(e.conten)+" ")])])})),0),n("td",{staticClass:"color_2"},[t._v("¥ "+t._s(t.positiveFloat(t.servicePrice[8])))]),n("td",{staticClass:"chaifen",attrs:{colspan:"2"}},t._l(t.info.event_settlement_sheet_zhicai_service,(function(e,i){return n("p",{key:i,staticStyle:{margin:"10px 0"}},[n("span",[t._v(" "+t._s(e.grade_name)+" ")]),n("span",[t._v(" ￥"+t._s(e.grade_price)+" ")]),n("span",[t._v(" * "),n("el-input",{staticStyle:{width:"20%"},attrs:{size:"small",readonly:t.readonly},on:{input:function(i){e.grade_count=t.positiveFloatOne(e.grade_count)}},model:{value:e.grade_count,callback:function(i){t.$set(e,"grade_count",i)},expression:"item.grade_count"}})],1)])})),0),n("td",[t._v("¥"+t._s(t.positiveFloat(t.servicePrice[9])))]),n("td"),n("td",[n("el-input",{attrs:{readonly:t.readonly},model:{value:t.info.settlement_advance_remark,callback:function(e){t.$set(t.info,"settlement_advance_remark",e)},expression:"info.settlement_advance_remark"}})],1)]):n("tr",[n("td",{staticClass:"color_2"},[t._v("直采服务费")]),n("td",{staticClass:"color_2",attrs:{colspan:"2"}},[n("pre",{staticClass:"pre_fontstyle"},[t._v(t._s(t.servicePrice[6]))])]),n("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(t.servicePrice[4])))]),n("td",{staticClass:"chaifen",attrs:{colspan:"2"}},[n("el-input",{staticStyle:{width:"40%"},attrs:{readonly:t.readonly},on:{input:function(e){t.info.settlement_advance_amount=t.formatNum(t.info.settlement_advance_amount)}},model:{value:t.info.settlement_advance_amount,callback:function(e){t.$set(t.info,"settlement_advance_amount",e)},expression:"info.settlement_advance_amount"}}),t._v(" * "),n("el-input",{staticStyle:{width:"40%"},attrs:{readonly:t.readonly},on:{input:function(e){t.info.settlement_advance_proportion=t.formatNum(t.info.settlement_advance_proportion)}},model:{value:t.info.settlement_advance_proportion,callback:function(e){t.$set(t.info,"settlement_advance_proportion",e)},expression:"info.settlement_advance_proportion"}}),t._v(" % ")],1),n("td",[t._v("¥"+t._s(t.positiveFloat(t.servicePrice[5])))]),n("td"),n("td",[n("el-input",{attrs:{readonly:t.readonly},model:{value:t.info.settlement_advance_remark,callback:function(e){t.$set(t.info,"settlement_advance_remark",e)},expression:"info.settlement_advance_remark"}})],1)])]),n("tbody",[n("tr",{staticClass:"color_2"},[t._m(17),n("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v("报价金额：¥"+t._s(t.positiveFloat(t.vatPrice[0])))]),n("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v("结算金额：¥"+t._s(t.positiveFloat(t.vatPrice[1])))]),n("th")])]),n("tbody",[t._m(18),n("tr",[n("td",{staticClass:"color_2"},[t._v("VAT")]),n("td",{staticClass:"color_2 wordBreak",attrs:{colspan:"2"}},[t._v(t._s(t.vatPrice[2]))]),n("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(t.vatPrice[0])))]),n("td",{staticClass:"wordBreak",attrs:{colspan:"2"}},[t._v(" "+t._s(t.vatPrice[3])+" "),n("span",[t._v(" * "),n("el-input",{staticClass:"line",staticStyle:{width:"20%"},attrs:{size:"mini",readonly:t.readonly,disabled:0==t.info.event_info_configure.vatcanedit},on:{input:function(e){t.info.settlement_taxrate=t.formatNum(t.info.settlement_taxrate)}},model:{value:t.info.settlement_taxrate,callback:function(e){t.$set(t.info,"settlement_taxrate",e)},expression:"info.settlement_taxrate"}}),t._v(" % ")],1)]),n("td",[t._v("¥"+t._s(t.positiveFloat(t.vatPrice[1])))]),n("td"),n("td",[n("el-input",{attrs:{readonly:t.readonly},model:{value:t.info.settlement_taxrate_comments,callback:function(e){t.$set(t.info,"settlement_taxrate_comments",e)},expression:"info.settlement_taxrate_comments"}})],1)])])],2),n("div",{staticClass:"qita"},[n("div",{staticClass:"left"},[n("div",{staticClass:"stitle"},[t._v("客户异议")]),n("div",{staticClass:"context"},[n("div",{staticClass:"objectionDetailStyle",domProps:{innerHTML:t._s(t.info.settlement_customer_objection)},on:{click:function(e){return t.getImg(e)}}})])]),n("div",{staticClass:"right"},[n("div",{staticClass:"stitle"},[t._v("其他说明")]),n("div",{staticClass:"context"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.info.settlement_offer_remarks,expression:"info.settlement_offer_remarks"}],attrs:{readonly:t.readonly},domProps:{value:t.info.settlement_offer_remarks},on:{input:function(e){e.target.composing||t.$set(t.info,"settlement_offer_remarks",e.target.value)}}})])])])]):t._e(),n("div",{staticClass:"excel"},[n("a",{attrs:{download:""},on:{click:t.excelDownload}},[t._v("导出结算单")])]),this.info.settlement_status!=this.status_tobeconfirmed&&t.issubmit?n("div",{staticClass:"submit"},[n("el-button",{on:{click:t.draft}},[t._v("保存到草稿箱")]),n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交结算单")])],1):t._e(),t.info.historylist&&t.info.historylist.length>0?n("div",{staticClass:"info"},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"header clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("历史结算单：")])]),t._l(t.info.historylist,(function(e,i){return n("div",{key:e.id,staticClass:"text item"},[t._v("第"+t._s(i+1)+"次结算, 总价￥"+t._s(t.positiveFloat(e.settlement_total_price))+"元，[ "+t._s(t._f("date_ex")(e.submit_time))+" ]")])}))],2)],1):t._e(),n("el-dialog",{attrs:{visible:t.addSettleShow,title:"添加结算项目",center:"",width:"600px"},on:{"update:visible":function(e){t.addSettleShow=e},close:function(e){t.addSettleShow=!1}}},[n("el-form",{ref:"addSettleInfo",attrs:{model:t.addSettleInfo,rules:t.addSettleRules,"label-width":"200px"}},[n("el-form-item",{attrs:{label:"选择项目分类",prop:"projectClass"}},[n("el-select",{staticClass:"demand_300",attrs:{size:"small",clearable:"",filterable:""},on:{change:t.changeProjectClass},model:{value:t.addSettleInfo.projectClass,callback:function(e){t.$set(t.addSettleInfo,"projectClass",e)},expression:"addSettleInfo.projectClass"}},t._l(t.projectClass,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.needCostDate,expression:"needCostDate"}],attrs:{label:"选择费用发生日期",prop:"costDate"}},[n("el-select",{staticClass:"demand_300",attrs:{size:"small",clearable:"",filterable:""},model:{value:t.addSettleInfo.costDate,callback:function(e){t.$set(t.addSettleInfo,"costDate",e)},expression:"addSettleInfo.costDate"}},t._l(t.costDates,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),n("el-form-item",{attrs:{label:"选择费用项目",prop:"costProject"}},[n("el-select",{staticClass:"demand_300",attrs:{loading:t.cost_project_load,size:"small",clearable:"",filterable:""},on:{change:t.changecostProject},model:{value:t.addSettleInfo.costProject,callback:function(e){t.$set(t.addSettleInfo,"costProject",e)},expression:"addSettleInfo.costProject"}},t._l(t.costProjects,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),n("span",{staticClass:"dialog-footer flex_row justify_center",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.addSettleShow=!1}}},[t._v("取 消")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addSettle}},[t._v("添 加")])],1)],1)],1):t._e()},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",[t._v(" 客户材料 "),i("span",{staticStyle:{"font-size":"12px","font-weight":"bold"}},[t._v(":")]),i("span",{staticStyle:{"margin-left":"10px"}},[t._v("--")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",{staticClass:"color_2"},[i("th",[t._v("凭证名称")]),i("th",[t._v("文件")]),i("th",[t._v("客户异议")]),i("th",[t._v("说明")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("客房")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("会场")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"color_2"},[i("th",{staticClass:"color_3"},[t._v("消费项目")]),i("th",{staticClass:"color_3"},[t._v("单价(元)")]),i("th",{staticClass:"color_3"},[t._v("数量")]),i("th",{staticClass:"color_3"},[t._v("金额(元)")]),i("th",[t._v("单价(元)")]),i("th",[t._v("数量")]),i("th",[t._v("金额(元)")]),i("th",[t._v("客户异议")]),i("th",[t._v("结算说明")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("酒店内餐饮")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"color_2"},[i("th",{staticClass:"color_3"},[t._v("消费项目")]),i("th",{staticClass:"color_3"},[t._v("单价(元)")]),i("th",{staticClass:"color_3"},[t._v("数量")]),i("th",{staticClass:"color_3"},[t._v("金额(元)")]),i("th",[t._v("单价(元)")]),i("th",[t._v("数量")]),i("th",[t._v("金额(元)")]),i("th",[t._v("客户异议")]),i("th",[t._v("结算说明")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("酒店外餐饮")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"color_2"},[i("th",{staticClass:"color_3"},[t._v("消费项目")]),i("th",{staticClass:"color_3"},[t._v("单价(元)")]),i("th",{staticClass:"color_3"},[t._v("数量")]),i("th",{staticClass:"color_3"},[t._v("金额(元)")]),i("th",[t._v("单价(元)")]),i("th",[t._v("数量")]),i("th",[t._v("金额(元)")]),i("th",[t._v("客户异议")]),i("th",[t._v("结算说明")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("大交通")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"color_2"},[i("th",{staticClass:"color_3"},[t._v("消费项目")]),i("th",{staticClass:"color_3"},[t._v("单价(元)")]),i("th",{staticClass:"color_3"},[t._v("数量")]),i("th",{staticClass:"color_3"},[t._v("金额(元)")]),i("th",[t._v("单价(元)")]),i("th",[t._v("数量")]),i("th",[t._v("金额(元)")]),i("th",[t._v("客户异议")]),i("th",[t._v("结算说明")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("市内交通")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"color_2"},[i("th",{staticClass:"color_3"},[t._v("消费项目")]),i("th",{staticClass:"color_3"},[t._v("单价(元)")]),i("th",{staticClass:"color_3"},[t._v("数量")]),i("th",{staticClass:"color_3"},[t._v("金额(元)")]),i("th",[t._v("单价(元)")]),i("th",[t._v("数量")]),i("th",[t._v("金额(元)")]),i("th",[t._v("客户异议")]),i("th",[t._v("结算说明")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("其他")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"color_2"},[i("th",{staticClass:"color_3"},[t._v("消费项目")]),i("th",{staticClass:"color_3"},[t._v("单价(元)")]),i("th",{staticClass:"color_3"},[t._v("数量")]),i("th",{staticClass:"color_3"},[t._v("金额(元)")]),i("th",[t._v("单价(元)")]),i("th",[t._v("数量")]),i("th",[t._v("金额(元)")]),i("th",[t._v("客户异议")]),i("th",[t._v("结算说明")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("服务费")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"color_2"},[i("th",{staticClass:"color_3"},[t._v("消费项目")]),i("th",{staticClass:"color_3",attrs:{colspan:"2"}},[t._v("服务费计算")]),i("th",{staticClass:"color_3"},[t._v("金额(元)")]),i("th",{attrs:{colspan:"2"}},[t._v("服务费计算")]),i("th",[t._v("金额(元)")]),i("th"),i("th",[t._v("结算说明")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("税费")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"color_2"},[i("th",{staticClass:"color_3"},[t._v("消费项目")]),i("th",{staticClass:"color_3",attrs:{colspan:"2"}},[t._v("税费计算")]),i("th",{staticClass:"color_3"},[t._v("金额(元)")]),i("th",{attrs:{colspan:"2"}},[t._v("税费计算")]),i("th",[t._v("金额(元)")]),i("th"),i("th",[t._v("结算说明")])])}],s=i("2909"),a=i("1da1"),r=(i("96cf"),i("4de4"),i("d3b7"),i("159b"),i("4e82"),i("ac1f"),i("5319"),i("b0c0"),i("fb6a"),i("d81d"),i("caad"),i("a630"),i("3ca3"),i("a434"),i("cf45")),l=i("0e5c"),c=i("c1df"),f=i.n(c),_=i("df68"),u=i("acd6"),d=(i("b587"),{data:function(){return{info:null,fzc_service:null,sheet_fzc_service:null,status_draft:"0029-1",status_tobeconfirmed:"0029-2",status_confirm:"0029-3",status_supplement:"0029-5",status_reject:"0029-4",settlement_status:"0029-3",errormsg:[],quoted_price_food_option:[{value:0,label:"酒店内用餐"},{value:1,label:"酒店外用餐"}],orderIDList:[],isopen:!1,url:"",arrayList:[{type:6,fileList:[],name:"客户结算单",remark:"",arrayLength:null},{type:7,fileList:[],name:"客户结算确认邮件",remark:"",arrayLength:null},{type:8,fileList:[],name:"PO单",remark:"",arrayLength:null},{type:5,fileList:[],name:"供应商发票及账单",remark:"",arrayLength:null},{type:1,fileList:[],name:"酒店住宿发票+小联",remark:"",arrayLength:null},{type:2,fileList:[],name:"酒店餐饮发票+小联",remark:"",arrayLength:null},{type:3,fileList:[],name:"酒店会场发票+小联",remark:"",arrayLength:null},{type:9,fileList:[],name:"外出用餐发票+小联",remark:"",arrayLength:null},{type:10,fileList:[],name:"注册费发票+小联",remark:"",arrayLength:null},{type:11,fileList:[],name:"用车发票+小联",remark:"",arrayLength:null},{type:12,fileList:[],name:"制作物发票+小联",remark:"",arrayLength:null},{type:13,fileList:[],name:"保险发票+小联",remark:"",arrayLength:null},{type:14,fileList:[],name:"签到表",remark:"",arrayLength:null},{type:15,fileList:[],name:"会议照片-全景",remark:"",arrayLength:null},{type:4,fileList:[],name:"其他",remark:"",arrayLength:null},{type:16,fileList:[],name:"用车小票",remark:"",arrayLength:null},{type:17,fileList:[],name:"用车其他结算附件",remark:"",arrayLength:null}],updateIndex:0,updateFileIndex:0,rename:!1,fileName:"",suffix:"",isFail:1,downloadUrl:"",addSettleShow:!1,projectClass:[{value:"0034",label:"客房"},{value:"0049",label:"会场"},{value:"0050",label:"酒店内餐饮"},{value:"0051",label:"酒店外餐饮"},{value:"003",label:"大交通"},{value:"006",label:"地面交通"},{value:"009",label:"其他服务"}],costDates:[],cost_project_load:!1,costProjects:[],roomcostProjects:[],meetingcostProjects:[],costProjefoodcostProjectscts:[],otherfoodcostProjects:[],transportationcostProjects:[],carcostProjects:[],othercostProjects:[],addSettleRules:{projectClass:[{required:!0,message:"请选择项目分类",trigger:"change"}],costDate:[{required:!0,message:"请选择费用发生日期",trigger:"change"}],costProject:[{required:!0,message:"请选择费用项目",trigger:"change"}]},addSettleInfo:{projectClass:"0034",costDate:"",costProject:""},needCostDate:!0}},computed:{issubmit:function(){return 1==this.$route.params.issubmit},readonly:function(){return 0==this.$route.params.issubmit},isconfirm:function(){return this.info.settlement_status==this.status_confirm},issupplement:function(){return this.info.settlement_status==this.status_supplement},formateDate:function(){return function(t){return Object(r["d"])("YYYY年mm月dd日",new Date(t))}},roomVisible:function(){return this.info.roomlist&&this.info.roomlist.length>0},conferenceVisible:function(){return this.info.conferencelist&&this.info.conferencelist.length>0},foodVisible:function(){return this.info.foodlist&&this.info.foodlist.length>0},otherfoodVisible:function(){return this.info.otherfoodlist&&this.info.otherfoodlist.length>0},transportationVisible:function(){return this.info.transportationlist&&this.info.transportationlist.length>0},carVisible:function(){return this.info.carlist&&this.info.carlist.length>0},roomincidental:function(){return this.info.sundrieslist.filter((function(t){return 1==t.type}))},meetingcidental:function(){return this.info.sundrieslist.filter((function(t){return 2==t.type}))},foodincidental:function(){return this.info.sundrieslist.filter((function(t){return 3==t.type}))},otherfoodincidental:function(){return this.info.sundrieslist.filter((function(t){return 7==t.type}))},intercitytrafficincidental:function(){return this.info.sundrieslist.filter((function(t){return 4==t.type}))},carincidental:function(){return this.info.sundrieslist.filter((function(t){return 5==t.type}))},otherincidental:function(){return this.info.sundrieslist.filter((function(t){return 6==t.type}))},roomPrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,n=e[1].subtotal;void 0==this.info.event_info_configure.room_inquiry_service_taxrate&&(this.info.event_info_configure["room_inquiry_service_taxrate"]=0);var o=null!=this.info.event_info_configure.room_inquiry_service_taxrate?this.info.event_info_configure.room_inquiry_service_taxrate:0;this.info.roomlist.forEach((function(o,s){i["sub_".concat(s)]||(i["sub_".concat(s)]=0),n["sub_".concat(s)]||(n["sub_".concat(s)]=0),o.roomlists.forEach((function(o){var a=0;a=0==t.info.is_Inside_outside?o.settlement_count:Object(r["m"])(o.settlement_inside_roomcount)+Object(r["m"])(o.settlement_outside_roomcount);var l=0==o.lineoroffline?Object(r["p"])(o.settlementsumprice):Object(r["p"])(o.settlement_unitprice)*Object(r["m"])(a);console.log(l),i["sub_".concat(s)]+=Object(r["p"])(o.quotationsumprice),e[0].all+=Object(r["p"])(o.quotationsumprice),n["sub_".concat(s)]+=Object(r["p"])(l),e[1].all+=Object(r["p"])(l),1==t.info.event_info_configure.hotel_food_inquiry_isnotservice&&(e[3]+=Object(r["p"])(l),e[4]+=Object(r["p"])(o.quotationsumprice),e[5]+=Object(r["p"])(o.quotationsumprice),e[6]+=Object(r["p"])(l))}))}));var s=0;return e[3]=Object(r["p"])(e[3])*Object(r["p"])(o/100),e[4]=Object(r["p"])(e[4])*Object(r["p"])(o/100),this.roomincidental.forEach((function(t){var i=0==t.lineoroffline?Object(r["p"])(t.sumprice):Object(r["p"])(t.price)*Object(r["m"])(t.count);e[1].all+=Object(r["p"])(i),e[2]+=Object(r["p"])(i),1==t.isnotservice&&(s+=Object(r["p"])(i),e[6]+=Object(r["p"])(i))})),e[3]=Object(r["p"])(e[3])+Object(r["o"])(s)*Object(r["o"])(o/100),e[7]+="+"+Object(r["m"])(e[5])+"*"+Object(r["o"])(o)+"%",e[8]+="+"+Object(r["m"])(e[6])+"*"+Object(r["o"])(o)+"%",e},adddifferenceerrormsg:function(){return function(t,e,i){var n="";1==t?n=this.formateDate(e)+"客房,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":2==t?n=this.formateDate(e)+"会场,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":3==t?n=this.formateDate(e)+"酒店内餐饮,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":4==t?n=this.formateDate(e)+"大交通,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":5==t?n=this.formateDate(e)+"地面交通,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":6==t?n="其他服务,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":7==t&&(n=this.formateDate(e)+"酒店外餐饮,第"+i+"行,单价(元)或数量存在差异,请填写结算说明"),this.errormsg.push(n)}},addnewitemerrormsg:function(){return function(t,e,i){var n="";1==t?n=this.formateDate(e)+"新增客房,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":2==t?n=this.formateDate(e)+"新增会场,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":3==t?n=this.formateDate(e)+"新增酒店内餐饮,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":4==t?n=this.formateDate(e)+"新增大交通,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":5==t?n=this.formateDate(e)+"新增地面交通,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":6==t?n="新增其他服务,第"+i+"行,消费项目名称为必填项,请选择消费项目名称":7==t&&(n=this.formateDate(e)+"新增酒店外餐饮,第"+i+"行,消费项目名称为必填项,请填写消费项目名称"),this.errormsg.push(n)}},roomDifference:function(){return function(t){return(Object(r["o"])(t.unitprice)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.provide_count)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_room_id&&1==t.lineoroffline}},checkRoomDifference:function(){var t=this,e=!1;this.info.roomlist&&this.info.roomlist.length>0&&this.info.roomlist.forEach((function(i){if(i.roomlists&&i.roomlists.length>0){i.roomlists.forEach((function(n,o){e=t.roomDifference(n),!e||null!=n.settlement_comments&&""!=n.settlement_comments||t.adddifferenceerrormsg(1,i.date,o+1)}));var n=i.roomlists.filter((function(t){return null==t.quoted_price_room_id&&""==t.settlement_itemname}));n.length>0&&n.forEach((function(e,n){t.addnewitemerrormsg(1,i.date,n+1)}))}}))},conferencePrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,n=e[1].subtotal;void 0==this.info.event_info_configure.conference_inquiry_service_taxrate&&(this.info.event_info_configure["conference_inquiry_service_taxrate"]=0);var o=null!=this.info.event_info_configure.conference_inquiry_service_taxrate?this.info.event_info_configure.conference_inquiry_service_taxrate:0;this.info.conferencelist.forEach((function(o,s){i["sub_".concat(s)]||(i["sub_".concat(s)]=0),n["sub_".concat(s)]||(n["sub_".concat(s)]=0),o.conferencelists.forEach((function(o){var a=Object(r["p"])(o.quotationsumprice),l=0==o.lineoroffline?Object(r["p"])(o.settlementsumprice):Object(r["p"])(o.settlement_price)*Object(r["m"])(o.settlement_count);i["sub_".concat(s)]+=a,e[0].all+=a,n["sub_".concat(s)]+=l,e[1].all+=l,1==t.info.event_info_configure.conference_inquiry_isnotservice&&(e[3]+=l,e[4]+=a,e[5]+=a,e[6]+=l)}))}));var s=0;return e[3]=Object(r["p"])(e[3])*Object(r["p"])(o/100),e[4]=Object(r["p"])(e[4])*Object(r["p"])(o/100),this.meetingcidental.forEach((function(t){var i=0==t.lineoroffline?Object(r["p"])(t.sumprice):Object(r["p"])(t.price)*Object(r["m"])(t.count);e[1].all+=i,e[2]+=i,1==t.isnotservice&&(s+=i,e[6]+=i)})),e[3]=Object(r["p"])(e[3])+Object(r["p"])(s)*Object(r["p"])(o/100),e[7]="+"+Object(r["m"])(e[5])+"*"+Object(r["o"])(o)+"%",e[8]="+"+Object(r["m"])(e[6])+"*"+Object(r["o"])(o)+"%",e},conferenceDifference:function(){return function(t){return(Object(r["o"])(t.price)!==Object(r["o"])(t.settlement_price)||Object(r["m"])(t.count)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_conference_id&&1==t.lineoroffline}},checkConferenceDifference:function(){var t=this,e=!1;this.info.conferencelist&&this.info.conferencelist.length>0&&this.info.conferencelist.forEach((function(i){if(i.conferencelists&&i.conferencelists.length>0){i.conferencelists.forEach((function(n,o){e=t.conferenceDifference(n),!e||null!=n.settlement_comments&&""!=n.settlement_comments||t.adddifferenceerrormsg(2,i.date,o+1)}));var n=i.conferencelists.filter((function(t){return null==t.quoted_price_conference_id&&""==t.settlement_itemname}));n.length>0&&n.forEach((function(e,n){t.addnewitemerrormsg(2,i.date,n+1)}))}}))},foodPrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,n=e[1].subtotal;void 0==this.info.event_info_configure.hotel_food_inquiry_service_taxrate&&(this.info.event_info_configure["hotel_food_inquiry_service_taxrate"]=0);var o=null!=this.info.event_info_configure.hotel_food_inquiry_service_taxrate?this.info.event_info_configure.hotel_food_inquiry_service_taxrate:0;this.info.foodlist.forEach((function(o,s){i["sub_".concat(s)]||(i["sub_".concat(s)]=0),n["sub_".concat(s)]||(n["sub_".concat(s)]=0),o.foodlists.forEach((function(o){var a=Object(r["p"])(o.quotationsumprice),l=0==o.lineoroffline?Object(r["p"])(o.settlementsumprice):Object(r["p"])(o.settlement_unitprice)*Object(r["m"])(o.settlement_count);i["sub_".concat(s)]+=a,e[0].all+=a,n["sub_".concat(s)]+=l,e[1].all+=l,1==t.info.event_info_configure.hotel_food_inquiry_isnotservice&&(e[3]+=l,e[4]+=a,e[5]+=a,e[6]+=l)}))}));var s=0;return e[3]=Object(r["p"])(e[3])*Object(r["p"])(o/100),e[4]=Object(r["p"])(e[4])*Object(r["p"])(o/100),this.foodincidental.forEach((function(t){var i=0==t.lineoroffline?Object(r["p"])(t.sumprice):Object(r["p"])(t.price)*Object(r["m"])(t.count);e[1].all+=i,e[2]+=i,1==t.isnotservice&&(s+=i,e[6]+=i)})),e[3]=Object(r["p"])(e[3])+Object(r["p"])(s)*Object(r["p"])(o/100),e[7]+="+"+Object(r["m"])(e[5])+"*"+Object(r["o"])(o)+"%",e[8]+="+"+Object(r["m"])(e[6])+"*"+Object(r["o"])(o)+"%",e},foodDifference:function(){return function(t){return(Object(r["o"])(t.price)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.personcount)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_food_id&&1==t.lineoroffline}},checkFoodDifference:function(){var t=this,e=!1;this.info.foodlist&&this.info.foodlist.length>0&&this.info.foodlist.forEach((function(i){if(i.foodlists&&i.foodlists.length>0){i.foodlists.forEach((function(n,o){e=t.foodDifference(n),!e||null!=n.settlement_comments&&""!=n.settlement_comments||t.adddifferenceerrormsg(3,i.date,o+1)}));var n=i.foodlists.filter((function(t){return null==t.quoted_price_food_id&&""==t.settlement_itemname}));n.length>0&&n.forEach((function(e,n){t.addnewitemerrormsg(3,i.date,n+1)}))}}))},otherfoodPrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,n=e[1].subtotal;void 0==this.info.event_info_configure.others_food_inquiry_service_taxrate&&(this.info.event_info_configure["others_food_inquiry_service_taxrate"]=0);var o=null!=this.info.event_info_configure.others_food_inquiry_service_taxrate?this.info.event_info_configure.others_food_inquiry_service_taxrate:0;this.info.otherfoodlist.forEach((function(o,s){i["sub_".concat(s)]||(i["sub_".concat(s)]=0),n["sub_".concat(s)]||(n["sub_".concat(s)]=0),o.foodlists.forEach((function(o){var a=Object(r["p"])(o.quotationsumprice),l=0==o.lineoroffline?Object(r["p"])(o.settlementsumprice):Object(r["p"])(o.settlement_unitprice)*Object(r["m"])(o.settlement_count);i["sub_".concat(s)]+=a,e[0].all+=a,n["sub_".concat(s)]+=l,e[1].all+=l,1==t.info.event_info_configure.others_food_inquiry_isnotservice&&(e[3]+=l,e[4]+=a,e[5]+=a,e[6]+=l)}))}));var s=0;return e[3]=Object(r["p"])(e[3])*Object(r["p"])(o/100),e[4]=Object(r["p"])(e[4])*Object(r["p"])(o/100),this.otherfoodincidental.forEach((function(t){var i=0==t.lineoroffline?Object(r["p"])(t.sumprice):Object(r["p"])(t.price)*Object(r["m"])(t.count);e[1].all+=i,e[2]+=i,1==t.isnotservice&&(s+=i,e[6]+=i)})),e[3]=Object(r["p"])(e[3])+Object(r["p"])(s)*Object(r["p"])(o/100),e[7]+="+"+Object(r["m"])(e[5])+"*"+Object(r["o"])(o)+"%",e[8]+="+"+Object(r["m"])(e[6])+"*"+Object(r["o"])(o)+"%",e},otherFoodDifference:function(){return function(t){return(Object(r["o"])(t.price)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.personcount)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_food_id&&1==t.lineoroffline}},checkOtherFoodDifference:function(){var t=this,e=!1;this.info.otherfoodlist&&this.info.otherfoodlist.length>0&&this.info.otherfoodlist.forEach((function(i){if(i.foodlists&&i.foodlists.length>0){i.foodlists.forEach((function(n,o){e=t.otherFoodDifference(n),!e||null!=n.settlement_comments&&""!=n.settlement_comments||t.adddifferenceerrormsg(7,i.date,o+1)}));var n=i.foodlists.filter((function(t){return null==t.quoted_price_food_id&&""==t.settlement_itemname}));n.length>0&&n.forEach((function(e,n){t.addnewitemerrormsg(7,i.date,n+1)}))}}))},intercitytrafficPrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,n=e[1].subtotal;void 0==this.info.event_info_configure.transportation_inquiry_service_taxrate&&(this.info.event_info_configure["transportation_inquiry_service_taxrate"]=0);var o=null!=this.info.event_info_configure.transportation_inquiry_service_taxrate?this.info.event_info_configure.transportation_inquiry_service_taxrate:0;this.info.transportationlist.forEach((function(o,s){i["sub_".concat(s)]||(i["sub_".concat(s)]=0),n["sub_".concat(s)]||(n["sub_".concat(s)]=0),o.tranlists.forEach((function(o){var a=Object(r["p"])(o.quotationsumprice),l=0==o.lineoroffline?Object(r["p"])(o.settlementsumprice):Object(r["p"])(o.settlement_unitprice)*Object(r["m"])(o.settlement_count);i["sub_".concat(s)]+=a,e[0].all+=a,n["sub_".concat(s)]+=l,e[1].all+=l,1==t.info.event_info_configure.transportation_inquiry_isnotservice&&(e[3]+=l,e[4]+=a,e[5]+=a,e[6]+=l)}))}));var s=0;return e[3]=Object(r["p"])(e[3])*Object(r["p"])(o/100),e[4]=Object(r["p"])(e[4])*Object(r["p"])(o/100),this.intercitytrafficincidental.forEach((function(t){var i=0==t.lineoroffline?Object(r["p"])(t.sumprice):Object(r["p"])(t.price)*Object(r["m"])(t.count);e[1].all+=i,e[2]+=i,1==t.isnotservice&&(s+=i,e[6]+=i)})),e[3]=Object(r["p"])(e[3])+Object(r["p"])(s)*Object(r["p"])(o/100),e[7]="+"+Object(r["m"])(e[5])+"*"+Object(r["o"])(o)+"%",e[8]="+"+Object(r["m"])(e[6])+"*"+Object(r["o"])(o)+"%",e},transportationDifference:function(){return function(t){return(Object(r["o"])(t.unitprice)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.passengercount)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_transportation_id&&1==t.lineoroffline}},checkTransportationDifference:function(){var t=this,e=!1;this.info.transportationlist&&this.info.transportationlist.length>0&&this.info.transportationlist.forEach((function(i){if(i.tranlists&&i.tranlists.length>0){i.tranlists.forEach((function(n,o){e=t.transportationDifference(n),!e||null!=n.settlement_comments&&""!=n.settlement_comments||t.adddifferenceerrormsg(4,i.date,o+1)}));var n=i.tranlists.filter((function(t){return null==t.quoted_price_transportation_id&&null==t.settlement_itemid}));n.length>0&&n.forEach((function(e,n){t.addnewitemerrormsg(4,i.date,n+1)}))}}))},carPrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,n=e[1].subtotal;void 0==this.info.event_info_configure.car_inquiry_service_taxrate&&(this.info.event_info_configure["car_inquiry_service_taxrate"]=0);var o=null!=this.info.event_info_configure.car_inquiry_service_taxrate?this.info.event_info_configure.car_inquiry_service_taxrate:0;this.info.carlist.forEach((function(o,s){i["sub_".concat(s)]||(i["sub_".concat(s)]=0),n["sub_".concat(s)]||(n["sub_".concat(s)]=0),o.carlists.forEach((function(o){var a=Object(r["p"])(o.quotationsumprice),l=0==o.lineoroffline?Object(r["p"])(o.settlementsumprice):Object(r["p"])(o.settlement_unitprice)*Object(r["m"])(o.settlement_count);i["sub_".concat(s)]+=a,e[0].all+=a,n["sub_".concat(s)]+=l,e[1].all+=l,1==t.info.event_info_configure.car_inquiry_isnotservice&&(e[3]+=l,e[4]+=a,e[5]+=a,e[6]+=l)}))}));var s=0;return e[3]=Object(r["p"])(e[3])*Object(r["p"])(o/100),e[4]=Object(r["p"])(e[4])*Object(r["p"])(o/100),this.carincidental.forEach((function(t){var i=0==t.lineoroffline?Object(r["p"])(t.sumprice):Object(r["p"])(t.price)*Object(r["m"])(t.count);e[1].all+=i,e[2]+=i,1==t.isnotservice&&(s+=i,e[6]+=i)})),e[3]=Object(r["p"])(e[3])+Object(r["p"])(s)*Object(r["p"])(o/100),e[7]+="+"+Object(r["m"])(e[5])+"*"+Object(r["o"])(o)+"%",e[8]+="+"+Object(r["m"])(e[6])+"*"+Object(r["o"])(o)+"%",e},carDifference:function(){return function(t){return(Object(r["o"])(t.price)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.carcount)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_car_id&&1==t.lineoroffline}},checkCarDifference:function(){var t=this,e=!1;this.info.carlist&&this.info.carlist.length>0&&this.info.carlist.forEach((function(i){if(i.carlists&&i.carlists.length>0){i.carlists.forEach((function(n,o){e=t.carDifference(n),!e||null!=n.settlement_comments&&""!=n.settlement_comments||t.adddifferenceerrormsg(5,i.date,o+1)}));var n=i.carlists.filter((function(t){return null==t.quoted_price_car_id&&""==t.settlement_itemname}));n.length>0&&n.forEach((function(e,n){t.addnewitemerrormsg(5,i.date,n+1)}))}}))},otherPrice:function(){var t=this,e=[0,0,0,0,0,0,0,"",""],i=0,n=0,o=0;return console.log(this.info.otherlist),this.info.otherlist.forEach((function(n,s){void 0==n.settlementservice_taxrate&&(n["settlementservice_taxrate"]=0),n.settlementservice_taxrate=null!=n.settlementservice_taxrate?n.settlementservice_taxrate:0,void 0==n.service_taxrate&&(n["service_taxrate"]=0),n.service_taxrate=null!=n.service_taxrate?n.service_taxrate:0;var a=null!=n.quoted_price_other_id?n.service_taxrate:n.settlementservice_taxrate,l=Object(r["p"])(n.quotationsumprice),c=0==n.lineoroffline?Object(r["p"])(n.settlementsumprice):Object(r["o"])(n.settlement_unitprice)*Object(r["m"])(n.settlement_count);e[0]=e[0]+l,e[1]=e[1]+c,t.info.eventinfoother.forEach((function(e,i){n.servicetype==e.othercode&&(t.info.otherlist[s].settlementservice_taxrate=e.servicerate)})),1==n.isnotservice&&(i+=Object(r["o"])(c)*Object(r["o"])(a/100),o+=Object(r["o"])(l)*Object(r["o"])(a/100),e[5]+=l,e[6]+=c,e[7]+="+"+Object(r["m"])(l)+"*"+Object(r["o"])(a)+"%",e[8]+="+"+Object(r["m"])(c)+"*"+Object(r["o"])(a)+"%")})),this.otherincidental.forEach((function(t){void 0==t.settlementservice_taxrate&&(t["settlementservice_taxrate"]=0),t.settlementservice_taxrate=null!=t.settlementservice_taxrate?t.settlementservice_taxrate:0;var i=0==t.lineoroffline?Object(r["p"])(t.sumprice):Object(r["p"])(t.price)*Object(r["m"])(t.count);e[1]=e[1]+i,e[2]=e[2]+i,1==t.isnotservice&&(n+=Object(r["p"])(i)*Object(r["p"])(t.settlementservice_taxrate/100),e[6]+=i,e[8]+="+"+Object(r["m"])(i)+"*"+Object(r["o"])(t.settlementservice_taxrate)+"%")})),e[3]=Object(r["p"])(i)+Object(r["p"])(n),e[4]=Object(r["p"])(o),e},otherDifference:function(){return function(t){return(Object(r["o"])(t.price)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.offerservicedaycount)*Object(r["m"])(t.offerparticipatecount)!==Object(r["m"])(t.settlement_count))&&1==t.lineoroffline}},checkOtherDifference:function(){var t=this,e=!1;if(this.info.otherlist&&this.info.otherlist.length>0){this.info.otherlist.forEach((function(i,n){e=t.otherDifference(i),!e||null!=i.settlement_comments&&""!=i.settlement_comments||t.adddifferenceerrormsg(6,null,n+1)}));var i=this.info.otherlist.filter((function(t){return null==t.quoted_price_other_id&&!t.servicetype}));i.length>0&&i.forEach((function(e,i){t.addnewitemerrormsg(6,null,i+1)}))}},servicePrice:function(){var t=this,e=[0,0,"","",0,0,"","",0,0];if(0==this.info.event_info_configure.service_fee_calculation_method)e[0]=Object(r["o"])(this.roomPrice[4])+Object(r["o"])(this.conferencePrice[4])+Object(r["o"])(this.foodPrice[4])+Object(r["o"])(this.otherfoodPrice[4])+Object(r["o"])(this.intercitytrafficPrice[4])+Object(r["o"])(this.carPrice[4])+Object(r["o"])(this.otherPrice[4]),e[1]=Object(r["o"])(this.roomPrice[3])+Object(r["o"])(this.conferencePrice[3])+Object(r["o"])(this.foodPrice[3])+Object(r["o"])(this.otherfoodPrice[3])+Object(r["o"])(this.intercitytrafficPrice[3])+Object(r["o"])(this.carPrice[3])+Object(r["o"])(this.otherPrice[3]),e[2]=this.roomPrice[7]+this.conferencePrice[7]+this.foodPrice[7]+this.otherfoodPrice[7]+this.intercitytrafficPrice[7]+this.carPrice[7]+this.otherPrice[7],e[3]=this.roomPrice[8]+this.conferencePrice[8]+this.foodPrice[8]+this.otherfoodPrice[8]+this.intercitytrafficPrice[8]+this.carPrice[8]+this.otherPrice[8];else if(1==this.info.event_info_configure.service_fee_calculation_method){this.info.event_info_ladder_taxrates&&this.info.event_info_ladder_taxrates.sort((function(t,e){var i=t["ladder_min"],n=e["ladder_min"];return i-n}));var i=this.price_no[2],n=this.price_no[3];this.info.event_info_ladder_taxrates.forEach((function(o,s){var a=0,l=0;t.info.event_info_ladder_taxrates[s-1]?(a=Object(r["p"])(o.ladder_max)-Object(r["p"])(t.info.event_info_ladder_taxrates[s-1].ladder_max?t.info.event_info_ladder_taxrates[s-1].ladder_max:0),l=Object(r["p"])(o.ladder_max)-Object(r["p"])(t.info.event_info_ladder_taxrates[s-1].ladder_max?t.info.event_info_ladder_taxrates[s-1].ladder_max:0)):(a=Object(r["p"])(o.ladder_max)-0,l=Object(r["p"])(o.ladder_max)-0),Object(r["p"])(i)>=Object(r["p"])(a)?t.info.event_info_ladder_taxrates.length-1==s?(e[0]+=Object(r["p"])(i)*Object(r["p"])(o.ladder_taxrate/100),e[2]+="+"+Object(r["o"])(i)+"*"+Object(r["o"])(o.ladder_taxrate)+"%"):(i=Object(r["p"])(i)-Object(r["p"])(a),e[0]+=Object(r["p"])(a)*Object(r["p"])(o.ladder_taxrate/100),e[2]+="+"+Object(r["o"])(a)+"*"+Object(r["o"])(o.ladder_taxrate)+"%"):(e[0]+=Object(r["p"])(i)*Object(r["p"])(o.ladder_taxrate/100),e[2]+="+"+Object(r["o"])(i)+"*"+Object(r["o"])(o.ladder_taxrate)+"%",i=0),Object(r["p"])(n)>=Object(r["p"])(l)?t.info.event_info_ladder_taxrates.length-1==s?(e[1]+=Object(r["p"])(n)*Object(r["p"])(o.ladder_taxrate/100),e[3]+="+"+Object(r["o"])(n)+"*"+Object(r["o"])(o.ladder_taxrate)+"%"):(n=Object(r["p"])(n)-Object(r["p"])(l),e[1]+=Object(r["p"])(l)*Object(r["p"])(o.ladder_taxrate/100),e[3]+="+"+Object(r["o"])(l)+"*"+Object(r["o"])(o.ladder_taxrate)+"%"):(e[1]+=Object(r["p"])(n)*Object(r["p"])(o.ladder_taxrate/100),e[3]+="+"+Object(r["o"])(n)+"*"+Object(r["o"])(o.ladder_taxrate)+"%",n=0)}))}else if(2==this.info.event_info_configure.service_fee_calculation_method){i=this.price_no[2],n=this.price_no[3];for(var o=0;o<this.info.event_info_grade_taxrates.length;o++)if(o==this.info.event_info_grade_taxrates.length-1||Object(r["p"])(i)>=this.info.event_info_grade_taxrates[o].grade_money&&Object(r["p"])(i)<this.info.event_info_grade_taxrates[o+1].grade_money){e[0]=Object(r["p"])(i)*this.info.event_info_grade_taxrates[o].grade_taxrate/100*this.info.fzc_service/100,e[2]=Object(r["p"])(i)+"*"+this.info.event_info_grade_taxrates[o].grade_taxrate+"%",1==this.info.event_info_configure.service_fee_ratio&&null!=this.fzc_service?this.info.fzc_service_list.forEach((function(t){e[0]*=t,e[2]+="*"+100*t+"%"})):e[2]+="*"+this.info.fzc_service+"%",1==this.info.event_info_configure.minimum_service_fee&&e[0]<this.info.event_info_configure.minimum_service_fee_money&&(e[0]=this.info.event_info_configure.minimum_service_fee_money);break}for(o=0;o<this.info.event_info_grade_taxrates.length;o++)if(o==this.info.event_info_grade_taxrates.length-1||Object(r["p"])(n)>=this.info.event_info_grade_taxrates[o].grade_money&&Object(r["p"])(n)<this.info.event_info_grade_taxrates[o+1].grade_money){e[1]=Object(r["p"])(n)*this.info.event_info_grade_taxrates[o].grade_taxrate/100*this.info.sheet_fzc_service/100,e[3]=Object(r["p"])(n)+"*"+this.info.event_info_grade_taxrates[o].grade_taxrate+"%",1==this.info.event_info_configure.service_fee_ratio&&null!=this.sheet_fzc_service&&this.info.sheet_fzc_service_list.forEach((function(t){e[1]*=t,e[3]+="*"+100*t+"%"})),1==this.info.event_info_configure.minimum_service_fee&&e[1]<this.info.event_info_configure.minimum_service_fee_money&&(e[1]=this.info.event_info_configure.minimum_service_fee_money);break}}return 1==this.info.zhicai_service&&(this.info.event_quoted_price_zhicai_service.forEach((function(t){var i;e[8]+=null!==(i=t.grade_price*t.grade_count)&&void 0!==i?i:0})),this.info.event_settlement_sheet_zhicai_service.forEach((function(t){var i;e[9]+=null!==(i=t.grade_price*t.grade_count)&&void 0!==i?i:0}))),e[2]=e[2].replace("+",""),e[3]=e[3].replace("+",""),this.info.quoted_travelagency_payment_money||(this.info.quoted_travelagency_payment_money=0),this.info.quoted_travelagency_payment_proportion||(this.info.quoted_travelagency_payment_proportion=0),this.info.settlement_advance_amount||(this.info.settlement_advance_amount=0),this.info.settlement_advance_proportion||(this.info.settlement_advance_proportion=0),this.info.listqtpm&&this.info.listqtpm.forEach((function(t,i){e[4]+=Object(r["p"])(t.money)*Object(r["p"])(t.proportion/100),e[6]+=Object(r["m"])(t.money)+"*"+Object(r["o"])(t.proportion)+"%\n"})),e[5]=Object(r["p"])(this.info.settlement_advance_amount)*Object(r["p"])(this.info.settlement_advance_proportion/100),this.info.feizhicai_service=e[1],e},vatPrice:function(){var t=[0,0,"",""];return t[0]=(Object(r["p"])(this.roomPrice[0].all)+Object(r["p"])(this.conferencePrice[0].all)+Object(r["p"])(this.foodPrice[0].all)+Object(r["p"])(this.otherfoodPrice[0].all)+Object(r["p"])(this.intercitytrafficPrice[0].all)+Object(r["p"])(this.carPrice[0].all)+Object(r["p"])(this.otherPrice[0])+(0==this.info.zhicai_service?Object(r["p"])(this.servicePrice[4]):Object(r["p"])(this.servicePrice[8])))*this.info.taxrate/100,1!=this.info.event_info_configure.fzc_service_fee_money&&null!=this.info.event_info_configure.fzc_service_fee_money||(t[0]+=Object(r["p"])(this.servicePrice[0])*Object(r["p"])(this.info.taxrate/100)),t[1]=(Object(r["p"])(this.roomPrice[1].all)+Object(r["p"])(this.conferencePrice[1].all)+Object(r["p"])(this.foodPrice[1].all)+Object(r["p"])(this.otherfoodPrice[1].all)+Object(r["p"])(this.intercitytrafficPrice[1].all)+Object(r["p"])(this.carPrice[1].all)+Object(r["p"])(this.otherPrice[1])+(0==this.info.zhicai_service?Object(r["p"])(this.servicePrice[5]):Object(r["p"])(this.servicePrice[9])))*this.info.settlement_taxrate/100,1!=this.info.event_info_configure.fzc_service_fee_money&&null!=this.info.event_info_configure.fzc_service_fee_money||(t[1]+=Object(r["p"])(this.servicePrice[1])*Object(r["p"])(this.info.settlement_taxrate/100)),t[2]="("+Object(r["m"])(this.price_no[0])+"+"+Object(r["m"])((0==this.info.event_info_configure.fzc_service_fee_money?0:Object(r["o"])(this.servicePrice[0]))+Object(r["o"])(0==this.info.zhicai_service?this.servicePrice[4]:this.servicePrice[8]))+") *"+Object(r["o"])(this.info.taxrate)+"%",t[3]="("+Object(r["m"])(this.price_no[1])+"+"+Object(r["m"])((0==this.info.event_info_configure.fzc_service_fee_money?0:Object(r["o"])(this.servicePrice[1]))+Object(r["o"])(0==this.info.zhicai_service?this.servicePrice[5]:this.servicePrice[9]))+") ",this.info.taxation=t[1],t},price_no:function(){var t=[0,0,0,0];return t[0]=this.roomPrice[0].all+this.conferencePrice[0].all+this.foodPrice[0].all+this.otherfoodPrice[0].all+this.intercitytrafficPrice[0].all+this.carPrice[0].all+this.otherPrice[0],t[1]=this.roomPrice[1].all+this.conferencePrice[1].all+this.foodPrice[1].all+this.otherfoodPrice[1].all+this.intercitytrafficPrice[1].all+this.carPrice[1].all+this.otherPrice[1],console.log(t[1],this.roomPrice[1].all,this.conferencePrice[1].all,this.foodPrice[1].all,this.otherfoodPrice[1].all,this.intercitytrafficPrice[1].all,this.carPrice[1].all,this.otherPrice[1]),this.info.settlement_total_price=t[1],t[2]=this.roomPrice[5]+this.conferencePrice[5]+this.foodPrice[5]+this.otherfoodPrice[5]+this.intercitytrafficPrice[5]+this.carPrice[5]+this.otherPrice[5],t[3]=this.roomPrice[6]+this.conferencePrice[6]+this.foodPrice[6]+this.otherfoodPrice[6]+this.intercitytrafficPrice[6]+this.carPrice[6]+this.otherPrice[6],console.log(t[0],t[1]),t},price:function(){var t=[0,0];return t[0]=Object(r["o"])(this.price_no[0])+Object(r["m"])(this.servicePrice[0])+(0===this.info.zhicai_service?Object(r["m"])(this.servicePrice[4]):Object(r["m"])(this.servicePrice[8]))+Object(r["m"])(this.vatPrice[0]),t[1]=Object(r["o"])(this.price_no[1])+Object(r["m"])(this.servicePrice[1])+(0===this.info.zhicai_service?Object(r["m"])(this.servicePrice[5]):Object(r["m"])(this.servicePrice[9]))+Object(r["m"])(this.vatPrice[1]),this.info.total_amount=t[1],t}},methods:{guid:r["k"],positiveInteger:r["q"],positiveFloat:r["m"],positiveFloatOne:r["n"],positiveFloatSix:r["o"],positiveFloatZero:r["p"],formatNum:r["e"],excelExport:u["a"],getFormatDate:r["g"],limitsEffect:_["a"],changekefang:function(t,e){var i=this.roomcostProjects.filter((function(e){return e.code==t}));e.settlement_itemname=i[0].name},changehuichang:function(t,e){var i=this.meetingcostProjects.filter((function(e){return e.code==t}));e.settlement_itemname=i[0].name},changehotelnei:function(t,e){var i=this.foodcostProjects.filter((function(e){return e.code==t}));e.settlement_itemname=i[0].name},changehotelwai:function(t,e){var i=this.otherfoodcostProjects.filter((function(e){return e.code==t}));e.settlement_itemname=i[0].name},changebigcar:function(t,e){var i=this.transportationcostProjects.filter((function(e){return e.code==t}));food.settlement_itemname=i[0].name},changecar:function(t,e){var i=this.carcostProjects.filter((function(e){return e.code==t}));food.settlement_itemname=i[0].name},openAddSettle:function(){var t=this;this.cost_project_load=!0;var e=Object(r["g"])(this.info.event_info.event_startdate).slice(0,10),i=Object(r["g"])(this.info.event_info.event_enddate).slice(0,10),n=f()(e).subtract(3,"days").format("YYYY-MM-DD"),o=f()(i).add(1,"days").format("YYYY-MM-DD"),s=Object(r["f"])(n,o);this.costDates=[],s.forEach((function(e,i){t.costDates.push({value:e,label:e})})),this.changeProjectClass(),this.addSettleShow=!0},changecostProject:function(){"zafei"==this.addSettleInfo.costProject||"009"==this.addSettleInfo.projectClass?(this.needCostDate=!1,this.addSettleRules.costDate[0].required=!1):(this.needCostDate=!0,this.addSettleRules.costDate[0].required=!0)},changeProjectClass:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={"0034":{selects:"roomcostProjects"},"0049":{selects:"meetingcostProjects"},"0050":{selects:"foodcostProjects"},"0051":{selects:"otherfoodcostProjects"},"003":{selects:"transportationcostProjects"},"006":{selects:"carcostProjects"},"009":{selects:"othercostProjects"}},"009"==t.addSettleInfo.projectClass?(t.needCostDate=!1,t.addSettleRules.costDate[0].required=!1):(t.needCostDate=!0,t.addSettleRules.costDate[0].required=!0),t.cost_project_load=!0,e.next=5,t.$api.getCostProjects({code:t.addSettleInfo.projectClass,meetingid:"009"==t.addSettleInfo.projectClass?t.info.meeting_id:""},"POST");case 5:n=e.sent,t.cost_project_load=!1,t[i[t.addSettleInfo.projectClass].selects]=n.map((function(t){return t.value=t.code,t.label=t.name,t})),t.costProjects=n.map((function(t){return t.value=t.code,t.label=t.name,t})),t.costProjects.push({label:"杂费",value:"zafei"}),t.addSettleInfo.costProject=t.costProjects[0].value;case 11:case"end":return e.stop()}}),e)})))()},initCostProject:function(){var t=this;this.$api.getCostProjects({code:""},"POST").then((function(e){var i=e.filter((function(t){return"0034"==t.event_dictionary_code})),n=e.filter((function(t){return"0049"==t.event_dictionary_code})),o=e.filter((function(t){return"0050"==t.event_dictionary_code})),s=e.filter((function(t){return"0051"==t.event_dictionary_code})),a=e.filter((function(t){return"003"==t.event_dictionary_code})),r=e.filter((function(t){return"006"==t.event_dictionary_code})),l=e.filter((function(t){return"009"==t.event_dictionary_code}));t.roomcostProjects=i.map((function(t){return t.label=t.name,t.value=t.code,t})),t.meetingcostProjects=n.map((function(t){return t.label=t.name,t.value=t.code,t})),t.foodcostProjects=o.map((function(t){return t.label=t.name,t.value=t.code,t})),t.otherfoodcostProjects=s.map((function(t){return t.label=t.name,t.value=t.code,t})),t.transportationcostProjects=a.map((function(t){return t.label=t.name,t.value=t.code,t})),t.carcostProjects=r.map((function(t){return t.label=t.name,t.value=t.code,t})),t.othercostProjects=l.map((function(t){return t.label=t.name,t.value=t.code,t}))}))},addSettle:function(){var t=this,e={"0034":{dataList:"roomlist",addBusinessBlock:"addroomBusiness",addDataBlock:"addroom",selects:"roomcostProjects"},"0049":{dataList:"conferencelist",addBusinessBlock:"addconferenceBusiness",addDataBlock:"addconference",selects:"meetingcostProjects"},"0050":{dataList:"foodlist",addBusinessBlock:"addfoodBusiness",addDataBlock:"addfood",selects:"foodcostProjects"},"0051":{dataList:"otherfoodlist",addBusinessBlock:"addotherfoodBusiness",addDataBlock:"addotherfood",selects:"otherfoodcostProjects"},"003":{dataList:"transportationlist",addBusinessBlock:"addstransportationBusiness",addDataBlock:"addstransportation",selects:"transportationcostProjects"},"006":{dataList:"carlist",addBusinessBlock:"addcarBusiness",addDataBlock:"addcar",selects:"carcostProjects"},"009":{dataList:"otherlist",addBusinessBlock:"addsundryBusiness",addDataBlock:"addsundry",selects:"othercostProjects"}},i={"0034":1,"0049":2,"0050":3,"0051":7,"003":4,"006":5,"009":6};this.$refs.addSettleInfo.validate((function(n){if(n){var o=e[t.addSettleInfo.projectClass];if(o)if(t[o.selects]=Object(s["a"])(t.costProjects),"zafei"==t.addSettleInfo.costProject)t.addOther(i[t.addSettleInfo.projectClass]);else if(t.info[o.dataList]&&t.info[o.dataList].length)if("009"==t.addSettleInfo.projectClass)t[o.addDataBlock](!0);else{var a=t.info[o.dataList].filter((function(e){return t.addSettleInfo.costDate==f()(e.date).format("YYYY-MM-DD")}));a&&a.length?t[o.addDataBlock](a[0],!0):t[o.addBusinessBlock](!0)}else t[o.addBusinessBlock](!0);t.addSettleShow=!1}}))},excelDownload:function(){var t="汇总结算单";this.excelExport("/Template/GetTemplate",{eventid:this.$route.params.id,type:2,param:this.$route.params.id},t)},handleChangeAttach:function(t,e,i){var n=this,o=t.size/1024/1024<30;if(this.limitsEffect(t)){if(!o)return this.$message.error("上传附件大小不能超过 30MB!"),void this.arrayList.forEach((function(o,s){i==o.type&&n.$refs.upload[s].handleRemove(t,e,i)}));this.arrayList.forEach((function(t,n){i==t.type&&(t.fileList=e)})),this.initFileRename()}else this.arrayList.forEach((function(o,s){i==o.type&&n.$refs.upload[s].handleRemove(t,e,i)}))},handleRemoveAttach:function(t,e,i){this.arrayList.forEach((function(t,n){i==t.type&&(t.fileList=e)})),this.initFileRename()},handlePreview:function(t){var e=this;if(t.url){var i=t.url.substring(t.url.lastIndexOf(".")+1),n=["pdf","jpeg","jpg","png","txt"],o=["docx","doc","xls","xlsx","xlsm","ppt","pptx"];t.url=t.url.replace(/http:/,"https:"),this.downloadUrl=t.url,o.includes(i)?this.downloadUrl="https://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(t.url):n.includes(i)?this.downloadUrl=t.url:this.$message.info("文件格式不支持预览，下载后查看"),setTimeout((function(){e.$refs.a_click.click()}),100)}},initFileRename:function(){var t=this;this.$nextTick((function(){var e=document.getElementsByClassName("el-upload-list__item-name")||null;Array.from(e).forEach((function(e,i,n){var o=e.innerText;e.getElementsByTagName("span")[0]||(e.innerHTML+="<span style='color:#199ED8;cursor: pointer;'>重命名</span>"),e.getElementsByTagName("span")[0].addEventListener("click",(function(i){i.stopPropagation(),t.rename=!0,t.fileName=o.slice(0,o.lastIndexOf(".")),t.suffix=o.slice(o.lastIndexOf(".")),console.log(e.getElementsByTagName("span")[0].parentNode.parentNode.parentNode)}))}))}))},fileRename:function(t,e,i){this.readonly||(this.rename=!0,this.updateIndex=e,this.updateFileIndex=i,this.fileName=t.name.slice(0,t.name.lastIndexOf(".")),this.suffix=t.name.slice(t.name.lastIndexOf(".")))},saveFileName:function(){var t=this;if(this.arrayList[this.updateIndex].fileList[this.updateFileIndex].name=this.fileName+this.suffix,this.info.attachlist.forEach((function(e,i){e.id==t.arrayList[t.updateIndex].fileList[t.updateFileIndex].id&&(t.info.attachlist[i].filename=t.fileName+t.suffix)})),this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw){var e=new File([this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw],this.fileName+this.suffix,{lastModified:this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw.lastModified,lastModifiedDate:this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw.lastModifiedDate,type:this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw.type});this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw=e}this.rename=!1},deleteFile:function(t,e,i,n){this.readonly||(i==n&&(this.isFail=0),this.arrayList[e].fileList.splice(i,1))},addOther:function(t){this.info.sundrieslist.push({id:this.guid(),type:t,price:0,count:0,comments:"",content:"",isnotservice:0,settlementservice_taxrate:0,lineoroffline:1,sumprice:0})},delOther:function(t){this.info.sundrieslist=this.info.sundrieslist.filter((function(e){return e.id!=t}))},addroom:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=4;break}return i.addSettleInfo.projectClass="0034",n.next=4,i.changeProjectClass();case 4:t.roomlists.push({settlement_itemid:i.addSettleInfo.costProject,roomtypename:"",totalprice:0,unitprice:0,roomcount:0,inside_roomcount:0,settlement_inside_roomcount:0,outside_roomcount:0,settlement_outside_roomcount:0,settlement_unitprice:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:1,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return n.stop()}}),n)})))()},findCostProjectByKey:function(t){var e=this.costProjects.filter((function(e){return t==e.value}));return e&&e.length?e[0]:null},addroomBusiness:function(t){this.info.roomlist.push({date:f()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),roomlists:[{settlement_itemid:this.addSettleInfo.costProject,roomtypename:"",totalprice:0,unitprice:0,roomcount:0,inside_roomcount:0,settlement_inside_roomcount:0,outside_roomcount:0,settlement_outside_roomcount:0,settlement_unitprice:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:1,quotationsumprice:0,settlementsumprice:0}]}),this.info.roomlist=this.info.roomlist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delroom:function(t,e){t.roomlists.splice(e,1)},addconference:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=4;break}return i.addSettleInfo.projectClass="0049",n.next=4,i.changeProjectClass();case 4:t.conferencelists.push({settlement_itemid:i.addSettleInfo.costProject,is_important:"",price:0,count:0,settlement_price:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:1,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return n.stop()}}),n)})))()},addconferenceBusiness:function(t){this.info.conferencelist.push({date:f()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),conferencelists:[{settlement_itemid:this.addSettleInfo.costProject,is_important:"",price:0,count:0,settlement_price:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:1,quotationsumprice:0,settlementsumprice:0}]}),this.info.conferencelist=this.info.conferencelist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delconference:function(t,e){t.conferencelists.splice(e,1)},addfood:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=4;break}return i.addSettleInfo.projectClass="0050",n.next=4,i.changeProjectClass();case 4:t.foodlists.push({settlement_itemid:i.addSettleInfo.costProject,foodtypename:"",addresstype:"0",personcount:0,price:0,settlement_unitprice:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:1,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return n.stop()}}),n)})))()},addfoodBusiness:function(t){this.info.foodlist.push({date:f()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),foodlists:[{settlement_itemid:this.addSettleInfo.costProject,foodtypename:"",addresstype:"0",personcount:0,price:0,settlement_unitprice:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:1,quotationsumprice:0,settlementsumprice:0}]}),this.info.foodlist=this.info.foodlist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delfood:function(t,e){t.foodlists.splice(e,1)},addotherfood:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=4;break}return i.addSettleInfo.projectClass="0051",n.next=4,i.changeProjectClass();case 4:t.foodlists.push({settlement_itemid:i.addSettleInfo.costProject,foodtypename:"",addresstype:"0",personcount:0,price:0,settlement_unitprice:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:1,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return n.stop()}}),n)})))()},addotherfoodBusiness:function(t){this.info.otherfoodlist.push({date:f()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),foodlists:[{settlement_itemid:this.addSettleInfo.costProject,foodtypename:"",addresstype:"0",personcount:0,price:0,settlement_unitprice:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:1,quotationsumprice:0,settlementsumprice:0}]}),this.info.otherfoodlist=this.info.otherfoodlist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delotherfood:function(t,e){t.foodlists.splice(e,1)},addstransportation:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=4;break}return i.addSettleInfo.projectClass="003",n.next=4,i.changeProjectClass();case 4:t.tranlists.push({settlement_itemid:i.addSettleInfo.costProject,joinname:"",passengercount:0,unitprice:0,settlement_unitprice:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:1,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return n.stop()}}),n)})))()},addstransportationBusiness:function(t){this.info.transportationlist.push({date:f()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),tranlists:[{settlement_itemid:this.addSettleInfo.costProject,joinname:"",passengercount:0,unitprice:0,settlement_unitprice:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:1,quotationsumprice:0,settlementsumprice:0}]}),this.info.transportationlist=this.info.transportationlist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delstransportation:function(t,e){t.tranlists.splice(e,1)},addcar:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=4;break}return i.addSettleInfo.projectClass="006",n.next=4,i.changeProjectClass();case 4:t.carlists.push({settlement_itemid:i.addSettleInfo.costProject,purposename:"",carcount:0,price:0,settlement_unitprice:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:1,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return n.stop()}}),n)})))()},addcarBusiness:function(t){this.info.carlist.push({date:f()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),carlists:[{settlement_itemid:this.addSettleInfo.costProject,purposename:"",carcount:0,price:0,settlement_unitprice:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:1,quotationsumprice:0,settlementsumprice:0}]}),this.info.carlist=this.info.carlist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delcar:function(t,e){t.carlists.splice(e,1)},addsundry:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){var n,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t){i.next=4;break}return e.addSettleInfo.projectClass="009",i.next=4,e.changeProjectClass();case 4:n=e.findCostProjectByKey(e.addSettleInfo.costProject),o={settlement_itemid:e.addSettleInfo.costProject,settlement_itemname:n.label,servicetype:e.addSettleInfo.costProject,servicetypename:n.label,offerparticipatecount:0,offerservicedaycount:0,price:0,settlement_unitprice:"0",settlement_count:"0",settlement_comments:"",isnotservice:n.isnotservice,service_taxrate:0,lineoroffline:1,settlementservice_taxrate:0,quotationsumprice:0,settlementsumprice:0,two_level_code:""},e.othercostProjects.forEach((function(t,i){console.log(e.addSettleInfo.costProject),e.addSettleInfo.costProject==t.code&&(o.servicetypename=t.name,o.detail=t.detail,o.two_level_code="",o.isnotservice=t.isnotservice)})),e.info.otherlist.push(o);case 9:case"end":return i.stop()}}),i)})))()},addsundryBusiness:function(t){this.info.otherlist.push({settlement_itemid:this.addSettleInfo.costProject,settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,servicetype:this.addSettleInfo.costProject,servicetypename:this.findCostProjectByKey(this.addSettleInfo.costProject).label,offerparticipatecount:0,offerservicedaycount:0,price:0,settlement_unitprice:"0",settlement_count:"0",settlement_comments:"",isnotservice:0,service_taxrate:0,lineoroffline:1,settlementservice_taxrate:0,quotationsumprice:0,settlementsumprice:0})},delsother:function(t,e){this.info.otherlist.splice(e,1)},submit:function(){this.validate()&&(this.info.settlement_status!=this.status_confirm&&(this.info.settlement_status=this.status_tobeconfirmed),this.save())},draft:function(){this.info.settlement_status=this.status_draft,this.save()},differenceShowErrorMessage:function(){var t="";this.errormsg.forEach((function(e){t+="<p style='padding:5px;'>"+e+"</p>"})),this.$message({message:t,dangerouslyUseHTMLString:!0,type:"error",lockScroll:!1})},validate:function(){return this.errormsg=[],this.checkRoomDifference,this.checkConferenceDifference,this.checkFoodDifference,this.checkOtherFoodDifference,this.checkTransportationDifference,this.checkCarDifference,this.checkOtherDifference,this.errormsg.length>0&&this.differenceShowErrorMessage(),0==this.errormsg.length},save:function(){var t=this;this.info.pre_settlement_status===this.status_reject&&(this.info.settlement_sheet_id=null),this.info.transportationlist.forEach((function(e,i){e.tranlists.forEach((function(e,n){t.info.trantypelist.forEach((function(o,s){e.settlement_itemid==o.trancode&&(t.info.transportationlist[i].tranlists[n].settlement_itemname||(t.info.transportationlist[i].tranlists[n].settlement_itemname=o.tranname))}))}))})),this.intercitytrafficincidental.forEach((function(e,i){t.info.trantypelist.forEach((function(n,o){e.itemcode==n.trancode&&(t.intercitytrafficincidental[i].content=n.tranname)}))})),this.info.settlement_settlementsheetexplain=this.arrayList[0].remark,this.info.settlement_confirmmail=this.arrayList[1].remark,this.info.settlement_po=this.arrayList[2].remark,this.info.settlement_invoice=this.arrayList[3].remark,this.info.settlement_voucher=this.arrayList[4].remark,this.info.settlement_contract=this.arrayList[5].remark,this.info.settlement_waterbill=this.arrayList[6].remark,this.info.settlement_outsidefoodinvoiceexplain=this.arrayList[7].remark,this.info.settlement_registinvoiceexplain=this.arrayList[8].remark,this.info.settlement_carinvoiceexplain=this.arrayList[9].remark,this.info.settlement_productsvoiceexplain=this.arrayList[10].remark,this.info.settlement_insureinvoiceexplain=this.arrayList[11].remark,this.info.settlement_signexplain=this.arrayList[12].remark,this.info.settlement_photoexplain=this.arrayList[13].remark,this.info.settlement_other=this.arrayList[14].remark,1==this.info.zhicai_service&&(this.info.settlement_advance_amount=this.servicePrice[9],this.info.settlement_advance_proportion=100);var e=[{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]}];e.forEach((function(e,i){if(t.arrayList[i]){t.arrayList[i].fileList.filter((function(t){return""!=t.uid}));if(1==t.arrayList.filter((function(t){return null!=t.arrayLength})).length){var n=null,o=null;t.arrayList.forEach((function(t,e){null!=t.arrayLength&&(n=e)})),t.arrayList[i].fileList.length>0&&(i>n||i==n)&&t.arrayList[i].fileList.forEach((function(t,i){(i>o||i==o)&&e.urLs.push({key:t.uid,file:t.raw})}))}else t.arrayList[i].fileList.length>0&&t.arrayList[i].fileList.forEach((function(t){e.urLs.push({key:t.uid,file:t.raw})}))}})),this.isFail=1,this.arrayList.forEach((function(e,i){t.arrayList[i].arrayLength=null})),Object(l["a"])(e[0].urLs).then((function(i){return console.log(i),i&&void 0!=i.tag?(t.arrayList[0].arrayLength=i.tag,void i.uploadImageList.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[0].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})}))):(t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){0==t.arrayList[0].fileList.filter((function(t){return t.id==e.id})).length&&e.filetype==t.arrayList[0].type&&(e.delete=!0)})),i.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[0].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})})),Object(l["a"])(e[1].urLs))})).then((function(i){return i&&void 0!=i.tag?(t.arrayList[1].arrayLength=i.tag,void i.uploadImageList.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[1].type,filepath:e.FilePath,filename:e.OriginalFileName})}))):(t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){0==t.arrayList[1].fileList.filter((function(t){return t.id==e.id})).length&&e.filetype==t.arrayList[1].type&&(e.delete=!0)})),i.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[1].type,filepath:e.FilePath,filename:e.OriginalFileName})})),Object(l["a"])(e[2].urLs))})).then((function(i){return i&&void 0!=i.tag?(t.arrayList[2].arrayLength=i.tag,void i.uploadImageList.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[2].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})}))):(t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){0==t.arrayList[2].fileList.filter((function(t){return t.id==e.id})).length&&e.filetype==t.arrayList[2].type&&(e.delete=!0)})),i.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[2].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})})),Object(l["a"])(e[3].urLs))})).then((function(i){return i&&void 0!=i.tag?(t.arrayList[3].arrayLength=i.tag,void i.uploadImageList.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[3].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})}))):(t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){0==t.arrayList[3].fileList.filter((function(t){return t.id==e.id})).length&&e.filetype==t.arrayList[3].type&&(e.delete=!0)})),i.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[3].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})})),Object(l["a"])(e[4].urLs))})).then((function(i){return i&&void 0!=i.tag?(t.arrayList[4].arrayLength=i.tag,void i.uploadImageList.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[4].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})}))):(t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){0==t.arrayList[4].fileList.filter((function(t){return t.id==e.id})).length&&e.filetype==t.arrayList[4].type&&(e.delete=!0)})),i.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[4].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})})),Object(l["a"])(e[5].urLs))})).then((function(i){return i&&void 0!=i.tag?(t.arrayList[5].arrayLength=i.tag,void i.uploadImageList.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[5].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})}))):(t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){0==t.arrayList[5].fileList.filter((function(t){return t.id==e.id})).length&&e.filetype==t.arrayList[5].type&&(e.delete=!0)})),i.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[5].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})})),Object(l["a"])(e[6].urLs))})).then((function(i){return i&&void 0!=i.tag?(t.arrayList[6].arrayLength=i.tag,void i.uploadImageList.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[6].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})}))):(t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){0==t.arrayList[6].fileList.filter((function(t){return t.id==e.id})).length&&e.filetype==t.arrayList[6].type&&(e.delete=!0)})),i.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[6].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})})),Object(l["a"])(e[7].urLs))})).then((function(i){return i&&void 0!=i.tag?(t.arrayList[7].arrayLength=i.tag,void i.uploadImageList.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[7].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})}))):(t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){0==t.arrayList[7].fileList.filter((function(t){return t.id==e.id})).length&&e.filetype==t.arrayList[7].type&&(e.delete=!0)})),i.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[7].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})})),Object(l["a"])(e[8].urLs))})).then((function(i){return i&&void 0!=i.tag?(t.arrayList[8].arrayLength=i.tag,void i.uploadImageList.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[8].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})}))):(t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){0==t.arrayList[8].fileList.filter((function(t){return t.id==e.id})).length&&e.filetype==t.arrayList[8].type&&(e.delete=!0)})),i.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[8].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})})),Object(l["a"])(e[9].urLs))})).then((function(i){return i&&void 0!=i.tag?(t.arrayList[9].arrayLength=i.tag,void i.uploadImageList.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[9].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})}))):(t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){0==t.arrayList[9].fileList.filter((function(t){return t.id==e.id})).length&&e.filetype==t.arrayList[9].type&&(e.delete=!0)})),i.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[9].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})})),Object(l["a"])(e[10].urLs))})).then((function(i){return i&&void 0!=i.tag?(t.arrayList[10].arrayLength=i.tag,void i.uploadImageList.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[10].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})}))):(t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){0==t.arrayList[10].fileList.filter((function(t){return t.id==e.id})).length&&e.filetype==t.arrayList[10].type&&(e.delete=!0)})),i.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[10].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})})),Object(l["a"])(e[11].urLs))})).then((function(i){return i&&void 0!=i.tag?(t.arrayList[11].arrayLength=i.tag,void i.uploadImageList.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[11].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})}))):(t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){0==t.arrayList[11].fileList.filter((function(t){return t.id==e.id})).length&&e.filetype==t.arrayList[11].type&&(e.delete=!0)})),i.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[11].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})})),Object(l["a"])(e[12].urLs))})).then((function(i){return i&&void 0!=i.tag?(t.arrayList[12].arrayLength=i.tag,void i.uploadImageList.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[12].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})}))):(t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){0==t.arrayList[12].fileList.filter((function(t){return t.id==e.id})).length&&e.filetype==t.arrayList[12].type&&(e.delete=!0)})),i.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[12].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})})),Object(l["a"])(e[13].urLs))})).then((function(i){return i&&void 0!=i.tag?(t.arrayList[13].arrayLength=i.tag,void i.uploadImageList.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[13].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})}))):(t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){0==t.arrayList[13].fileList.filter((function(t){return t.id==e.id})).length&&e.filetype==t.arrayList[13].type&&(e.delete=!0)})),i.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[13].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})})),Object(l["a"])(e[14].urLs))})).then((function(e){if(e&&void 0!=e.tag)return t.arrayList[14].arrayLength=e.tag,void e.uploadImageList.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[14].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})}));if(t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){0==t.arrayList[14].fileList.filter((function(t){return t.id==e.id})).length&&e.filetype==t.arrayList[14].type&&(e.delete=!0)})),e.forEach((function(e){e&&t.info.attachlist.push({filetype:t.arrayList[14].type,filepath:e.FilePath,filename:e.OriginalFileName,create_date:e.create_date?Object(r["g"])(e.create_date):""})})),t.info.attachlist.forEach((function(t){t.create_date=t.create_date?Object(r["g"])(t.create_date):""})),t.info.roomlist&&t.info.roomlist.forEach((function(t){for(var e=0;e<t.roomlists.length;e++)t.roomlists[e].indexs=e+1})),t.info.conferencelist&&t.info.conferencelist.forEach((function(t){for(var e=0;e<t.conferencelists.length;e++)t.conferencelists[e].indexs=e+1})),t.info.foodlist&&t.info.foodlist.forEach((function(t){for(var e=0;e<t.foodlists.length;e++)t.foodlists[e].indexs=e+1})),t.info.otherfoodlist&&t.info.otherfoodlist.forEach((function(t){for(var e=0;e<t.foodlists.length;e++)t.foodlists[e].indexs=e+1})),t.info.transportationlist&&t.info.transportationlist.forEach((function(t){for(var e=0;e<t.tranlists.length;e++)t.tranlists[e].indexs=e+1})),t.info.carlist&&t.info.carlist.forEach((function(t){for(var e=0;e<t.carlists.length;e++)t.carlists[e].indexs=e+1})),t.info.otherlist)for(var i=0;i<t.info.otherlist.length;i++)t.info.otherlist[i].indexs=i+1;return t.info.total_amount&&(t.info.total_amount=t.positiveFloat(t.info.total_amount),console.log(t.info)),t.$api.OfflineSettlementSubmit(t.info,"POST")})).then((function(e){e?(t.$message({message:"保存成功！",type:"success"}),t.$router.push({name:"EventDetail",query:{id:t.info.event_info.id,name:t.info.event_info.event_name}})):t.$message({message:"保存失败！",type:"error"})}))},changeOtherSel:function(t,e,i){var n=this,o=this.othercostProjects.filter((function(t){return t.code==i}));t.settlement_itemname=o[0].name,t.isnotservice=o[0].isnotservice,this.othercostProjects.forEach((function(e,i){t.settlement_itemid==e.code&&(t.servicetypename=e.name,t.detail=e.detail,t.two_level_code="",t.isnotservice=e.isnotservice)})),this.info.eventinfoother.forEach((function(i,o){t.settlement_itemid==i.othercode&&(n.info.otherlist[e].settlementservice_taxrate=i.servicerate,n.info.otherlist[e].isnotservice=i.iscalservice,console.log(n.info.otherlist[e].isnotservice,i.iscalservice))}))},initInfo:function(){var t=this;if(this.info.roomlist.forEach((function(e,i){e.roomlists.forEach((function(e){e.quoted_price_room_id&&1==e.lineoroffline&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.unitprice),"0"==t.info.is_Inside_outside&&(e.settlement_count=e.provide_count,e.settlement_inside_roomcount=0,e.settlement_outside_roomcount=e.provide_count),"1"==t.info.is_Inside_outside&&(e.settlement_count=e.provide_count,e.settlement_inside_roomcount=e.inside_roomcount,e.settlement_outside_roomcount=e.outside_roomcount))}))})),this.info.conferencelist.forEach((function(e,i){e.conferencelists.forEach((function(e){e.quoted_price_conference_id&&1==e.lineoroffline&&null==t.info.id&&(e.settlement_price=Object(r["o"])(e.price),e.settlement_count=Object(r["m"])(e.count))}))})),this.info.foodlist.forEach((function(e,i){e.foodlists.forEach((function(e){e.quoted_price_food_id&&1==e.lineoroffline&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.price),e.settlement_count=Object(r["m"])(e.personcount))}))})),this.info.otherfoodlist.forEach((function(e,i){e.foodlists.forEach((function(e){e.quoted_price_food_id&&1==e.lineoroffline&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.price),e.settlement_count=Object(r["m"])(e.personcount))}))})),this.info.transportationlist.forEach((function(e,i){e.tranlists.forEach((function(e){e.quoted_price_transportation_id&&1==e.lineoroffline&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.unitprice),e.settlement_count=Object(r["m"])(e.passengercount))}))})),this.info.carlist.forEach((function(e,i){e.carlists.forEach((function(e){e.quoted_price_car_id&&1==e.lineoroffline&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.price),e.settlement_count=Object(r["m"])(e.carcount))}))})),this.info.otherlist.forEach((function(e,i){e.quoted_price_other_id&&1==e.lineoroffline&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.price),e.settlement_count=Object(r["m"])(e.offerservicedaycount)*Object(r["m"])(e.offerparticipatecount))})),null==this.info.id){this.issubmit&&(this.info.settlement_taxrate=this.info.taxrate);var e=0;this.info.listqtpm&&this.info.listqtpm.forEach((function(t,i){e+=Object(r["p"])(t.money)*Object(r["p"])(t.proportion/100)})),this.info.settlement_advance_amount=Object(r["p"])(e),this.info.settlement_advance_proportion=Object(r["p"])(100)}if(this.info.liststpm&&null==this.info.id){e=0;this.info.listqtpm&&this.info.listqtpm.forEach((function(t,i){e+=Object(r["p"])(t.money)*Object(r["p"])(t.proportion/100)}));var i=0;this.info.liststpm.forEach((function(t,e){i+=Object(r["p"])(t.money)*Object(r["p"])(t.proportion/100)})),this.info.settlement_advance_amount=Object(r["p"])(i),this.info.settlement_advance_proportion=Object(r["p"])(100),this.info.settlement_advance_amount||(this.info.settlement_advance_amount=Object(r["p"])(e))}}},mounted:function(){var t=this;this.initCostProject(),this.$api.offlineSettlement({id:this.$route.params.id},"POST").then((function(e){t.info=e,console.log(e),null==t.info.fzc_service&&(t.fzc_service=null,t.info.fzc_service=100,t.info.fzc_service_list.forEach((function(e){t.info.fzc_service*=e}))),null==t.info.sheet_fzc_service&&(t.sheet_fzc_service=null,t.info.sheet_fzc_service=100,t.info.sheet_fzc_service_list.forEach((function(e){t.info.sheet_fzc_service*=e}))),console.log(t.info.sheet_fzc_service),t.initInfo(),t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){t.arrayList.forEach((function(i,n){e.filetype==i.type&&t.arrayList[n].fileList.push({id:e.id,uid:"",name:e.filename,url:t.info.fileuploaddomin+e.filepath,update_time:e.update_time,create_date:e.create_date})}))})),t.arrayList[0].remark=t.info.settlement_settlementsheetexplain,t.arrayList[1].remark=t.info.settlement_confirmmail,t.arrayList[2].remark=t.info.settlement_po,t.arrayList[3].remark=t.info.settlement_invoice,t.arrayList[4].remark=t.info.settlement_voucher,t.arrayList[5].remark=t.info.settlement_contract,t.arrayList[6].remark=t.info.settlement_waterbill,t.arrayList[7].remark=t.info.settlement_outsidefoodinvoiceexplain,t.arrayList[8].remark=t.info.settlement_registinvoiceexplain,t.arrayList[9].remark=t.info.explainList[0].explain,t.arrayList[10].remark=t.info.settlement_productsvoiceexplain,t.arrayList[11].remark=t.info.settlement_insureinvoiceexplain,t.arrayList[12].remark=t.info.settlement_signexplain,t.arrayList[13].remark=t.info.settlement_photoexplain,t.arrayList[14].remark=t.info.settlement_other,t.arrayList[15].remark=t.info.explainList[1].explain,t.arrayList[16].remark=t.info.explainList[2].explain,t.initFileRename()}))}}),m=d,p=(i("942f"),i("2877")),h=Object(p["a"])(m,n,o,!1,null,"24bbfb43",null);e["default"]=h.exports},"8e97":function(t,e,i){},"942f":function(t,e,i){"use strict";i("8e97")},b93d:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAATxJREFUaEPtWV0OgjAM7iTeQhO9jhzCB2+BD+KD3MIHD4HXkURuYWRGA0YJg86WzSXllbXr97OOFAWBPyrw+kEA+FZQFAhGgdthlU6UWgPAwmHRRaX1abo9p6Y9URaqi985LPxrq0rrvQkECsA9i68AMPMFAADKKMnnXftjAegmuI8NToBt1aMk76zVGoApEWfxTa57Fr+JEwANK6KAhdfEQjaHyUQshkVK7OhdSADU8nhro6KAKAAAGBt8rrFo9a+lJn9j9mXrQgKgQzanClAuI0osm4UoRVBiBcBQx8H4WBTwzeJfKzBETt97jP1GP8QCwPfHnCjArUCok7mL46l023lFlOTLn2ejwU+nn8hrEBvHU+qy0vpI/j9A6SRjx6IusrGLoOQXABT2OGJFAQ4WKTlEAQp7HLHBK/AA4k5IQOfQdIYAAAAASUVORK5CYII="},d991:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAWRJREFUaEPtmT1Ow0AQhd+sgcPAAZISKn6cS3ACJCQKVqJCWiQKpNyAQ2B+KijjA8BhAO+gpTJ2iDYMS9ZiUlozz/Pe51SPMPAfDfx+qIFVE5xL4NUdjNZAUwZGqz4wvJ+A+h18tGFv6+49PQPs9jc9zHMOh3dvMPBbZO9e2s97Brwr7xnY9Q3trJ/dPOVg5O18sm0KfiTgwdhqb6GBxpUcBgpbZfUH/+6u3pFqINE3pwQSBRstqwSio0o0qAQSBRstqwSio0o0qAQSBRstqwSio0o0qASai8klmE8SBfxVlnBdnFaH7YdiAoM38CfJL3iJmIAaECagBIQBiteVgDhCoYASEAYoXlcC4giFAkpAGKB4XQmIIxQK/B8C3pWzUO5lWjHVxlbjNsxeQxMaygI0ExJPst6Ax92mcm4PFppKhrkKZV+SS5YUDeUewR93G8ogk1WRt6Svz3E18JPUfnNn8AQ+AEV+WkBcQgngAAAAAElFTkSuQmCC"}}]);