(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b12f0b8"],{"03d0":function(e,t,i){"use strict";i("75e1")},"75e1":function(e,t,i){},a118:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"coustom_event_detail"},[i("h3",{staticClass:"title pad_lr10"},[e._v("会议详情")]),i("el-form",{staticClass:"demo-form-inline form_card",attrs:{inline:!0,"label-position":"left",model:e.item}},[i("el-form-item",{attrs:{label:"会议城市"}},[i("el-input",{attrs:{placeholder:"会议城市",readonly:e.readonly},model:{value:e.item.cityname,callback:function(t){e.$set(e.item,"cityname",t)},expression:"item.cityname"}})],1),i("el-form-item",{attrs:{label:"公司名称"}},[i("el-input",{attrs:{placeholder:"公司名称",readonly:""},model:{value:e.item.customername,callback:function(t){e.$set(e.item,"customername",t)},expression:"item.customername"}})],1),i("el-form-item",{attrs:{label:"会议时间"}},[i("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",readonly:e.readonly},on:{change:e.changeDate},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),i("el-form-item",{attrs:{label:"参会人数"}},[i("el-input",{attrs:{placeholder:"参会人数",readonly:e.readonly},model:{value:e.item.attendeenum,callback:function(t){e.$set(e.item,"attendeenum",t)},expression:"item.attendeenum"}})],1),i("el-form-item",{attrs:{label:"客户联系人"}},[i("el-input",{attrs:{placeholder:"客户联系人",readonly:""},model:{value:e.item.contactsname,callback:function(t){e.$set(e.item,"contactsname",t)},expression:"item.contactsname"}})],1),i("el-form-item",{attrs:{label:"电话"}},[i("el-input",{attrs:{placeholder:"电话",readonly:""},model:{value:e.item.phone,callback:function(t){e.$set(e.item,"phone",t)},expression:"item.phone"}})],1),i("el-form-item",{attrs:{label:"部门"}},[i("el-input",{attrs:{placeholder:"部门",readonly:""},model:{value:e.item.deptname,callback:function(t){e.$set(e.item,"deptname",t)},expression:"item.deptname"}})],1),i("el-form-item",{attrs:{label:"邮箱"}},[i("el-input",{attrs:{placeholder:"邮箱",readonly:""},model:{value:e.item.email,callback:function(t){e.$set(e.item,"email",t)},expression:"item.email"}})],1),i("el-form-item",{attrs:{label:"预算"}},[i("el-input",{attrs:{placeholder:"预算",readonly:e.readonly},model:{value:e.item.budget,callback:function(t){e.$set(e.item,"budget",t)},expression:"item.budget"}})],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.readonly,expression:"readonly"}],staticClass:"person",attrs:{label:"业务负责人"}},[i("el-input",{attrs:{placeholder:"负责人姓名",readonly:""},model:{value:e.item.businessname,callback:function(t){e.$set(e.item,"businessname",t)},expression:"item.businessname"}}),i("el-input",{attrs:{placeholder:"负责人电话",readonly:""},model:{value:e.item.businessphone,callback:function(t){e.$set(e.item,"businessphone",t)},expression:"item.businessphone"}}),i("el-input",{attrs:{placeholder:"负责人邮箱",readonly:""},model:{value:e.item.businessemail,callback:function(t){e.$set(e.item,"businessemail",t)},expression:"item.businessemail"}})],1)],1),i("div",{staticClass:"demand_items"},[i("h3",{staticClass:"title"},[e._v("需求项目")]),i("el-checkbox-group",{staticClass:"checkbox_card",on:{change:e.checkboxs},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[i("el-checkbox",{attrs:{label:"1",name:"1",disabled:e.readonly}},[e._v("客房")]),i("el-checkbox",{attrs:{label:"2",name:"2",disabled:e.readonly}},[e._v("会场")]),i("el-checkbox",{attrs:{label:"3",name:"3",disabled:e.readonly}},[e._v("酒店内餐饮")]),i("el-checkbox",{attrs:{label:"4",name:"4",disabled:e.readonly}},[e._v("酒店外餐饮")]),i("el-checkbox",{attrs:{label:"5",name:"5",disabled:e.readonly}},[e._v("大交通")]),i("el-checkbox",{attrs:{label:"6",name:"6",disabled:e.readonly}},[e._v("地面交通")])],1)],1),i("div",{staticClass:"requirement_remarks"},[i("h3",{staticClass:"title"},[e._v("需求备注")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.item.remark,expression:"item.remark"}],attrs:{name:"",id:"",cols:"30",rows:"10",readonly:e.readonly},domProps:{value:e.item.remark},on:{input:function(t){t.target.composing||e.$set(e.item,"remark",t.target.value)}}})]),i("div",{staticClass:"button_card"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.readonly,expression:"!readonly"}],attrs:{type:"primary"},on:{click:e.saveInformation}},[e._v("保存会议信息")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.readonly,expression:"!readonly"}],attrs:{type:"primary"},on:{click:function(t){e.deldialogVisible=!0}}},[e._v("取消会议")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.readonly,expression:"!readonly"}],attrs:{type:"primary"},on:{click:e.openDelegation}},[e._v("派团")]),i("el-button",{attrs:{type:"primary"},on:{click:e.gobackPage}},[e._v("返回")])],1),i("el-dialog",{attrs:{title:"业务员信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{attrs:{model:e.form}},[i("el-form-item",[i("el-select",{attrs:{value:e.form.username,placeholder:"请选择"},on:{change:e.checkUser}},e._l(e.selectList,(function(e,t){return i("el-option",{key:t,attrs:{value:e.username}})})),1)],1),i("el-form-item",[i("el-input",{attrs:{autocomplete:"off",readonly:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),i("el-form-item",[i("el-input",{attrs:{autocomplete:"off",readonly:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"取消会议提示",visible:e.deldialogVisible,width:"30%"},on:{"update:visible":function(t){e.deldialogVisible=t}}},[i("span",[e._v("确认要取消当前会议吗？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.deldialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.cancelMeeting}},[e._v("确 定")])],1)])],1)},o=[],s=(i("a15b"),i("c740"),i("ac1f"),i("1276"),{data:function(){return{dialogFormVisible:!1,deldialogVisible:!1,readonly:!1,form:{},selectList:[],item:{},formInline:{user:"",region:""},checkList:[],date:[]}},mounted:function(){console.log(this.$route.query,"数据"),1==this.$route.query.tab&&(this.readonly=!0),this.geteventdetails(this.$route.query)},methods:{gobackPage:function(){this.$router.push({path:"/coustomEventList",query:{tab:this.$route.query.tab}})},submit:function(){var e=this,t={eventid:this.item.id,id:this.item.id,type:"2",citycode:this.item.citycode,startdate:this.item.startdate,enddate:this.item.enddate,attendeenum:this.item.attendeenum,budget:this.item.budget,items:this.checkList.join(","),remark:this.item.remark,tenantcode:this.item.tenantcode,code:this.item.code,username:this.form.userid,optcustomerid:this.item.customerid,customername:this.item.customername,customercontactsid:this.$route.query.customercontactsid,customercontact:this.$route.query.contactmail,customer:this.form.email,status:"1"};this.$api.Coustomereventdetailsupdate(t,"POST").then((function(i){i?(e.geteventdetails({code:t.code,tenantcode:t.tenantcode}),e.dialogFormVisible=!1,e.$alert("派团成功",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/coustomEventList",query:{tab:e.$route.query.tab}})}})):e.$alert("已派团，不能进行派团操作",{confirmButtonText:"确定",callback:function(t){e.$router.push({path:"/coustomEventList",query:{tab:e.$route.query.tab}})}})}))},checkUser:function(e){console.log(e,44);var t=this.selectList.findIndex((function(t){return e===t.username}));this.form=this.selectList[t],console.log(this.form,this.selectList)},changeDate:function(e){console.log(e),this.date=e,this.item.startdate=this.date[0].toLocaleDateString(),this.item.enddate=this.date[1].toLocaleDateString(),console.log(this.item.startdate,this.item.enddate)},checkboxs:function(e){console.log(e),this.checkList=e},openDelegation:function(){var e=this;this.$api.sentdelegation({customerid:this.item.customerid},"POST").then((function(t){t&&(e.dialogFormVisible=!0,e.selectList=t)}))},cancelMeeting:function(){var e=this,t={id:this.item.id,type:"1",citycode:this.item.citycode,startdate:this.item.startdate,enddate:this.item.enddate,attendeenum:this.item.attendeenum,budget:this.item.budget,items:this.checkList.join(","),remark:this.item.remark,tenantcode:this.item.tenantcode,code:this.item.code,status:"2"};this.$api.Coustomereventdetailsupdate(t,"POST").then((function(i){i&&(e.geteventdetails({code:t.code,tenantcode:t.tenantcode}),e.deldialogVisible=!1,e.$router.push({path:"/coustomEventList"}))}))},saveInformation:function(){var e=this,t={id:this.item.id,type:"0",citycode:this.item.citycode,startdate:this.item.startdate,enddate:this.item.enddate,attendeenum:this.item.attendeenum,budget:this.item.budget,items:this.checkList.join(","),remark:this.item.remark,tenantcode:this.item.tenantcode,code:this.item.code,status:"0"};this.$api.Coustomereventdetailsupdate(t,"POST").then((function(i){console.log(i),i&&(e.geteventdetails({code:t.code,tenantcode:t.tenantcode}),e.$router.push({path:"/coustomEventList"}))}))},onSubmit:function(){console.log("submit!")},geteventdetails:function(e){var t=this;this.$api.getCoustomereventdetails(e,"POST").then((function(e){console.log(e),t.item=e||{},e.items?t.checkList=e.items.split(","):t.checkList=[],t.date=[t.item.startdate,t.item.enddate],1==e.type&&(t.readonly=!0)}))}}}),n=s,l=(i("03d0"),i("2877")),r=Object(l["a"])(n,a,o,!1,null,null,null);t["default"]=r.exports},c740:function(e,t,i){"use strict";var a=i("23e7"),o=i("b727").findIndex,s=i("44d2"),n="findIndex",l=!0;n in[]&&Array(1)[n]((function(){l=!1})),a({target:"Array",proto:!0,forced:l},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),s(n)}}]);