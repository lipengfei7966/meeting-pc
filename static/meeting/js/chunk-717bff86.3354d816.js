(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-717bff86"],{"2d91":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"activityOrderList"},[s("div",{staticClass:"content"},[s("div",[s("screen",{ref:"screen",attrs:{filtrate:t.filtrate},on:{screen:t.screen,reset:t.reset}})],1),s("mettingList",{ref:"mettingList",attrs:{tableData:t.tableData.List,columns:t.columns,operate:t.operate},on:{classifyName:t.classifyName,handleSizeChange:t.handleSizeChange,handleCurrentChange:t.handleCurrentChange}})],1),s("el-dialog",{attrs:{title:"留言",visible:t.leaveMessageStatus,"before-close":function(t){e.itemData=null,e.GetList(),t()},center:!0,width:"600px"},on:{"update:visible":function(e){t.leaveMessageStatus=e}}},[t.leaveMessageStatus?s("leaveMessage",{attrs:{id:t.leaveMessageId}}):t._e()],1)],1)},i=[],n=(a("4de4"),a("d3b7"),a("159b"),a("3e9f")),o=a("87da"),l=a("b7e4"),c=a("cf45"),r={name:"activityOrderList",components:{leaveMessage:n["a"],screen:o["a"],mettingList:l["a"]},data:function(){return{leaveMessageStatus:!1,leaveMessageId:null,allStatus:[{code:"0012-1",name:"未报价"},{code:"0012-2",name:"等待客户决定"},{code:"0012-3",name:"已签约"},{code:"0012-4",name:"您已拒绝报价"},{code:"0012-5",name:"未中标"},{code:"0012-6",name:"要求重新报价"},{code:"0012-7",name:"已取消"}],po:{inquiry_sheet_code:"",startdate:null,enddate:null,status:""},tableData:{CurrentPage:1,List:[]},page_size:10,filtrate:[{label:"询价单号",type:"input",modelVal:"",fieId:"inquiry_sheet_code",inputType:"string"},{label:"开始时间",type:"datePicker",modelVal:"",fieId:"startdate"},{label:"结束时间",type:"datePicker",modelVal:"",fieId:"enddate"},{label:"状态",type:"select",fieId:"status",modelVal:"",selsetVal:[{code:"0012-1",name:"未报价"},{code:"0012-2",name:"等待客户决定"},{code:"0012-3",name:"已签约"},{code:"0012-4",name:"您已拒绝报价"},{code:"0012-5",name:"未中标"},{code:"0012-6",name:"要求重新报价"},{code:"0012-7",name:"已取消"}]}],columns:[{label:"询价单号",width:"160",prop:"inquiry_sheet_code",hidden:!1},{label:"公司名称",width:"200",prop:"company_name",hidden:!0},{label:"活动名称",width:"180",align:"left",prop:"activity_name",hidden:!0},{label:"联系人",width:"120",prop:"contacts",hidden:!1},{label:"参会人数",width:"80",prop:"activity_count",hidden:!1},{label:"活动日期",prop:"activity_date",hidden:!0},{label:"报价截至日期",prop:"offerenddate",hidden:!0},{label:"报价",width:"100",prop:"total_price",hidden:!1},{label:"状态",width:"120",prop:"status",slot:"status",hidden:!1}],operate:[{propName:"留言",badge:!0,classifyName:"leaveWord"},{propName:"查看",badge:!0,classifyName:"lookOver"}],state:!0}},methods:{leaveMessage:function(e,t){var a=this.tableData.List.filter((function(e){return e.object_id==t.object_id}));a.length>0&&(a[0].new_message_count=0),this.leaveMessageId=t.object_id,this.leaveMessageStatus=!0},goInfo:function(e,t){this.$router.push({name:"DMCactivityOrderInfo",params:{id:t.object_id}})},GetList:function(e){var t=this;this.$api.inquirysheetList({Page:e?1:this.tableData.CurrentPage,Rows:this.page_size,po:this.po},"POST").then((function(e){e&&(t.state=!0),t.tableData=e,t.$refs.mettingList.pageIndex=t.tableData.CurrentPage,t.$refs.mettingList.pageSize=t.page_size,t.$refs.mettingList.totalCount=t.tableData.Counts,t.tableData.List.forEach((function(e){e.total_price=Object(c["m"])(e.total_price,!0)}))}))},screen:function(e){this.po=e,this.GetList(0),console.log(e)},reset:function(e){this.po={inquiry_sheet_code:"",startdate:null,enddate:null,status:""},this.tableData.CurrentPage=1,this.page_size=10,this.GetList(0),console.log(e)},classifyName:function(e,t){var a=this.$options.methods,s=this;a[e](s,t)},handleSizeChange:function(e){this.page_size=e,this.tableData.CurrentPage=1,this.state=!1,this.GetList(),console.log("每页 ".concat(e," 条-"))},handleCurrentChange:function(e){this.state&&(this.tableData.CurrentPage=e,this.GetList(),console.log("当前页: ".concat(e,"-")))},leaveWord:function(e,t){console.log(t),e.leaveMessage(0,t)},lookOver:function(e,t){console.log(t),e.goInfo(0,t)}},mounted:function(){this.GetList()}},d=r,u=(a("51e3"),a("2877")),h=Object(u["a"])(d,s,i,!1,null,"f825ce06",null);t["default"]=h.exports},"3e9f":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"leave-message"},[a("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"a_click",attrs:{href:e.downloadUrl,target:"_blank",download:""}}),a("div",{staticClass:"srcoll"},[a("div",{staticClass:"message"},e._l(e.list,(function(t){return a("div",{key:t.id,staticClass:"item",class:{me:0==t.type}},[a("div",{staticClass:"date"},[e._v(e._s(0==t.type?t.Party_A+"@":t.Party_B+"@")+e._s(t.createtime))]),0==t.message_type?a("div",{staticClass:"msg"},[e._v(e._s(t.message))]):a("div",{staticClass:"msg"},[a("a",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.handlePreview(t.filepath)}}},[e._v(e._s(t.filename))])])])})),0)]),a("div",{staticClass:"edit"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],attrs:{placeholder:"在此给客户留言..."},domProps:{value:e.text},on:{input:function(t){t.target.composing||(e.text=t.target.value)}}}),a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.addMsg}},[e._v("留言")])],1)])},i=[],n=(a("498a"),a("ac1f"),a("5319"),a("caad"),a("fb6a"),{props:{id:String},data:function(){return{downloadUrl:"",list:[],text:""}},mounted:function(){this.getMsgList()},methods:{getMsgList:function(){var e=this;this.$api.Leavingmessagelist({id:this.id},"POST").then((function(t){e.list=t}))},addMsg:function(){var e=this;this.text.trim()?this.$api.addLeavingmessage({message:this.text,inquiry_sheet_object_id:this.id},"POST").then((function(t){e.text="",e.getMsgList()})):this.$message.error("请输入留言信息")},handlePreview:function(e){var t=this;if(e){var a=e.substring(e.lastIndexOf(".")+1),s=["pdf","jpeg","jpg","png","txt"],i=["docx","doc","xls","xlsx","xlsm","ppt","pptx"];e=e.replace(/http:/,"https:"),this.downloadUrl=e,i.includes(a)?this.downloadUrl="https://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(e):s.includes(a)?this.downloadUrl=e:(this.downloadUrl=e,this.$message.info("文件格式不支持预览，ssss下载后查看")),setTimeout((function(){t.$refs.a_click.click()}),100)}},downloadFile:function(e){var t=e.slice(e.lastIndexOf(",")+1),a=e.slice(0,e.lastIndexOf(",")),s=document.createElement("a");s.href=t,s.download=a,document.body.appendChild(s),s.click()}}}),o=n,l=(a("cab5"),a("2877")),c=Object(l["a"])(o,s,i,!1,null,"12af1877",null);t["a"]=c.exports},"498a":function(e,t,a){"use strict";var s=a("23e7"),i=a("58a8").trim,n=a("c8d2");s({target:"String",proto:!0,forced:n("trim")},{trim:function(){return i(this)}})},"51e3":function(e,t,a){"use strict";a("acc3")},8903:function(e,t,a){},acc3:function(e,t,a){},c8d2:function(e,t,a){var s=a("5e77").PROPER,i=a("d039"),n=a("5899"),o="​᠎";e.exports=function(e){return i((function(){return!!n[e]()||o[e]()!==o||s&&n[e].name!==e}))}},cab5:function(e,t,a){"use strict";a("8903")}}]);