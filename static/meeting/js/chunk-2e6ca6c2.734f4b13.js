(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e6ca6c2"],{"266d9":function(e,t,s){},d65d:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"coustom_event_list"},[t("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"待处理的会议",name:"0"}}),t("el-tab-pane",{attrs:{label:"已处理的会议",name:"1"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.showTable,expression:"!showTable"}],staticStyle:{padding:"5px 0px"}},[t("screen",{ref:"screen_coustom_pending",attrs:{filtrate:e.formPending},on:{screen:e.screen,reset:e.reset}}),t("mettingList",{ref:"mettingList1",attrs:{tableData:e.tableDataPending,columns:e.columnsPending,operate:e.operatePending},on:{classifyName:e.classifyName,handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showTable,expression:"showTable"}],staticStyle:{padding:"5px 0px"}},[t("screen",{ref:"screen_coustom_processed",attrs:{filtrate:e.formProcessed},on:{screen:e.screen,reset:e.reset}}),t("mettingList",{ref:"mettingList2",attrs:{tableData:e.tableDataProcessed,columns:e.columnsProcessed,operate:e.operateProcessed},on:{classifyName:e.classifyName,handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"业务员信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{attrs:{model:e.form}},[t("el-form-item",[t("el-select",{attrs:{value:e.form.username,placeholder:"请选择"},on:{change:e.checkUser}},e._l(e.selectList,(function(e,s){return t("el-option",{key:s,attrs:{value:e.username}})})),1)],1),t("el-form-item",[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),t("el-form-item",[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},i=[],n=s("87da"),o=s("b7e4"),l={components:{screen:n["a"],mettingList:o["a"]},data(){return{dialogFormVisible:!1,form:{},selectList:[],formLabelWidth:"120px",showTable:!1,activeName:0,formPending:[{label:"公司名称",type:"input",modelVal:"",fieId:"corporate_name",inputType:"string"},{label:"联系人姓名",type:"input",modelVal:"",fieId:"contact_name",inputType:"string"},{label:"联系人手机",type:"input",fieId:"contact_mobile",modelVal:"",inputType:"string"},{label:"会议开始时间",type:"datePicker",modelVal:"",fieId:"event_start_date"},{label:"会议结束时间",type:"datePicker",modelVal:"",fieId:"event_end_date"}],seekPending:{eventName:"",eventId:"",buyer:"",RFPNo:"",po:"",biddingStatus:"",pageSize:10,page:1,eventSearchType:"3",tourist_group_no:"",event_city:"",createUser:"",ownerUser:"",event_assistant:"",event_settlement:"",cvent_no:"",pr:"",event_startdate:"",event_enddate:""},tableDataPending:[],columnsPending:[{label:"会议城市",minWidth:"10%",prop:"cityname",hidden:!0},{label:"客户名称",minWidth:"15%",prop:"customername",hidden:!0},{label:"联系人姓名",minWidth:"15%",prop:"contactsname",hidden:!1},{label:"手机",minWidth:"15%",prop:"phone",hidden:!1},{label:"参会人数",minWidth:"10%",prop:"attendeenum",hidden:!1},{label:"预算",minWidth:"7%",prop:"budget",hidden:!0},{label:"开始日期",minWidth:"15%",prop:"startdate",hidden:!0},{label:"结束日期",minWidth:"15%",prop:"enddate",hidden:!0},{label:"提报时间",minWidth:"15%",prop:"createdate",hidden:!0}],operatePending:[{propName:"查看详情",classifyName:"particulars"},{propName:"派团",classifyName:"enterGroup"}],formProcessed:[{label:"公司名称",type:"input",modelVal:"",fieId:"corporate_name",inputType:"string"},{label:"联系人姓名",type:"input",modelVal:"",fieId:"contact_name",inputType:"string"},{label:"联系人手机",type:"input",fieId:"contact_mobile",modelVal:"",inputType:"string"},{label:"会议开始时间",type:"datePicker",modelVal:"",fieId:"event_start_date"},{label:"会议结束时间",type:"datePicker",modelVal:"",fieId:"event_end_date"},{label:"状态",type:"select",modelVal:"",fieId:"state",selsetVal:[{code:"1",name:"已派团"},{code:"2",name:"已取消"}]},{label:"业务负责人",type:"input",modelVal:"",inputType:"string",fieId:"fullname"}],seekProcessed:{eventName:"",eventId:"",buyer:"",RFPNo:"",po:"",biddingStatus:"",pageSize:10,page:1,eventSearchType:"3",tourist_group_no:"",event_city:"",createUser:"",ownerUser:"",event_assistant:"",event_settlement:"",cvent_no:"",pr:"",event_startdate:"",event_enddate:""},tableDataProcessed:[],columnsProcessed:[{label:"会议编号",minWidth:"10%",prop:"eventnum",align:"center",hidden:!0},{label:"会议城市",minWidth:"10%",prop:"cityname",hidden:!0},{label:"客户名称",minWidth:"15%",prop:"customername",hidden:!0},{label:"联系人姓名",minWidth:"15%",prop:"contactsname",hidden:!1},{label:"手机",minWidth:"15%",prop:"phone",hidden:!1},{label:"参会人数",minWidth:"10%",prop:"attendeenum",hidden:!1},{label:"预算",minWidth:"7%",prop:"budget",hidden:!0},{label:"开始日期",minWidth:"15%",prop:"startdate",hidden:!0},{label:"结束日期",minWidth:"15%",prop:"enddate",hidden:!0},{label:"业务负责人",minWidth:"15%",prop:"fullname",hidden:!0},{label:"状态",minWidth:"15%",prop:"status",hidden:!0}],operateProcessed:[{propName:"查看详情",classifyName:"particulars"}],seek:{customername:"",contactsname:"",phone:"",startdate:"",enddate:"",status:"",fullname:"",page:"",pageSize:""},status:"0",page:"1",pageSize:"10",row:{},customercontactsid:"",contactmail:""}},mounted(){this.seek.status=this.status,this.seek.page=this.page,this.seek.pageSize=this.pageSize,this.$refs.mettingList1.tableTitle="会议列表",this.$refs.mettingList2.tableTitle="会议列表",this.$route.query.tab?(console.log(this.$route.query.tab),this.activeName=this.$route.query.tab,this.handleClick()):this.getEventList()},methods:{submit(){var e={eventid:this.row.id,id:this.row.id,type:"2",citycode:this.row.citycode,startdate:this.row.createdate,enddate:this.row.enddate,attendeenum:this.row.attendeenum,budget:this.row.budget,items:[],remark:"",tenantcode:this.row.tenantcode,code:this.row.code,status:"1",username:this.form.userid,optcustomerid:this.row.customerid,customername:this.row.customername,customercontactsid:this.customercontactsid,customercontact:this.contactmail,customer:this.form.email};this.$api.Coustomereventdetailsupdate(e,"POST").then(e=>{console.log(e),this.dialogFormVisible=!1,this.getEventList()}),1==res.type&&(this.readonly=!0)},checkUser(e){console.log(e,44);var t=this.selectList.findIndex(t=>e===t.username);this.form=this.selectList[t],console.log(this.form,this.selectList)},handleSizeChange(e){console.log(`每页 ${e} 条-`),this.pageSize=e.toString(),this.page="1",this.seek.pageSize=this.pageSize,this.seek.page=this.page,this.getEventList()},handleCurrentChange(e){console.log(e),console.log(`当前页: ${e}-`),this.page=e.toString(),this.seek.page=this.page,this.getEventList()},classifyName(e,t){console.log(e,t);let s=this.$options.methods;const a=this;s[e](a,t)},reset(){this.seek={customername:"",contactsname:"",phone:"",startdate:"",enddate:"",fullname:"",status:this.showTable?this.status="1,2":this.status="0",page:this.page,pageSize:this.pageSize},this.getEventList()},screen(e){console.log(e),0==this.activeName?this.status="0":0==this.status&&(this.status="1,2"),console.log(this.status),this.seek={customername:e.corporate_name,contactsname:e.contact_name,phone:e.contact_mobile,startdate:e.event_start_date,enddate:e.event_end_date,status:this.status,fullname:e.fullname,page:this.page,pageSize:this.pageSize},e.state&&(this.seek.status=e.state),this.getEventList()},getEventList(){this.$api.getCoustomerEventList(this.seek,"POST").then(e=>{console.log(e),e.EventModels&&e.EventModels.length>0?(e.EventModels.forEach(e=>{1==e.status?e.status="已派团":2==e.status&&(e.status="已取消"),e.startdate=e.startdate.split(" ")[0],e.enddate=e.enddate.split(" ")[0]}),this.tableDataProcessed=this.tableDataPending=e.EventModels):this.tableDataProcessed=this.tableDataPending=[],console.log(this.tableDataProcessed,this.tableDataPending)})},handleClick(e){this.seek={customername:"",contactsname:"",phone:"",startdate:"",enddate:"",fullname:"",status:this.showTable?this.status="1,2":this.status="0",page:this.page,pageSize:this.pageSize},0==this.activeName?(this.formPending.forEach(e=>{e.modelVal=""}),this.showTable=!1,this.$refs.screen_coustom_processed.statusList=!1,this.$refs.screen_coustom_processed.showFlag=!1,this.seek.status="0"):(this.formProcessed.forEach(e=>{e.modelVal=""}),this.showTable=!0,this.$refs.screen_coustom_pending.statusList=!1,this.$refs.screen_coustom_pending.showFlag=!1,this.seek.status="1,2"),this.getEventList()},particulars(e,t){console.log(e,t,"详情"),e.$router.push({path:"/coustomEventDetail",query:{code:t.code,tenantcode:t.tenantcode,tab:e.activeName,customercontactsid:t.customercontactsid,contactmail:t.contactmail}})},enterGroup(e,t){console.log(e,t,"派团"),e.$api.sentdelegation({customerid:t.customerid},"POST").then(s=>{console.log(s),s&&(e.selectList=s,e.row=t)}),e.customercontactsid=t.customercontactsid,e.contactmail=t.contactmail,e.dialogFormVisible=!0}}},r=l,d=(s("fb78"),s("0b56")),c=Object(d["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},fb78:function(e,t,s){"use strict";s("266d9")}}]);