(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bdfcec02"],{2785:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"approve-page-body",staticStyle:{"padding-top":"40px"}},[s("div",{staticClass:"centerBox"},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{staticClass:"el-breadcrumb-item",attrs:{to:{path:"/"}}},[t._v(" 首页 ")]),s("el-breadcrumb-item",{staticClass:"el-bread-item",attrs:{to:{path:"/approveSetting"}}},[t._v(" 审批流配置 ")]),s("el-breadcrumb-item",{staticClass:"el-bread-item"},[t._v(" 编辑结算审批规则 ")])],1)],1)]),s("div",{staticClass:"addedit_header"},[t._v(t._s(t.title))]),s("div",{staticClass:"custom"},[s("div",{staticClass:"custom_title"},[t._v("客户")]),s("div",{staticClass:"custom_list"},[s("el-checkbox-group",{model:{value:t.customChoose,callback:function(s){t.customChoose=s},expression:"customChoose"}},t._l(t.customList,(function(t){return s("el-checkbox",{key:t.id,staticClass:"custom_checkbox",attrs:{label:t.shortname,border:""}})})),1)],1)]),s("div",{staticClass:"remark_area"},[s("div",{staticStyle:{width:"60px"}},[t._v("备注")]),s("el-input",{attrs:{rows:"6",type:"textarea"},model:{value:t.remark,callback:function(s){t.remark=s},expression:"remark"}})],1),s("div",{staticClass:"btns"},[s("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),s("el-button",{on:{click:t.cancel}},[t._v("取消")])],1)])},a=[],o={components:{},data:function(){return{back:"",type:"",id:"",title:"",customList:[],customChoose:[],editList:[],remark:""}},mounted(){this.back=this.$route.query.back,this.type=this.$route.query.type,this.id=this.$route.query.id,"1"==this.type&&(this.title=this.$route.query.id?"编辑结算审批规则":"新建结算审批规则"),"2"==this.type&&(this.title=this.$route.query.id?"编辑中标审批规则":"新建中标审批规则"),this.GetAllCompany()},methods:{GetAllCompany(){this.$api.GetAllCompany({},"POST").then(t=>{this.customList=t,this.id&&this.$api.EditGetApporval({id:this.id},"POST").then(t=>{this.editList=t.approval_company,this.remark=t.remarks;for(let s=0;s<t.approval_company.length;s++){let e=t.approval_company[s],i=this.customList.filter(t=>t.id==e.company_id);i&&i.length&&this.customChoose.push(i[0].shortname)}})})},save(){if(!this.customChoose.length)return this.$message.warning("请选择客户"),!1;let t=[];for(let s=0;s<this.customChoose.length;s++)for(let e=0;e<this.customList.length;e++)this.customChoose[s]==this.customList[e].shortname&&t.push({id:"",company_id:this.customList[e].id});this.$api.ApporvalSava({id:this.id,remarks:this.remark,type:this.type,approval_company:t},"POST").then(t=>{t&&(this.$message.success("保存成功"),this.$router.push({name:"approveSetting"}))})},cancel(){this.$router.push({name:this.back,query:{id:this.id,type:this.type}})}}},r=o,c=(e("e5a1"),e("0b56")),l=Object(c["a"])(r,i,a,!1,null,null,null);s["default"]=l.exports},c8cf:function(t,s,e){},e5a1:function(t,s,e){"use strict";e("c8cf")}}]);