(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07327c8a"],{"0751":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"quotation bd_r bd_l"},[e("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"a_click",attrs:{href:t.downloadUrl,target:"_blank",download:""}}),e("table",{staticClass:"hotel_info",attrs:{width:"100%",cellspacing:"0",cellpadding:"0"}},[e("tr",[e("td",{staticClass:"bd_r"},[t._v(t._s(1==t.type?"会议服务商":"酒店")+"名称")]),e("td",{staticClass:"t78"},[e("div",{staticClass:"flex_row align_center"},[e("img",{staticStyle:{width:"60px",height:"60px"},attrs:{src:t.hotelInfo.logo,alt:""}}),e("div",{staticClass:"flex_column mar_l20"},[e("span",[t._v(t._s(t.hotelInfo.name)),e("em")])])])])]),e("tr",[e("td",{staticClass:"bd_r"},[t._v(t._s(1==t.type?"会议服务商":"酒店")+"地址")]),e("td",{staticClass:"t78"},[t._v(t._s(t.hotelInfo.address))])]),e("tr",[e("td",{staticClass:"bd_r"},[t._v(t._s(1==t.type?"会议服务商":"酒店")+"联系人")]),e("td",{staticClass:"t78"},[t._v(t._s(t.hotelInfo.contacts)+" "+t._s(t.hotelInfo.phone)+" "+t._s(t.hotelInfo.email))])]),e("tr",[e("td",{staticClass:"bd_r"},[t._v(t._s(1==t.hotelInfo.service_hotel?"会议服务商":"酒店")+"报价人")]),e("td",{staticClass:"t78"},[t._v(t._s(t.hotelInfo.service_name)+" "+t._s(t.hotelInfo.service_mobile)+" "+t._s(t.hotelInfo.service_email))])]),e("tr",{staticClass:"bg_pink"},[e("td",{staticClass:"bd_r"},[t._v("需求")]),e("td",[e("div",{staticClass:"flex_column",staticStyle:{"text-align":"left"}},[e("span",[t._v(" 总报价："),e("h2",{staticClass:"dis_block t_orange"},[t._v("￥"+t._s(t.positiveFloat(t.hotelInfo.total_price).toFixed(2)))]),1==t.hotelInfo.service_hotel?e("span"):t._e()]),e("span",{staticClass:"t_ccc"},[t._v("报价时间："+t._s(t.hotelInfo.offer_data))])])])]),1==t.hotelInfo.service_hotel?e("tr",{staticClass:"bg_7fd"},[e("td",{staticClass:"bd_r"},[t._v("净价")]),e("td",[e("span",{staticClass:"t_orange",staticStyle:{"font-weight":"bold"}},[t._v("￥"+t._s(t.positiveFloat(t.hotelInfo.net_price)))])])]):t._e(),1==t.hotelInfo.service_hotel?e("tr",[e("td",{staticClass:"bd_r"},[t._v("采购酒店")]),e("td",[t._v(" "+t._s(t.hotelInfo.hotel_name?t.hotelInfo.hotel_name:"未选择采购酒店")+" "),e("el-checkbox",{staticStyle:{"line-height":"30px","margin-left":"20px"},attrs:{"true-label":1,"false-label":0},model:{value:t.hotelInfo.isuser_preferred_hotel,callback:function(e){t.$set(t.hotelInfo,"isuser_preferred_hotel",e)},expression:"hotelInfo.isuser_preferred_hotel"}},[t._v("是否使用首选酒店")])],1)]):t._e()]),t.roomList.length?e("roomPart",{ref:"room",attrs:{roomList:t.roomList,additional:t.additional,hotelInfo:t.hotelInfo}}):t._e(),t.eventList.length?e("eventPart",{ref:"event",attrs:{eventList:t.eventList,additional:t.additional,hotelInfo:t.hotelInfo}}):t._e(),t.foodList.length?e("foodPart",{ref:"food",attrs:{foodList:t.foodList,additional:t.additional,hotelInfo:t.hotelInfo}}):t._e(),t.foodOutsideList.length?e("foodOutsidePart",{ref:"foodOutside",attrs:{foodOutsideList:t.foodOutsideList,additional:t.additional,hotelInfo:t.hotelInfo}}):t._e(),t.transportList.length?e("transportPart",{ref:"transport",attrs:{transportList:t.transportList,additional:t.additional,hotelInfo:t.hotelInfo}}):t._e(),t.carList.length?e("carPart",{ref:"car",attrs:{carList:t.carList,additional:t.additional,hotelInfo:t.hotelInfo}}):t._e(),t.otherList.length?e("otherPart",{ref:"other",attrs:{otherList:t.otherList,additional:t.additional,hotelInfo:t.hotelInfo}}):t._e(),e("div",{staticClass:"flex_row car_date bd_b"},[e("div",{staticClass:"bd_r flex_1 pad_tb10_lr20"},[t._v("服务商报价说明（付款条件等）")]),e("div",{staticClass:"flex_2 pad_tb10_lr20"},[t._v(t._s(t.additional.offer_remarks))])]),e("div",{staticClass:"flex_row car_date bd_b"},[e("div",{staticClass:"bd_r flex_1 pad_tb10_lr20"},[t._v("报价有效期")]),e("div",{staticClass:"flex_2 pad_tb10_lr20"},[t._v(t._s(t.hotelInfo.quotationenddate))])]),e("div",{staticClass:"flex_row car_date bd_b"},[e("div",{staticClass:"bd_r flex_1 pad_tb10_lr20"},[t._v("报价书文件")]),e("div",{staticClass:"flex_2 pad_tb10_lr20"},t._l(t.hotelInfo.file,(function(i,s){return e("p",{key:s},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handlePreview(i)}}},[t._v(" "+t._s(i.filename)+" ")])],1)})),0)]),t.additional.serviceData.length?e("servicePart",{ref:"service",attrs:{serviceList:t.additional}}):t._e(),t.additional.taxationData.length?e("taxPart",{ref:"tax",attrs:{taxList:t.additional}}):t._e()],1)},a=[],o=i("cf45"),r=i("3cdb"),l=i("4651"),n=i("2590"),c=i("97b6"),d=i("b27d"),h=i("c9d6"),u=i("82ca"),p=i("d55e"),f=i("608c"),v=i("f121"),m={name:"quotation",data(){return{downloadUrl:"",hotelInfo:{},baseInfo:{},carList:[],roomList:[],foodList:[],foodOutsideList:[],eventList:[],otherList:[],transportList:[],additional:{},taxList:{},serviceList:{},type:1,MAINHOST:v["b"]}},components:{carPart:r["a"],roomPart:l["a"],eventPart:n["a"],foodPart:c["a"],foodOutsidePart:d["a"],transportPart:h["a"],otherPart:u["a"],servicePart:p["a"],taxPart:f["a"]},mounted(){this.$nextTick(()=>{this.type=this.$route.query.type})},watch:{hotelInfo(t,e){this.baseInfo=t}},methods:{positiveFloat(t){return Object(o["m"])(t)},handlePreview(t){if(!t.filepath)return;let e=t.filepath.substring(t.filepath.lastIndexOf(".")+1),i=["pdf","jpeg","jpg","png","txt"],s=["docx","doc","xls","xlsx","xlsm","ppt","pptx"];t.filepath=t.filepath.replace(/http:/,"https:"),this.downloadUrl=t.filepath,s.includes(e)?this.downloadUrl="https://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(t.filepath):i.includes(e)?this.downloadUrl=t.filepath:this.$message.info("文件格式不支持预览，下载后查看"),setTimeout(()=>{this.$refs.a_click.click()},100)},downloadFile(t){let e=document.createElement("a");fetch(t.filepath).then(t=>t.blob()).then(i=>{e.href=URL.createObjectURL(i),console.log(e.href),e.download=t.filename,document.body.appendChild(e),e.click()})}}},_=m,g=(i("fd98"),i("0b56")),b=Object(g["a"])(_,s,a,!1,null,"353dcc3f",null);e["a"]=b.exports},"443a":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAMMElEQVR4Xu2da8hmVRmGr/khQomUqZ00LI1K/6ShUkZUxiiEUdFMiZ3MtCyESpIO0NifopAmBrLsIGqOlNpJIk9Q/sgsm0wq6GBiJyM0K9PohBAPvEOffjN+a9/vXnut5933ho8RXPdaz7qe95p3vvew9iZ8mYAJ7JXAJrMxARPYOwEL4keHCTwKAQvih4cJWBA/BkxAI+BnEI2bUzMhYEFm0mhvUyNgQTRuTs2EgAWZSaO9TY2ABdG4OTUTAhZkJo32NjUCFkTj5tRMCFiQmTTa29QIWBCNm1MzIWBBZtJob1MjYEE0bk7NhIAFmUmjvU2NgAXRuDk1EwIWZCaN9jY1AhZE4+bUTAhYkJk02tvUCFgQjZtTMyFgQWbSaG9TI5BdkCOBlwKHAwcDBwH7aChWMvUQ8HfggcVP/Pcu4JvAf1ZyxyNvKqsg5wFvBI4amcdcpvsXcAVww+Lnr3PZ+NB9ZhPkFUDIccLQjXr8XgncDVwIfAq435weTiCTINuBd7mB1Qj8co0o8U8zX0AWQW4EXuaOTULgNuCDwHWTrNb5IhkE+Sjwvs45rmJ5HwCC/ayv3gU5H9g26w613fwlwOltS2i7es+CxEu4t/tl27YPEOAm4CXNq2hUQM+CfGzxilUjNF52DYFvAyfOkUivgsQbfj8BnjTHpnS653ihZHOntVUrq1dB3rF4Xb5045cBNwO/Bf5dGlrxcfsDhwCHLv6M/37xknu+Hjh5yTlSxXsV5DsDmhnvqH8xFfV2xT4VeCXwmgF8H1ntt4CXt9vCtCv3KEh8lqr0c0KXA2+YFtnKrHYc8GngGGFH8VmuU4RcukiPgsTfcn8oJPkC4JbCsR62nsBjgGuBFwlwvrF4NhKieSI9CvJc4McFCO8DDiwY5yEbE/gK8OqNh60b8TUxJyzVJtKjIPGLZPwOstE169fnN4Ij/P8PAR8WclcDW4RciogFSdGmyYp8P/ARYbUrgdcKue4jFqT7Fk1e4LnABcKqXwJOFXJdRyxI1+1pVtw5wA5h9Z3A64VctxEL0m1rmhf29sXLwEMLifek4r2plbgsyEq0sdom3gJ8QZh9ZT4FbEGE7s8sEm/Exkd5hl4XA2cMDfU23oL01pE+64lXqOKX8KHX54CzhoZ6Gm9BeupG37XEex3xcu7QK7UkFmRou+c9XpXk88CZGdFZkIxda1uzKknK30ksSNsHW9bVVUnSvbplQbI+RNvXrUpyKfDm9uWXVWBByjh51J4JqJKkeTPRgvihvywBVZIUX3azIMs+PJwPAqokcYD2aT0jtCA9dydXbaokXX8K2ILkehD2Xq0qyZeB1/W4OQvSY1dy16RKchWwtbetW5DeOrIa9aiSxFd+4zzmbi4L0k0rVq4QVZI4PCIOg+jisiBdtGFli1AkuRM4CYg/m18WpHkLVr4ARZJujhOyICv/+Oxig0PPWo6i45YLcbRT08uCNMU/q8XjeyFvHbDj+KrvkPEDpi4fakHKWXnkcgSesLjldOlZwHE+c5yy+fPlll0ubUGW4+f0MAJxI9a4z0jpFYfYxQ1Fm10WpBn62S4cn+QtPTvrVuD4lqQsSEv681w7bsATJ8qXXL8HnlYysNYYC1KLrOd9NAJxz8OSG4M+BOwLxJ9NLgvSBPvsFx1yIF3cOu7uVsQsSCvy8173aOC2QgTHArsKx44+zIKMjtQTFhCIuxjfUzAuhjR9w9CCFHbJw0Yn8ACwX8GsFuQRkHyHqYJHzQoMuQM4omAfFsSCFDxMVm9I6a2+LYgFWb1Hf8GOLEgBpD0N8T+xRHDJYhZEbJgFEcEli1kQsWEWRASXLGZBxIZZEBFcspgFERtmQURwyWIWRGyYBRHBJYtZELFhFkQElyxmQcSGWRARXLKYBREbZkFEcMliFkRsmAURwSWLWRCxYRZEBJcsZkHEhlkQEVyymAURGzaVIO8ETgeeATxerLVmLL5mehewHfhqzYUazW1BRPBTCBI3tj9DrK9FLGS+sMXCFde0ICLc2oLEyeHXibW1isVJ588H7m1VQIV1LYgItbYgFwFnibW1jJ0NfKZlASOvbUFEoLUFKf2qp1h+tViK2yYP2L0FGQBr7dDagvwMOEqsrWXsksWLCi1rGHNtCyLSrC3IJ4B3i7W1jMV5tjtbFjDy2hZEBFpbkCOBW4D9xfpaxOJGMiVHdbaoTV3TgojkagsSZcWdVLeJ9U0d+/PiJelrpl648noWRAQ8hSBR2gsXD7xY7zCx1pqxHwDfBXYAv6u5UKO5LYgIfipBxPIcG4mABRFBWhARXLKYBREbZkFEcMliFkRsmAURwSWLWRCxYRZEBJcsZkHEhlkQEVyymAURG2ZBRHDJYhZEbJgFEcEli1kQsWEWRASXLGZBxIZZEBFcspgFERtmQURwyWIWRGyYBRHBJYtZELFhFkQElyxmQcSGWRARXLKYBREbZkFEcMliFkRs2FSC7Lv4jvcJwCFirXOM/Rq4GbgaeHAJABZEhDeFIPG12yuTHt4gYh099kdgC/A9cWYLIoKrLcgTgT+JtTm2nsDjgPsFMBZEgBaR2oJcAJwr1ubYegKfFE+JsSDio6m2IN8Hjhdrc2w9gduBowUwFkSANsUzyH3AAWJtjq0n8DfxdHwLIj6aaj+DXAGcKtbm2HoCXwdeJYCxIAK0KZ5B4uDqOMDa1zgETgPiL52hlwUZSmwxvvYzSCxzPbBZrM+x/xO4CtgqArEgIrgpBInS4u5S5wHPFuucc+yni7texQmV6mVBRHJTCbK7vMOBQ8Va5xj7DRA/y14WRCQ4tSBimY4tScCCiAAtiAguWcyCiA2zICK4ZDELIjbMgojgksUsiNgwCyKCSxazIGLDLIgILlnMgogNsyAiuGQxCyI2zIKI4JLFLIjYMAsigksWsyBiwyyICC5ZzIKIDbMgIrhkMQsiNsyCiOCSxSyI2DALIoJLFrMgYsMsiAguWcyCiA2bShAfHKc1yAfHadxGS00hiA+OW75dPjhueYbSDLUF8cFxUlv2GvLBcePy3HC22oL44LgNWzBogA+OG4Rr+cG1BfHBccv3aO0MPjhuXJ4bzlZbEB8ct2ELBg3wwXGDcC0/uLYgPjhu+R6tncEHx43Lc8PZagvig+M2bMGgAT44bhCu5QfXFiQq9MFxy/cpZvDBceNwHDTLFIJEQT44blBbHjbYB8fp7JZOTiXI7kJ9cNywlvnguGG8Rh89tSCjb8ATFhHwZ7GKMK0fZEFEcMliFkRsmAURwSWLWRCxYRZEBJcsZkHEhlkQEVyymAURG2ZBRHDJYhZEbJgFEcEli1kQsWEWRASXLGZBxIZZEBFcspgFERtmQURwyWIWRGyYBRHBJYtZELFhFkQElyxmQcSGHQvcWpC9EziiYJyH9EngR8AxBaUdB/ywYFyVIZuqzLrcpIcBdxVO8RzgF4VjPawvAvcABxWU9PSRbjtdsNT6IT0K8ljgwcLdXAycUTjWw/ohcCbw2cJy9gP+UTh29GE9ChKb3AU8r3C3JwE3FI71sPYEol+XAwcWlPIr4FkF46oN6VWQc4AdA3YdfxvdtPgq7V8G5Dx0GgIHACHGiQOf8bcD75mmxD2v0qsg8cv3HS3BeO0uCGxdfO+9WTG9ChJALgLiBBJf8yRwI7C59dZ7FiR+B4nfRXzNk0DIEZI0vXoWJMB8HHhvU0JevAUB9bzf0WvtXZDY8DXAKaPv3BP2SkA967fKfjIIEhu/Fji5CgFP2hMB9ZzfanvIIkgAOB/YVo2EJ25NQD3jt2rdmQTZLUm8C/uUqlQ8+ZQE/glcCpw95aKla2UTJPb1ZOBtwJuA+NyWr5wE4oTGncBlQLxj3uWVUZC1ILcA8fPMxQffDgb26ZL0vIv6LxAfTrx38QZwHHodP91f2QXpHrALzE3AguTun6uvTMCCVAbs6XMTsCC5++fqKxOwIJUBe/rcBCxI7v65+soELEhlwJ4+NwELkrt/rr4yAQtSGbCnz03AguTun6uvTMCCVAbs6XMTsCC5++fqKxOwIJUBe/rcBCxI7v65+soELEhlwJ4+NwELkrt/rr4yAQtSGbCnz03AguTun6uvTMCCVAbs6XMTsCC5++fqKxOwIJUBe/rcBCxI7v65+soELEhlwJ4+NwELkrt/rr4yAQtSGbCnz03gf/wcouceiRG4AAAAAElFTkSuQmCC"},8845:function(t,e,i){},8866:function(t,e,i){"use strict";i("be05")},acd6:function(t,e,i){"use strict";var s=i("4ff3"),a=i.n(s),o=i("f121");const r=o["b"];e["a"]=function(t,e,i){return new Promise((function(s,o){const l=()=>{"/Template/GetTemplate"==t?a()({method:"post",url:r+t,data:e,headers:{"Content-Type":"application/json;charset=utf-8"}}).then(t=>{let s=document.createElement("a"),a=t.data.path.substring(t.data.path.lastIndexOf("."));fetch(t.data.path).then(t=>t.blob()).then(t=>{s.href=URL.createObjectURL(t),console.log(s.href),5==e.type||e.type,s.download=i+a,document.body.appendChild(s),s.click()})}):a()({method:"post",url:r+t,data:e,responseType:"blob",headers:{"Content-Type":"application/json;charset=utf-8"}}).then(s=>{console.log(s);let a=s.data;const o=new FileReader;o.readAsDataURL(a),o.onload=s=>{let a=document.createElement("a");a.style.display="none","/quotation/exportexcel"==t||"/SettlementSheet/ExportExcel1"==t||"/orderform/exportexcel"==t||"/Quotation/ExportExcel"==t?a.download=i+".xls":"/Template/GetTemplate"==t?5==e.type||6==e.type?a.download=i+".docx":a.download=i+".xls":"/Reporting/GetExcel"==t&&(a.download=i+".xls"),a.href=s.target.result;document.body;document.body.appendChild(a),a.click(),document.body.removeChild(a)}})};l()}))}},be05:function(t,e,i){},ed89:function(t,e,i){t.exports=i.p+"img/锁定.f16270db.png"},f2ac:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[e("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"a_click",attrs:{href:t.downloadUrl,target:"_blank",download:""}}),e("div",{staticClass:"main"},[e("ul",[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.$router.replace({path:"/EventList"})}}},[t._v("我的会议")]),e("li",{staticStyle:{color:"#7c7f82"}},[t._v(">")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("会议详情")]),t.prev?e("li",{staticStyle:{color:"#7c7f82"}},[t._v(">")]):t._e(),t.prev?e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.$router.go(-1)}}},[t._v(t._s(t.prev))]):t._e(),e("li",{staticStyle:{color:"#7c7f82"}},[t._v(">")]),e("li",{staticStyle:{color:"#7c7f82"}},[t._v("报价单详情")])],1)]),e("div",{staticClass:"content flex_row justify_between"},[t._m(0),e("div",{staticStyle:{"margin-right":"20px"}},[e("img",{attrs:{src:i("443a"),alt:""}}),e("span",{staticStyle:{cursor:"pointer"},on:{click:t.excelexport}},[t._v("下载报价单")])])]),t.isCancel?e("div",{staticClass:"order_cancel_notice"},[t._m(1),e("div",{staticClass:"cancel_detail"},[e("span",[t._v("取消人："+t._s(t.cancelInfo.cancel_people))]),e("span",[t._v("时间："+t._s(t.cancelInfo.cancel_time))]),e("span",[t._v("取消原因: "+t._s(t.cancelInfo.content))])])]):t._e(),e("base-part",{attrs:{source:"bid"}}),e("quotation-part",{ref:"quotations",staticClass:"service"}),e("div",{staticClass:"Confirm"},[e("p",{staticStyle:{color:"red"}},[t._v(t._s(this.messText))]),t.isCancel||4===t.servicer.type?t._e():e("div",[e("button",{directives:[{name:"show",rawName:"v-show",value:1!==t.servicer.type&&2!==t.servicer.type&&3!==t.servicer.type,expression:"\n          servicer.type !== 1 && servicer.type !== 2 && servicer.type !== 3\n        "}],staticClass:"b1",on:{click:t.yao}},[t._v(" 邀请重新报价 ")]),e("button",{directives:[{name:"show",rawName:"v-show",value:1!==t.servicer.type&&3!==t.servicer.type&&"0014-5"!=t.servicer.status,expression:"\n          servicer.type !== 1 &&\n          servicer.type !== 3 &&\n          servicer.status != '0014-5'\n        "}],staticClass:"purchase",on:{click:function(e){return t.Confirm()}}},[t._v(" "+t._s(1==t.servicer.whether?"提交审核":"提交中标")+" ")]),e("button",{directives:[{name:"show",rawName:"v-show",value:1!==t.servicer.type&&3!==t.servicer.type,expression:"servicer.type !== 1 && servicer.type !== 3"}],on:{click:t.decline}},[t._v(" 谢绝报价 ")]),"0014-5"==t.servicer.status?e("span",{staticStyle:{"margin-left":"30px"}},[t._v("草稿，更新时间："+t._s(t.servicer.offer_data))]):t._e()]),e("div",{staticClass:"blueness"}),e("div",{staticClass:"inputs"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.leaveWordMsg,expression:"leaveWordMsg"}],attrs:{type:"text",placeholder:"在此给会议服务商留言,您的每条留言系统都会邮件通知到会议服务商...."},domProps:{value:t.leaveWordMsg},on:{input:function(e){e.target.composing||(t.leaveWordMsg=e.target.value)}}}),e("div",{staticClass:"teng"},[e("button",{staticClass:"mark",on:{click:t.sendMsg}},[t._v("立即发送给会议服务商")])]),1==this.$route.query.type?e("div",{staticClass:"text_left",staticStyle:{"margin-top":"10px"}},[e("el-upload",{ref:"upload",attrs:{action:t.UploadFilesUrl,limit:1,"before-upload":t.fileLimit,"on-exceed":t.overLimit,"on-success":t.uploadFile,"on-preview":t.handlePreview,"on-remove":t.deleteFile,"file-list":t.fileList,"show-file-list":!0,multiple:!0}},[e("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选择文件")])],1),e("br"),e("span",{staticClass:"ps"},[t._v("注释：选择文件上传后，需点击“立即发送给会议供应商”，您上传的文件和填写的文字消息系统会回传给会议服务商")])],1):t._e(),e("div",{staticStyle:{"margin-top":"20px","border-top":"1px solid #ccc","padding-top":"10px"}},t._l(t.messageList,(function(i,s){return e("div",{key:s,staticStyle:{margin:"10px 0"}},[e("p",[t._v(t._s(i.username)+" @ "+t._s(i.createtime))]),1==i.message_type?e("div",{staticClass:"message_txt"},[e("span",{staticClass:"fileMseeage",on:{click:function(e){return t.handlePreview(i.message)}}},[t._v(" "+t._s(i.message.slice(0,i.message.indexOf(",")))+" ")])]):e("p",[t._v(t._s(i.message))])])})),0)])]),t._m(2),t._l(t.quotation,(function(i,s){return e("div",{key:s,staticClass:"six"},[e("ul",[e("li",{staticStyle:{"margin-left":"15px"}},[t._v("第 "+t._s(s+1)+" 次报价")]),e("li",{staticStyle:{color:"#787878 font-size:14px","margin-left":"15px"}},[t._v(" 总金额: ")]),e("li",{staticStyle:{color:"#f91","margin-left":"10px"}},[t._v(" ￥ "+t._s(t.positiveFloat(i.total_price).toFixed(2))+" ")]),e("li",{staticStyle:{"margin-left":"10px",color:"#bebebe"}},[t._v(t._s(i.offer_data))]),e("li",{staticClass:"checkOffer",on:{click:function(e){return t.checkOffer(i)}}},[t._v("查看报价")]),0==s?e("li",{staticStyle:{color:"#787878","margin-left":"10px"}},[t._v(" 初次报价 ")]):t._e(),s>0?e("li",{staticStyle:{color:"#787878","margin-left":"10px"}},[t.riseInPrice(i,s)>0?e("span",[t._v(" 较上次有效报价提高 "),e("span",{staticStyle:{color:"#f00",margin:"0 5px"}},[t._v("￥"+t._s(t.riseInPrice(i,s)))]),e("span",{staticStyle:{color:"#f00"}},[t._v(" "+t._s(t.riseInPriceRatio(i,s)))])]):t._e(),t.riseInPrice(i,s)<=0?e("span",[t._v(" 较上次有效报价优惠 "),e("span",{staticStyle:{color:"#090",margin:"0 5px"}},[t._v("￥"+t._s(t.priceFavorable(i,s)))]),e("span",{staticStyle:{color:"#090"}},[t._v(" "+t._s(t.priceFavorableRatio(i,s)))])]):t._e()]):t._e()])])})),e("el-dialog",{attrs:{title:"不满意，需要会议服务商重新报价",visible:t.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[e("span",{staticClass:"contentd"},[t._v("重新报价截止时间")]),e("div",{staticClass:"black"},[e("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间","default-time":"12:00:00","picker-options":t.pickerOptions0},model:{value:t.reOfferendDate,callback:function(e){t.reOfferendDate=e},expression:"reOfferendDate"}})],1),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textValue,expression:"textValue"}],staticClass:"leave",attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"请留言告知不满意的原因,方便会议服务商调整价格。如:客房部分价格降低10%,会场设备建议免费"},domProps:{value:t.textValue},on:{input:function(e){e.target.composing||(t.textValue=e.target.value)}}}),e("span",{directives:[{name:"show",rawName:"v-show",value:t.invalid,expression:"invalid"}],staticStyle:{color:"red",display:"block"}},[t._v("请输入要求重新报价的理由")]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:function(e){return t.quote(3)}}},[t._v("提交")])],1)]),e("el-dialog",{attrs:{title:"确认中标总金额",visible:t.Visible,width:"50%",center:"","close-on-click-modal":!1},on:{"update:visible":function(e){t.Visible=e}}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isBid,expression:"isBid"}]},[e("div",{staticClass:"send_ft"},[t._v(" 请勾选本次会议所有需要中标的报价，以确认是否超出预算： ")]),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,fit:"","show-header":!1,"tooltip-effect":"dark"},on:{"row-click":t.checkedRow,select:t.selectRow,"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",selectable:t.isDisabled}}),e("el-table-column",{attrs:{label:"询价单"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" 询价单号【"+t._s(e.row.inquiry_sheet_code)+"】 ")]}}])}),e("el-table-column",{attrs:{prop:"name",label:"公司","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"total_price",label:"金额"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{color:"#f91"}},[t._v("￥"+t._s(t.positiveFloat(i.row.total_price).toFixed(2)))])]}}])})],1),e("div",[e("span",[t._v("总金额："),e("span",{staticStyle:{color:"#f91","font-weight":"bold"}},[t._v(t._s("￥"+t.bidTotalMoney.toFixed(2)))])]),e("span",{staticStyle:{"margin-left":"200px"}},[t._v("预算："),e("span",{staticStyle:{color:"#f91","font-weight":"bold"}},[t._v(t._s("￥"+t.menus.total_budget))])])])],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.Visible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirmBid(1)}}},[t._v("确 定")])],1)]),e("el-dialog",{attrs:{title:"提示",visible:t.canotBidVisible,width:"30%",center:""},on:{"update:visible":function(e){t.canotBidVisible=e}}},[e("div",[e("span",{staticClass:"winning"},[t._v("当前报价尚未通过中标审批，无法中标。")])]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.canotBidVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.canotBidVisible=!1}}},[t._v("确 定")])],1)]),e("el-dialog",{staticClass:"finalConfirm",attrs:{visible:t.finalConfirmVisible,width:"40%",center:""},on:{"update:visible":function(e){t.finalConfirmVisible=e}}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("h3",[t._v("确认中标，发送PO/合同")]),e("p",{staticStyle:{"font-size":"14px",color:"#7e7f80","text-align":"center","line-height":"20px"}},[t._v(" 确认中标后，系统会发确认订单及中标通知给会议服务商 ")])]),e("div",{staticClass:"pop_box"},[e("div",{staticClass:"send_box clx"},[e("div",{staticClass:"offline selected"},[e("div",{staticClass:"send_ft"},[t._v(" 点击“确定中标”后， 会议服务商会收到中标通知 ，您可按需进行线下合同操作 ")]),e("div",{staticClass:"send_list"},[e("div",{staticClass:"sl_title"},[t._v("会议服务商信息")]),e("p",[t._v("姓名：luke")]),e("p",[t._v("手机号：13917031506")]),e("p",[t._v("邮箱：luke.lu@hotelgg.com")])])])]),e("div",{staticClass:"dl_box"},[e("div",{staticClass:"send_dl clx"},[e("span",[t._v("附件：")]),e("a",{attrs:{href:"/cmms/event/MID20211020208490/rfp/dmc/DO211020526834/offer/35330/export?export=excel",target:"_blank"}},[e("i",{staticClass:"ico"},[t._v("")]),t._v("会议服务商报价单")])]),e("p",{staticClass:"dl_txt"},[t._v("点击附件名称即可预览附件")])]),e("div",{staticClass:"send_bz"},[e("textarea",{attrs:{placeholder:"请输入中标操作的备注信息（非必填）",id:"accept_mark"}})]),e("div",{staticClass:"decline_check"},[e("label",[e("input",{attrs:{type:"checkbox",id:"refuse"}}),t._v(" 选择此会议服务商中标后自动谢绝其他会议服务商的报价 ")])])]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"finalConfirmBtn",attrs:{type:"primary"},on:{click:function(e){return t.quote(1)}}},[t._v("确 定 中 标")])],1)]),e("el-dialog",{attrs:{title:"谢绝报价",visible:t.declineVisible,width:"30%",center:""},on:{"update:visible":function(e){t.declineVisible=e}}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textValue,expression:"textValue"}],staticClass:"top",attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"请输入拒绝理由"},domProps:{value:t.textValue},on:{input:function(e){e.target.composing||(t.textValue=e.target.value)}}}),e("span",{directives:[{name:"show",rawName:"v-show",value:t.invalid,expression:"invalid"}],staticClass:"turn",staticStyle:{color:"red",display:"block"}},[t._v("请输入拒绝理由")]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"cannot",attrs:{type:"primary"},on:{click:function(e){return t.quote(2)}}},[t._v("谢绝报价")])],1)])],2)},a=[function(){var t=this,e=t._self._c;return e("div",[e("img",{attrs:{src:i("ed89"),alt:""}}),e("span",[t._v("会议服务商报价单")])])},function(){var t=this,e=t._self._c;return e("h3",{staticClass:"title"},[e("strong",[t._v("询价单已取消，此报价单已失效。")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"gray"},[e("p",[t._v("以上是用户第 1 次报价 （最新报价），以下为历史报价记录")])])}],o=i("cf45"),r=i("7dc4"),l=i("0751"),n=i("2654"),c=i("f121"),d=i("df68"),h=i("acd6"),u={data(){return{UploadFilesUrl:c["b"]+"/MeetingMa/UploadFiles",downloadUrl:"",prev:"",selectQuery:{},menus:{},quotation:{},servicer:{},arr1:[],leaveWordMsg:"",filesList:[],fileList:[],messageList:[],uploadFileInfo:{},tableData:[],declineVisible:!1,centerDialogVisible:!1,finalConfirmVisible:!1,Visible:!1,canotBidVisible:!1,pickerOptions:{shortcuts:[{text:"今天",onClick(t){t.$emit("pick",new Date)}},{text:"昨天",onClick(t){const e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick(t){const e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},isBid:"待审核"!=this.$route.query.type,messText:"",value1:"",value2:"",reOfferendDate:new Date((new Date).getTime()+864e5),textValue:"",bidTotalMoney:0,invalid:!1,pickerOptions0:{},afresh:!0,status:0,quotationIds:"",hasSelect:!1,cancelInfo:{},isCancel:!1}},components:{QuotationPart:l["a"],BasePart:r["a"]},watch:{$route(t,e){t.fullPath!==e.fullPath&&this.maker()}},computed:{riseInPrice(){return function(t,e){let i=t.total_price-this.quotation[e-1].total_price;return i.toFixed(2)}},riseInPriceRatio(){return function(t,e){let i=(t.total_price-this.quotation[e-1].total_price)/this.quotation[e-1].total_price*100;return i.toFixed(2)+"%"}},priceFavorable(){return function(t,e){let i=this.quotation[e-1].total_price-t.total_price;return i.toFixed(2)}},priceFavorableRatio(){return function(t,e){let i=(this.quotation[e-1].total_price-t.total_price)/this.quotation[e-1].total_price*100;return i.toFixed(2)+"%"}}},mounted(){this.maker(),this.Service(),this.GetCancel(),this.prev=this.$route.query.prev},methods:{excelExport:h["a"],positiveFloat(t){return Object(o["m"])(t)},Service(){this.selectQuery=this.$route.query,this.$api.getData({MeetingID:this.selectQuery.id},"POST").then(t=>{this.menus=t,this.pickerOptions0.disabledDate=t=>{let e=this.menus.event_startdate;return t.getTime()<Date.now()-864e5||t.getTime()>new Date(e).getTime()}})},getMessage(){let t=this.servicer.inquiry_sheet_object_id;this.$api.GetMessage({InquirySheetObjectID:t},"POST").then(t=>{this.messageList=t||[]})},checkOffer(t){t.id==this.$route.query.foreign_key_id?(this.Service(),this.maker()):this.$router.push({path:"/offer",query:{foreign_key_id:t.id,id:this.$route.query.id,type:this.$route.query.type}})},GetCancel(){this.$api.GetCancel({ID:this.$route.query.inquiryListId},"POST").then(t=>{this.cancelInfo=t,t.cancel_time&&(this.isCancel=!0)})},checkedRow(t,e,i){1==t.state&&this.$refs.multipleTable.toggleRowSelection(t,!0)},selectRow(t,e){1==e.state&&this.$refs.multipleTable.toggleRowSelection(e,!0),this.hasSelect=!!t.find(t=>2==t.state)},isDisabled(t,e){return 1!=t.state},handleSelectionChange(t){this.bidTotalMoney=0,this.quotationIds="",t.forEach(e=>{this.bidTotalMoney+=Number(e.total_price),t.length>1?this.quotationIds+=e.id+",":this.quotationIds=e.id})},eventBaseInfo(t){this.eventBaseInfo=t},quote(t){let e={status:t,id:this.$route.query.foreign_key_id,inquiry_sheet_object_id:this.$route.query.serviceId,message:""};if(1!==t){if(""===this.textValue.trim())return this.invalid=!0,!1;e.message=this.textValue,3==t&&(e.offerenddate=this.reOfferendDate)}this.invalid=!1,this.$api.Declined({Parameter:JSON.stringify(e)},"POST").then(t=>{if(this.arr1=t,t){if(this.$message({message:t.msg,type:"success"}),this.centerDialogVisible=!1,this.Visible=!1,this.canotBidVisible=!1,this.declineVisible=!1,"未审批完成，请勿重复点击"==t)return;this.$router.go(-1),this.maker()}})},yao(){this.centerDialogVisible=!0,this.invalid=!1},Confirm(t){let e={status:1,type:t||0,id:this.$route.query.foreign_key_id,inquiry_sheet_object_id:this.servicer.inquiry_sheet_object_id};const i=this;this.$api.Declined({Parameter:JSON.stringify(e)},"POST").then(t=>{1===t.data||0===t.data?this.$api.WinTheBiddingQuotedPrice({MeetingID:this.$route.query.id,type:t.data},"POST").then(t=>{this.Visible=!0,this.tableData=t,this.$nextTick(()=>{this.tableData.forEach((t,e)=>{1==t.state&&i.$refs.multipleTable.toggleRowSelection(t,!0)})})}):!0===t.data?(this.$message({message:t.msg,type:"success"}),this.$router.go(-1),this.maker()):this.$confirm(t.msg,"提示",{confirmButtonText:"查看审批进度",cancelButtonText:"取消",center:!0}).then(()=>{this.$router.push({path:"/cmms",query:{id:this.$route.query.id,ApproveID:t.data.ApproveID}})}).catch(()=>{})})},ConfirmTempFn(){let t={status:1,id:this.$route.query.foreign_key_id,inquiry_sheet_object_id:this.$route.query.serviceId,message:""};this.$api.Temporary({Parameter:JSON.stringify(t)},"POST").then(t=>{this.$message({message:"确认中标成功",type:"success"}),this.maker()})},confirmBid(){if(!this.quotationIds||!this.hasSelect)return void this.$message.error("请选择中标报价");let t={id:this.quotationIds,event_info_id:this.$route.query.id,total_price:this.bidTotalMoney};this.$api.WinningTheBidApprove({Parameter:JSON.stringify(t)},"POST").then(t=>{1===t?this.$confirm("没有审批流程，是否直接提交中标?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.Confirm(1),this.Visible=!1}):(this.$message({message:"操作成功",type:"success"}),this.Visible=!1,this.maker())})},decline(){this.declineVisible=!0,this.invalid=!1},downloadOffer(){this.quotationIds?this.$api.QuotedPriceSettlementExcel({QuotedPriceID:this.quotationIds},"POST").then(t=>{if(t){let e=document.createElement("a");fetch(t).then(t=>t.blob()).then(t=>{e.href=URL.createObjectURL(t),e.download="报价单",document.body.appendChild(e),e.click()})}}):this.$message.error("请勾选需要下载的报价单")},excelexport(){var t="DMC报价单"+this.$route.query.id;this.excelExport("/Template/GetTemplate",{eventid:this.$route.query.id,type:3,param:this.$route.query.foreign_key_id},t)},fileLimit(t){const e=t.size/1024/1024<30;return e?Object(d["a"])(t):(this.$message.error("上传附件大小不能超过 30MB!"),!1)},uploadFile(t){this.uploadFileInfo=t,this.filesList.push({name:t.title,url:t.weburl})},overLimit(t,e){this.$message.error("文件只能上传一份")},deleteFile(t,e){this.filesList=[],e.forEach(t=>{this.filesList.push({name:t.name,url:t.url})})},sendMsg(){let t={inquiry_sheet_object_id:this.servicer.inquiry_sheet_object_id,message:"",message_type:0};this.leaveWordMsg&&(t.message=this.leaveWordMsg,this.$api.sendMsg({Parameter:JSON.stringify(t)},"POST").then(t=>{t&&(this.getMessage(),this.$message({message:"消息发送成功",type:"success"}),this.leaveWordMsg="")})),this.filesList.forEach((e,i)=>{t.message=e.name+","+e.url,t.message_type=1,this.$api.sendMsg({Parameter:JSON.stringify(t)},"POST").then(t=>{t&&0==i&&(this.$message({message:"文件发送成功",type:"success"}),this.leaveWordMsg="",this.getMessage())})})},handlePreview(t){let e=t.slice(t.lastIndexOf(",")+1);t.slice(0,t.lastIndexOf(","));if(!e)return;let i=e.substring(e.lastIndexOf(".")+1),s=["pdf","jpeg","jpg","png","txt"],a=["docx","doc","xls","xlsx","xlsm","ppt","pptx"];e=e.replace(/http:/,"https:"),this.downloadUrl=e,a.includes(i)?this.downloadUrl="https://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(e):s.includes(i)?this.downloadUrl=e:this.$message.info("文件格式不支持预览，下载后查看"),setTimeout(()=>{this.$refs.a_click.click()},100)},downloadFile(t){let e=t.slice(t.lastIndexOf(",")+1),i=t.slice(0,t.lastIndexOf(",")),s=document.createElement("a");s.href=e,s.download=i,document.body.appendChild(s),s.click()},hotel(){this.$api.Usage({QuotedPriceID:this.$route.query.foreign_key_id},"POST").then(t=>{console.log(t),this.quotation=t.quotedprice})},maker(){this.$api.Usage({QuotedPriceID:this.$route.query.foreign_key_id},"POST").then(t=>{t&&(this.servicer=t.service,this.$refs.quotations.hotelInfo=t.service,this.$refs.quotations.roomList=Object(n["c"])(t.room),this.$refs.quotations.eventList=Object(n["a"])(t.conference),this.$refs.quotations.carList=Object(n["c"])(t.car,"datatime"),this.$refs.quotations.foodList=Object(n["c"])(t.food),this.$refs.quotations.foodOutsideList=Object(n["c"])(t.foodOutside),this.$refs.quotations.otherList=t.other?t.other:[],this.$refs.quotations.additional=t.quoted_price,this.$refs.quotations.transportList=Object(n["c"])(t.transportation,"datatime"),this.quotation=t.quotedprice,1==this.servicer.type?this.messText="该报价已中标！":2===this.servicer.type?this.messText="已通知会议服务商重新报价！":3==this.servicer.type?this.messText="您已谢绝该报价!":4==this.servicer.type?this.messText="服务商已提交最新报价!":this.messText="",this.getMessage())})}}},p=u,f=(i("8866"),i("0b56")),v=Object(f["a"])(p,s,a,!1,null,"476190c0",null);e["default"]=v.exports},fd98:function(t,e,i){"use strict";i("8845")}}]);