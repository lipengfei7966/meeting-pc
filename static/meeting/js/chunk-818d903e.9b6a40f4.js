(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-818d903e"],{"06c1":function(t,e,s){var a=s("17e9"),r=String,i=TypeError;t.exports=function(t){if("object"==typeof t||a(t))return t;throw i("Can't set "+r(t)+" as a prototype")}},"09f8":function(t,e,s){"use strict";s("dff6")},3471:function(t,e,s){var a=s("17e9"),r=s("de03"),i=s("78a8");t.exports=function(t,e,s){var o,n;return i&&a(o=e.constructor)&&o!==s&&r(n=o.prototype)&&n!==s.prototype&&i(t,n),t}},"672b":function(t,e,s){var a=s("b23f"),r=Function.prototype,i=r.apply,o=r.call;t.exports="object"==typeof Reflect&&Reflect.apply||(a?o.bind(i):function(){return o.apply(i,arguments)})},"76b8":function(t,e,s){var a=s("de03"),r=s("9c10");t.exports=function(t,e){a(e)&&"cause"in e&&r(t,"cause",e.cause)}},"78a8":function(t,e,s){var a=s("5d05"),r=s("50b4"),i=s("06c1");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,s={};try{t=a(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),t(s,[]),e=s instanceof Array}catch(o){}return function(s,a){return r(s),i(a),e?t(s,a):s.__proto__=a,s}}():void 0)},"7dc4":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"base_part"},[e("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"a_click",attrs:{href:t.downloadUrl,target:"_blank",download:""}}),"approve"==t.source||"bid"==t.source||"order"==t.source?e("div",{staticClass:"nformation flex_row align_center"},[e("p",{staticStyle:{"font-size":"16px","font-family":"PingFang SC-Semibold, PingFang SC","font-weight":"600",color:"#333333","border-left":"4px solid rgb(24, 135, 255)","padding-left":"5px"}},[t._v(" 会议基本信息 ")]),"bid"==t.source||"order"==t.source||"approve"==t.source?e("p",{staticStyle:{"font-size":"12px","font-family":"PingFang SC-Regular, PingFang SC","font-weight":"400",color:"#999999"}},[t._v(" （敏感信息对供应商隐藏） ")]):t._e(),e("div",{staticClass:"showBase_tap flex_row align_center",staticStyle:{"margin-left":"10px",color:"#409eff",cursor:"pointer"},on:{click:function(e){t.conferenceHiding=!t.conferenceHiding}}},[e("span",{staticStyle:{"font-size":"14px"}},[t._v(" "+t._s(t.conferenceHiding?"收起":"展开"))]),e("i",{class:t.conferenceHiding?"el-icon-arrow-up ":"el-icon-arrow-down"})])]):t._e(),"approve"==t.source||"bid"==t.source||"order"==t.source?e("div",{staticStyle:{padding:"0 0px","padding-right":"15px"}},[e("el-divider")],1):t._e(),"stepOne"==t.source?e("div",{staticClass:"flex_row justify_between"},[e("div",{staticClass:"flex_row align_center"},[e("span",{staticClass:"base_title",staticStyle:{"font-size":"14px","font-family":"PingFang SC-Semibold, PingFang SC","font-weight":"600",color:"#666"}},[t._v("会议基本信息 ")]),e("span",{staticClass:"base_time",staticStyle:{"font-size":"12px","font-family":"PingFang SC-Regular, PingFang SC","font-weight":"400",color:"#999999"}},[t._v(" （"+t._s(this.menus.create_date)+"）")]),e("div",{staticClass:"showBase_tap flex_row align_center",staticStyle:{"margin-left":"10px",color:"#409eff"},on:{click:function(e){t.conferenceHiding=!t.conferenceHiding}}},[e("span",[t._v(" "+t._s(t.conferenceHiding?"收起":"展开"))]),e("i",{class:t.conferenceHiding?"el-icon-arrow-up ":"el-icon-arrow-down"})])]),e("div",{class:["edit_base_tap"],on:{click:t.editBaseTap}},[e("span",{class:["base_title",(1==t.menus.b2baudstatus||!t.isShowCancelBtn&&t.eventStatu>0)&&!t.isDMC?"disableColor":""],staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"normal",color:"#409eff"}},[t._v("编辑基本信息 ")])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.conferenceHiding,expression:"conferenceHiding"}],class:["information","approve"==t.source||"bid"==t.source||"order"==t.source?"margin_auto":"",t.isMsd?"is-msd":""],staticStyle:{"margin-top":"10px"}},[e("el-descriptions",{attrs:{title:""}},[e("el-descriptions-item",{attrs:{label:"会议名称"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.event_name))])]),e("el-descriptions-item",{attrs:{label:"建团类型"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.tourist_group_type))])]),e("el-descriptions-item",{attrs:{label:"活动类型"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.activity_type))])]),e("el-descriptions-item",{attrs:{label:"Cvent号"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.cvent_no))])]),e("el-descriptions-item",{attrs:{label:"客户"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.company_name))])]),e("el-descriptions-item",{attrs:{label:"团电脑号"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.tourist_group_no))])]),e("el-descriptions-item",{attrs:{label:"团开始日期"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.b2b_begin))])]),e("el-descriptions-item",{attrs:{label:"团结束日期"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.b2b_end))])]),e("el-descriptions-item",{attrs:{label:"服务类型"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.service_type))])]),e("el-descriptions-item",{attrs:{label:"会议城市"}},["1"==t.menus.online_meeting?e("span",{staticClass:"colorTxt"},[t._v("（线上会议）")]):e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.event_city))])]),e("el-descriptions-item",{attrs:{label:"会议地点"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.meeting_place))]),"1"==t.menus.is_hotel?e("span",{staticClass:"colorTxt",staticStyle:{"margin-left":"10px"}},[t._v("（在酒店开会）")]):t._e()]),e("el-descriptions-item",{attrs:{label:"餐标限制"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.food_limit))])]),e("el-descriptions-item",{attrs:{label:"参会人数"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.attendee_no+`（内部：${t.menus.inside_number}, 外部：${t.menus.external_number}）`))])]),e("el-descriptions-item",{attrs:{label:"会议开始日期"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s((this.menus.event_startdate||"").split(" ")[0]))])]),e("el-descriptions-item",{attrs:{label:"会议结束日期"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s((this.menus.event_enddate||"").split(" ")[0]))])]),e("el-descriptions-item",{attrs:{label:"会议总预算"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.total_budget))])]),e("el-descriptions-item",{attrs:{label:"会议ID"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.event_num))])]),e("el-descriptions-item",{attrs:{label:"会议创建人"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.create_user))])]),e("el-descriptions-item",{attrs:{label:"客户联系人"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.username))])]),e("el-descriptions-item",{attrs:{label:"客户所属部门"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.department))])]),e("el-descriptions-item",{attrs:{label:"客户联系电话"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.mobile))])]),e("el-descriptions-item",{attrs:{label:"客户邮箱"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.email))])]),e("el-descriptions-item",{attrs:{label:"MSA"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.MSA))])]),e("el-descriptions-item",{attrs:{label:"发票类型"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.invoice_type))])]),e("el-descriptions-item",{attrs:{label:"是否办理免税"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.duty_free))])]),e("el-descriptions-item",{attrs:{label:"创建时间"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.create_date))])]),this.menus.service_provider_name?e("el-descriptions-item",{attrs:{label:"指定供应商"}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(this.menus.service_provider_name))])]):t._e()],1),e("el-descriptions",{staticStyle:{"margin-top":"-20px"},attrs:{title:"",colon:!1,column:1}},[e("el-descriptions-item",{attrs:{label:"客户材料"}},[e("span",t._l(t.menus.files,(function(s,a){return e("span",{key:a},[e("span",{staticStyle:{cursor:"pointer",color:"#4ea9f0",margin:"0 10px"},on:{click:function(e){return t.handlePreview(s)}}},[t._v(" "+t._s(s.file_name)+" ")])])})),0)])],1),e("el-descriptions",{attrs:{title:"",colon:!1,column:1}},[e("el-descriptions-item",[e("el-button",{staticStyle:{"margin-bottom":"20px","margin-left":"-10px"},attrs:{type:"primary"},on:{click:function(e){t.poShow=!0}}},[t._v("添加PO")])],1)],1),t._l(t.UnDelPoData,(function(s,a){return e("el-descriptions",{key:a,style:0==a?"margin-top: 20px":"",attrs:{colon:!1,title:0==a?"PO信息":"",column:5}},[e("el-descriptions-item",{attrs:{label:"PO单号："}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(s.po_order_no))])]),e("el-descriptions-item",{attrs:{label:"PO金额 ￥："}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(s.po_price))])]),e("el-descriptions-item",{attrs:{label:"PO创建时间："}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(t.dateFromat(s.po_create_date)))])]),e("el-descriptions-item",{attrs:{label:"PR 单号："}},[e("span",{staticClass:"colorTxt"},[t._v(t._s(s.pr_order_no))])]),e("el-descriptions-item",[e("span",{staticStyle:{"font-size":"15px",color:"rgb(64, 158, 255)",cursor:"pointer"},on:{click:function(e){return t.handleTap("delete",s.id)}}},[t._v("删除")])])],1)}))],2),e("el-dialog",{attrs:{visible:t.poShow,width:"500px",title:"PO"},on:{"update:visible":function(e){t.poShow=e}}},[e("div",[e("el-form",{ref:"poDataForm",attrs:{model:t.poData,"label-width":"100px","label-position":"left","hide-required-asterisk":!0,"destroy-on-close":"",rules:t.rules}},[e("el-form-item",{attrs:{prop:"po_order_no"}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v("PO单"),e("span",{staticClass:"color-name"},[t._v("*")])]),e("el-input",{staticClass:"demand_300",attrs:{placeholder:"请输入PO单号",size:"small",clearable:""},model:{value:t.poData.po_order_no,callback:function(e){t.$set(t.poData,"po_order_no",e)},expression:"poData.po_order_no"}})],1),e("el-form-item",{attrs:{prop:"po_price"}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v("PO金额"),e("span",{staticClass:"color-name"},[t._v("*")])]),e("el-input",{staticClass:"demand_300",attrs:{placeholder:"请输入PO金额",size:"small",clearable:""},model:{value:t.poData.po_price,callback:function(e){t.$set(t.poData,"po_price",e)},expression:"poData.po_price"}})],1),e("el-form-item",{attrs:{prop:"po_create_date"}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v("PO创建时间"),e("span",{staticClass:"color-name"},[t._v("*")])]),e("el-date-picker",{staticClass:"demand_300",attrs:{"value-format":"yyyy-MM-dd HH:mm",placeholder:"请选择PO创建时间",size:"small",clearable:""},model:{value:t.poData.po_create_date,callback:function(e){t.$set(t.poData,"po_create_date",e)},expression:"poData.po_create_date"}})],1),e("el-form-item",{attrs:{prop:"pr_order_no"}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v("PR"),e("span",{staticClass:"color-name"},[t._v("*")])]),e("el-input",{staticClass:"demand_300",attrs:{placeholder:"请输入PR号",size:"small",clearable:""},model:{value:t.poData.pr_order_no,callback:function(e){t.$set(t.poData,"pr_order_no",e)},expression:"poData.pr_order_no"}})],1)],1)],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.poShow=!1}}},[t._v("取 消")]),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.handleTap("add")}}},[t._v("确 认")])],1)])],1)},r=[],i=(s("9b2a"),(t,e,s)=>{const a=/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/;if(a.test(e))return s();s(new Error("请输入正确的金额格式，支持两位小数"))}),o={name:"basePart_2",props:["source","isDMC","isShowCancelBtn","eventStatu","isMsd"],data(){return{downloadUrl:"",menus:{files:[]},poShow:!1,conferenceHiding:!1,cityCode:"",poData:{id:"",pr_order_no:"",event_info_id:"",po_order_no:"",po_price:"",po_create_date:"",cmd:"add",create_user:"test"},UnDelPoData:[],hasUnDelPoData:!1,poList:[],files:[],rules:{po_order_no:[{required:!0,message:"请输入PO单号",trigger:"blur"}],po_price:[{required:!0,message:"请输入PO金额",trigger:"blur"},{validator:i,trigger:"blur"}],po_create_date:[{required:!0,message:"请选择PO创建时间",trigger:"blur"}],pr_order_no:[{required:!0,message:"请输入PR",trigger:"blur"}]}}},mounted(){this.Service(),this.getPO()},methods:{getPO(){this.$api.getPoTap({eventInfoId:this.$route.query.id},"GET").then(t=>{this.poList=t,this.UnDelPoData=this.poList.filter((t,e,s)=>0==t.is_delete),this.hasUnDelPoData=!!this.UnDelPoData,console.log(this.hasUnDelPoData)})},handleTap(t,e){this.poData.event_info_id=this.$route.query.id,this.poData.cmd=t,e?(this.poData.id=e,this.$api.addPoTap(this.poData,"POST").then(t=>{this.poData.po_order_no="",this.poData.po_price="",this.poData.po_create_date="",this.poShow=!1,this.getPO()})):this.$refs.poDataForm.validate(t=>{t&&this.$api.addPoTap(this.poData,"POST").then(t=>{this.poData.po_order_no="",this.poData.po_price="",this.poData.po_create_date="",this.poShow=!1,this.getPO()})})},poEdit(t){if(this.poShow=!0,this.poData=t,this.poData.po_create_date.indexOf(" ")<0){var e=this.dateFromat(this.poData.po_create_date);this.poData.po_create_date=new Date(e)}},handlePreview(t){if(!t.file_path)return;let e=t.file_path.substring(t.file_path.lastIndexOf(".")+1),s=["pdf","jpeg","jpg","png","txt"],a=["docx","doc","xls","xlsx","xlsm","ppt","pptx"];t.file_path=t.file_path.replace(/http:/,"https:"),this.downloadUrl=t.file_path,a.includes(e)?this.downloadUrl="https://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(t.file_path):s.includes(e)?this.downloadUrl=t.file_path:this.$message.info("文件格式不支持预览，下载后查看"),setTimeout(()=>{this.$refs.a_click.click()},100)},downloadFile(t){let e=document.createElement("a");fetch(t.file_path).then(t=>t.blob()).then(s=>{e.href=URL.createObjectURL(s),console.log(e.href),e.download=t.file_name,document.body.appendChild(e),e.click()})},dateFromat(t){if("string"==typeof t){var e=t.replace("/Date(","").replace(")/","");e=new Date(1*e);var s=e.getFullYear(),a=1*e.getMonth()+1,r=e.getDate(),i=s+"-"+a+"-"+r;return i}},editBaseTap(){this.isDMC?this.$router.push({name:"DMCcreateEvent",query:{event_num:this.menus.event_num,id:this.$route.query.id,name:this.$route.query.name,eventSearchType:this.$route.query.eventSearchType,type:"edit",getBack:!0}}):1==this.menus.b2baudstatus||!this.isShowCancelBtn&&void 0!==this.isShowCancelBtn&&0!=this.eventStatu?this.$message.info("当前信息不允许编辑"):this.$router.push({name:"CreateEvent",query:{event_num:this.menus.event_num,id:this.$route.query.id,name:this.$route.query.name,eventSearchType:this.$route.query.eventSearchType,type:"edit",getBack:!0}})},Service(){this.$api.getData({MeetingID:this.$route.query.id},"POST").then(t=>{var e;this.menus=t,this.menus.files=null!==(e=this.menus.files)&&void 0!==e?e:[],this.cityCode=this.menus.event_city_code,localStorage.setItem("event_city_code",this.cityCode)})}}},n=o,l=(s("09f8"),s("0b56")),c=Object(l["a"])(n,a,r,!1,null,"14a40e60",null);e["a"]=c.exports},"956c":function(t,e,s){var a=s("f44b"),r=String;t.exports=function(t){if("Symbol"===a(t))throw TypeError("Cannot convert a Symbol value to a string");return r(t)}},"9b2a":function(t,e,s){var a=s("ebdc"),r=s("c8a2"),i=s("672b"),o=s("b438"),n="WebAssembly",l=r[n],c=7!==Error("e",{cause:7}).cause,p=function(t,e){var s={};s[t]=o(t,e,c),a({global:!0,constructor:!0,arity:1,forced:c},s)},u=function(t,e){if(l&&l[t]){var s={};s[t]=o(n+"."+t,e,c),a({target:n,stat:!0,constructor:!0,arity:1,forced:c},s)}};p("Error",(function(t){return function(e){return i(t,this,arguments)}})),p("EvalError",(function(t){return function(e){return i(t,this,arguments)}})),p("RangeError",(function(t){return function(e){return i(t,this,arguments)}})),p("ReferenceError",(function(t){return function(e){return i(t,this,arguments)}})),p("SyntaxError",(function(t){return function(e){return i(t,this,arguments)}})),p("TypeError",(function(t){return function(e){return i(t,this,arguments)}})),p("URIError",(function(t){return function(e){return i(t,this,arguments)}})),u("CompileError",(function(t){return function(e){return i(t,this,arguments)}})),u("LinkError",(function(t){return function(e){return i(t,this,arguments)}})),u("RuntimeError",(function(t){return function(e){return i(t,this,arguments)}}))},a3d4:function(t,e,s){var a=s("5557").f;t.exports=function(t,e,s){s in t||a(t,s,{configurable:!0,get:function(){return e[s]},set:function(t){e[s]=t}})}},b438:function(t,e,s){"use strict";var a=s("3726"),r=s("e72e"),i=s("9c10"),o=s("70b8"),n=s("78a8"),l=s("6ac1"),c=s("a3d4"),p=s("3471"),u=s("dbbd"),d=s("76b8"),_=s("c436"),f=s("dc0f"),m=s("8d06"),h=s("3f11");t.exports=function(t,e,s,v){var b="stackTraceLimit",g=v?2:1,y=t.split("."),x=y[y.length-1],C=a.apply(null,y);if(C){var w=C.prototype;if(!h&&r(w,"cause")&&delete w.cause,!s)return C;var S=a("Error"),T=e((function(t,e){var s=u(v?e:t,void 0),a=v?new C(t):new C;return void 0!==s&&i(a,"message",s),f&&i(a,"stack",_(a.stack,2)),this&&o(w,this)&&p(a,this,T),arguments.length>g&&d(a,arguments[g]),a}));if(T.prototype=w,"Error"!==x?n?n(T,S):l(T,S,{name:!0}):m&&b in C&&(c(T,C,b),c(T,C,"prepareStackTrace")),l(T,C),!h)try{w.name!==x&&i(w,"name",x),w.constructor=T}catch(D){}return T}}},c3c0:function(t,e,s){var a=s("ecc1"),r=a("toStringTag"),i={};i[r]="z",t.exports="[object z]"===String(i)},c436:function(t,e,s){var a=s("5d05"),r=Error,i=a("".replace),o=function(t){return String(r(t).stack)}("zxcasd"),n=/\n\s*at [^:]*:[^\n]*/,l=n.test(o);t.exports=function(t,e){if(l&&"string"==typeof t&&!r.prepareStackTrace)while(e--)t=i(t,n,"");return t}},dbbd:function(t,e,s){var a=s("956c");t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:a(t)}},dc0f:function(t,e,s){var a=s("071a"),r=s("4d51");t.exports=!a((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",r(1,7)),7!==t.stack)}))},dff6:function(t,e,s){},f44b:function(t,e,s){var a=s("c3c0"),r=s("17e9"),i=s("7ea6"),o=s("ecc1"),n=o("toStringTag"),l=Object,c="Arguments"==i(function(){return arguments}()),p=function(t,e){try{return t[e]}catch(s){}};t.exports=a?i:function(t){var e,s,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(s=p(e=l(t),n))?s:c?i(e):"Object"==(a=i(e))&&r(e.callee)?"Arguments":a}}}]);