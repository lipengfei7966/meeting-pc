(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b6d9f4d4"],{"070e":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"boss"},[e("ul",[e("li",{staticStyle:{color:"#0084e9",cursor:"pointer"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("我的审批")]),e("li",{staticStyle:{color:"#7c7f82"}},[t._v(">")]),e("li",{staticStyle:{color:"#7c7f82"}},[t._v("中标审批（"+t._s(t.$route.query.event_name)+"）")])])]),t._m(0),e("base-part",{attrs:{source:"approve"}}),t._m(1),e("div",{staticClass:"numbers"},[e("el-table",{ref:"multipleTable",attrs:{data:t.num}},[e("el-table-column",{attrs:{label:"询价单号",prop:"inquiry_sheet_code",align:"center"}}),e("el-table-column",{attrs:{prop:"company_name",label:"旅行社名称 Travel Agency Name","show-overflow-tooltip":"",align:"center"}}),e("el-table-column",{staticStyle:{color:"#f91"},attrs:{prop:"total_price",label:"报价 Quotation","class-name":"offerPrice",align:"center"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("span",{staticStyle:{color:"#f91","font-weight":"bold"}},[t._v(" ￥ "+t._s(s.row.total_price))])]}}])}),e("el-table-column",{attrs:{label:"操作 Actions",align:"center"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{staticClass:"checkOffer",attrs:{type:"text",size:"small"},on:{click:function(e){return t.checkOffer(s.row.quoted_price_id)}}},[t._v(" 查看报价 ")])]}}])})],1)],1),t._m(2),e("div",{staticClass:"opinion"},[e("p",[t._v("审批意见:")]),e("div",{staticClass:"right"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.ApprovalOpinion,expression:"ApprovalOpinion"}],attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.ApprovalOpinion},on:{input:function(e){e.target.composing||(t.ApprovalOpinion=e.target.value)}}})]),e("div",{staticClass:"underside"},[e("el-button",{staticStyle:{"margin-left":"20px",width:"160px","margin-top":"30px"},attrs:{type:"primary",plain:""}},[t._v("邀请其他人审批")]),e("el-button",{staticStyle:{"margin-left":"70px",width:"160px","margin-top":"30px"},attrs:{type:"danger"},on:{click:function(e){return t.max("不通过")}}},[t._v("审批不通过")]),e("el-dialog",{attrs:{title:"确认审批结果",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("span",[t._v(" 审批意见一旦提交则无法修改，是否确认当前审批 "),e("span",{staticClass:"disapprove",class:["通过"===t.passMessage?"pass":""]},[t._v(t._s(t.passMessage))])]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.sendApprove}},[t._v("确 定")])],1)]),e("el-button",{staticStyle:{"margin-left":"70px",width:"160px","margin-top":"30px"},attrs:{type:"success"},on:{click:function(e){return t.max("通过")}}},[t._v("审批通过")])],1)]),t._m(3),e("div",{staticClass:"Steps"},[e("el-table",{ref:"multipleTable",attrs:{data:t.arr}},[e("el-table-column",{attrs:{label:"审批步骤",prop:"approve_name",align:"center"}}),e("el-table-column",{attrs:{prop:"fullname",label:"审批人","show-overflow-tooltip":"",align:"center"}}),e("el-table-column",{attrs:{label:"审批状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("button",{class:["approveStatusBtn","待审核"==s.row.type?"":"审核通过"==s.row.type?"approvePassBtn":"approveNotPassBtn"]},[t._v(t._s(s.row.type))])]}}])}),e("el-table-column",{attrs:{prop:"remarks",label:"说明","show-overflow-tooltip":"",align:"center"}}),e("el-table-column",{attrs:{prop:"approve_data",label:"操作时间","show-overflow-tooltip":"",align:"center"}})],1)],1)],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"blue_tit"},[e("img",{attrs:{src:s("ed89"),alt:""}}),e("p",[t._v("中标报价审批")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"tour"},[e("p",[t._v("旅行社报价")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"interior"},[e("p",[t._v("内保审批")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"record"},[e("p",[t._v("审批记录")])])}],o=s("7dc4"),l={data(){return{menus:[],arr:[],num:[],dialogVisible:!1,dialogVisibles:!1,passMessage:"",selectQuery:{},ApprovalOpinion:""}},components:{basePart:o["a"]},mounted(){this.selectQuery=this.$route.query,this.getDetail()},methods:{getDetail(){this.$api.getEvent({ApproveID:this.selectQuery.ApproveID},"POST").then(t=>{this.arr=t.approve,this.num=t.inquirySheet,console.log(t)})},max(t){this.dialogVisible=!0,this.passMessage=t},checkOffer(t){this.$router.push({path:"/offer",query:{foreign_key_id:t,id:this.$route.query.id,type:this.$route.query.type}})},sendApprove(){const t="不通过"===this.passMessage?"1":"0";this.$api.getsave({Parameter:JSON.stringify({status:t,id:this.selectQuery.ApproveID,remarks:this.ApprovalOpinion,message:"",objection:""})},"POST").then(t=>{t&&this.$message({message:"操作成功",type:"success"}),this.dialogVisible=!1,console.log(t),this.$router.push({path:"/approve"}),this.getDetail()})}}},r=l,n=(s("49a2"),s("0b56")),p=Object(n["a"])(r,a,i,!1,null,null,null);e["default"]=p.exports},"1ce9":function(t,e,s){},"49a2":function(t,e,s){"use strict";s("1ce9")},ed89:function(t,e,s){t.exports=s.p+"img/锁定.f16270db.png"}}]);