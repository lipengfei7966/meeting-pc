(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e005374"],{"5dc8":function(e,t,n){},"909e":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"event_detail box"},[t("div",{staticClass:"event_process mar_b20 pad_tb10"},[t("div",{staticClass:"event_process_title flex_row justify_between align_center pad_lr20"},[t("div",{staticClass:"flex_row align_center"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$router.replace("/EventList")}}},[e._v("会议列表")]),t("span",{staticClass:"mar_lr10",staticStyle:{color:"#7c7f82"}},[e._v(">")]),t("span",{staticStyle:{color:"#7c7f82"}},[e._v("会议详情（"+e._s(e.eventName)+"）")])],1)])]),t("div",{staticStyle:{margin:"10px 0"}},[t("div",{staticClass:"flex_row justify_between",staticStyle:{"font-size":"18px"}},[t("p",[e._v(e._s(e.eventName))]),t("el-dropdown",{on:{command:e.handleCommand}},[t("span",{staticClass:"el-dropdown-link",staticStyle:{"font-size":"16px",color:"#2896eb","font-weight":"600",cursor:"pointer"}},[e._v(" 更多"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"1"}},[e._v("高级设置")]),e.isShowCancelBtn?t("el-dropdown-item",{attrs:{command:"2"}},[e._v("取消会议")]):e._e()],1)],1)],1),t("el-steps",{staticStyle:{"margin-top":"20px"},attrs:{active:e.eventStatu,"finish-status":"finish","process-status":"process","align-center":""}},[t("el-step",{attrs:{title:"创建会议",description:"已完成"}}),t("el-step",{class:1==e.eventStatu?"processing":"",attrs:{title:"确定采购需求",description:e.eventStatu>=2?"已完成":"进行中"}}),t("el-step",{class:2==e.eventStatu?"processing":"",attrs:{title:"找供应商询价、议价",description:e.eventStatu>=3?"已完成":2==e.eventStatu?"进行中":"未开始"}}),t("el-step",{class:3==e.eventStatu?"processing":"",attrs:{title:"确认中标，生成订单",description:e.eventStatu>=4?"已完成":3==e.eventStatu?"进行中":"未开始"}}),t("el-step",{class:4==e.eventStatu?"processing":"",attrs:{title:"会后结算审批",description:e.eventStatu>=5?"已完成":4==e.eventStatu?"进行中":"未开始"}}),t("el-step",{class:5==e.eventStatu?"processing":"",attrs:{title:"会议完成",description:6==e.eventStatu?"已完成":5==e.eventStatu?"进行中":"未开始"}})],1)],1),t("div",{staticClass:"step_part"},[t("stepOne",{ref:"baseInfo",attrs:{eventId:e.eventId,eventName:e.eventName,isDMC:!1,isShowCancelBtn:e.isShowCancelBtn}}),t("stepTwo",{ref:"demandInfo",attrs:{eventId:e.eventId,eventName:e.eventName,isDMC:!1,isShowCancelBtn:e.isShowCancelBtn}}),t("stepThree",{attrs:{eventStatu:e.eventStatu}}),t("stepFour")],1),t("el-dialog",{attrs:{visible:e.cancelEventDialog,width:"30%",title:"取消会议",align:"center"},on:{"update:visible":function(t){e.cancelEventDialog=t}}},[t("div",{staticStyle:{width:"100%","text-align":"left","padding-bottom":"8px"}},[e._v(" 取消会议，将同时取消询价单。您确认取消会议吗？ ")]),t("el-input",{attrs:{type:"textarea",size:"small",rows:6,placeholder:"请简要说明取消原因"},model:{value:e.cancelReason,callback:function(t){e.cancelReason=t},expression:"cancelReason"}}),t("span",{staticClass:"dialog-footer flex_row justify_center",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"info",size:"small"},on:{click:function(t){e.cancelEventDialog=!1}}},[e._v("暂不取消")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.cancelEventTap}},[e._v("确认取消")])],1)],1)],1)},a=[],i=(n("cf45"),n("f2fb")),o=n("08df"),l=n("fc4e"),c=n("7b47"),r={name:"eventDetail",data(){return{eventId:"",eventName:"",baseInfo:"",cancelEventDialog:!1,eventStatu:0,isDraft:"",cancelReason:"",isShowCancelBtn:!1}},components:{stepOne:i["a"],stepTwo:o["a"],stepThree:l["a"],stepFour:c["a"]},created(){console.log(this.$route.query.id),this.eventId=this.$route.query.id},mounted(){document.body.scrollTop=document.documentElement.scrollTop=0,this.eventId=this.$route.query.id,this.eventName=this.$route.query.name,this.getDetail(),this.cancelShow(),console.log(this.$route.query.id)},methods:{cancelShow(){this.$api.CancelShow({ID:this.$route.query.id,Type:1},"POST").then(e=>{this.isShowCancelBtn=e})},getDetail(){this.$api.conferenceInformation({MeetingID:this.eventId},"POST").then(e=>{this.$refs.baseInfo.baseInfo=e,this.isDraft=e.event_status,this.eventId=e.id,this.eventName=e.event_name}),this.$api.MeetingStatus({MeetingID:this.eventId},"POST").then(e=>{this.eventStatu=Number(e),console.log(e)}),this.$api.getPurchase({MeetingID:this.eventId},"POST").then(e=>{this.$refs.demandInfo.demandInfo=e}),this.$api.getServiceProvider({MeetingID:this.eventId},"POST").then(e=>{console.log(e),this.$refs.demandInfo.inquiryLIst=e}),this.$api.GetCommerce({},"POST").then(e=>{this.$refs.demandInfo.commerce=e})},cancelEventTap(){this.cancelReason?this.$api.cancelEvent({MeetingID:this.$route.query.id,Content:this.cancelReason},"POST").then(e=>{e&&(this.cancelEventDialog=!1,this.$message.success("会议取消成功！"),setTimeout(()=>{this.$router.replace({path:"/EventList"})},100))}):this.$message.warning("请简要说明取消原因")},handleCommand(e){1==e?this.$router.push({path:"/advancedsetting",query:{id:this.eventId,eventName:this.eventName}}):2==e&&(this.cancelEventDialog=!0)}}},d=r,p=(n("f09e"),n("0b56")),v=Object(p["a"])(d,s,a,!1,null,null,null);t["default"]=v.exports},f09e:function(e,t,n){"use strict";n("5dc8")}}]);