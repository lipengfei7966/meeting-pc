(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b6c993a2"],{"1e0d":function(e,t,i){},a118:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"coustom_event_detail"},[t("h3",{staticClass:"title pad_lr10"},[e._v("会议详情")]),t("el-form",{staticClass:"demo-form-inline form_card",attrs:{inline:!0,"label-position":"left",model:e.item}},[t("el-form-item",{attrs:{label:"会议城市"}},[e.readonly?t("el-input",{attrs:{placeholder:"会议城市",readonly:e.readonly},model:{value:e.item.cityname,callback:function(t){e.$set(e.item,"cityname",t)},expression:"item.cityname"}}):e._e(),e.readonly?e._e():t("el-select",{attrs:{placeholder:"请选择",filterable:!0},model:{value:e.cityName,callback:function(t){e.cityName=t},expression:"cityName"}},e._l(e.cityOptionList,(function(e){return t("el-option",{key:e.code,attrs:{label:e.value,value:e.code}})})),1)],1),t("el-form-item",{attrs:{label:"公司名称"}},[t("el-input",{attrs:{placeholder:"公司名称",readonly:""},model:{value:e.item.customername,callback:function(t){e.$set(e.item,"customername",t)},expression:"item.customername"}})],1),t("el-form-item",{staticClass:"mar_r_n",attrs:{label:"部门"}},[t("el-input",{attrs:{placeholder:"部门",readonly:""},model:{value:e.item.deptname,callback:function(t){e.$set(e.item,"deptname",t)},expression:"item.deptname"}})],1),t("el-form-item",{attrs:{label:"客户联系人"}},[t("el-input",{attrs:{placeholder:"客户联系人",readonly:""},model:{value:e.item.contactsname,callback:function(t){e.$set(e.item,"contactsname",t)},expression:"item.contactsname"}})],1),t("el-form-item",{attrs:{label:"电话"}},[t("el-input",{attrs:{placeholder:"电话",readonly:""},model:{value:e.item.phone,callback:function(t){e.$set(e.item,"phone",t)},expression:"item.phone"}})],1),t("el-form-item",{staticClass:"mar_r_n",attrs:{label:"邮箱"}},[t("el-input",{attrs:{placeholder:"邮箱",readonly:""},model:{value:e.item.email,callback:function(t){e.$set(e.item,"email",t)},expression:"item.email"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.readonly,expression:"readonly"}],staticClass:"person",attrs:{label:"业务负责人"}},[t("el-input",{attrs:{placeholder:"负责人姓名",readonly:""},model:{value:e.item.businessname,callback:function(t){e.$set(e.item,"businessname",t)},expression:"item.businessname"}}),t("el-input",{attrs:{placeholder:"负责人电话",readonly:""},model:{value:e.item.businessphone,callback:function(t){e.$set(e.item,"businessphone",t)},expression:"item.businessphone"}}),t("el-input",{attrs:{placeholder:"负责人邮箱",readonly:""},model:{value:e.item.businessemail,callback:function(t){e.$set(e.item,"businessemail",t)},expression:"item.businessemail"}})],1),t("el-form-item",{attrs:{label:"参会人数"}},[t("el-input",{attrs:{placeholder:"参会人数",readonly:e.readonly},model:{value:e.item.attendeenum,callback:function(t){e.$set(e.item,"attendeenum",t)},expression:"item.attendeenum"}})],1),t("el-form-item",{attrs:{label:"预算"}},[t("el-input",{attrs:{placeholder:"预算",readonly:e.readonly},model:{value:e.item.budget,callback:function(t){e.$set(e.item,"budget",t)},expression:"item.budget"}})],1),t("el-form-item",{staticClass:"time_form",attrs:{label:"会议时间"}},[t("el-date-picker",{attrs:{"default-value":!1,format:"yyyy-MM-dd",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",readonly:e.readonly},on:{change:e.changeDate},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),t("div",{staticClass:"demand_items"},[t("h3",{staticClass:"title"},[e._v("需求项目")]),t("el-checkbox-group",{staticClass:"checkbox_card",on:{change:e.checkboxs},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[t("el-checkbox",{attrs:{label:"1",name:"1",disabled:e.readonly}},[e._v("客房")]),t("el-checkbox",{attrs:{label:"2",name:"2",disabled:e.readonly}},[e._v("会场")]),t("el-checkbox",{attrs:{label:"3",name:"3",disabled:e.readonly}},[e._v("酒店内餐饮")]),t("el-checkbox",{attrs:{label:"4",name:"4",disabled:e.readonly}},[e._v("酒店外餐饮")]),t("el-checkbox",{attrs:{label:"5",name:"5",disabled:e.readonly}},[e._v("大交通")]),t("el-checkbox",{attrs:{label:"6",name:"6",disabled:e.readonly}},[e._v("地面交通")])],1)],1),t("div",{staticClass:"requirement_remarks"},[t("h3",{staticClass:"title"},[e._v("需求备注")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.item.remark,expression:"item.remark"}],attrs:{name:"",id:"",cols:"30",rows:"10",readonly:e.readonly},domProps:{value:e.item.remark},on:{input:function(t){t.target.composing||e.$set(e.item,"remark",t.target.value)}}})]),t("div",{staticClass:"button_card"},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.readonly,expression:"!readonly"}],attrs:{type:"primary"},on:{click:e.saveInformation}},[e._v("保存会议信息")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.readonly,expression:"!readonly"}],attrs:{type:"primary"},on:{click:function(t){e.deldialogVisible=!0}}},[e._v("取消会议")]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.readonly,expression:"!readonly"}],attrs:{type:"primary"},on:{click:e.openDelegation}},[e._v("派团")]),t("el-button",{attrs:{type:"primary"},on:{click:e.gobackPage}},[e._v("返回")])],1),t("el-dialog",{attrs:{title:"业务员信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{attrs:{model:e.form}},[t("el-form-item",[t("el-select",{attrs:{value:e.form.username,placeholder:"请选择"},on:{change:e.checkUser}},e._l(e.selectList,(function(e,i){return t("el-option",{key:i,attrs:{value:e.username}})})),1)],1),t("el-form-item",[t("el-input",{attrs:{autocomplete:"off",readonly:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),t("el-form-item",[t("el-input",{attrs:{autocomplete:"off",readonly:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"取消会议提示",visible:e.deldialogVisible,width:"30%"},on:{"update:visible":function(t){e.deldialogVisible=t}}},[t("span",[e._v("确认要取消当前会议吗？")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.deldialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.cancelMeeting}},[e._v("确 定")])],1)])],1)},s=[],o={data(){return{dialogFormVisible:!1,deldialogVisible:!1,readonly:!1,form:{},selectList:[],cityOptionList:[],cityName:"",item:{},formInline:{user:"",region:""},checkList:[],date:[]}},mounted(){console.log(this.$route.query,"数据"),1==this.$route.query.tab&&(this.readonly=!0),this.geteventdetails(this.$route.query),this.getCityList()},methods:{getCityList(){this.$api.GetCitys({},"GET").then(e=>{console.log(e),this.cityOptionList=e})},gobackPage(){this.$router.push({path:"/coustomEventList",query:{tab:this.$route.query.tab}})},submit(){var e={eventid:this.item.id,id:this.item.id,type:"2",citycode:this.item.citycode,startdate:this.item.startdate,enddate:this.item.enddate,attendeenum:this.item.attendeenum,budget:this.item.budget,items:this.checkList.join(","),remark:this.item.remark,tenantcode:this.item.tenantcode,code:this.item.code,username:this.form.userid,optcustomerid:this.item.customerid,customername:this.item.customername,customercontactsid:this.$route.query.customercontactsid,customercontact:this.$route.query.contactmail,customer:this.form.email,status:"1"};this.$api.Coustomereventdetailsupdate(e,"POST").then(t=>{t?(this.geteventdetails({code:e.code,tenantcode:e.tenantcode}),this.dialogFormVisible=!1,this.$alert("派团成功",{confirmButtonText:"确定",callback:e=>{this.$router.push({path:"/coustomEventList",query:{tab:this.$route.query.tab}})}})):this.$alert("已派团，不能进行派团操作",{confirmButtonText:"确定",callback:e=>{this.$router.push({path:"/coustomEventList",query:{tab:this.$route.query.tab}})}})})},checkUser(e){console.log(e,44);var t=this.selectList.findIndex(t=>e===t.username);this.form=this.selectList[t],console.log(this.form,this.selectList)},changeDate(e){console.log(e),this.date=e,this.item.startdate=this.date[0].toLocaleDateString(),this.item.enddate=this.date[1].toLocaleDateString(),console.log(this.item.startdate,this.item.enddate)},checkboxs(e){console.log(e),this.checkList=e},openDelegation(){this.$api.sentdelegation({customerid:this.item.customerid},"POST").then(e=>{e&&(this.dialogFormVisible=!0,this.selectList=e)})},cancelMeeting(){var e={id:this.item.id,type:"1",citycode:this.item.citycode,startdate:this.item.startdate,enddate:this.item.enddate,attendeenum:this.item.attendeenum,budget:this.item.budget,items:this.checkList.join(","),remark:this.item.remark,tenantcode:this.item.tenantcode,code:this.item.code,status:"2"};this.$api.Coustomereventdetailsupdate(e,"POST").then(t=>{t&&(this.geteventdetails({code:e.code,tenantcode:e.tenantcode}),this.deldialogVisible=!1,this.$router.push({path:"/coustomEventList"}))})},saveInformation(){var e={id:this.item.id,type:"0",citycode:this.cityName,startdate:this.item.startdate,enddate:this.item.enddate,attendeenum:this.item.attendeenum,budget:this.item.budget,items:this.checkList.join(","),remark:this.item.remark,tenantcode:this.item.tenantcode,code:this.item.code,status:"0"};this.$api.Coustomereventdetailsupdate(e,"POST").then(t=>{console.log(t),t&&(this.geteventdetails({code:e.code,tenantcode:e.tenantcode}),this.$router.push({path:"/coustomEventList"}))})},onSubmit(){console.log("submit!")},geteventdetails(e){this.$api.getCoustomereventdetails(e,"POST").then(e=>{console.log(e),this.item=e||{},e.items?this.checkList=e.items.split(","):this.checkList=[],this.date=[this.item.startdate,this.item.enddate],this.cityName=e.cityname,1==e.type&&(this.readonly=!0)})}}},l=o,n=(i("e077"),i("0b56")),r=Object(n["a"])(l,a,s,!1,null,null,null);t["default"]=r.exports},e077:function(e,t,i){"use strict";i("1e0d")}}]);