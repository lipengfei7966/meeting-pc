(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd169a34"],{"0e5c":function(t,e,a){"use strict";var i=a("5829"),s=a("8642");e["a"]=function(t){return new Promise((function(e,a){let o=[],n={},l=t.length;console.log(t.length,t);const r=()=>0==t.length?e(o):String(t[0].file).IsPicture()?(t.shift(),r()):void i["a"].upload({file:t[0].file},"POST",{type:"form"}).then(a=>{console.log(a);var i=!0;if(void 0!=a&&""==a.FilePath&&""==a.OriginalFileName&&(console.log("重复了"),a=void 0,i=!1),void 0==a&&i){s["default"].prototype.$alert("网络不稳定, 文件上传失败, 请重新上传","提示",{confirmButtonText:"确定",callback:t=>{s["default"].prototype.$message({message:"上传失败的文件已标记",type:"warning"})}});let a=l-t.length;return e({tag:a,uploadImageList:o})}n=a,o.push(n),t.shift(),r()});r()}))}},"2ea2":function(t,e,a){"use strict";a("5e8e")},"3a14":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"Qualification"},[e("div",{staticClass:"title"},[t._v("资质管理")]),e("div",{staticClass:"content"},[e("div",{staticClass:"tools"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addQualificationStatus=!0}}},[t._v("添加资质")])],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData.List,stripe:"",height:"100%"}},[e("el-table-column",{attrs:{type:"index",width:"50"}}),e("el-table-column",{attrs:{prop:"name",label:"资质名称"}}),e("el-table-column",{attrs:{prop:"statusname",label:"状态"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticClass:"tools_btn",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.update(a.$index,a.row)}}},[t._v("编辑")]),"0018-1"===a.row.status?e("el-popconfirm",{attrs:{"confirm-button-text":"冻结","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定要冻结此资质吗？"},on:{confirm:function(e){return t.offShelf(a.$index,a.row)}}},[e("el-button",{staticClass:"tools_btn",attrs:{slot:"reference",size:"mini",type:"text"},slot:"reference"},[t._v("冻结")])],1):e("el-popconfirm",{attrs:{"confirm-button-text":"激活","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定要激活此资质吗？"},on:{confirm:function(e){return t.onShelf(a.$index,a.row)}}},[e("el-button",{staticClass:"tools_btn",attrs:{slot:"reference",size:"mini",type:"text"},slot:"reference"},[t._v("激活")])],1),e("el-popconfirm",{attrs:{"confirm-button-text":"删除","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定要删除此资质吗？"},on:{confirm:function(e){return t.onDelete(a.$index,a.row)}}},[e("el-button",{staticClass:"tools_btn",attrs:{slot:"reference",size:"mini",type:"text"},slot:"reference"},[t._v("删除")])],1)]}}])})],1),e("el-pagination",{staticClass:"pages",attrs:{background:"",layout:"prev, pager, next",total:t.tableData.Counts,"current-page":t.tableData.CurrentPage},on:{"current-change":t.currentChange}})],1),e("el-dialog",{attrs:{title:"添加新案例",visible:t.addQualificationStatus,"before-close":t=>{this.itemData=null,t()},width:"500px"},on:{"update:visible":function(e){t.addQualificationStatus=e}}},[t.addQualificationStatus?e("qualificationAdded",{attrs:{"item-data":t.itemData,"names-data":t.namesData},on:{onColse:t.save}}):t._e()],1)],1)},s=[],o=a("9853"),n={name:"Qualification",components:{qualificationAdded:o["a"]},data(){return{addQualificationStatus:!1,itemData:null,namesData:[],tableData:{CurrentPage:1,List:[]}}},methods:{update(t,e){this.itemData=e,this.addQualificationStatus=!0},onShelf(t,e){this.$api.qualificationactivation({id:e.id},"POST").then(t=>{this.$message({message:"激活成功！",type:"success"}),this.GetList()})},offShelf(t,e){this.$api.qualificationfrozen({id:e.id},"POST").then(t=>{this.$message({message:"冻结成功！",type:"success"}),this.GetList()})},onDelete(t,e){this.$api.qualificationdelete({id:e.id},"POST").then(t=>{this.$message({message:"删除成功！",type:"success"}),this.GetList()})},GetList(){this.$api.qualificationlist({Page:this.tableData.CurrentPage,Rows:10},"POST").then(t=>{this.tableData=t})},GetNameList(){this.$api.qualificationnamelist({},"POST").then(t=>{this.namesData=t})},currentChange(t){this.tableData.CurrentPage=t,this.GetList()},save(t){this.$api.qualificationsave(t,"POST").then(e=>{this.$message({message:t.id?"修改成功！":"添加成功！",type:"success"}),this.addQualificationStatus=!1,t.id||(this.tableData.CurrentPage=1),this.GetList()})}},mounted(){this.GetList(),this.GetNameList()}},l=n,r=(a("a487"),a("0b56")),c=Object(r["a"])(l,i,s,!1,null,"11df8146",null);e["default"]=c.exports},"5e8e":function(t,e,a){},9853:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"qualification-added"},[e("el-form",{ref:"ruleForm",attrs:{"label-width":"110px",model:t.FormData,rules:t.rules}},[e("el-form-item",{attrs:{label:"资质名称",prop:"type"}},[e("el-radio-group",{model:{value:t.FormData.type,callback:function(e){t.$set(t.FormData,"type",e)},expression:"FormData.type"}},t._l(t.namesData,(function(a){return e("el-radio",{key:a.name,attrs:{label:a.code}},[t._v(t._s(a.name))])})),1)],1),e("el-form-item",{attrs:{label:"资质名称",prop:"name"}},[e("el-input",{attrs:{placeholder:"资质名称"},model:{value:t.FormData.name,callback:function(e){t.$set(t.FormData,"name",e)},expression:"FormData.name"}})],1),e("el-form-item",{attrs:{label:"上传资质图片",prop:"picture"}},[e("el-upload",{ref:"upload",attrs:{action:"","on-change":t.handleChangeAttach,"on-remove":t.handleRemoveAttach,"auto-upload":!1,"file-list":this.waitUpload,multiple:!1,accept:".jpg,.jpeg,.png"}},[e("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("从电脑选择文件")]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件,大小不超过2M ")]),e("div",{staticClass:"yl"},[t.FormData.picture?e("img",{attrs:{src:t.FormData.picture,alt:""}}):t._e()])],1)],1),e("div",{staticClass:"btnGroup"},[e("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v(t._s(null==t.itemData?"立即添加":"确认修改"))])],1)],1)],1)},s=[],o=a("0e5c"),n={props:{itemData:null|JSON,namesData:null|JSON},data(){return{FormData:{name:"",picture:""},waitUpload:[],rules:{name:[{required:!0,message:"请输入资质名称",trigger:"change"}]}}},mounted(){null!=this.itemData&&(this.FormData=JSON.parse(JSON.stringify(this.itemData)),this.FormData.picture=this.FormData.picture.split(","))},methods:{add(){this.$refs["ruleForm"].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t=[];this.waitUpload.forEach((e,a)=>{const i={key:a,file:e.raw};t.push(i)}),Object(o["a"])(t).then(t=>{console.log(t);let e=[];t.forEach(t=>{e.push(t.FilePath)}),this.FormData.picture=e.toString(),this.$emit("onColse",this.FormData)})}})},handleChangeAttach(t,e){const a="image/jpeg"===t.raw.type,i="image/png"===t.raw.type,s=t.size/1024/1024<2;if(console.log(a),console.log(i),console.log(s),!a&&!i||!s)return a&&i?this.$message.error("上传图片大小不能超过 2MB!"):this.$message.error("上传图片只能是 JPG 或者 PNG 格式!"),void this.$refs.upload.handleRemove(t);this.waitUpload=e},handleRemoveAttach(t,e){this.waitUpload=e}}},l=n,r=(a("2ea2"),a("0b56")),c=Object(r["a"])(l,i,s,!1,null,"7057475c",null);e["a"]=c.exports},a487:function(t,e,a){"use strict";a("aa6f")},aa6f:function(t,e,a){}}]);