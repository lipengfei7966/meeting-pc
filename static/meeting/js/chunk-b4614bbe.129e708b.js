(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b4614bbe"],{"0e5c":function(e,t,s){"use strict";var a=s("5829"),i=s("8642");t["a"]=function(e){return new Promise((function(t,s){let o=[],n={},l=e.length;console.log(e.length,e);const r=()=>0==e.length?t(o):String(e[0].file).IsPicture()?(e.shift(),r()):void a["a"].upload({file:e[0].file},"POST",{type:"form"}).then(s=>{console.log(s);var a=!0;if(void 0!=s&&""==s.FilePath&&""==s.OriginalFileName&&(console.log("重复了"),s=void 0,a=!1),void 0==s&&a){i["default"].prototype.$alert("网络不稳定, 文件上传失败, 请重新上传","提示",{confirmButtonText:"确定",callback:e=>{i["default"].prototype.$message({message:"上传失败的文件已标记",type:"warning"})}});let s=l-e.length;return t({tag:s,uploadImageList:o})}n=s,o.push(n),e.shift(),r()});r()}))}},"664b":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.info?t("div",{staticClass:"ServiceProviderProcurement"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("联系方式")]),e._v(" Contact Information ")]),t("el-row",{attrs:{align:"middle"}},[t("el-col",{attrs:{span:8}},[t("div",{staticClass:"grid-content bg-purple"},[e._v("公司："+e._s(e.compositeName))])]),t("el-col",{attrs:{span:2}},[t("div",{staticClass:"grid-content grid-content-border bg-purple"},[e._v(" 联系人："+e._s(e.purchase_contracts)+" ")])]),t("el-col",{attrs:{offset:1,span:4}},[t("div",{staticClass:"grid-content bg-purple"},[e._v("手机："+e._s(e.purchase_phone))])]),t("el-col",{attrs:{span:3}},[t("div",{staticClass:"grid-content bg-purple"},[e._v("邮箱："+e._s(e.purchase_email))])]),t("el-col",{attrs:{span:1,push:2}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.editContent()}}},[e._v("编辑")]),t("el-dialog",{attrs:{title:"修改当前询价单联系方式(不更新用户信息)",visible:e.isOpen,width:"30%"},on:{"update:visible":function(t){e.isOpen=t}}},[t("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px","label-position":"left"}},[t("el-form-item",{attrs:{label:"对外显示公司名",prop:"companyName"}},[t("el-checkbox-group",{on:{change:e.change},model:{value:e.ruleForm.companyName,callback:function(t){e.$set(e.ruleForm,"companyName",t)},expression:"ruleForm.companyName"}},[t("el-checkbox",{attrs:{label:e.purchase_department}}),t("el-checkbox",{attrs:{label:e.company_name}})],1)],1),t("el-form-item",{attrs:{label:"联系人",prop:"purchase_contracts"}},[t("el-input",{model:{value:e.ruleForm.purchase_contracts,callback:function(t){e.$set(e.ruleForm,"purchase_contracts",t)},expression:"ruleForm.purchase_contracts"}})],1),t("el-form-item",{attrs:{label:"手机",prop:"purchase_phone"}},[t("el-input",{model:{value:e.ruleForm.purchase_phone,callback:function(t){e.$set(e.ruleForm,"purchase_phone",t)},expression:"ruleForm.purchase_phone"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"purchase_email"}},[t("el-input",{model:{value:e.ruleForm.purchase_email,callback:function(t){e.$set(e.ruleForm,"purchase_email",t)},expression:"ruleForm.purchase_email"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.isOpen=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editSubmit()}}},[e._v("修 改")])],1)],1)],1)],1),t("el-row",[t("el-col",[t("span",[e._v("发送酒店/供应商报价、结算邮件是否抄送询价人：")]),t("el-radio-group",{model:{value:e.info.isCC,callback:function(t){e.$set(e.info,"isCC",t)},expression:"info.isCC"}},[t("el-radio",{attrs:{label:!0}},[e._v("抄送询价人")]),t("el-radio",{attrs:{label:!1}},[e._v("不抄送询价人")])],1)],1)],1)],1),2==this.type||3==this.type?t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("系统将会发询价单给以下会议服务商")]),e._v(" The RFP will be sent to following properties ")]),t("div",{staticClass:"context hotelSelected"},[t("div",{staticClass:"list"},e._l(e.info.selectserviceprovider,(function(s){return t("div",{key:s.id,staticClass:"item"},[t("el-tag",{attrs:{closable:e.selectserviceproviderclosable},on:{close:function(t){return e.removeserviceprovider(s)}}},[e._v(e._s(s.company_name))])],1)})),0),t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.addaddService}},[e._v("添加服务商")])],1)]):e._e(),1==this.type?t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("系统将会发询价单给以下酒店（场地）销售主管")]),e._v(" The RFP will be sent to following properties ")]),t("div",{staticClass:"context hotelSelected"},[t("div",{staticClass:"list"},e._l(e.info.selecthotel,(function(s,a){return t("div",{key:s.id,staticClass:"item item-hotel"},[t("div",{staticClass:"name"},[e._v(e._s(s.hotelname))]),t("div",[null!=s.hotel_contact&&s.hotel_contact.filter(e=>1==e.type).length>0?t("div",{staticClass:"role role-update"},[t("span",{staticClass:"block-span"},[e._v(" 酒店默认接单人: "+e._s(s.hotel_contact.find(e=>1==e.type&&1==e.is_default).name)+" "),t("span",{staticClass:"update-span",on:{click:function(t){e.update_market=!0,e.update_GSO=!1,e.shade_market_order=!0,e.openRadioData(s.hotel_contact,s.hotelid,a)}}},[e._v(" 修改> ")])])]):t("div",{staticClass:"role role-update"},[t("span",{staticClass:"block-span"},[e._v(" 酒店默认接单人: 无 "),t("span",{staticClass:"update-span",on:{click:function(t){e.update_market=!0,e.shade_market_order=!0,e.update_GSO=!1,e.openRadioData(s.hotel_contact,s.hotelid,a)}}},[e._v(" 添加酒店接单人 ")])])])]),t("div",[null!=s.hotel_contact&&s.hotel_contact.filter(e=>2==e.type).length>0?t("div",{staticClass:"role role-update"},[t("span",{staticClass:"block-span"},[e._v(" 酒店抄送（GSO）: "),e._l(s.hotel_contact.filter(e=>2==e.type&&1==e.is_default),(function(s,a){return t("span",{key:a},[e._v(" "+e._s(s.name)+" ")])})),t("span",{staticClass:"update-span",on:{click:function(t){e.update_market=!0,e.shade_market_order=!0,e.update_GSO=!0,e.openRadioData(s.hotel_contact,s.hotelid,a)}}},[e._v(" 修改> ")])],2)]):t("div",{staticClass:"role role-update"},[t("span",{staticClass:"block-span"},[e._v(" 酒店抄送GSO: 无 ")])])]),e.info.selecthotel.length-1?t("el-tag",{class:null!=s.receptionist.id?"gso-del":"el-tag-hotel-del",attrs:{closable:""},on:{close:function(t){return e.removehotel(s)}}}):e._e()],1)})),0),t("div",{staticClass:"hoteBtn"},[t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.addHotel}},[e._v("添加采购酒店")])],1)]),e.shade_market_order?t("div",{staticClass:"shade"}):e._e(),e.shade_hint?t("div",{staticClass:"shade-top"}):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.update_market||e.update_order,expression:"update_market || update_order"}],staticClass:"market"},[t("i",{staticClass:"el-dialog__close el-icon el-icon-close customCloseIcon",on:{click:function(t){e.update_market=!1,e.update_order=!1,e.shade_market_order=!1}}}),t("div",{staticClass:"market-child"},[t("div",{staticClass:"market-child-div"},[e.update_GSO?t("span",[e._v(" 酒店抄送（GSO） ")]):t("span",[e._v(" 酒店接单人 ")])]),t("div",{staticClass:"market-child-second"},[e.update_GSO?t("span",[e._v(" 选择酒店抄送（GSO）后，此人将会来处理该订单 ")]):t("span",[e._v(" 选择酒店接单人后，此人将会来处理该订单 ")])])]),t("div",{staticClass:"market-table"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.update_GSO,expression:"update_GSO"}]},[t("div",{staticClass:"header"},[e.update_market?t("div",{staticClass:"header-f"},[e._v(" 共 "),t("span",{staticClass:"header-f-span"},[e._v(e._s(e.tableGsoData.length))]),e._v(" 位酒店抄送（GSO） ")]):t("div",{staticClass:"header-f"},[e._v(" 共 "),t("span",{staticClass:"header-f-span"},[e._v(e._s(e.orderData.length))]),e._v(" 位酒店抄送（GSO）可供选择 ")])]),t("el-table",{ref:"gsoTable",staticStyle:{width:"100%"},attrs:{data:e.update_market?e.tableGsoData:e.orderData,height:"170","show-header":!1},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{label:"",width:"50",type:"selection"}}),t("el-table-column",{attrs:{prop:"name",width:"120"}}),t("el-table-column",{attrs:{prop:"phone",width:"130"}}),t("el-table-column",{attrs:{prop:"email",width:"180"}}),t("el-table-column",{attrs:{prop:"modifier",width:"180"}}),e.update_market?t("el-table-column",{attrs:{width:"250"}}):e._e()],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.update_GSO,expression:"!update_GSO"}]},[t("div",{staticClass:"header"},[e.update_market?t("div",{staticClass:"header-f"},[e._v(" 共 "),t("span",{staticClass:"header-f-span"},[e._v(e._s(e.tableData.length))]),e._v(" 位酒店接单人 ")]):t("div",{staticClass:"header-f"},[e._v(" 共 "),t("span",{staticClass:"header-f-span"},[e._v(e._s(e.orderData.length))]),e._v(" 位酒店接单人可供选择 ")]),e.update_market&&0==e.tableData.length?t("div",{staticClass:"header-s",on:{click:function(t){e.insert_contact=!0,e.update_market=!1}}},[e._v(" 新增联系人 ")]):e._e()]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.update_market?e.tableData:e.orderData,height:"170","show-header":!1}},[t("el-table-column",{attrs:{label:"",width:"50"},scopedSlots:e._u([{key:"default",fn:function(s){return[e.update_market?t("el-radio",{attrs:{label:s.row.phone},nativeOn:{click:function(t){return t.preventDefault(),e.onRadioChange(s.$index+1,s.row)}},model:{value:e.RSOconstantPhone,callback:function(t){e.RSOconstantPhone=t},expression:"RSOconstantPhone"}},[e._v(" "+e._s(e.hidden)+" ")]):e._e()]}}],null,!1,2633166013)}),t("el-table-column",{attrs:{prop:"name",width:"120"}}),t("el-table-column",{attrs:{prop:"phone",width:"130"}}),t("el-table-column",{attrs:{prop:"email",width:"180"}}),t("el-table-column",{attrs:{prop:"remarks",width:"180"}}),e.update_market?t("el-table-column",{attrs:{width:"250"},scopedSlots:e._u([{key:"default",fn:function(s){return 0==e.update_GSO?[t("div",[s.row.isdefault?t("span",{staticClass:"table-default"},[e._v("默认联系人")]):t("span",{staticClass:"table-default set-default",on:{click:function(t){e.set_default=!0,e.shade_hint=!0,e.setDefault(s.$index+1,s.row)}}},[e._v(" 设为默认联系人 ")])])]:void 0}}],null,!0)}):e._e()],1)],1),t("div",{staticClass:"foot"},[e.update_GSO?e._e():t("el-button",{attrs:{type:"primary"},on:{click:e.ConfirmRSOChange}},[e._v("确定")]),e.update_GSO?t("el-button",{attrs:{type:"primary"},on:{click:e.ConfirmGSOChange}},[e._v("确定")]):e._e()],1)])]),e.update_contact||e.insert_contact?t("div",{staticClass:"contact"},[t("div",{staticClass:"contact-header"},[t("span",[e._v(" "+e._s(e.insert_contact?"新增酒店接单人":"编辑酒店接单人")+" ")])]),t("div",{staticClass:"contact-form"},[t("el-form",{attrs:{model:e.form,"label-position":"right","label-width":"90px"}},[t("el-form-item",{attrs:{label:"RSO姓名:",prop:"name"}},[t("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"手机号:",prop:"phone"}},[t("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),t("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[t("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),t("el-form-item",{attrs:{label:"备注:",prop:"remarks"}},[t("el-input",{model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1),t("el-form-item",{attrs:{"label-width":"0px"}},[t("el-button",{staticClass:"form-btn",attrs:{type:"info"},on:{click:function(t){e.update_contact=!1,e.insert_contact=!1,e.update_market=!0,e.form={name:"",phone:"",email:"",remarks:""}}}},[e._v(" 取消 ")]),t("el-button",{staticClass:"form-btn",attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("确定")])],1)],1)],1)]):e._e(),e.hint||e.delete_contact||e.set_default?t("div",{staticClass:"hint-div"},[t("div",{staticClass:"hint-header"},[e._v("提示")]),t("div",{staticClass:"hint-msg"},[t("div",{staticClass:"msg"},[e._v(e._s(e.msg))]),e.delete_contact||e.set_default?t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.shade_hint=!1,e.hint=!1,e.delete_contact=!1,e.set_default=!1}}},[e._v(" 取消 ")]):e._e(),e.delete_contact?t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.shade_hint=!1,e.hint=!1,e.delete_contact=!1,e.delete_contact_hint()}}},[e._v("确定")]):e._e(),e.set_default?t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.shade_hint=!1,e.hint=!1,e.delete_contact=!1,e.set_default=!1,e.setDefaultSure()}}},[e._v(" 确定 ")]):e._e(),e.set_default||e.delete_contact?e._e():t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.shade_hint=!1,e.hint=!1,e.delete_contact=!1}}},[e._v("确定")])],1)]):e._e()]):e._e(),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix clearfix-unfold",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("会议基本信息")]),e._v(" Event Profiles "),e.isUnfold?t("img",{attrs:{src:s("d991"),width:"20px",height:"20px",alt:""},on:{click:function(t){e.isUnfold=!e.isUnfold}}}):t("img",{attrs:{src:s("b93d"),width:"20px",height:"20px",alt:""},on:{click:function(t){e.isUnfold=!e.isUnfold}}}),t("span",{staticClass:"unfold-span",on:{click:function(t){e.isUnfold=!e.isUnfold}}},[e._v(e._s(e.isUnfold?"收起":"展开"))])]),e.isUnfold?t("div",{staticClass:"context info"},[t("div",{staticClass:"item"},[t("label",[e._v("会议名称Event Name：")]),e._v(" "+e._s(e.info.event_name)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("建团类型：")]),e._v(" "+e._s(e.info.tourist_group_type)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("活动类型Event Type：")]),e._v(" "+e._s(e.info.activity_type_name)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("Cvent号：")]),e._v(" "+e._s(e.info.cvent_no)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("客户Consumer：")]),e._v(" "+e._s(e.info.company_name)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("团电脑号Team No.：")]),e._v(" "+e._s(e.info.tourist_group_no)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("服务类型Service Type：")]),e._v(" "+e._s(e.info.service_type_name)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("会议城市City：")]),e._v(" "+e._s(e.info.event_cityname)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("餐标限制Food Limit：")]),e._v(" "+e._s(e.info.food_limit)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("参会人数Attendee NO.：")]),e._v(" "+e._s(e.info.attendee_no)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("会议开始日期Start Date：")]),e._v(" "+e._s(e._f("date_day")(e.info.event_startdate))+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("会议结束日期End Date：")]),e._v(" "+e._s(e._f("date_day")(e.info.event_enddate))+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("PR ：")]),e._v(" "+e._s(e.info.pr)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("会议总预算Total Budget：")]),e._v(" "+e._s(e.info.total_budget)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("会议IDEvent ID：")]),e._v(" "+e._s(e.info.event_info_id)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("会议创建人Submitor：")]),e._v(" "+e._s(e.info.createuser_contracts)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("客户联系人Event Owner：")]),e._v(" "+e._s(e.info.customer_contacts)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("客户所属部门Owner's Department：")]),e._v(" "+e._s(e.info.customer_department)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("客户联系电话Owner's Phone NO.：")]),e._v(" "+e._s(e.info.customer_phone)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("客户邮箱Owner's E-mail：")]),e._v(" "+e._s(e.info.customer_email)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("发票类型Invoice Type：")]),e._v(" "+e._s(e.info.invoice_type)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("是否办理免税：")]),e._v(" "+e._s(e.info.is_duty_free)+" ")]),t("div",{staticClass:"item"},[t("label",[e._v("创建时间Create Date：")]),e._v(" "+e._s(e.info.create_date)+" ")]),t("div",{staticClass:"item",staticStyle:{display:"flex"}},[t("label",[e._v("附件：")]),t("div",e._l(e.info.document_attachments_file_name_list,(function(s,a){return t("p",{key:a},[t("span",{staticStyle:{cursor:"pointer",color:"#4ea9f0",margin:"0 10px"},on:{click:function(t){return e.downloadFile(a)}}},[e._v(" "+e._s(s)+" ")])])})),0),e._v(" "+e._s(e.info.customer_data)+" ")])]):e._e()]),e.documentVisible(e.info.requirements_room,1)?t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("客房需求")]),e._v(" Guest Rooms ")]),t("div",{staticClass:"context rooms"},[t("div",{staticClass:"category_tools"},[e._v(" 入住起始日期 Check-in Date："+e._s(e._f("date_day")(e.info.requirements_room.startdate))+" "+e._s(1==e.info.requirements_room.broadband_required?"需要有宽带":"不需要宽带")+" "+e._s(1==e.info.requirements_room.breakfast_required?"需要含早餐":"不需要早餐")+" "),t("div",{staticClass:"category_tools_buttons"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.room_selectallordeselectall(!0)}}},[e._v("全选采购")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.room_selectallordeselectall(!1)}}},[e._v("全选不采购")])],1)]),t("table",[t("thead",[t("tr",{staticClass:"color_2"},[t("th",{attrs:{width:"110"}},[e._v("日期")]),t("th",[e._v("双床房")]),t("th",[e._v("大床房")]),t("th",[e._v("行政房/套房")]),t("th",[e._v("总计")]),t("th",[e._v("其它要求")]),t("th",{attrs:{width:"150"}},[e._v("是否采购")])])]),e._l(e.info.requirements_room.list,(function(s){return t("tbody",{key:s.id},[t("tr",[t("td",[e._v(e._s(e._f("date_day")(s.check_in_date)))]),t("td",[e._v(e._s(s.twin_bed_count))]),t("td",[e._v(e._s(s.king_bed_count))]),t("td",[e._v(e._s(s.superior_room_count))]),t("td",[e._v(e._s(s.total))]),t("td",[e._v(e._s(s.other_requirements))]),t("td",[t("el-radio-group",{staticClass:"radiogroup",model:{value:s._checked,callback:function(t){e.$set(s,"_checked",t)},expression:"item._checked"}},[t("el-radio",{attrs:{label:!0}},[e._v("采购")]),t("el-radio",{attrs:{label:!1}},[e._v("不采购")])],1)],1)])])}))],2)])]):e._e(),e.documentVisible(e.info.requirements_conference,2)?t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix category_tools",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("会场需求")]),e._v(" Conference Rooms "),t("div",{staticClass:"category_tools_buttons"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.conference_selectallordeselectall(!0)}}},[e._v("全选采购")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.conference_selectallordeselectall(!1)}}},[e._v("全选不采购")])],1)]),t("div",{staticClass:"context Conference"},e._l(e.info.requirements_conference,(function(s){return t("table",{key:s.id},[t("thead",[t("tr",{staticClass:"color_2"},[t("th",{staticStyle:{"text-align":"left"},attrs:{width:"230"}},[e._v(" "+e._s(e._f("date_day")(s.date))+" ")]),t("th"),t("th",{attrs:{width:"150"}},[e._v("是否采购")])])]),e._l(s.list,(function(s){return t("tbody",{key:s.id},[t("tr",[t("td",[e._v(" "+e._s(s.item)+" "),t("br"),e._v(" "+e._s(s.related_information)+" ")]),t("td",{staticStyle:{"text-align":"left","line-height":"40px"}},[t("p",[e._v(" Setting Times: "+e._s(e._f("date_day")(s.conference_date))+" "+e._s(s.starttime)+" - "+e._s(e._f("date_day")(s.conference_date))+" "+e._s(s.endtime)+" "),1==s.type?t("span",{staticStyle:{color:"#000000","font-size":"14px"}},[e._v(e._s(s.attendees)+"人，"+e._s(s.roomsetuptypename)+"，会场面积范围:"+e._s(s.min_area)+"~"+e._s(s.max_area)+" sqm")]):e._e()]),s.describe?t("p",[e._v("Setting Note : "+e._s(s.describe))]):e._e(),1==s.type?t("p",[e._v("Setting Note : "+e._s(s.equipment))]):e._e()]),t("td",[t("el-radio-group",{staticClass:"radiogroup",model:{value:s._checked,callback:function(t){e.$set(s,"_checked",t)},expression:"item._checked"}},[t("el-radio",{attrs:{label:!0}},[e._v("采购")]),t("el-radio",{attrs:{label:!1}},[e._v("不采购")])],1)],1)])])}))],2)})),0)]):e._e(),e.documentVisible(e.info.requirements_food,3)?t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix category_tools",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("餐饮需求")]),e._v(" Food & Beverage "),t("div",{staticClass:"category_tools_buttons"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.hotel_food_selectallordeselectall(!0)}}},[e._v("全选采购")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.hotel_food_selectallordeselectall(!1)}}},[e._v("全选不采购")])],1)]),t("div",{staticClass:"context foods"},[t("table",[t("thead",[t("tr",{staticClass:"color_2"},[t("th",{attrs:{width:"110"}},[e._v("日期")]),t("th",[e._v("Moring Break")]),t("th",[e._v("Lunch")]),t("th",[e._v("Afternoon Break")]),t("th",[e._v("Dinner")]),t("th",[e._v("Comments")]),t("th",{attrs:{width:"150"}},[e._v("是否采购")])])]),e._l(e.info.requirements_food,(function(s){return t("tbody",{key:s.id},[t("tr",[t("td",[e._v(e._s(e._f("date_day")(s.food_date)))]),t("td",[e._v(" "+e._s(s.moring_break_count)+"人 "),t("el-checkbox",{attrs:{name:"moring_break"},model:{value:s.moring_break_checked,callback:function(t){e.$set(s,"moring_break_checked",t)},expression:"item.moring_break_checked"}})],1),t("td",[s.lunch_use_type?t("div",[e._v(" "+e._s(s.lunch_use_type)+"， ")]):e._e(),e._v(" "+e._s(s.lunch_count)+"人 "),t("el-checkbox",{attrs:{name:"lunch"},model:{value:s.lunch_checked,callback:function(t){e.$set(s,"lunch_checked",t)},expression:"item.lunch_checked"}}),1==s.lunch_address_type?t("span",{staticClass:"outsidethehotel"},[e._v("酒店外")]):e._e()],1),t("td",[e._v(" "+e._s(s.afternoon_break_count)+"人 "),t("el-checkbox",{attrs:{name:"afternoon_break"},model:{value:s.afternoon_break_checked,callback:function(t){e.$set(s,"afternoon_break_checked",t)},expression:"item.afternoon_break_checked"}})],1),t("td",[s.dinner_use_type?t("div",[e._v(" "+e._s(s.dinner_use_type)+"， ")]):e._e(),e._v(" "+e._s(s.dinner_count)+"人 "),t("el-checkbox",{attrs:{name:"dinner"},model:{value:s.dinner_checked,callback:function(t){e.$set(s,"dinner_checked",t)},expression:"item.dinner_checked"}}),1==s.dinner_address_type?t("span",{staticClass:"outsidethehotel"},[e._v("酒店外")]):e._e()],1),t("td",[t("span",[e._v(e._s(s.comments))])]),t("td",[t("el-radio-group",{staticClass:"radiogroup",on:{change:function(t){return e.food_checked_Change(s)}},model:{value:s._checked,callback:function(t){e.$set(s,"_checked",t)},expression:"item._checked"}},[t("el-radio",{attrs:{label:!0}},[e._v("采购")]),t("el-radio",{attrs:{label:!1}},[e._v("不采购")])],1)],1)])])}))],2)])]):e._e(),e.documentVisible(e.info.requirements_outside_food,8)?t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix category_tools",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("酒店外餐饮需求")]),e._v(" Food & Beverage "),t("div",{staticClass:"category_tools_buttons"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.hotel_food_selectallordeselectall(!0)}}},[e._v("全选采购")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.hotel_food_selectallordeselectall(!1)}}},[e._v("全选不采购")])],1)]),t("div",{staticClass:"context foods"},[t("table",[t("thead",[t("tr",{staticClass:"color_2"},[t("th",{attrs:{width:"110"}},[e._v("日期")]),t("th",[e._v("用餐时间")]),t("th",[e._v("用餐类型")]),t("th",[e._v("用餐人数")]),t("th",[e._v("需求备注")]),t("th",{attrs:{width:"150"}},[e._v("是否采购")])])]),e._l(e.info.requirements_outside_food,(function(s){return t("tbody",{key:s.id},[t("tr",[t("td",[e._v(e._s(e._f("date_day")(s.food_date)))]),t("td",[s.moring_break_count?t("span",[e._v(" 早餐 ")]):e._e(),s.lunch_count?t("span",[e._v(" 午餐 ")]):e._e(),s.afternoon_break_count?t("span",[e._v(" 下午茶 ")]):e._e(),s.dinner_count?t("span",[e._v(" 晚餐 ")]):e._e()]),t("td",[s.moring_break_count?t("div",[e._v(" "+e._s(s.lunch_use_type)+" ")]):e._e(),s.lunch_count?t("div",[e._v(e._s(s.lunch_use_type))]):e._e(),s.afternoon_break_count?t("div",[e._v(" "+e._s(s.dinner_use_type)+" ")]):e._e(),s.dinner_count?t("div",[e._v(e._s(s.dinner_use_type))]):e._e()]),t("td",[s.moring_break_count?t("div",[e._v(" "+e._s(s.moring_break_count)+" 人 ")]):e._e(),s.lunch_count?t("div",[e._v(e._s(s.lunch_count)+" 人")]):e._e(),s.afternoon_break_count?t("div",[e._v(" "+e._s(s.afternoon_break_count)+" 人 ")]):e._e(),s.dinner_count?t("div",[e._v(e._s(s.dinner_count)+" 人")]):e._e()]),t("td",[t("span",[e._v(e._s(s.comments))])]),t("td",[t("el-radio-group",{staticClass:"radiogroup",on:{change:function(t){return e.food_checked_Change(s)}},model:{value:s._checked,callback:function(t){e.$set(s,"_checked",t)},expression:"item._checked"}},[t("el-radio",{attrs:{label:!0}},[e._v("采购")]),t("el-radio",{attrs:{label:!1}},[e._v("不采购")])],1)],1)])])}))],2)])]):e._e(),e.documentVisible(e.info.requirements_transportation,4)?t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix category_tools",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("大交通")]),e._v(" Intercity Transportation "),t("div",{staticClass:"category_tools_buttons"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.transportation_selectallordeselectall(!0)}}},[e._v("全选采购")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.transportation_selectallordeselectall(!1)}}},[e._v("全选不采购")])],1)]),t("div",{staticClass:"context chengjijiaotong"},[t("table",[t("thead",[t("tr",{staticClass:"color_2"},[t("th",{attrs:{width:"110"}},[e._v("日期")]),t("th",[e._v("始发地")]),t("th",[e._v("目的地")]),t("th",[e._v("交通工具")]),t("th",[e._v("搭乘人数")]),t("th",[e._v("抵达时间")]),t("th",[e._v("座位等级")]),t("th",[e._v("票价/折扣")]),t("th",[e._v("备注")]),t("th",{attrs:{width:"150"}},[e._v("是否采购")])])]),e._l(e.info.requirements_transportation,(function(s){return t("tbody",{key:s.id},[t("tr",[t("td",[e._v(e._s(e._f("date_day")(s.transportation_date)))]),t("td",[e._v(e._s(s.origin_city))]),t("td",[e._v(e._s(s.destination_city))]),t("td",[e._v(e._s(s.trans_type))]),t("td",[e._v(e._s(s.passenger_count))]),t("td",[e._v(e._s(s.arrive_time))]),t("td",[e._v(e._s(s.seat_classes))]),t("td",[e._v(e._s(s.special_price))]),t("td",[e._v(e._s(s.requirement))]),t("td",[t("el-radio-group",{staticClass:"radiogroup",model:{value:s._checked,callback:function(t){e.$set(s,"_checked",t)},expression:"item._checked"}},[t("el-radio",{attrs:{label:!0}},[e._v("采购")]),t("el-radio",{attrs:{label:!1}},[e._v("不采购")])],1)],1)])])}))],2)])]):e._e(),e.documentVisible(e.info.requirements_car,5)?t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix category_tools",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("地面交通")]),e._v(" City Car "),t("div",{staticClass:"category_tools_buttons"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.car_selectallordeselectall(!0)}}},[e._v("全选采购")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.car_selectallordeselectall(!1)}}},[e._v("全选不采购")])],1)]),t("div",{staticClass:"context chengjijiaotong"},[t("table",[t("thead",[t("tr",{staticClass:"color_2"},[t("th",{attrs:{width:"110"}},[e._v("日期")]),t("th",[e._v("用车目的")]),t("th",[e._v("用车类型")]),t("th",[e._v("用车数量")]),t("th",[e._v("搭乘人数")]),t("th",[e._v("用车说明")]),t("th",{attrs:{width:"150"}},[e._v("是否采购")])])]),e._l(e.info.requirements_car,(function(s){return t("tbody",{key:s.id},[t("tr",[t("td",[e._v(e._s(e._f("date_day")(s.car_date)))]),t("td",[e._v(e._s(s.purposename))]),t("td",[e._v(e._s(s.vehicle_typename))]),t("td",[e._v(e._s(s.car_count))]),t("td",[e._v(e._s(s.vehicle_count))]),t("td",[e._v(e._s(s.explain))]),t("td",[t("el-radio-group",{staticClass:"radiogroup",model:{value:s._checked,callback:function(t){e.$set(s,"_checked",t)},expression:"item._checked"}},[t("el-radio",{attrs:{label:!0}},[e._v("采购")]),t("el-radio",{attrs:{label:!1}},[e._v("不采购")])],1)],1)])])}))],2)])]):e._e(),e.documentVisible(e.info.requirements_other,6)?t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix category_tools",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("其它服务")]),e._v(" Other service "),t("div",{staticClass:"category_tools_buttons"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.other_selectallordeselectall(!0)}}},[e._v("全选采购")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.other_selectallordeselectall(!1)}}},[e._v("全选不采购")])],1)]),t("div",{staticClass:"context chengjijiaotong"},[t("table",[t("thead",[t("tr",{staticClass:"color_2"},[t("th",[e._v("类型名称")]),t("th",[e._v("参与人数")]),t("th",[e._v("服务天数")]),t("th",[e._v("描述")]),t("th",{attrs:{width:"150"}},[e._v("是否采购")])])]),e._l(e.info.requirements_other,(function(s){return t("tbody",{key:s.id},[t("tr",[t("td",[e._v(e._s(s.order_name))]),t("td",[e._v(e._s(s.participate_count))]),t("td",[e._v(e._s(s.service_day_count))]),t("td",[e._v(e._s(s.describe))]),t("td",[t("el-radio-group",{staticClass:"radiogroup",model:{value:s._checked,callback:function(t){e.$set(s,"_checked",t)},expression:"item._checked"}},[t("el-radio",{attrs:{label:!0}},[e._v("采购")]),t("el-radio",{attrs:{label:!1}},[e._v("不采购")])],1)],1)])])}))],2)])]):e._e(),e.documentVisible(null,7)?t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("旅行社代付")]),e._v(" Paying Agent ")]),t("div",{staticClass:"context chengjijiaotong"},[t("table",[t("thead",[t("tr",{staticClass:"color_2"},[t("th",[e._v("旅行社代付")]),t("th",{attrs:{width:"150"}},[e._v("是否采购")])])]),t("tbody",[t("tr",[t("td",[e._v("本会中酒店部分订单需要旅行社代付")]),t("td",[t("el-radio-group",{staticClass:"radiogroup",model:{value:e.info.travelagency_payment,callback:function(t){e.$set(e.info,"travelagency_payment",t)},expression:"info.travelagency_payment"}},[t("el-radio",{attrs:{label:!0}},[e._v("采购")]),t("el-radio",{attrs:{label:!1}},[e._v("不采购")])],1)],1)])])])])]):e._e(),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("询价单补充信息")]),e._v(" RFP Additional Information ")]),t("div",{staticClass:"context form"},[t("div",{staticClass:"item"},[t("label",[e._v("附件Attachments")]),t("div",{staticClass:"block"},[t("el-upload",{ref:"upload",attrs:{action:"","on-change":e.handleChangeAttach,"on-remove":e.handleRemoveAttach,"auto-upload":!1,"file-list":this.fileList,multiple:!1}},[t("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("从电脑选择文件")])],1)],1)]),t("div",{staticClass:"item"},[t("label",[e._v("会议日期是否接受调整")]),t("div",{staticClass:"block"},[t("el-checkbox",{model:{value:e.info.isadjustdate,callback:function(t){e.$set(e.info,"isadjustdate",t)},expression:"info.isadjustdate"}},[e._v("日期可以调整My Event Dates Are Flexible")])],1)])])]),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("报价方式及截止时间")]),e._v(" Quotation Mode and Deadline ")]),t("div",{staticClass:"context form"},[t("div",{staticClass:"item"},[t("label",[e._v("报价截止日期Deadline")]),t("div",{staticClass:"block"},[t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择报价截止日期","picker-options":e.pickerOptions},model:{value:e.info.end_time,callback:function(t){e.$set(e.info,"end_time",t)},expression:"info.end_time"}})],1)])])]),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("其它需求信息或者注意事项")]),e._v(" Additional Comments ")]),t("div",{staticClass:"context form"},[t("el-input",{attrs:{type:"textarea"},model:{value:e.info.other,callback:function(t){e.$set(e.info,"other",t)},expression:"info.other"}})],1)]),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"context btn"},[t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("提交询价单")])],1)])],1):e._e()},i=[],o=s("0e5c"),n={data(){return{RSOconstantPhone:"",type:null,info:null,pickerOptions:{disabledDate:this.disabledDate},fileList:[],update_market:!1,shade_market_order:!1,update_contact:!1,delete_contact:!1,insert_contact:!1,update_order:!1,set_default:!1,hint:!1,shade_hint:!1,tableData:[],orderData:[],form:{name:"",phone:"",email:"",remarks:""},msg:"",index:null,radio:"",radioOrder:"",hidden:"",val:"",row:null,radioName:null,orderName:null,hotelid:"",radioIndex:0,id:0,score:1,hotelindex:0,isOpen:!1,rules:{purchase_contracts:[{required:!0,message:"请输入联系人",trigger:"blur"}],purchase_phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],purchase_email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],companyName:[{type:"array",required:!0,message:"请选择一个公司名称",trigger:"change"}]},ruleForm:{purchase_contracts:"",purchase_phone:"",purchase_email:"",companyName:[]},compositeName:"",compositeName2:"",purchase_department:"",company_name:"",purchase_contracts:"",purchase_phone:"",purchase_email:"",isUnfold:!1,update_GSO:!1,gainGso:[],tableGsoData:[],selectGsoData:[],GsoName:"",selectGSOInfos:[]}},computed:{room_selectallordeselectall:()=>function(e){this.info.requirements_room.list.forEach(t=>{t._checked=e})},conference_selectallordeselectall:()=>function(e){this.info.requirements_conference.forEach(t=>{t.list.forEach(t=>{t._checked=e})})},hotel_food_selectallordeselectall:()=>function(e){this.info.requirements_food.forEach(t=>{t._checked=e})},transportation_selectallordeselectall:()=>function(e){this.info.requirements_transportation.forEach(t=>{t._checked=e})},car_selectallordeselectall:()=>function(e){this.info.requirements_car.forEach(t=>{t._checked=e})},other_selectallordeselectall:()=>function(e){this.info.requirements_other.forEach(t=>{t._checked=e})},selectserviceproviderclosable:function(){return this.info.selectserviceprovider.length>1},intentionhotelclosable:function(){return!0},selecthotelclosable:function(){return this.info.selecthotel.length>1},documentVisible:()=>function(e,t){let s=!1;return 1==this.type&&t>3||(1!=t&&e&&e.length>0||e&&e.list&&e.list.length>0)&&(s=!0),s},IsCheck:function(){for(let e=0;e<this.info.requirements_room.list.length;e++)if(this.info.requirements_room.list[e]._checked)return!0;for(let e=0;e<this.info.requirements_conference.length;e++)for(let t=0;t<this.info.requirements_conference[e].list.length;t++)if(this.info.requirements_conference[e].list[t]._checked)return!0;for(let e=0;e<this.info.requirements_food.length;e++){if(this.info.requirements_food[e].lunch_checked)return!0;if(this.info.requirements_food[e].afternoon_break_checked)return!0;if(this.info.requirements_food[e].dinner_checked)return!0}for(let e=0;e<this.info.requirements_transportation.length;e++)if(this.info.requirements_transportation[e]._checked)return!0;for(let e=0;e<this.info.requirements_car.length;e++)if(this.info.requirements_car[e]._checked)return!0;for(let e=0;e<this.info.requirements_other.length;e++)if(this.info.requirements_other[e]._checked)return!0;return!1}},methods:{sortByOrderName(e){return e.sort(e=>e.order_name)},openRadioData(e,t,s){if(console.log(e,t,s),this.radioIndex=s,1==this.update_GSO){e&&(this.tableGsoData=e.filter(e=>2==e.type),setTimeout(()=>{this.tableGsoData.forEach(e=>{1==e.is_default&&this.$refs.gsoTable.toggleRowSelection(e,!0)})},0))}else 0==this.update_GSO&&(this.tableData=e.filter(e=>1==e.type),this.tableData.forEach(e=>{1==e.is_default&&(this.RSOconstantPhone=e.phone)}));this.hotelid=t,this.hotelindex=s},openOrderData(e,t){console.log(e.sendemail),this.orderData=[{contacts:e.hotelecontacts,email:e.hotelemail,telephone:e.hoteletelephone,sendemail:e.sendemail}],this.hotelindex=t,this.info.selecthotel[this.hotelindex].sendemail=!this.info.selecthotel[this.hotelindex].sendemail},onRadioChange(e,t){t.is_default=1,this.RSOconstantPhone=t.phone,1==t.is_add&&this.info.selecthotel[this.hotelindex].hotel_contact.push(t),this.info.selecthotel[this.hotelindex].hotel_contact.forEach(e=>{1==e.type&&(e.phone==t.phone?e.is_default=1:e.is_default=0)}),console.log(this.update_GSO,t),console.log(this.info.selecthotel)},handleSelectionChange(e){this.selectGSOInfos=e},ConfirmGSOChange(){this.info.selecthotel[this.hotelindex].hotel_contact.forEach(e=>{2==e.type&&(e.is_default=0,this.selectGSOInfos.forEach(t=>{t.phone==e.phone&&(e.is_default=1)}))}),this.update_market=!1,this.shade_market_order=!1,this.update_order=!1},ConfirmRSOChange(){this.update_market=!1,this.shade_market_order=!1,this.update_order=!1},setDefault(e,t){this.val=e,this.row=t,this.msg="确定要将该RSO设为默认联系人？"},setDefaultSure(){this.$api.receptionistSave({id:this.row.id,hotel_id:this.row.hotel_id,isdefault:1},"POST").then(e=>{e?(this.$message({message:"修改默认联系人成功",type:"success"}),this.onRadioChange(this.val,this.row),this.init()):this.$message.error("修改默认联系人失败，请重新修改默认联系人")})},delete_table(e,t){this.index=JSON.parse(JSON.stringify(e)),this.msg="确定要删除该RSO?",this.id=JSON.parse(JSON.stringify(t))},delete_contact_hint(){this.shade_hint=!1,this.$api.receptionistDelete({id:this.id},"POST").then(e=>{e?(this.$message({message:"删除成功",type:"success"}),this.tableData.splice(this.index,1)):this.$message.error("删除失败，请重新删除")})},submit(){var e=this.form,t=/^1(3\d|4[5-9]|5[0-35-9]|6[567]|7[0-8]|8\d|9[0-35-9])\d{8}$/,s=/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9]+\.[a-z]+$/;if(e.name&&e.phone&&e.email){if(!t.test(e.phone))return this.msg="请输入正确的手机号",this.hint=!0,void(this.shade_hint=!0);if(!s.test(e.email))return this.msg="邮箱格式不正确",this.hint=!0,void(this.shade_hint=!0)}else{if(!this.update_GSO)return this.msg="姓名、手机、邮箱缺一不可！",this.hint=!0,void(this.shade_hint=!0);if(!e.contactsGSO)return this.msg="姓名、手机、邮箱缺一不可！",this.hint=!0,void(this.shade_hint=!0)}this.tableData.push({email:e.email,id:null,inquiry_sheet_object_id:null,is_add:1,is_default:0,name:e.name,phone:e.phone,remarks:e.remarks,type:1}),console.log(this.info.selecthotel),this.update_contact=!1,this.insert_contact=!1,this.update_market=!0,this.form.name="",this.form.phone="",this.form.email="",this.form.remarks=""},handleChangeAttach(e,t){this.fileList=t},handleRemoveAttach(e,t){this.fileList=t},removeserviceprovider(e){let t=this.info.selectserviceprovider.findIndex(t=>t.id==e.id);t>-1&&(this.info.selectserviceprovider.splice(t,1),this.$api.selectserviceprovider({serviceprovider:this.info.selectserviceprovider},"POST").then(e=>{}))},removeintentionhotel(e){console.log(e);let t=this.info.intentionhotel.findIndex(t=>t.hotelid==e.hotelid);t>-1&&(this.info.intentionhotel.splice(t,1),this.$api.selectintentionhotel({hotel:this.info.intentionhotel},"POST").then(e=>{}))},removehotel(e){console.log(e);let t=this.info.selecthotel.findIndex(t=>t.hotelid==e.hotelid);t>-1&&(this.info.selecthotel.splice(t,1),this.$api.selecthotel({hotel:this.info.selecthotel},"POST").then(e=>{}))},hotel(e){console.log(e);let t=this.$router.resolve({name:"hotelInfo",params:{id:e.hotelid}});window.open(t.href,"_blank")},food_checked_Change(e){console.log(e),e.moring_break_checked=e._checked,e.lunch_checked=e._checked,e.afternoon_break_checked=e._checked,e.dinner_checked=e._checked},disabledDate(e){let t=Date.now();return e.getTime()<t||e.getTime()>new Date(this.info.event_startdate)},addIntentionHotel(){this.$router.push({name:"addintentionhotel",params:{id:this.$route.params.id,city:this.info.event_city,type:"addintentionhotel"}})},downloadFile(e){let t=document.createElement("a");fetch(this.info.document_attachments_file_path_list[e]).then(e=>e.blob()).then(s=>{t.href=URL.createObjectURL(s),console.log(t.href),t.download=this.info.document_attachments_file_name_list[e],document.body.appendChild(t),t.click()})},addHotel(){this.$router.push({name:"addhotelbycity",params:{id:this.$route.params.id,city:this.info.event_city,type:"addhotel"}})},addaddService(){this.$router.push({name:"addServiceProviderbycity",params:{id:this.$route.params.id,city:this.info.event_city,type:this.$route.params.type}})},save(){if(console.log(this.info),(null==this.info.selectserviceprovider||0==this.info.selectserviceprovider.length)&&(null==this.info.selecthotel||0==this.info.selecthotel.length))return void this.$message({message:"请选择服务商或酒店",type:"error"});if(!this.IsCheck)return void this.$message({message:"请至少选择一个需求项目",type:"warning"});if(null==this.info.end_time)return void this.$message({message:"请选择截止时间",type:"warning"});var e=/^1(3\d|4[5-9]|5[0-35-9]|6[567]|7[0-8]|8\d|9[0-35-9])\d{8}$/,t=/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9]+\.[a-z]+$/;if(!(this.compositeName&&this.purchase_contracts&&this.purchase_phone&&this.purchase_email))return void this.$message.error("公司名、姓名、手机、邮箱缺一不可！");if(!e.test(this.purchase_phone))return void this.$message.error("请输入正确的手机号！");if(!t.test(this.purchase_email))return void this.$message.error("邮箱格式不正确！");this.info.purchase_company=this.compositeName,this.info.purchase_contracts=this.purchase_contracts,this.info.purchase_phone=this.purchase_phone,this.info.purchase_email=this.purchase_email;let s=[],a=this.fileList.filter(e=>""!=e.uid);this.fileList.length>0&&a.forEach(e=>{s.push({key:e.uid,file:e.raw})}),Object(o["a"])(s).then(e=>(this.info.inquiry_sheet_attach&&this.info.inquiry_sheet_attach.length>0&&this.info.inquiry_sheet_attach.forEach(e=>{0==this.fileList.filter(t=>t.id==e.id).length&&(e.delete=!0)}),e.forEach(e=>{this.info.inquiry_sheet_attach.push({filetype:1,filepath:e.FilePath,filename:e.OriginalFileName})}),this.$api.inquirySend(this.info,"POST"))).then(e=>{e?(this.$message({message:"推送场地资源成功！",type:"success"}),this.$router.push({name:"hotelSendSuccess",params:{id:this.$route.params.id}})):this.$message({message:"推送场地资源失败！",type:"fail"})})},init(){this.info.selecthotel.forEach((e,t)=>{this.$api.receptionistList({id:e.hotelid},"POST").then(t=>{e["receptionistList"]=t,this.update_market&&((this.update_GSO=!1)?this.openRadioData(this.info.selecthotel[this.radioIndex].receptionistList,this.info.selecthotel[this.radioIndex].hotelid,this.radioIndex):(this.update_GSO=!0)&&this.openRadioData(this.info.selecthotel[this.radioIndex].receptionistList_,this.info.selecthotel[this.radioIndex].hotelid,this.radioIndex)),1==this.score&&this.setDft(),this.score=2}),this.$api.GetGSOUser({resourcesId:e.hotelid},"POST").then(t=>{e["receptionistList_"]=t.gsos,e["contactsGSO"]=""})})},setDft(){this.info.selecthotel.forEach((e,t)=>{e.receptionistList.forEach((e,t)=>{1==e.isdefault&&(this.radio=t+1)}),e.sendemail&&(this.radioOrder=1)})},change(e){console.log(e);var t="",s="",a="";t=e[0]?e[0]+"":"",s=e[1]?e[1]+"":"",a=t&&s?",":"",this.compositeName2=t+a+s},editSubmit(){var e=/^1(3\d|4[5-9]|5[0-35-9]|6[567]|7[0-8]|8\d|9[0-35-9])\d{8}$/,t=/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9]+\.[a-z]+$/;this.compositeName2&&this.ruleForm.purchase_contracts&&this.ruleForm.purchase_phone&&this.ruleForm.purchase_email?e.test(this.ruleForm.purchase_phone)?t.test(this.ruleForm.purchase_email)?(this.compositeName=this.compositeName2,this.purchase_contracts=this.ruleForm.purchase_contracts,this.purchase_phone=this.ruleForm.purchase_phone,this.purchase_email=this.ruleForm.purchase_email,this.isOpen=!1):this.$message.error("邮箱格式不正确！"):this.$message.error("请输入正确的手机号！"):this.$message.error("公司名、姓名、手机、邮箱缺一不可！")},editContent(){this.isOpen=!0},init_(){}},mounted(){let e="";this.$route.query.id?(this.type=this.$route.query.type,e=this.$route.query.id):(this.type=this.$route.params.type,e=this.$route.params.id),this.type||(this.type=2),this.$api.requirementsinfo({id:e,includinghotel:this.type},"POST").then(e=>{this.info=e,console.log(e),this.compositeName=this.info.purchase_department,this.company_name=this.info.company_name,this.purchase_department=this.info.purchase_department,this.compositeName2=this.info.purchase_department,this.ruleForm={purchase_contracts:this.info.purchase_contracts,purchase_phone:this.info.purchase_phone,purchase_email:this.info.purchase_email,companyName:[this.purchase_department]},this.purchase_contracts=this.info.purchase_contracts,this.purchase_phone=this.info.purchase_phone,this.purchase_email=this.info.purchase_email,this.init(),this.init_()})}},l=n,r=(s("8639"),s("0b56")),c=Object(r["a"])(l,a,i,!1,null,"02145c3a",null);t["default"]=c.exports},"837e":function(e,t,s){},8639:function(e,t,s){"use strict";s("837e")},b93d:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAATxJREFUaEPtWV0OgjAM7iTeQhO9jhzCB2+BD+KD3MIHD4HXkURuYWRGA0YJg86WzSXllbXr97OOFAWBPyrw+kEA+FZQFAhGgdthlU6UWgPAwmHRRaX1abo9p6Y9URaqi985LPxrq0rrvQkECsA9i68AMPMFAADKKMnnXftjAegmuI8NToBt1aMk76zVGoApEWfxTa57Fr+JEwANK6KAhdfEQjaHyUQshkVK7OhdSADU8nhro6KAKAAAGBt8rrFo9a+lJn9j9mXrQgKgQzanClAuI0osm4UoRVBiBcBQx8H4WBTwzeJfKzBETt97jP1GP8QCwPfHnCjArUCok7mL46l023lFlOTLn2ejwU+nn8hrEBvHU+qy0vpI/j9A6SRjx6IusrGLoOQXABT2OGJFAQ4WKTlEAQp7HLHBK/AA4k5IQOfQdIYAAAAASUVORK5CYII="},d991:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAWRJREFUaEPtmT1Ow0AQhd+sgcPAAZISKn6cS3ACJCQKVqJCWiQKpNyAQ2B+KijjA8BhAO+gpTJ2iDYMS9ZiUlozz/Pe51SPMPAfDfx+qIFVE5xL4NUdjNZAUwZGqz4wvJ+A+h18tGFv6+49PQPs9jc9zHMOh3dvMPBbZO9e2s97Brwr7xnY9Q3trJ/dPOVg5O18sm0KfiTgwdhqb6GBxpUcBgpbZfUH/+6u3pFqINE3pwQSBRstqwSio0o0qAQSBRstqwSio0o0qAQSBRstqwSio0o0qASai8klmE8SBfxVlnBdnFaH7YdiAoM38CfJL3iJmIAaECagBIQBiteVgDhCoYASEAYoXlcC4giFAkpAGKB4XQmIIxQK/B8C3pWzUO5lWjHVxlbjNsxeQxMaygI0ExJPst6Ax92mcm4PFppKhrkKZV+SS5YUDeUewR93G8ogk1WRt6Svz3E18JPUfnNn8AQ+AEV+WkBcQgngAAAAAElFTkSuQmCC"}}]);