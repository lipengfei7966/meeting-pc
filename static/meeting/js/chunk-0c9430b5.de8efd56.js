(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c9430b5"],{"80e3":function(t,e,i){},b40c:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.info?o("div",{staticClass:"orderInfo"},[o("div",{staticClass:"title"},[t._v(" 我的订单 - 结算单 - "),t.info?[t._v(" "+t._s(t.info.ordernum)+" ")]:t._e()],2),o("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"a_click",attrs:{href:t.downloadUrl,target:"_blank",download:""}}),t.info?o("div",{staticClass:"content"},[t.info.settlement_status===t.status_draft?o("div",{staticClass:"tips"},[o("p",[t._v(" 该草稿保存于"+t._s(t.info.submit_time?t.getFormatDate(t.info.submit_time):"")+" ")])]):t._e(),o("div",{staticClass:"step"},[t._v(" Step1 确认订单基本信息 "),o("p",{staticStyle:{color:"#428bca","font-size":"17px",float:"right"}},[1==t.info.event_info_configure.jsqrisdisplay?o("a",{staticStyle:{cursor:"pointer",margin:"0 10px"},attrs:{download:""},on:{click:t.downloadSettlementConfirm}},[t._v("下载结算确认单")]):t._e(),0==this.$route.params.issubmit?o("a",{staticStyle:{cursor:"pointer",margin:"0 10px"},attrs:{download:""},on:{click:t.excelDownload}},[t._v("下载结算Excel")]):t._e()])]),o("div",{staticClass:"info"},[o("div",{staticClass:"line"},[o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("订单号")]),o("div",{staticClass:"context"},[t._v(t._s(t.info.ordernum))])]),o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("联系人")]),o("div",{staticClass:"context"},[t._v(t._s(t.info.event_info.fullname))])])]),o("div",{staticClass:"line"},[o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("下单时间")]),o("div",{staticClass:"context"},[t._v(" "+t._s(t.info.orderdate?t.getFormatDate(t.info.orderdate):"")+" ")])]),o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("联系方式")]),o("div",{staticClass:"context"},[t._v(t._s(t.info.event_info.mobile))])])]),o("div",{staticClass:"line"},[o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("活动日期")]),o("div",{staticClass:"context"},[t._v(" "+t._s(t.info.event_info.event_startdate?t.getFormatDate(t.info.event_info.event_startdate).slice(0,10):"")+" 至 "+t._s(t.info.event_info.event_enddate?t.getFormatDate(t.info.event_info.event_enddate).slice(0,10):"")+" ")])]),o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("实际参会人数")]),o("div",{staticClass:"context"},[t._v(" 外部人数 "),o("el-input",{staticClass:"input_line",attrs:{readonly:t.readonly},on:{input:function(e){t.info.external_number=t.formatNum(t.info.external_number,1)}},model:{value:t.info.external_number,callback:function(e){t.$set(t.info,"external_number",e)},expression:"info.external_number"}}),t._v(" 人 内部人数 "),o("el-input",{staticClass:"input_line",attrs:{readonly:t.readonly},on:{input:function(e){t.info.internal_number=t.formatNum(t.info.internal_number,1)}},model:{value:t.info.internal_number,callback:function(e){t.$set(t.info,"internal_number",e)},expression:"info.internal_number"}}),t._v(" 人 总人数 "+t._s(t.positiveInteger(t.info.external_number)+t.positiveInteger(t.info.internal_number))+" 人 ")],1)])]),o("div",{staticClass:"line"},[o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("客户名称")]),o("div",{staticClass:"context"},[t._v(t._s(t.info.event_info.company_name))])]),o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("旅行社陪同人员")]),o("div",{staticClass:"context hotel"},[o("el-input",{staticClass:"input_line",staticStyle:{width:"200px"},attrs:{readonly:t.readonly},on:{input:function(e){t.info.travel_agency_escort=t.formatNum(t.info.travel_agency_escort,1)}},model:{value:t.info.travel_agency_escort,callback:function(e){t.$set(t.info,"travel_agency_escort",e)},expression:"info.travel_agency_escort"}}),t._v(" 人 ")],1)])]),o("div",{staticClass:"line"},[o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("活动名称")]),o("div",{staticClass:"context"},[t._v(t._s(t.info.event_info.event_name))])]),o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("PO单号")]),o("div",{staticClass:"context"},[o("el-input",{staticClass:"input_line",staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:t.info.event_info.pocode,callback:function(e){t.$set(t.info.event_info,"pocode",e)},expression:"info.event_info.pocode"}})],1)])]),o("div",{staticClass:"line"},[o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("报价日期")]),o("div",{staticClass:"context"},[t._v(" "+t._s(t.info.quotedpricedate?t.getFormatDate(t.info.quotedpricedate):"")+" ")])]),o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("采购酒店")]),o("div",{staticClass:"context"},[o("el-input",{staticClass:"input_line",staticStyle:{width:"200px"},attrs:{readonly:t.readonly},model:{value:t.info.hotelname,callback:function(e){t.$set(t.info,"hotelname",e)},expression:"info.hotelname"}}),o("el-checkbox",{staticStyle:{"line-height":"30px","margin-left":"20px"},attrs:{"true-label":1,"false-label":0},model:{value:t.info.isuser_preferred_hotel,callback:function(e){t.$set(t.info,"isuser_preferred_hotel",e)},expression:"info.isuser_preferred_hotel"}},[t._v("是否使用首选酒店")])],1)])])]),o("div",{staticClass:"step step_upflod"},[t._v(" Step2 上传结算相关凭证（必填） "),o("div",{staticClass:"showBase_tap",on:{click:function(e){t.showInfo=!t.showInfo}}},[o("img",{attrs:{src:t.showInfo?i("d991"):i("b93d"),alt:""}}),o("span",[t._v(t._s(t.showInfo?"收起":"展开"))])])]),o("table",{directives:[{name:"show",rawName:"v-show",value:t.showInfo,expression:"showInfo"}]},[t._m(0),t._l(t.arrayList,(function(e,i){return o("tbody",{key:i},[o("tr",[o("td",[t._v(t._s(e.name))]),o("td",[o("el-upload",{ref:"upload",refInFor:!0,attrs:{action:"","on-change":function(i,o){t.handleChangeAttach(i,o,t.type=e.type)},"on-remove":function(i,o){t.handleRemoveAttach(i,o,t.type=e.type)},"on-preview":t.handlePreview,"auto-upload":!1,"file-list":e.fileList,"show-file-list":!1,multiple:!1}},[o("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("从电脑选择文件")]),o("ul",{staticStyle:{"margin-top":"5px"}},t._l(e.fileList,(function(n,s){return o("li",{key:s,staticClass:"pitchOn",on:{click:function(e){return t.handlePreview(n)}}},[o("span",[t._v(t._s(n.name))]),o("span",{staticStyle:{color:"#199ed8",cursor:"pointer","margin-left":"30px"},on:{click:function(e){return e.stopPropagation(),t.fileRename(n,i,s)}}},[t._v("重命名")]),o("span",{staticStyle:{color:"#199ed8",cursor:"pointer","margin-left":"10px"},on:{click:function(o){return o.stopPropagation(),t.deleteFile(n,i,s,e.arrayLength)}}},[t._v("删除")]),n.create_date?o("span",{staticStyle:{"margin-left":"10px"}},[t._v("于"+t._s(t.getFormatDate(n.create_date))+"上传")]):t._e(),e.arrayLength==s&&t.isFail?o("span",{staticStyle:{color:"red","margin-left":"30px"}},[t._v("上传失败")]):t._e()])})),0)],1),o("el-dialog",{attrs:{"close-on-click-modal":!1,visible:t.rename,title:"请输入附件名称",width:"500px"},on:{"update:visible":function(e){t.rename=e}}},[o("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.fileName,callback:function(e){t.fileName=e},expression:"fileName"}},[o("template",{slot:"append"},[t._v(" "+t._s(t.suffix)+" ")])],2),o("span",{staticClass:"dialog-footer flex_row justify_center mar_t20",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.saveFileName()}}},[t._v("保存")])],1)],1)],1),o("td",[t._v(t._s(e.dissent))]),o("td",[o("el-input",{model:{value:e.remark,callback:function(i){t.$set(e,"remark",i)},expression:"item.remark"}})],1)])])}))],2),o("div",{staticClass:"step step_upflod"},[t._v(" Step3 填写结算明细（必填） "),o("div",{staticClass:"showBase_tap",on:{click:function(e){t.showPriceInfo=!t.showPriceInfo}}},[o("img",{attrs:{src:t.showPriceInfo?i("d991"):i("b93d"),alt:""}}),o("span",[t._v(t._s(t.showPriceInfo?"收起":"展开"))])])]),o("table",{directives:[{name:"show",rawName:"v-show",value:t.showPriceInfo,expression:"showPriceInfo"}]},[o("thead",[o("tr",{staticClass:"color_2"},[o("th",{staticClass:"color_3",attrs:{colspan:"4"}},[t._v(" 原订单总报价：¥"+t._s(t.positiveFloat(t.price[0]).toFixed(2))+" "),o("br"),t._v(" 原订单总报价(税前)：¥"+t._s(t.positiveFloat(t.positiveFloat(t.servicePrice[0])+(0===t.info.zhicai_service?t.positiveFloat(t.servicePrice[4]):t.positiveFloat(t.servicePrice[8]))+t.positiveFloat(t.price_no[0])).toFixed(2))+" "),o("br"),t._v(" 原订单总报价(净价)：¥"+t._s(t.positiveFloat(t.price_no[0]))+" ")]),o("th",{staticStyle:{position:"relative"},attrs:{colspan:"5"}},[t._v(" 订单总结算价：¥"+t._s(t.positiveFloat(t.price[1]).toFixed(2))+" "),o("br"),t._v(" 订单总结算价(税前)：¥"+t._s(t.positiveFloat(t.positiveFloat(t.servicePrice[1])+(0===t.info.zhicai_service?t.positiveFloat(t.servicePrice[5]):t.positiveFloat(t.servicePrice[9]))+t.positiveFloat(t.price_no[1])).toFixed(2))+" "),o("br"),t._v(" 订单总结算价(净价)：¥"+t._s(t.positiveFloat(t.price_no[1]))+" "),t.readonly?t._e():o("div",{staticClass:"add_settle"},[o("el-button",{staticClass:"el-icon-folder-add",attrs:{type:"primary",size:"mini"},on:{click:t.openAddSettle}},[t._v("添加结算项目")])],1)])])]),t.roomVisible?o("tbody",[o("tr",{staticClass:"color_2"},[t._m(1),o("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v(" 报价金额：¥"+t._s(t.positiveFloat(t.roomPrice[0].all))+" ")]),o("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v(" 结算金额：¥"+t._s(t.positiveFloat(t.roomPrice[1].all))+" ")]),o("th")])]):t._e(),t._l(t.info.roomlist,(function(e,i){return o("tbody",{key:"kefang"+i},[o("tr",{staticClass:"color_2"},[o("th",{staticClass:"color_3"},[o("i",[t._v(t._s(t._f("date_day_ex")(e.date)))])]),o("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.roomPrice[0].subtotal["sub_"+i]))+" ")]),o("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.roomPrice[1].subtotal["sub_"+i]))+" ")]),o("th",[t.issubmit?o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.addroom(e)}}},[t._v("添加客房")]):t._e()],1)]),o("tr",{staticClass:"color_2"},[o("th",{staticClass:"color_3"},[t._v("消费项目")]),o("th",{staticClass:"color_3"},[t._v("单价(元)")]),o("th",{staticClass:"color_3"},[t._v("数量")]),o("th",{staticClass:"color_3"},[t._v("金额(元)")]),o("th",[t._v("单价(元)")]),"0"==t.info.is_Inside_outside?o("th",[t._v("数量")]):t._e(),"1"==t.info.is_Inside_outside?o("th",[t._v("内部间数 外部间数")]):t._e(),o("th",[t._v("金额(元)")]),o("th",[t._v("客户异议")]),o("th",[t._v("结算说明")])]),t._l(e.roomlists,(function(i,n){return o("tr",{key:"room"+n,class:{difference:i.difference}},[o("td",{staticClass:"color_2"},[i.quoted_price_room_id?[t._v(" "+t._s(i.roomtypename)+" ")]:[o("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(e){return t.changekefang(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"room.settlement_itemid"}},t._l(t.roomcostProjects,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_room_id&&(i.otherrequirements||i.remarks)?o("el-tooltip",{staticClass:"describe-tooltip",attrs:{effect:"dark",placement:"top-end"}},[o("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.otherrequirements?o("div",[t._v(" 需求说明："+t._s(i.otherrequirements)+" ")]):t._e(),i.remarks?o("div",[t._v("报价备注："+t._s(i.remarks))]):t._e()]),o("el-button",{attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),o("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.unitprice)))]),o("td",{staticClass:"color_2"},["0"==t.info.is_Inside_outside?o("p",[t._v(" "+t._s(i.provide_count)+" ")]):t._e(),"1"==t.info.is_Inside_outside?o("div",[o("p",[t._v("内部人员："+t._s(i.inside_roomcount))]),o("p",[t._v("外部人员："+t._s(i.outside_roomcount))])]):t._e()]),o("td",{staticClass:"color_2"},[t._v(" ¥"+t._s(t.positiveFloat(i.quotationsumprice))+" ")]),o("td",[o("el-input",{class:{lineBack:!!i.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_unitprice=t.formatNum(i.settlement_unitprice,2)}},model:{value:i.settlement_unitprice,callback:function(e){t.$set(i,"settlement_unitprice",e)},expression:"room.settlement_unitprice"}})],1),o("td",["0"==t.info.is_Inside_outside?o("el-input",{class:{lineBack:!!i.lineoroffline},staticStyle:{width:"50%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,3)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"room.settlement_count"}}):t._e(),"1"==t.info.is_Inside_outside?o("div",{staticStyle:{display:"flex"}},[o("el-input",{class:{lineBack:!!i.lineoroffline},staticStyle:{width:"55%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_inside_roomcount=t.formatNum(i.settlement_inside_roomcount,3),i.settlement_count=t.positiveFloat(i.settlement_inside_roomcount)+t.positiveFloat(i.settlement_outside_roomcount)}},model:{value:i.settlement_inside_roomcount,callback:function(e){t.$set(i,"settlement_inside_roomcount",e)},expression:"room.settlement_inside_roomcount"}}),o("el-input",{class:{lineBack:!!i.lineoroffline},staticStyle:{width:"55%","margin-left":"10px"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_outside_roomcount=t.formatNum(i.settlement_outside_roomcount,3),i.settlement_count=t.positiveFloat(i.settlement_inside_roomcount)+t.positiveFloat(i.settlement_outside_roomcount)}},model:{value:i.settlement_outside_roomcount,callback:function(e){t.$set(i,"settlement_outside_roomcount",e)},expression:"room.settlement_outside_roomcount"}})],1):t._e()],1),i.lineoroffline?t._e():o("td",[t._v(" ¥"+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_unitprice)*t.positiveFloat(i.settlement_count)))+" ")]),o("td",[t._v(t._s(i.settlement_customer_objection))]),o("td",[o("el-input",{class:{difference:t.roomDifference(i),line:!i.quoted_price_room_id,lineBack:!!i.lineoroffline},attrs:{readonly:t.readonly||!!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"room.settlement_comments"}}),!i.quoted_price_room_id&&t.issubmit?o("el-button",{attrs:{icon:"el-icon-delete",type:"danger",disabled:t.readonly||!!i.lineoroffline,circle:"",size:"mini"},on:{click:function(i){return t.delroom(e,n)}}}):t._e()],1)])}))],2)})),t.roomVisible?o("tbody",[o("tr",{staticClass:"color_2"},[o("th",{staticClass:"color_3"},[t._v("杂费小计")]),o("th",{staticClass:"color_3"}),o("th",{staticClass:"color_3"}),o("th",{staticClass:"color_3"}),o("th"),o("th"),o("th",{staticStyle:{"text-align":"right"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.roomPrice[2]))+" ")]),o("th",[t._v("客户异议")]),o("th",[t.issubmit?o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addOther(1)}}},[t._v("添加杂费")]):t._e()],1)]),t._l(t.roomincidental,(function(e){return o("tr",{key:e.id},[o("td",{staticClass:"color_2"},[o("el-input",{attrs:{readonly:t.readonly||!!e.lineoroffline,placeholder:"杂费项名称"},model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"roomzf.content"}})],1),o("td",{staticClass:"color_2"},[o("el-checkbox",{attrs:{disabled:t.readonly||!!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"roomzf.isnotservice"}},[t._v("计入服务费")])],1),o("td",{staticClass:"color_2"}),o("td",{staticClass:"color_2"}),o("td",[o("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"roomzf.price"}})],1),o("td",[o("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"roomzf.count"}})],1),e.lineoroffline?t._e():o("td",[t._v(" ¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count)))+" ")]),o("td",[t._v(t._s(e.settlement_customer_objection))]),o("td",[o("el-input",{staticClass:"line",class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"roomzf.comments"}}),t.issubmit?o("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)])}))],2):t._e(),t.conferenceVisible?o("tbody",[o("tr",{staticClass:"color_2"},[t._m(2),o("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v(" 报价金额：¥"+t._s(t.positiveFloat(t.conferencePrice[0].all))+" ")]),o("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v(" 结算金额：¥"+t._s(t.positiveFloat(t.conferencePrice[1].all))+" ")]),o("th")])]):t._e(),t._l(t.info.conferencelist,(function(e,i){return o("tbody",{key:"huiyi"+i},[o("tr",{staticClass:"color_2"},[o("th",{staticClass:"color_3"},[o("i",[t._v(t._s(t._f("date_day_ex")(e.date)))])]),o("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.conferencePrice[0].subtotal["sub_"+i]))+" ")]),o("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.conferencePrice[1].subtotal["sub_"+i]))+" ")]),o("th",[t.issubmit?o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.addconference(e)}}},[t._v("添加会场")]):t._e()],1)]),t._m(3,!0),t._l(e.conferencelists,(function(i,n){return o("tr",{key:"conference"+n},[o("td",{staticClass:"color_2"},[i.quoted_price_conference_id?[1==i.type?[t._v(" "+t._s("场租-会场"+i.order_name+"("+i.roomsetuptypename+";会议时间:"+i.starttime+"~"+i.endtime+";出席人数:"+i.attendees+"人)")+" ")]:t._e(),2==i.type?[t._v(" "+t._s("会场搭建费-"+i.related_information+" ("+i.roomsetuptypename+")")+" ")]:t._e(),3==i.type?[t._v(" "+t._s("设备-会场"+i.order_name+"("+i.roomsetuptypename+";"+i.equipment+")")+" ")]:t._e(),4==i.type?[t._v(" "+t._s(i.settlement_itemname)+" ")]:t._e()]:[o("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(e){return t.changehuichang(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"conference.settlement_itemid"}},t._l(t.meetingcostProjects,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_conference_id&&(i.describe||i.comments)?o("el-tooltip",{staticClass:"describe-tooltip",attrs:{effect:"dark",placement:"top-end"}},[o("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.describe?o("div",[t._v(" 需求说明："+t._s(i.describe)+" ")]):t._e(),i.comments?o("div",[t._v(" 报价备注："+t._s(i.comments)+" ")]):t._e()]),o("el-button",{attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),o("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.price)))]),o("td",{staticClass:"color_2"},[t._v(t._s(i.count))]),o("td",{staticClass:"color_2"},[t._v(" ¥"+t._s(t.positiveFloat(i.quotationsumprice?i.quotationsumprice:0))+" ")]),o("td",[o("el-input",{class:{lineBack:!!i.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_price=t.formatNum(i.settlement_price,2)}},model:{value:i.settlement_price,callback:function(e){t.$set(i,"settlement_price",e)},expression:"conference.settlement_price"}})],1),o("td",[o("el-input",{class:{lineBack:!!i.lineoroffline},staticStyle:{width:"50%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,2)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"conference.settlement_count"}})],1),i.lineoroffline?t._e():o("td",[t._v(" ¥"+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_price)*t.positiveFloat(i.settlement_count)))+" ")]),o("td",[t._v(t._s(i.settlement_customer_objection))]),o("td",[o("el-input",{class:{difference:t.conferenceDifference(i),line:!i.quoted_price_conference_id,lineBack:!!i.lineoroffline},attrs:{readonly:t.readonly||!!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"conference.settlement_comments"}}),!i.quoted_price_conference_id&&t.issubmit?o("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!i.lineoroffline},on:{click:function(i){return t.delconference(e,n)}}}):t._e()],1)])}))],2)})),t.conferenceVisible?o("tbody",[o("tr",{staticClass:"color_2"},[o("th",{staticClass:"color_3"},[t._v("杂费小计")]),o("th",{staticClass:"color_3"}),o("th",{staticClass:"color_3"}),o("th",{staticClass:"color_3"}),o("th"),o("th"),o("th",{staticStyle:{"text-align":"right"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.conferencePrice[2]))+" ")]),o("th",[t._v("客户异议")]),o("th",[t.issubmit?o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addOther(2)}}},[t._v("添加杂费")]):t._e()],1)]),t._l(t.meetingcidental,(function(e){return o("tr",{key:e.id},[o("td",{staticClass:"color_2"},[o("el-input",{attrs:{readonly:t.readonly||!!e.lineoroffline,placeholder:"杂费项名称"},model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"conferencezf.content"}})],1),o("td",{staticClass:"color_2"},[o("el-checkbox",{attrs:{disabled:t.readonly||!!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"conferencezf.isnotservice"}},[t._v(" 计入服务费 ")])],1),o("td",{staticClass:"color_2"}),o("td",{staticClass:"color_2"}),o("td",[o("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"conferencezf.price"}})],1),o("td",[o("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"conferencezf.count"}})],1),e.lineoroffline?t._e():o("td",[t._v(" ¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count)))+" ")]),o("td",[t._v(t._s(e.settlement_customer_objection))]),o("td",[o("el-input",{staticClass:"line",class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"conferencezf.comments"}}),t.issubmit?o("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)])}))],2):t._e(),t.foodVisible?o("tbody",[o("tr",{staticClass:"color_2"},[t._m(4),o("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v(" 报价金额：¥"+t._s(t.positiveFloat(t.foodPrice[0].all))+" ")]),o("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v(" 结算金额：¥"+t._s(t.positiveFloat(t.foodPrice[1].all))+" ")]),o("th")])]):t._e(),t._l(t.info.foodlist,(function(e,i){return o("tbody",{key:"hotelcanyininside"+i},[o("tr",{staticClass:"color_2"},[o("th",{staticClass:"color_3"},[o("i",[t._v(t._s(t._f("date_day_ex")(e.date)))])]),o("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.foodPrice[0].subtotal["sub_"+i]))+" ")]),o("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.foodPrice[1].subtotal["sub_"+i]))+" ")]),o("th",[t.issubmit?o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.addfood(e)}}},[t._v("添加餐饮")]):t._e()],1)]),t._m(5,!0),t._l(e.foodlists,(function(i,n){return o("tr",{key:"food"+n},[o("td",{staticClass:"color_2"},[i.quoted_price_food_id?[t._v(" "+t._s(i.foodtypename)+" "),i.usetypename?o("span",[t._v("["+t._s(i.usetypename)+"]")]):t._e()]:[o("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(e){return t.changehotelnei(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"food.settlement_itemid"}},t._l(t.foodcostProjects,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_food_id&&(i.comments||i.offer_remarks)?o("el-tooltip",{staticClass:"describe-tooltip",attrs:{effect:"dark",placement:"top-end"}},[o("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.comments?o("div",[t._v("需求说明："+t._s(i.comments))]):t._e(),i.offer_remarks?o("div",[t._v(" 报价备注："+t._s(i.offer_remarks)+" ")]):t._e()]),o("el-button",{attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),o("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.price)))]),o("td",{staticClass:"color_2"},[t._v(t._s(i.personcount))]),o("td",{staticClass:"color_2"},[t._v(" ¥"+t._s(t.positiveFloat(i.quotationsumprice))+" ")]),o("td",[o("el-input",{class:{lineBack:!!i.lineoroffline},attrs:{readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_unitprice=t.formatNum(i.settlement_unitprice,2)}},model:{value:i.settlement_unitprice,callback:function(e){t.$set(i,"settlement_unitprice",e)},expression:"food.settlement_unitprice"}})],1),o("td",[o("el-input",{class:{lineBack:!!i.lineoroffline},staticStyle:{width:"50%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,2)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"food.settlement_count"}})],1),i.lineoroffline?t._e():o("td",[t._v(" ¥"+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_unitprice)*t.positiveFloat(i.settlement_count)))+" ")]),o("td",[t._v(t._s(i.settlement_customer_objection))]),o("td",[o("el-input",{class:{difference:t.foodDifference(i),line:!i.quoted_price_food_id,lineBack:!!i.lineoroffline},attrs:{readonly:t.readonly||!!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"food.settlement_comments"}}),!i.quoted_price_food_id&&t.issubmit?o("el-button",{attrs:{icon:"el-icon-delete",type:"danger",disabled:t.readonly||!!i.lineoroffline,circle:"",size:"mini"},on:{click:function(i){return t.delfood(e,n)}}}):t._e()],1)])}))],2)})),t.foodVisible?o("tbody",[o("tr",{staticClass:"color_2"},[o("th",{staticClass:"color_3"},[t._v("杂费小计")]),o("th",{staticClass:"color_3"}),o("th",{staticClass:"color_3"}),o("th",{staticClass:"color_3"}),o("th"),o("th"),o("th",{staticStyle:{"text-align":"right"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.foodPrice[2]))+" ")]),o("th",[t._v("客户异议")]),o("th",[t.issubmit?o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addOther(3)}}},[t._v("添加杂费")]):t._e()],1)]),t._l(t.foodincidental,(function(e){return o("tr",{key:e.id},[o("td",{staticClass:"color_2"},[o("el-input",{attrs:{readonly:t.readonly||!!e.lineoroffline,placeholder:"杂费项名称"},model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"foodzf.content"}})],1),o("td",{staticClass:"color_2"},[o("el-checkbox",{attrs:{disabled:t.readonly||!!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"foodzf.isnotservice"}},[t._v("计入服务费")])],1),o("td",{staticClass:"color_2"}),o("td",{staticClass:"color_2"}),o("td",[o("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"foodzf.price"}})],1),o("td",[o("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"foodzf.count"}})],1),e.lineoroffline?t._e():o("td",[t._v(" ¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count)))+" ")]),o("td",[t._v(t._s(e.settlement_customer_objection))]),o("td",[o("el-input",{staticClass:"line",class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"foodzf.comments"}}),t.issubmit?o("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)])}))],2):t._e(),t.otherfoodVisible?o("tbody",[o("tr",{staticClass:"color_2"},[t._m(6),o("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v(" 报价金额：¥"+t._s(t.positiveFloat(t.otherfoodPrice[0].all))+" ")]),o("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v(" 结算金额：¥"+t._s(t.positiveFloat(t.otherfoodPrice[1].all))+" ")]),o("th")])]):t._e(),t._l(t.info.otherfoodlist,(function(e,i){return o("tbody",{key:"otherhotelcanyininside"+i},[o("tr",{staticClass:"color_2"},[o("th",{staticClass:"color_3"},[o("i",[t._v(t._s(t._f("date_day_ex")(e.date)))])]),o("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.otherfoodPrice[0].subtotal["sub_"+i]))+" ")]),o("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.otherfoodPrice[1].subtotal["sub_"+i]))+" ")]),o("th",[t.issubmit?o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.addotherfood(e)}}},[t._v("添加餐饮")]):t._e()],1)]),t._m(7,!0),t._l(e.foodlists,(function(i,n){return o("tr",{key:"food"+n},[o("td",{staticClass:"color_2"},[i.quoted_price_food_id?[t._v(" "+t._s(i.foodtypename)+" "),i.usetypename?o("span",[t._v("["+t._s(i.usetypename)+"]")]):t._e()]:[o("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(e){return t.changehotelwai(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"food.settlement_itemid"}},t._l(t.otherfoodcostProjects,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_food_id&&(i.comments||i.offer_remarks)?o("el-tooltip",{staticClass:"describe-tooltip",attrs:{effect:"dark",placement:"top-end"}},[o("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.comments?o("div",[t._v("需求说明："+t._s(i.comments))]):t._e(),i.offer_remarks?o("div",[t._v(" 报价备注："+t._s(i.offer_remarks)+" ")]):t._e()]),o("el-button",{attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),o("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.price)))]),o("td",{staticClass:"color_2"},[t._v(t._s(i.personcount))]),o("td",{staticClass:"color_2"},[t._v(" ¥"+t._s(t.positiveFloat(i.quotationsumprice))+" ")]),o("td",[o("el-input",{class:{lineBack:!!i.lineoroffline},attrs:{readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_unitprice=t.formatNum(i.settlement_unitprice,2)}},model:{value:i.settlement_unitprice,callback:function(e){t.$set(i,"settlement_unitprice",e)},expression:"food.settlement_unitprice"}})],1),o("td",[o("el-input",{class:{lineBack:!!i.lineoroffline},staticStyle:{width:"50%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,2)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"food.settlement_count"}})],1),i.lineoroffline?t._e():o("td",[t._v(" ¥"+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_unitprice)*t.positiveFloat(i.settlement_count)))+" ")]),o("td",[t._v(t._s(i.settlement_customer_objection))]),o("td",[o("el-input",{class:{difference:t.otherFoodDifference(i),line:!i.quoted_price_food_id,lineBack:!!i.lineoroffline},attrs:{readonly:t.readonly||!!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"food.settlement_comments"}}),!i.quoted_price_food_id&&t.issubmit?o("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!i.lineoroffline},on:{click:function(i){return t.delotherfood(e,n)}}}):t._e()],1)])}))],2)})),t.otherfoodVisible?o("tbody",[o("tr",{staticClass:"color_2"},[o("th",{staticClass:"color_3"},[t._v("杂费小计")]),o("th",{staticClass:"color_3"}),o("th",{staticClass:"color_3"}),o("th",{staticClass:"color_3"}),o("th"),o("th"),o("th",{staticStyle:{"text-align":"right"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.otherfoodPrice[2]))+" ")]),o("th",[t._v("客户异议")]),o("th",[t.issubmit?o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addOther(7)}}},[t._v("添加杂费")]):t._e()],1)]),t._l(t.otherfoodincidental,(function(e){return o("tr",{key:e.id},[o("td",{staticClass:"color_2"},[o("el-input",{attrs:{readonly:t.readonly||!!e.lineoroffline,placeholder:"杂费项名称"},model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"foodzf.content"}})],1),o("td",{staticClass:"color_2"},[o("el-checkbox",{attrs:{disabled:t.readonly||!!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"foodzf.isnotservice"}},[t._v("计入服务费")])],1),o("td",{staticClass:"color_2"}),o("td",{staticClass:"color_2"}),o("td",[o("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"foodzf.price"}})],1),o("td",[o("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"foodzf.count"}})],1),e.lineoroffline?t._e():o("td",[t._v(" ¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count)))+" ")]),o("td",[t._v(t._s(e.settlement_customer_objection))]),o("td",[o("el-input",{staticClass:"line",class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"foodzf.comments"}}),t.issubmit?o("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)])}))],2):t._e(),t.transportationVisible?o("tbody",[o("tr",{staticClass:"color_2"},[t._m(8),o("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v(" 报价金额：¥"+t._s(t.positiveFloat(t.intercitytrafficPrice[0].all))+" ")]),o("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v(" 结算金额：¥"+t._s(t.positiveFloat(t.intercitytrafficPrice[1].all))+" ")]),o("th")])]):t._e(),t._l(t.info.transportationlist,(function(e,i){return o("tbody",{key:"chengji"+i},[o("tr",{staticClass:"color_2"},[o("th",{staticClass:"color_3"},[o("i",[t._v(t._s(t._f("date_day_ex")(e.date)))])]),o("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.intercitytrafficPrice[0].subtotal["sub_"+i]))+" ")]),o("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.intercitytrafficPrice[1].subtotal["sub_"+i]))+" ")]),o("th",[t.issubmit?o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.addstransportation(e)}}},[t._v("添加交通")]):t._e()],1)]),t._m(9,!0),t._l(e.tranlists,(function(i,n){return o("tr",{key:"transportation"+n},[o("td",{staticClass:"color_2"},[i.quoted_price_transportation_id?[t._v(" "+t._s(i.joinname)+" ")]:[o("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(e){return t.changebigcar(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"transportation.settlement_itemid"}},t._l(t.transportationcostProjects,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_transportation_id&&(i.requirement||i.offerremarks)?o("el-tooltip",{staticClass:"describe-tooltip",attrs:{effect:"dark",placement:"top-end"}},[o("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.requirement?o("div",[t._v(" 需求说明："+t._s(i.requirement)+" ")]):t._e(),i.offerremarks?o("div",[t._v(" 报价备注："+t._s(i.offerremarks)+" ")]):t._e()]),o("el-button",{attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),o("td",{staticClass:"color_2"},[t._v(" ¥"+t._s(t.positiveFloat(i.unitprice))+" ")]),o("td",{staticClass:"color_2"},[t._v(t._s(i.passengercount))]),o("td",{staticClass:"color_2"},[t._v(" ¥"+t._s(t.positiveFloat(i.quotationsumprice))+" ")]),o("td",[o("el-input",{class:{lineBack:!!i.lineoroffline},attrs:{readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_unitprice=t.formatNum(i.settlement_unitprice,2)}},model:{value:i.settlement_unitprice,callback:function(e){t.$set(i,"settlement_unitprice",e)},expression:"transportation.settlement_unitprice"}})],1),o("td",[o("el-input",{class:{lineBack:!!i.lineoroffline},staticStyle:{width:"50%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,2)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"transportation.settlement_count"}})],1),i.lineoroffline?t._e():o("td",[t._v(" ¥"+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_unitprice)*t.positiveFloat(i.settlement_count)))+" ")]),o("td",[t._v(t._s(i.settlement_customer_objection))]),o("td",[o("el-input",{class:{difference:t.transportationDifference(i),line:!i.quoted_price_transportation_id,lineBack:!!i.lineoroffline},attrs:{readonly:t.readonly||!!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"transportation.settlement_comments"}}),!i.quoted_price_transportation_id&&t.issubmit?o("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!i.lineoroffline},on:{click:function(i){return t.delstransportation(e,n)}}}):t._e()],1)])}))],2)})),t.transportationVisible?o("tbody",[o("tr",{staticClass:"color_2"},[o("th",{staticClass:"color_3"},[t._v("杂费小计")]),o("th",{staticClass:"color_3"}),o("th",{staticClass:"color_3"}),o("th",{staticClass:"color_3"}),o("th"),o("th"),o("th",{staticStyle:{"text-align":"right"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.intercitytrafficPrice[2]))+" ")]),o("th",[t._v("客户异议")]),o("th",[t.issubmit?o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addOther(4)}}},[t._v("添加杂费")]):t._e()],1)]),t._l(t.intercitytrafficincidental,(function(e){return o("tr",{key:e.id},[o("td",{staticClass:"color_2"},[o("el-select",{attrs:{disabled:t.readonly||!!e.lineoroffline,placeholder:"请选择乘坐工具"},model:{value:e.itemcode,callback:function(i){t.$set(e,"itemcode",i)},expression:"transportationzf.itemcode"}},t._l(t.info.trantypelist,(function(t){return o("el-option",{key:t.trancode,attrs:{value:t.trancode,label:t.tranname}})})),1)],1),o("td",{staticClass:"color_2"},[o("el-checkbox",{attrs:{disabled:t.readonly||!!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"transportationzf.isnotservice"}},[t._v(" 计入服务费 ")])],1),o("td",{staticClass:"color_2"}),o("td",{staticClass:"color_2"}),o("td",[o("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"transportationzf.price"}})],1),o("td",[o("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"transportationzf.count"}})],1),e.lineoroffline?t._e():o("td",[t._v(" ¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count)))+" ")]),o("td",[t._v(t._s(e.settlement_customer_objection))]),o("td",[o("el-input",{staticClass:"line",class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"transportationzf.comments"}}),t.issubmit?o("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)])}))],2):t._e(),t.carVisible?o("tbody",[o("tr",{staticClass:"color_2"},[t._m(10),o("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v(" 报价金额：¥"+t._s(t.positiveFloat(t.carPrice[0].all))+" ")]),o("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v(" 结算金额：¥"+t._s(t.positiveFloat(t.carPrice[1].all))+" ")]),o("th")])]):t._e(),t._l(t.info.carlist,(function(e,i){return o("tbody",{key:"shinei"+i},[o("tr",{staticClass:"color_2"},[o("th",{staticClass:"color_3"},[o("i",[t._v(t._s(t._f("date_day_ex")(e.date)))])]),o("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.carPrice[0].subtotal["sub_"+i]))+" ")]),o("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.carPrice[1].subtotal["sub_"+i]))+" ")]),o("th",[t.issubmit?o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.addcar(e)}}},[t._v("添加交通")]):t._e()],1)]),t._m(11,!0),t._l(e.carlists,(function(i,n){return o("tr",{key:"car"+n},[o("td",{staticClass:"color_2"},[i.quoted_price_car_id?[t._v(" "+t._s(i.purposename+"("+i.vehicletypename+";搭乘人数:"+i.vehiclecount+"人;用车城市:"+i.city+")")+" ")]:[o("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(e){return t.changecar(e,i)}},model:{value:i.settlement_itemid,callback:function(e){t.$set(i,"settlement_itemid",e)},expression:"car.settlement_itemid"}},t._l(t.carcostProjects,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],i.quoted_price_car_id&&(i.explain||i.offer_remarks)?o("el-tooltip",{staticClass:"describe-tooltip",attrs:{effect:"dark",placement:"top-end"}},[o("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[i.explain?o("div",[t._v("需求说明："+t._s(i.explain))]):t._e(),i.offer_remarks?o("div",[t._v(" 报价备注："+t._s(i.offer_remarks)+" ")]):t._e()]),o("el-button",{attrs:{type:"text"}},[t._v("备注")])],1):t._e()],2),o("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.price)))]),o("td",{staticClass:"color_2"},[t._v(t._s(i.carcount))]),o("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(i.quotationsumprice)))]),o("td",[o("el-input",{class:{lineBack:!!i.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_unitprice=t.formatNum(i.settlement_unitprice,2)}},model:{value:i.settlement_unitprice,callback:function(e){t.$set(i,"settlement_unitprice",e)},expression:"car.settlement_unitprice"}})],1),o("td",[o("el-input",{class:{lineBack:!!i.lineoroffline},staticStyle:{width:"50%"},attrs:{placeholder:"请输入数量",readonly:t.readonly||!!i.lineoroffline},on:{input:function(e){i.settlement_count=t.formatNum(i.settlement_count,2)}},model:{value:i.settlement_count,callback:function(e){t.$set(i,"settlement_count",e)},expression:"car.settlement_count"}})],1),i.lineoroffline?t._e():o("td",[t._v(" ¥"+t._s(t.positiveFloat(t.positiveFloatSix(i.settlement_unitprice)*t.positiveFloat(i.settlement_count)))+" ")]),o("td",[t._v(t._s(i.settlement_customer_objection))]),o("td",[o("el-input",{class:{difference:t.carDifference(i),line:!i.quoted_price_car_id,lineBack:!!i.lineoroffline},attrs:{readonly:t.readonly||!!i.lineoroffline},model:{value:i.settlement_comments,callback:function(e){t.$set(i,"settlement_comments",e)},expression:"car.settlement_comments"}}),!i.quoted_price_car_id&&t.issubmit?o("el-button",{attrs:{icon:"el-icon-delete",type:"danger",disabled:t.readonly||!!i.lineoroffline,circle:"",size:"mini"},on:{click:function(i){return t.delcar(e,n)}}}):t._e()],1)])}))],2)})),t.carVisible?o("tbody",[o("tr",{staticClass:"color_2"},[o("th",{staticClass:"color_3"},[t._v("杂费小计")]),o("th",{staticClass:"color_3"}),o("th",{staticClass:"color_3"}),o("th",{staticClass:"color_3"}),o("th"),o("th"),o("th",{staticStyle:{"text-align":"right"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.carPrice[2]))+" ")]),o("th",[t._v("客户异议")]),o("th",[t.issubmit?o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addOther(5)}}},[t._v("添加杂费")]):t._e()],1)]),t._l(t.carincidental,(function(e){return o("tr",{key:e.id},[o("td",{staticClass:"color_2"},[o("el-input",{attrs:{readonly:t.readonly||!!e.lineoroffline,placeholder:"杂费项名称"},model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"carzf.content"}})],1),o("td",{staticClass:"color_2"},[o("el-checkbox",{attrs:{disabled:t.readonly||!!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"carzf.isnotservice"}},[t._v("计入服务费")])],1),o("td",{staticClass:"color_2"}),o("td",{staticClass:"color_2"}),o("td",[o("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"carzf.price"}})],1),o("td",[o("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"carzf.count"}})],1),e.lineoroffline?t._e():o("td",[t._v(" ¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count)))+" ")]),o("td",[t._v(t._s(e.settlement_customer_objection))]),o("td",[o("el-input",{staticClass:"line",class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"carzf.comments"}}),t.issubmit?o("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)])}))],2):t._e(),o("tbody",[o("tr",{staticClass:"color_2"},[t._m(12),o("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v(" 报价金额：¥"+t._s(t.positiveFloat(t.otherPrice[0]))+" ")]),o("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v(" 结算金额：¥"+t._s(t.positiveFloat(t.otherPrice[1]))+" ")]),o("th",[t.issubmit?o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addsundry()}}},[t._v("添加其他")]):t._e()],1)])]),o("tbody",[t._m(13),t._l(t.info.otherlist,(function(e,i){return o("tr",{key:"other"+i},[o("td",{staticClass:"color_2"},[e.quoted_price_other_id?o("div",[t._v(" "+t._s(e.servicetypename)+" ")]):o("div",[o("el-select",{attrs:{loading:t.cost_project_load,size:"small",filterable:""},on:{change:function(o){return t.changeOtherSel(e,i,o)}},model:{value:e.settlement_itemid,callback:function(i){t.$set(e,"settlement_itemid",i)},expression:"other.settlement_itemid"}},t._l(t.othercostProjects,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e.quoted_price_other_id&&(e.describe||e.offer_remarks)?o("el-tooltip",{staticClass:"describe-tooltip",attrs:{effect:"dark",placement:"top-end"}},[o("div",{staticStyle:{width:"150px"},attrs:{slot:"content"},slot:"content"},[e.describe?o("div",[t._v(" 需求说明："+t._s(e.describe)+" ")]):t._e(),e.offer_remarks?o("div",[t._v(" 报价备注："+t._s(e.offer_remarks)+" ")]):t._e()]),o("el-button",{attrs:{type:"text"}},[t._v("备注")])],1):t._e()],1),e.quoted_price_other_id?o("td",{staticClass:"color_2"},[t._v(" "+t._s(t.positiveFloat(e.price))+" ")]):t._e(),e.quoted_price_other_id?o("td",{staticClass:"color_2"},[t._v(" "+t._s(e.offerparticipatecount)+" ")]):t._e(),e.quoted_price_other_id?o("td",{staticClass:"color_2"},[t._v(" ¥"+t._s(t.positiveFloat(e.quotationsumprice))+" ")]):t._e(),e.quoted_price_other_id?t._e():o("td",{staticClass:"color_2 otherFee",attrs:{colspan:"3"}},[o("div",[[o("el-select",{directives:[{name:"show",rawName:"v-show",value:["009-5","009-6","009-7","009-11","009-12"].includes(e.settlement_itemid),expression:"\n                      ['009-5', '009-6', '009-7', '009-11', '009-12'].includes(\n                        other.settlement_itemid\n                      )\n                    "}],staticStyle:{width:"200px"},attrs:{clearable:"",size:"small"},model:{value:e.two_level_code,callback:function(i){t.$set(e,"two_level_code",i)},expression:"other.two_level_code"}},t._l(e.detail,(function(t){return o("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),1)],o("el-checkbox",{attrs:{disabled:t.readonly||!!e.lineoroffline||!0,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"other.isnotservice"}},[t._v(" 计入服务费 ")]),t.info.event_info_configure.service_fee_calculation_method?t._e():o("div",[o("span",[t._v("*")]),o("el-input",{staticStyle:{width:"30%"},attrs:{disabled:!e.isnotservice||!!t.info.event_info_configure.service_fee_calculation_method,readonly:t.readonly||!!e.lineoroffline||!0},on:{input:function(i){e.settlementservice_taxrate=t.formatNum(e.settlementservice_taxrate)}},model:{value:e.settlementservice_taxrate,callback:function(i){t.$set(e,"settlementservice_taxrate",i)},expression:"other.settlementservice_taxrate"}}),t._v(" % ")],1)],2)]),o("td",[o("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.settlement_unitprice=t.formatNum(e.settlement_unitprice,2)}},model:{value:e.settlement_unitprice,callback:function(i){t.$set(e,"settlement_unitprice",i)},expression:"other.settlement_unitprice"}})],1),o("td",[o("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.settlement_count=t.positiveFloatOne(e.settlement_count)}},model:{value:e.settlement_count,callback:function(i){t.$set(e,"settlement_count",i)},expression:"other.settlement_count"}})],1),e.lineoroffline?t._e():o("td",[t._v(" ¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.settlement_unitprice)*t.positiveFloat(e.settlement_count)))+" ")]),o("td",[t._v(t._s(e.settlement_customer_objection))]),o("td",[o("el-input",{class:{difference:t.otherDifference(e),line:!e.quoted_price_other_id,lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},model:{value:e.settlement_comments,callback:function(i){t.$set(e,"settlement_comments",i)},expression:"other.settlement_comments"}}),!e.quoted_price_other_id&&t.issubmit?o("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!e.lineoroffline},on:{click:function(e){return t.delsother(t.item,i)}}}):t._e()],1)])}))],2),o("tbody",[o("tr",{staticClass:"color_2"},[o("th",{staticClass:"color_3"},[t._v("杂费小计")]),o("th",{staticClass:"color_3"}),o("th",{staticClass:"color_3"}),o("th",{staticClass:"color_3"}),o("th"),o("th"),o("th",{staticStyle:{"text-align":"right"}},[t._v(" 小计：¥"+t._s(t.positiveFloat(t.otherPrice[2]))+" ")]),o("th",[t._v("客户异议")]),o("th",[t.issubmit?o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addOther(6)}}},[t._v("添加杂费")]):t._e()],1)]),t._l(t.otherincidental,(function(e){return o("tr",{key:e.id},[o("td",{staticClass:"color_2"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"otherzf.content"}],attrs:{type:"text",readonly:t.readonly||!!e.lineoroffline,placeholder:"杂费项名称"},domProps:{value:e.content},on:{input:function(i){i.target.composing||t.$set(e,"content",i.target.value)}}})]),o("td",{staticClass:"color_2 otherFee",attrs:{colspan:"3"}},[o("div",[o("el-checkbox",{attrs:{disabled:t.readonly||!!e.lineoroffline,"true-label":1,"false-label":0},model:{value:e.isnotservice,callback:function(i){t.$set(e,"isnotservice",i)},expression:"otherzf.isnotservice"}},[t._v(" 计入服务费 ")]),t.info.event_info_configure.service_fee_calculation_method?t._e():o("div",[o("span",[t._v("*")]),o("el-input",{staticStyle:{width:"30%"},attrs:{readonly:t.readonly,disabled:!e.isnotservice||!!t.info.event_info_configure.service_fee_calculation_method},on:{input:function(i){e.settlementservice_taxrate=t.formatNum(e.settlementservice_taxrate)}},model:{value:e.settlementservice_taxrate,callback:function(i){t.$set(e,"settlementservice_taxrate",i)},expression:"otherzf.settlementservice_taxrate"}}),t._v(" % ")],1)],1)]),o("td",[o("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{type:"text",readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"otherzf.price"}})],1),o("td",[o("el-input",{class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},on:{input:function(i){e.count=t.positiveFloatOne(e.count)}},model:{value:e.count,callback:function(i){t.$set(e,"count",i)},expression:"otherzf.count"}})],1),e.lineoroffline?t._e():o("td",[t._v(" ¥"+t._s(t.positiveFloat(t.positiveFloatSix(e.price)*t.positiveFloat(e.count)))+" ")]),o("td",[t._v(t._s(e.settlement_customer_objection))]),o("td",[o("el-input",{staticClass:"line",class:{lineBack:!!e.lineoroffline},attrs:{readonly:t.readonly||!!e.lineoroffline},model:{value:e.comments,callback:function(i){t.$set(e,"comments",i)},expression:"otherzf.comments"}}),t.issubmit?o("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini",disabled:t.readonly||!!e.lineoroffline},on:{click:function(i){return t.delOther(e.id)}}}):t._e()],1)])}))],2),o("tbody",[o("tr",{staticClass:"color_2"},[t._m(14),o("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v(" 报价金额：¥"+t._s(t.positiveFloat(t.positiveFloatSix(t.servicePrice[0])+(0==t.info.zhicai_service?t.positiveFloatSix(t.servicePrice[4]):t.positiveFloatSix(t.servicePrice[8]))).toFixed(2))+" ")]),o("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v(" 结算金额：¥"+t._s(t.positiveFloat(t.positiveFloatSix(t.servicePrice[1])+(0==t.info.zhicai_service?t.positiveFloatSix(t.servicePrice[5]):t.positiveFloatSix(t.servicePrice[9]))).toFixed(2))+" ")]),o("th")])]),o("tbody",[t._m(15),o("tr",[o("td",{staticClass:"color_2"},[t._v("非直采服务费")]),o("td",{staticClass:"color_2 wordBreak",attrs:{colspan:"2"}},[t._v(t._s(t.servicePrice[2]))]),o("td",{staticClass:"color_2"},[t._v("¥"+t._s(this.positiveFloat(t.servicePrice[0])))]),o("td",{staticClass:"wordBreak",attrs:{colspan:"2"}},[t._v(" "+t._s(t.servicePrice[3])+" "),t.info.event_info_configure.service_fee_ratio?o("span",[t._v(" * "),o("el-input",{staticClass:"line",staticStyle:{width:"20%"},attrs:{size:"mini",readonly:t.readonly},model:{value:t.info.sheet_fzc_service,callback:function(e){t.$set(t.info,"sheet_fzc_service",e)},expression:"info.sheet_fzc_service"}}),t._v(" % ")],1):t._e()]),o("td",[t._v("¥"+t._s(this.positiveFloat(t.servicePrice[1])))]),o("td"),o("td",[o("el-input",{attrs:{readonly:t.readonly},model:{value:t.info.settlement_service_remark,callback:function(e){t.$set(t.info,"settlement_service_remark",e)},expression:"info.settlement_service_remark"}})],1)]),1==t.info.zhicai_service?o("tr",[o("td",{staticClass:"color_2"},[t._v("直采服务费")]),o("td",{staticClass:"color_2",attrs:{colspan:"2"}},t._l(t.info.event_quoted_price_zhicai_service,(function(e,i){return o("p",{key:i},[o("span",[t._v(" "+t._s(e.grade_name)+" ")]),o("span",[t._v(" ￥"+t._s(e.grade_price)+" ")]),o("span",[t._v(" * "+t._s(e.grade_count)+" ")])])})),0),o("td",{staticClass:"color_2"},[t._v("¥ "+t._s(this.positiveFloat(t.servicePrice[8])))]),o("td",{staticClass:"chaifen",attrs:{colspan:"2"}},t._l(t.info.event_settlement_sheet_zhicai_service,(function(e,i){return o("p",{key:i,staticStyle:{margin:"10px 0"}},[o("span",[t._v(" "+t._s(e.grade_name)+" ")]),o("span",[t._v(" ￥"+t._s(e.grade_price)+" ")]),o("span",[t._v(" * "),o("el-input",{staticStyle:{width:"20%"},attrs:{size:"small",readonly:t.readonly},on:{input:function(i){e.grade_count=t.positiveFloatOne(e.grade_count)}},model:{value:e.grade_count,callback:function(i){t.$set(e,"grade_count",i)},expression:"item.grade_count"}})],1)])})),0),o("td",[t._v("¥"+t._s(t.positiveFloat(t.servicePrice[9])))]),o("td"),o("td",[o("el-input",{attrs:{readonly:t.readonly},model:{value:t.info.settlement_advance_remark,callback:function(e){t.$set(t.info,"settlement_advance_remark",e)},expression:"info.settlement_advance_remark"}})],1)]):o("tr",[o("td",{staticClass:"color_2"},[t._v("直采服务费")]),o("td",{staticClass:"color_2",attrs:{colspan:"2"}},[t._v(t._s(t.servicePrice[6]))]),o("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(t.servicePrice[4])))]),o("td",{staticClass:"chaifen",attrs:{colspan:"2"}},[o("el-input",{staticStyle:{width:"20%"},attrs:{readonly:t.readonly},on:{input:function(e){t.info.settlement_advance_amount=t.formatNum(t.info.settlement_advance_amount)}},model:{value:t.info.settlement_advance_amount,callback:function(e){t.$set(t.info,"settlement_advance_amount",e)},expression:"info.settlement_advance_amount"}}),t._v(" * "),o("el-input",{staticStyle:{width:"20%"},attrs:{readonly:t.readonly},on:{input:function(e){t.info.settlement_advance_proportion=t.formatNum(t.info.settlement_advance_proportion)}},model:{value:t.info.settlement_advance_proportion,callback:function(e){t.$set(t.info,"settlement_advance_proportion",e)},expression:"info.settlement_advance_proportion"}}),t._v(" % ")],1),o("td",[t._v("¥"+t._s(t.positiveFloat(t.servicePrice[5])))]),o("td"),o("td",[o("el-input",{attrs:{readonly:t.readonly},model:{value:t.info.settlement_advance_remark,callback:function(e){t.$set(t.info,"settlement_advance_remark",e)},expression:"info.settlement_advance_remark"}})],1)])]),o("tbody",[o("tr",{staticClass:"color_2"},[t._m(16),o("th",{staticClass:"color_3",staticStyle:{"text-align":"right"},attrs:{colspan:"3"}},[t._v(" 报价金额：¥"+t._s(t.positiveFloat(t.vatPrice[0]).toFixed(2))+" ")]),o("th",{staticStyle:{"text-align":"right"},attrs:{colspan:"4"}},[t._v(" 结算金额：¥"+t._s(t.positiveFloat(t.vatPrice[1]).toFixed(2))+" ")]),o("th")])]),o("tbody",[t._m(17),o("tr",[o("td",{staticClass:"color_2"},[t._v("VAT")]),o("td",{staticClass:"color_2 wordBreak",attrs:{colspan:"2"}},[t._v(t._s(t.vatPrice[2]))]),o("td",{staticClass:"color_2"},[t._v("¥"+t._s(t.positiveFloat(t.vatPrice[0])))]),o("td",{staticClass:"wordBreak",attrs:{colspan:"2"}},[t._v(" "+t._s(t.vatPrice[3])+" "),o("span",[t._v(" * "),o("el-input",{staticClass:"line",staticStyle:{width:"20%"},attrs:{size:"mini",readonly:t.readonly,disabled:0==t.info.event_info_configure.vatcanedit},on:{input:function(e){t.info.settlement_taxrate=t.formatNum(t.info.settlement_taxrate)}},model:{value:t.info.settlement_taxrate,callback:function(e){t.$set(t.info,"settlement_taxrate",e)},expression:"info.settlement_taxrate"}}),t._v(" % ")],1)]),o("td",[t._v("¥"+t._s(t.positiveFloat(t.vatPrice[1])))]),o("td"),o("td",[o("el-input",{attrs:{readonly:t.readonly},model:{value:t.info.settlement_taxrate_comments,callback:function(e){t.$set(t.info,"settlement_taxrate_comments",e)},expression:"info.settlement_taxrate_comments"}})],1)])])],2),o("div",{staticClass:"qita"},[o("div",{staticClass:"left"},[o("div",{staticClass:"stitle"},[t._v("客户异议")]),o("div",{staticClass:"context"},[o("div",{staticClass:"objectionDetailStyle",domProps:{innerHTML:t._s(t.info.settlement_customer_objection)},on:{click:function(e){return t.getImg(e)}}})])]),o("div",{staticClass:"right"},[o("div",{staticClass:"stitle"},[t._v("其他说明")]),o("div",{staticClass:"context"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.info.settlement_offer_remarks,expression:"info.settlement_offer_remarks"}],attrs:{readonly:t.readonly},domProps:{value:t.info.settlement_offer_remarks},on:{input:function(e){e.target.composing||t.$set(t.info,"settlement_offer_remarks",e.target.value)}}})])])])]):t._e(),o("div",{staticClass:"submit"},[["0020-1","0020-4","0020-7","0020-8"].includes(this.info.orderstatus)?o("el-button",{on:{click:t.draft}},[t._v("保存到草稿箱")]):t._e(),["0020-4","0020-7","0020-8"].includes(this.info.orderstatus)?o("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交结算单")]):t._e(),["0020-1","0020-4","0020-5","0020-6","0020-7","0020-8"].includes(this.info.orderstatus)?o("p",{staticStyle:{color:"#428bca","font-size":"17px",float:"right"}},[1==t.info.event_info_configure.jsqrisdisplay?o("a",{staticStyle:{cursor:"pointer",margin:"0 10px"},attrs:{download:""},on:{click:t.downloadSettlementConfirm}},[t._v("下载结算确认单")]):t._e(),o("a",{staticStyle:{cursor:"pointer",margin:"0 10px"},attrs:{download:""},on:{click:t.excelDownload}},[t._v("下载结算Excel")])]):t._e()],1),t.info.historylist&&t.info.historylist.length>0?o("div",{staticClass:"info"},[o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"header clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("历史结算单：")])]),t._l(t.info.historylist,(function(e,i){return o("div",{key:e.id,staticClass:"text item"},[t._v(" 第"+t._s(i+1)+"次结算, 总价￥"+t._s(e.settlement_total_price?t.positiveFloat(e.settlement_total_price):"")+"元，[ "+t._s(t._f("date_ex")(e.submit_time))+" ] ")])}))],2)],1):t._e(),o("el-dialog",{attrs:{visible:t.addSettleShow,title:"添加结算项目",center:"",width:"600px"},on:{"update:visible":function(e){t.addSettleShow=e},close:function(e){t.addSettleShow=!1}}},[o("el-form",{ref:"addSettleInfo",attrs:{model:t.addSettleInfo,rules:t.addSettleRules,"label-width":"200px"}},[o("el-form-item",{attrs:{label:"选择项目分类",prop:"projectClass"}},[o("el-select",{staticClass:"demand_300",attrs:{size:"small",clearable:"",filterable:""},on:{change:t.changeProjectClass},model:{value:t.addSettleInfo.projectClass,callback:function(e){t.$set(t.addSettleInfo,"projectClass",e)},expression:"addSettleInfo.projectClass"}},t._l(t.projectClass,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.needCostDate,expression:"needCostDate"}],attrs:{label:"选择费用发生日期",prop:"costDate"}},[o("el-select",{staticClass:"demand_300",attrs:{size:"small",clearable:"",filterable:""},model:{value:t.addSettleInfo.costDate,callback:function(e){t.$set(t.addSettleInfo,"costDate",e)},expression:"addSettleInfo.costDate"}},t._l(t.costDates,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),o("el-form-item",{attrs:{label:"选择费用项目",prop:"costProject"}},[o("el-select",{staticClass:"demand_300",attrs:{loading:t.cost_project_load,size:"small",clearable:"",filterable:""},on:{change:t.changecostProject},model:{value:t.addSettleInfo.costProject,callback:function(e){t.$set(t.addSettleInfo,"costProject",e)},expression:"addSettleInfo.costProject"}},t._l(t.costProjects,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),o("span",{staticClass:"dialog-footer flex_row justify_center",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.addSettleShow=!1}}},[t._v("取 消")]),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addSettle}},[t._v("添 加")])],1)],1)],1):t._e()},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",{staticClass:"color_2"},[i("th",[t._v("凭证名称")]),i("th",[t._v("文件")]),i("th",[t._v("客户异议")]),i("th",[t._v("说明")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("客房")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("会场")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"color_2"},[i("th",{staticClass:"color_3"},[t._v("消费项目")]),i("th",{staticClass:"color_3"},[t._v("单价(元)")]),i("th",{staticClass:"color_3"},[t._v("数量")]),i("th",{staticClass:"color_3"},[t._v("金额(元)")]),i("th",[t._v("单价(元)")]),i("th",[t._v("数量")]),i("th",[t._v("金额(元)")]),i("th",[t._v("客户异议")]),i("th",[t._v("结算说明")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("酒店内餐饮")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"color_2"},[i("th",{staticClass:"color_3"},[t._v("消费项目")]),i("th",{staticClass:"color_3"},[t._v("单价(元)")]),i("th",{staticClass:"color_3"},[t._v("数量")]),i("th",{staticClass:"color_3"},[t._v("金额(元)")]),i("th",[t._v("单价(元)")]),i("th",[t._v("数量")]),i("th",[t._v("金额(元)")]),i("th",[t._v("客户异议")]),i("th",[t._v("结算说明")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("酒店外餐饮")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"color_2"},[i("th",{staticClass:"color_3"},[t._v("消费项目")]),i("th",{staticClass:"color_3"},[t._v("单价(元)")]),i("th",{staticClass:"color_3"},[t._v("数量")]),i("th",{staticClass:"color_3"},[t._v("金额(元)")]),i("th",[t._v("单价(元)")]),i("th",[t._v("数量")]),i("th",[t._v("金额(元)")]),i("th",[t._v("客户异议")]),i("th",[t._v("结算说明")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("大交通")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"color_2"},[i("th",{staticClass:"color_3"},[t._v("消费项目")]),i("th",{staticClass:"color_3"},[t._v("单价(元)")]),i("th",{staticClass:"color_3"},[t._v("数量")]),i("th",{staticClass:"color_3"},[t._v("金额(元)")]),i("th",[t._v("单价(元)")]),i("th",[t._v("数量")]),i("th",[t._v("金额(元)")]),i("th",[t._v("客户异议")]),i("th",[t._v("结算说明")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("市内交通")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"color_2"},[i("th",{staticClass:"color_3"},[t._v("消费项目")]),i("th",{staticClass:"color_3"},[t._v("单价(元)")]),i("th",{staticClass:"color_3"},[t._v("数量")]),i("th",{staticClass:"color_3"},[t._v("金额(元)")]),i("th",[t._v("单价(元)")]),i("th",[t._v("数量")]),i("th",[t._v("金额(元)")]),i("th",[t._v("客户异议")]),i("th",[t._v("结算说明")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("其他")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"color_2"},[i("th",{staticClass:"color_3"},[t._v("消费项目")]),i("th",{staticClass:"color_3"},[t._v("单价(元)")]),i("th",{staticClass:"color_3"},[t._v("数量")]),i("th",{staticClass:"color_3"},[t._v("金额(元)")]),i("th",[t._v("单价(元)")]),i("th",[t._v("数量")]),i("th",[t._v("金额(元)")]),i("th",[t._v("客户异议")]),i("th",[t._v("结算说明")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("服务费")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"color_2"},[i("th",{staticClass:"color_3"},[t._v("消费项目")]),i("th",{staticClass:"color_3",attrs:{colspan:"2"}},[t._v("服务费计算")]),i("th",{staticClass:"color_3"},[t._v("金额(元)")]),i("th",{attrs:{colspan:"2"}},[t._v("服务费计算")]),i("th",[t._v("金额(元)")]),i("th"),i("th",[t._v("结算说明")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("th",{staticClass:"color_3"},[i("i",{staticStyle:{color:"#428bca"}},[t._v("税费")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"color_2"},[i("th",{staticClass:"color_3"},[t._v("消费项目")]),i("th",{staticClass:"color_3",attrs:{colspan:"2"}},[t._v("税费计算")]),i("th",{staticClass:"color_3"},[t._v("金额(元)")]),i("th",{attrs:{colspan:"2"}},[t._v("税费计算")]),i("th",[t._v("金额(元)")]),i("th"),i("th",[t._v("结算说明")])])}],s=i("2909"),a=i("1da1"),r=(i("96cf"),i("caad"),i("4de4"),i("d3b7"),i("159b"),i("4e82"),i("ac1f"),i("5319"),i("b0c0"),i("fb6a"),i("d81d"),i("a630"),i("3ca3"),i("a434"),i("cf45")),c=i("0e5c"),l=i("c1df"),f=i.n(l),_=i("df68"),d=i("acd6"),u=(i("b587"),{data:function(){return{info:null,status_draft:"0029-1",status_tobeconfirmed:"0029-2",status_confirm:"0029-3",status_supplement:"0029-5",status_reject:"0029-4",settlement_status:"0029-3",errormsg:[],quoted_price_food_option:[{value:0,label:"酒店内用餐"},{value:1,label:"酒店外用餐"}],orderIDList:[],isopen:!1,arrayList:[{type:6,fileList:[],name:"客户结算单",remark:"",dissent:"",arrayLength:null},{type:7,fileList:[],name:"客户结算确认邮件",remark:"",dissent:"",arrayLength:null},{type:8,fileList:[],name:"PO单",remark:"",dissent:"",arrayLength:null},{type:5,fileList:[],name:"供应商发票及账单",remark:"",dissent:"",arrayLength:null},{type:1,fileList:[],name:"酒店住宿发票+小联",remark:"",dissent:"",arrayLength:null},{type:2,fileList:[],name:"酒店餐饮发票+小联",remark:"",dissent:"",arrayLength:null},{type:3,fileList:[],name:"酒店会场发票+小联",remark:"",dissent:"",arrayLength:null},{type:9,fileList:[],name:"外出用餐发票+小联",remark:"",dissent:"",arrayLength:null},{type:10,fileList:[],name:"注册费发票+小联",remark:"",dissent:"",arrayLength:null},{type:11,fileList:[],name:"用车发票+小联",remark:"",dissent:"",arrayLength:null},{type:12,fileList:[],name:"制作物发票+小联",remark:"",dissent:"",arrayLength:null},{type:13,fileList:[],name:"保险发票+小联",remark:"",dissent:"",arrayLength:null},{type:14,fileList:[],name:"签到表",remark:"",dissent:"",arrayLength:null},{type:15,fileList:[],name:"会议照片-全景",remark:"",dissent:"",arrayLength:null},{type:4,fileList:[],name:"其他",remark:"",dissent:"",arrayLength:null}],updateIndex:0,updateFileIndex:0,rename:!1,fileName:"",suffix:"",showInfo:!0,showPriceInfo:!0,isFail:1,downloadUrl:"",addSettleShow:!1,projectClass:[{value:"0034",label:"客房"},{value:"0049",label:"会场"},{value:"0050",label:"酒店内餐饮"},{value:"0051",label:"酒店外餐饮"},{value:"003",label:"大交通"},{value:"006",label:"地面交通"},{value:"009",label:"其他服务"}],costDates:[],cost_project_load:!1,costProjects:[],roomcostProjects:[],meetingcostProjects:[],costProjefoodcostProjectscts:[],otherfoodcostProjects:[],transportationcostProjects:[],carcostProjects:[],othercostProjects:[],dijielist:[],addSettleRules:{projectClass:[{required:!0,message:"请选择项目分类",trigger:"change"}],costDate:[{required:!0,message:"请选择费用发生日期",trigger:"change"}],costProject:[{required:!0,message:"请选择费用项目",trigger:"change"}]},addSettleInfo:{projectClass:"0034",costDate:"",costProject:""},needCostDate:!0}},computed:{issubmit:function(){return this.info.settlement_status!=this.status_supplement},readonly:function(){return["0020-2","0020-3","0020-5","0020-6","0020-8"].includes(this.info.orderstatus)},issupplement:function(){return this.info.settlement_status==this.status_supplement},isshowPriceInfo:function(){return this.showPriceInfo="0020-1"!=this.info.orderstatus,"0020-1"!=this.info.orderstatus},formateDate:function(){return function(t){return Object(r["d"])("YYYY年mm月dd日",new Date(t))}},roomVisible:function(){return this.info.roomlist&&this.info.roomlist.length>0},conferenceVisible:function(){return this.info.conferencelist&&this.info.conferencelist.length>0},foodVisible:function(){return this.info.foodlist&&this.info.foodlist.length>0},otherfoodVisible:function(){return this.info.otherfoodlist&&this.info.otherfoodlist.length>0},transportationVisible:function(){return this.info.transportationlist&&this.info.transportationlist.length>0},carVisible:function(){return this.info.carlist&&this.info.carlist.length>0},roomincidental:function(){return this.info.sundrieslist.filter((function(t){return 1==t.type&&!t.isdelete}))},meetingcidental:function(){return this.info.sundrieslist.filter((function(t){return 2==t.type&&!t.isdelete}))},foodincidental:function(){return this.info.sundrieslist.filter((function(t){return 3==t.type&&!t.isdelete}))},otherfoodincidental:function(){return this.info.sundrieslist.filter((function(t){return 7==t.type&&!t.isdelete}))},intercitytrafficincidental:function(){return this.info.sundrieslist.filter((function(t){return 4==t.type&&!t.isdelete}))},carincidental:function(){return this.info.sundrieslist.filter((function(t){return 5==t.type&&!t.isdelete}))},otherincidental:function(){return this.info.sundrieslist.filter((function(t){return 6==t.type&&!t.isdelete}))},roomPrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,o=e[1].subtotal;void 0==this.info.event_info_configure.room_inquiry_service_taxrate&&(this.info.event_info_configure["room_inquiry_service_taxrate"]=0);var n=null!=this.info.event_info_configure.room_inquiry_service_taxrate?this.info.event_info_configure.room_inquiry_service_taxrate:0;this.info.roomlist.forEach((function(n,s){i["sub_".concat(s)]||(i["sub_".concat(s)]=0),o["sub_".concat(s)]||(o["sub_".concat(s)]=0),n.roomlists.forEach((function(n,a){var c=0;c=0==t.info.is_Inside_outside?n.settlement_count:Object(r["m"])(n.settlement_inside_roomcount)+Object(r["m"])(n.settlement_outside_roomcount);var l=1==n.lineoroffline?Object(r["o"])(n.settlementsumprice):Object(r["o"])(n.settlement_unitprice)*Object(r["m"])(c);i["sub_".concat(s)]+=Object(r["o"])(n.quotationsumprice),e[0].all+=Object(r["o"])(n.quotationsumprice),o["sub_".concat(s)]+=Object(r["o"])(l),e[1].all+=Object(r["o"])(l),1==t.info.event_info_configure.hotel_food_inquiry_isnotservice&&(e[3]+=Object(r["o"])(l),e[4]+=Object(r["o"])(n.quotationsumprice),e[5]+=Object(r["o"])(n.quotationsumprice),e[6]+=Object(r["o"])(l))}))}));var s=0;return e[3]=Object(r["o"])(e[3])*Object(r["o"])(n/100),e[4]=Object(r["o"])(e[4])*Object(r["o"])(n/100),this.roomincidental.forEach((function(t){var i=1==t.lineoroffline?Object(r["o"])(t.sumprice):Object(r["o"])(t.price)*Object(r["m"])(t.count);e[1].all+=Object(r["o"])(i),e[2]+=Object(r["o"])(i),1==t.isnotservice&&(s+=Object(r["o"])(i),e[6]+=Object(r["o"])(i))})),e[3]=Object(r["o"])(e[3])+Object(r["o"])(s)*Object(r["o"])(n/100),e[7]+="+"+Object(r["o"])(e[5])+"*"+Object(r["o"])(n)+"%",e[8]+="+"+Object(r["o"])(e[6])+"*"+Object(r["o"])(n)+"%",e},adddifferenceerrormsg:function(){return function(t,e,i){var o="";1==t?o=this.formateDate(e)+"客房,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":2==t?o=this.formateDate(e)+"会场,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":3==t?o=this.formateDate(e)+"酒店内餐饮,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":4==t?o=this.formateDate(e)+"大交通,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":5==t?o=this.formateDate(e)+"地面交通,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":6==t?o="其他服务,第"+i+"行,单价(元)或数量存在差异,请填写结算说明":7==t&&(o=this.formateDate(e)+"酒店外餐饮,第"+i+"行,单价(元)或数量存在差异,请填写结算说明"),this.errormsg.push(o)}},addnewitemhasnocommments:function(){return function(t,e,i){var o="";1==t?o=this.formateDate(e)+"新增客房,第"+i+"行,结算说明为必填项,请填写结算说明":2==t?o=this.formateDate(e)+"新增会场,第"+i+"行,结算说明为必填项,请填写结算说明":3==t?o=this.formateDate(e)+"新增酒店内餐饮,第"+i+"行,结算说明为必填项,请填写结算说明":4==t?o=this.formateDate(e)+"新增大交通,第"+i+"行,结算说明为必填项,请填写结算说明":5==t?o=this.formateDate(e)+"新增地面交通,第"+i+"行,结算说明为必填项,请填写结算说明":6==t?o="新增其他服务,第"+i+"行,结算说明为必填项,请选择消费项目名称":7==t&&(o=this.formateDate(e)+"新增酒店外餐饮,第"+i+"行,结算说明为必填项,请填写结算说明"),this.errormsg.push(o)}},addnewitemerrormsg:function(){return function(t,e,i){var o="";1==t?o=this.formateDate(e)+"新增客房,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":2==t?o=this.formateDate(e)+"新增会场,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":3==t?o=this.formateDate(e)+"新增酒店内餐饮,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":4==t?o=this.formateDate(e)+"新增大交通,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":5==t?o=this.formateDate(e)+"新增地面交通,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":6==t?o="新增其他服务,第"+i+"行,消费项目名称为必填项,请选择消费项目名称":7==t&&(o=this.formateDate(e)+"新增酒店外餐饮,第"+i+"行,消费项目名称为必填项,请填写消费项目名称"),this.errormsg.push(o)}},roomDifference:function(){return function(t){return(Object(r["o"])(t.unitprice)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.provide_count)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_room_id||!t.quoted_price_room_id&&""==t.settlement_comments}},checkRoomDifference:function(){var t=this,e=!1;this.info.roomlist&&this.info.roomlist.length>0&&this.info.roomlist.forEach((function(i){if(i.roomlists&&i.roomlists.length>0){i.roomlists.forEach((function(o,n){e=t.roomDifference(o),!e||null==o.quoted_price_room_id||null!=o.settlement_comments&&""!=o.settlement_comments||t.adddifferenceerrormsg(1,i.date,n+1),!e||null!=o.quoted_price_room_id||null!=o.settlement_comments&&""!=o.settlement_comments||t.addnewitemhasnocommments(1,i.date,n+1)}));var o=i.roomlists.filter((function(t){return null==t.quoted_price_room_id&&""==t.settlement_itemname}));o.length>0&&o.forEach((function(e,o){t.addnewitemerrormsg(1,i.date,o+1)}))}}))},conferencePrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,o=e[1].subtotal;void 0==this.info.event_info_configure.conference_inquiry_service_taxrate&&(this.info.event_info_configure["conference_inquiry_service_taxrate"]=0);var n=null!=this.info.event_info_configure.conference_inquiry_service_taxrate?this.info.event_info_configure.conference_inquiry_service_taxrate:0;this.info.conferencelist.forEach((function(n,s){i["sub_".concat(s)]||(i["sub_".concat(s)]=0),o["sub_".concat(s)]||(o["sub_".concat(s)]=0),n.conferencelists.forEach((function(n){var a=Object(r["o"])(n.quotationsumprice),c=1==n.lineoroffline?Object(r["o"])(n.settlementsumprice):Object(r["o"])(n.settlement_price)*Object(r["m"])(n.settlement_count);i["sub_".concat(s)]+=a,e[0].all+=a,o["sub_".concat(s)]+=c,e[1].all+=c,1==t.info.event_info_configure.conference_inquiry_isnotservice&&(e[3]+=c,e[4]+=a,e[5]+=a,e[6]+=c)}))}));var s=0;return e[3]=Object(r["o"])(e[3])*Object(r["o"])(n/100),e[4]=Object(r["o"])(e[4])*Object(r["o"])(n/100),this.meetingcidental.forEach((function(t){var i=1==t.lineoroffline?Object(r["o"])(t.sumprice):Object(r["o"])(t.price)*Object(r["m"])(t.count);e[1].all+=i,e[2]+=i,1==t.isnotservice&&(s+=i,e[6]+=i)})),e[3]=Object(r["o"])(e[3])+Object(r["o"])(s)*Object(r["o"])(n/100),e[7]="+"+Object(r["o"])(e[5])+"*"+Object(r["o"])(n)+"%",e[8]="+"+Object(r["o"])(e[6])+"*"+Object(r["o"])(n)+"%",e},conferenceDifference:function(){return function(t){return(Object(r["o"])(t.price)!==Object(r["o"])(t.settlement_price)||Object(r["m"])(t.count)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_conference_id||!t.quoted_price_conference_id&&""==t.settlement_comments}},checkConferenceDifference:function(){var t=this,e=!1;this.info.conferencelist&&this.info.conferencelist.length>0&&this.info.conferencelist.forEach((function(i){if(i.conferencelists&&i.conferencelists.length>0){i.conferencelists.forEach((function(o,n){e=t.conferenceDifference(o),!e||null==o.quoted_price_conference_id||null!=o.settlement_comments&&""!=o.settlement_comments||t.adddifferenceerrormsg(2,i.date,n+1),!e||null!=o.quoted_price_conference_id||null!=o.settlement_comments&&""!=o.settlement_comments||t.addnewitemhasnocommments(2,i.date,n+1)}));var o=i.conferencelists.filter((function(t){return null==t.quoted_price_conference_id&&""==t.settlement_itemname}));o.length>0&&o.forEach((function(e,o){t.addnewitemerrormsg(2,i.date,o+1)}))}}))},foodPrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,o=e[1].subtotal;void 0==this.info.event_info_configure.hotel_food_inquiry_service_taxrate&&(this.info.event_info_configure["hotel_food_inquiry_service_taxrate"]=0);var n=null!=this.info.event_info_configure.hotel_food_inquiry_service_taxrate?this.info.event_info_configure.hotel_food_inquiry_service_taxrate:0;this.info.foodlist.forEach((function(n,s){i["sub_".concat(s)]||(i["sub_".concat(s)]=0),o["sub_".concat(s)]||(o["sub_".concat(s)]=0),n.foodlists.forEach((function(n){var a=Object(r["o"])(n.quotationsumprice),c=1==n.lineoroffline?Object(r["o"])(n.settlementsumprice):Object(r["o"])(n.settlement_unitprice)*Object(r["m"])(n.settlement_count);i["sub_".concat(s)]+=a,e[0].all+=a,o["sub_".concat(s)]+=c,e[1].all+=c,1==t.info.event_info_configure.hotel_food_inquiry_isnotservice&&(e[3]+=c,e[4]+=a,e[5]+=a,e[6]+=c)}))}));var s=0;return e[3]=Object(r["o"])(e[3])*Object(r["o"])(n/100),e[4]=Object(r["o"])(e[4])*Object(r["o"])(n/100),this.foodincidental.forEach((function(t){var i=1==t.lineoroffline?Object(r["o"])(t.sumprice):Object(r["o"])(t.price)*Object(r["m"])(t.count);e[1].all+=i,e[2]+=i,1==t.isnotservice&&(s+=i,e[6]+=i)})),e[3]=Object(r["o"])(e[3])+Object(r["o"])(s)*Object(r["o"])(n/100),e[7]+="+"+Object(r["o"])(e[5])+"*"+Object(r["o"])(n)+"%",e[8]+="+"+Object(r["o"])(e[6])+"*"+Object(r["o"])(n)+"%",e},foodDifference:function(){return function(t){return(Object(r["o"])(t.price)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.personcount)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_food_id||!t.quoted_price_food_id&&""==t.settlement_comments}},checkFoodDifference:function(){var t=this,e=!1;this.info.foodlist&&this.info.foodlist.length>0&&this.info.foodlist.forEach((function(i){if(i.foodlists&&i.foodlists.length>0){i.foodlists.forEach((function(o,n){e=t.foodDifference(o),!e||null==o.quoted_price_food_id||null!=o.settlement_comments&&""!=o.settlement_comments||t.adddifferenceerrormsg(3,i.date,n+1),!e||null!=o.quoted_price_food_id||null!=o.settlement_comments&&""!=o.settlement_comments||t.addnewitemhasnocommments(3,i.date,n+1)}));var o=i.foodlists.filter((function(t){return null==t.quoted_price_food_id&&""==t.settlement_itemname}));o.length>0&&o.forEach((function(e,o){t.addnewitemerrormsg(3,i.date,o+1)}))}}))},otherfoodPrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,o=e[1].subtotal;void 0==this.info.event_info_configure.others_food_inquiry_service_taxrate&&(this.info.event_info_configure["others_food_inquiry_service_taxrate"]=0);var n=null!=this.info.event_info_configure.others_food_inquiry_service_taxrate?this.info.event_info_configure.others_food_inquiry_service_taxrate:0;this.info.otherfoodlist.forEach((function(n,s){i["sub_".concat(s)]||(i["sub_".concat(s)]=0),o["sub_".concat(s)]||(o["sub_".concat(s)]=0),n.foodlists.forEach((function(n){var a=Object(r["o"])(n.quotationsumprice),c=1==n.lineoroffline?Object(r["o"])(n.settlementsumprice):Object(r["o"])(n.settlement_unitprice)*Object(r["m"])(n.settlement_count);i["sub_".concat(s)]+=a,e[0].all+=a,o["sub_".concat(s)]+=c,e[1].all+=c,1==t.info.event_info_configure.others_food_inquiry_isnotservice&&(e[3]+=c,e[4]+=a,e[5]+=a,e[6]+=c)}))}));var s=0;return e[3]=Object(r["o"])(e[3])*Object(r["o"])(n/100),e[4]=Object(r["o"])(e[4])*Object(r["o"])(n/100),this.otherfoodincidental.forEach((function(t){var i=1==t.lineoroffline?Object(r["o"])(t.sumprice):Object(r["o"])(t.price)*Object(r["m"])(t.count);e[1].all+=i,e[2]+=i,1==t.isnotservice&&(s+=i,e[6]+=i)})),e[3]=Object(r["o"])(e[3])+Object(r["o"])(s)*Object(r["o"])(n/100),e[7]+="+"+Object(r["o"])(e[5])+"*"+Object(r["o"])(n)+"%",e[8]+="+"+Object(r["o"])(e[6])+"*"+Object(r["o"])(n)+"%",e},otherFoodDifference:function(){return function(t){return(Object(r["o"])(t.price)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.personcount)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_food_id||!t.quoted_price_food_id&&""==t.settlement_comments}},checkOtherFoodDifference:function(){var t=this,e=!1;this.info.otherfoodlist&&this.info.otherfoodlist.length>0&&this.info.otherfoodlist.forEach((function(i){if(i.foodlists&&i.foodlists.length>0){i.foodlists.forEach((function(o,n){e=t.otherFoodDifference(o),!e||null==o.quoted_price_food_id||null!=o.settlement_comments&&""!=o.settlement_comments||t.adddifferenceerrormsg(7,i.date,n+1),!e||null!=o.quoted_price_food_id||null!=o.settlement_comments&&""!=o.settlement_comments||t.addnewitemhasnocommments(7,i.date,n+1)}));var o=i.foodlists.filter((function(t){return null==t.quoted_price_food_id&&""==t.settlement_itemname}));o.length>0&&o.forEach((function(e,o){t.addnewitemerrormsg(7,i.date,o+1)}))}}))},intercitytrafficPrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,o=e[1].subtotal;void 0==this.info.event_info_configure.transportation_inquiry_service_taxrate&&(this.info.event_info_configure["transportation_inquiry_service_taxrate"]=0);var n=null!=this.info.event_info_configure.transportation_inquiry_service_taxrate?this.info.event_info_configure.transportation_inquiry_service_taxrate:0;this.info.transportationlist.forEach((function(n,s){i["sub_".concat(s)]||(i["sub_".concat(s)]=0),o["sub_".concat(s)]||(o["sub_".concat(s)]=0),n.tranlists.forEach((function(n){var a=Object(r["o"])(n.quotationsumprice),c=1==n.lineoroffline?Object(r["o"])(n.settlementsumprice):Object(r["o"])(n.settlement_unitprice)*Object(r["m"])(n.settlement_count);i["sub_".concat(s)]+=a,e[0].all+=a,o["sub_".concat(s)]+=c,e[1].all+=c,1==t.info.event_info_configure.transportation_inquiry_isnotservice&&(e[3]+=c,e[4]+=a,e[5]+=a,e[6]+=c)}))}));var s=0;return e[3]=Object(r["o"])(e[3])*Object(r["o"])(n/100),e[4]=Object(r["o"])(e[4])*Object(r["o"])(n/100),this.intercitytrafficincidental.forEach((function(t){var i=1==t.lineoroffline?Object(r["o"])(t.sumprice):Object(r["o"])(t.price)*Object(r["m"])(t.count);e[1].all+=i,e[2]+=i,1==t.isnotservice&&(s+=i,e[6]+=i)})),e[3]=Object(r["o"])(e[3])+Object(r["o"])(s)*Object(r["o"])(n/100),e[7]="+"+Object(r["o"])(e[5])+"*"+Object(r["o"])(n)+"%",e[8]="+"+Object(r["o"])(e[6])+"*"+Object(r["o"])(n)+"%",e},transportationDifference:function(){return function(t){return(Object(r["o"])(t.unitprice)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.passengercount)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_transportation_id||!t.quoted_price_transportation_id&&""==t.settlement_comments}},checkTransportationDifference:function(){var t=this,e=!1;this.info.transportationlist&&this.info.transportationlist.length>0&&this.info.transportationlist.forEach((function(i){if(i.tranlists&&i.tranlists.length>0){i.tranlists.forEach((function(o,n){e=t.transportationDifference(o),!e||null==o.quoted_price_transportation_id||null!=o.settlement_comments&&""!=o.settlement_comments||t.adddifferenceerrormsg(4,i.date,n+1),!e||null!=o.quoted_price_transportation_id||null!=o.settlement_comments&&""!=o.settlement_comments||t.addnewitemhasnocommments(4,i.date,n+1)}));var o=i.tranlists.filter((function(t){return null==t.quoted_price_transportation_id&&null==t.settlement_itemid}));o.length>0&&o.forEach((function(e,o){t.addnewitemerrormsg(4,i.date,o+1)}))}}))},carPrice:function(){var t=this,e=[{all:0,subtotal:{}},{all:0,subtotal:{}},0,0,0,0,0,"",""],i=e[0].subtotal,o=e[1].subtotal;void 0==this.info.event_info_configure.car_inquiry_service_taxrate&&(this.info.event_info_configure["car_inquiry_service_taxrate"]=0);var n=null!=this.info.event_info_configure.car_inquiry_service_taxrate?this.info.event_info_configure.car_inquiry_service_taxrate:0;this.info.carlist.forEach((function(n,s){i["sub_".concat(s)]||(i["sub_".concat(s)]=0),o["sub_".concat(s)]||(o["sub_".concat(s)]=0),n.carlists.forEach((function(n){var a=Object(r["o"])(n.quotationsumprice),c=1==n.lineoroffline?Object(r["o"])(n.settlementsumprice):Object(r["o"])(n.settlement_unitprice)*Object(r["m"])(n.settlement_count);i["sub_".concat(s)]+=a,e[0].all+=a,o["sub_".concat(s)]+=c,e[1].all+=c,1==t.info.event_info_configure.car_inquiry_isnotservice&&(e[3]+=c,e[4]+=a,e[5]+=a,e[6]+=c)}))}));var s=0;return e[3]=Object(r["o"])(e[3])*Object(r["o"])(n/100),e[4]=Object(r["o"])(e[4])*Object(r["o"])(n/100),this.carincidental.forEach((function(t){var i=1==t.lineoroffline?Object(r["o"])(t.sumprice):Object(r["o"])(t.price)*Object(r["m"])(t.count);e[1].all+=i,e[2]+=i,1==t.isnotservice&&(s+=i,e[6]+=i)})),e[3]=Object(r["o"])(e[3])+Object(r["o"])(s)*Object(r["o"])(n/100),e[7]+="+"+Object(r["o"])(e[5])+"*"+Object(r["o"])(n)+"%",e[8]+="+"+Object(r["o"])(e[6])+"*"+Object(r["o"])(n)+"%",e},carDifference:function(){return function(t){return(Object(r["o"])(t.price)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.carcount)!==Object(r["m"])(t.settlement_count))&&null!=t.quoted_price_car_id||!t.quoted_price_car_id&&""==t.settlement_comments}},checkCarDifference:function(){var t=this,e=!1;this.info.carlist&&this.info.carlist.length>0&&this.info.carlist.forEach((function(i){if(i.carlists&&i.carlists.length>0){i.carlists.forEach((function(o,n){e=t.carDifference(o),!e||null==o.quoted_price_car_id||null!=o.settlement_comments&&""!=o.settlement_comments||t.adddifferenceerrormsg(5,i.date,n+1),!e||null!=o.quoted_price_car_id||null!=o.settlement_comments&&""!=o.settlement_comments||t.addnewitemhasnocommments(5,i.date,n+1)}));var o=i.carlists.filter((function(t){return null==t.quoted_price_car_id&&""==t.settlement_itemname}));o.length>0&&o.forEach((function(e,o){t.addnewitemerrormsg(5,i.date,o+1)}))}}))},otherPrice:function(){var t=this,e=[0,0,0,0,0,0,0,"",""],i=0,o=0,n=0;return this.info.otherlist.forEach((function(o,s){void 0==o.settlementservice_taxrate&&(o["settlementservice_taxrate"]=0),o.settlementservice_taxrate=null!=o.settlementservice_taxrate?o.settlementservice_taxrate:0,void 0==o.service_taxrate&&(o["service_taxrate"]=0),o.service_taxrate=null!=o.service_taxrate?o.service_taxrate:0;var a=null!=o.quoted_price_other_id?o.service_taxrate:o.settlementservice_taxrate,c=Object(r["o"])(o.quotationsumprice),l=1==o.lineoroffline?Object(r["o"])(o.settlementsumprice):Object(r["o"])(o.settlement_unitprice)*Object(r["m"])(o.settlement_count);e[0]=e[0]+c,e[1]=e[1]+l,t.info.eventinfoother.forEach((function(e,i){o.servicetype==e.othercode&&(t.info.otherlist[s].settlementservice_taxrate=e.servicerate)})),1==o.isnotservice&&(i+=Object(r["o"])(l)*Object(r["o"])(a/100),n+=Object(r["o"])(c)*Object(r["o"])(a/100),e[5]+=c,e[6]+=l,e[7]+="+"+Object(r["o"])(c)+"*"+Object(r["o"])(a)+"%",e[8]+="+"+Object(r["o"])(l)+"*"+Object(r["o"])(a)+"%")})),this.otherincidental.forEach((function(t){void 0==t.settlementservice_taxrate&&(t["settlementservice_taxrate"]=0),t.settlementservice_taxrate=null!=t.settlementservice_taxrate?t.settlementservice_taxrate:0;var i=1==t.lineoroffline?Object(r["o"])(t.sumprice):Object(r["o"])(t.price)*Object(r["m"])(t.count);e[1]=e[1]+i,e[2]=e[2]+i,1==t.isnotservice&&(o+=Object(r["o"])(i)*Object(r["o"])(t.settlementservice_taxrate/100),console.log(t.settlementservice_taxrate),e[6]+=i,e[8]+="+"+Object(r["o"])(i)+"*"+Object(r["o"])(t.settlementservice_taxrate)+"%")})),e[3]=Object(r["o"])(i)+Object(r["o"])(o),e[4]=Object(r["o"])(n),e},otherDifference:function(){return function(t){return Object(r["o"])(t.price)!==Object(r["o"])(t.settlement_unitprice)||Object(r["m"])(t.offerservicedaycount)*Object(r["m"])(t.offerparticipatecount)!==Object(r["m"])(t.settlement_count)||!t.quoted_price_other_id&&""==t.settlement_comments}},checkOtherDifference:function(){var t=this,e=!1;if(this.info.otherlist&&this.info.otherlist.length>0){this.info.otherlist.forEach((function(i,o){e=t.otherDifference(i),!e||null==i.quoted_price_other_id||null!=i.settlement_comments&&""!=i.settlement_comments||t.adddifferenceerrormsg(6,null,o+1),!e||null!=i.quoted_price_other_id||null!=i.settlement_comments&&""!=i.settlement_comments||t.addnewitemhasnocommments(6,null,o+1)}));var i=this.info.otherlist.filter((function(t){return null==t.quoted_price_other_id&&!t.servicetype}));i.length>0&&i.forEach((function(e,i){t.addnewitemerrormsg(6,null,i+1)}))}},servicePrice:function(){var t=this,e=[0,0,"","",0,0,"","",0,0];if(0==this.info.event_info_configure.service_fee_calculation_method)e[0]=Object(r["o"])(this.roomPrice[4])+Object(r["o"])(this.conferencePrice[4])+Object(r["o"])(this.foodPrice[4])+Object(r["o"])(this.otherfoodPrice[4])+Object(r["o"])(this.intercitytrafficPrice[4])+Object(r["o"])(this.carPrice[4])+Object(r["o"])(this.otherPrice[4]),e[1]=Object(r["o"])(this.roomPrice[3])+Object(r["o"])(this.conferencePrice[3])+Object(r["o"])(this.foodPrice[3])+Object(r["o"])(this.otherfoodPrice[3])+Object(r["o"])(this.intercitytrafficPrice[3])+Object(r["o"])(this.carPrice[3])+Object(r["o"])(this.otherPrice[3]),e[2]=this.roomPrice[7]+this.conferencePrice[7]+this.foodPrice[7]+this.otherfoodPrice[7]+this.intercitytrafficPrice[7]+this.carPrice[7]+this.otherPrice[7],e[3]=this.roomPrice[8]+this.conferencePrice[8]+this.foodPrice[8]+this.otherfoodPrice[8]+this.intercitytrafficPrice[8]+this.carPrice[8]+this.otherPrice[8];else if(1==this.info.event_info_configure.service_fee_calculation_method){this.info.event_info_ladder_taxrates&&this.info.event_info_ladder_taxrates.sort((function(t,e){var i=t["ladder_min"],o=e["ladder_min"];return i-o}));var i=this.price_no[2],o=this.price_no[3];this.info.event_info_ladder_taxrates.forEach((function(n,s){var a=0,c=0;t.info.event_info_ladder_taxrates[s-1]?(a=Object(r["p"])(n.ladder_max)-Object(r["p"])(t.info.event_info_ladder_taxrates[s-1].ladder_max?t.info.event_info_ladder_taxrates[s-1].ladder_max:0),c=Object(r["p"])(n.ladder_max)-Object(r["p"])(t.info.event_info_ladder_taxrates[s-1].ladder_max?t.info.event_info_ladder_taxrates[s-1].ladder_max:0)):(a=Object(r["p"])(n.ladder_max)-0,c=Object(r["p"])(n.ladder_max)-0),Object(r["p"])(i)>=Object(r["p"])(a)?t.info.event_info_ladder_taxrates.length-1==s?(e[0]+=Object(r["p"])(i)*Object(r["p"])(n.ladder_taxrate/100),e[2]+="+"+Object(r["o"])(i)+"*"+Object(r["o"])(n.ladder_taxrate)+"%"):(i=Object(r["p"])(i)-Object(r["p"])(a),e[0]+=Object(r["p"])(a)*Object(r["p"])(n.ladder_taxrate/100),e[2]+="+"+Object(r["o"])(a)+"*"+Object(r["o"])(n.ladder_taxrate)+"%"):(e[0]+=Object(r["p"])(i)*Object(r["p"])(n.ladder_taxrate/100),e[2]+="+"+Object(r["o"])(i)+"*"+Object(r["o"])(n.ladder_taxrate)+"%",i=0),Object(r["p"])(o)>=Object(r["p"])(c)?t.info.event_info_ladder_taxrates.length-1==s?(e[1]+=Object(r["p"])(o)*Object(r["p"])(n.ladder_taxrate/100),e[3]+="+"+Object(r["o"])(o)+"*"+Object(r["o"])(n.ladder_taxrate)+"%"):(o=Object(r["p"])(o)-Object(r["p"])(c),e[1]+=Object(r["p"])(c)*Object(r["p"])(n.ladder_taxrate/100),e[3]+="+"+Object(r["o"])(c)+"*"+Object(r["o"])(n.ladder_taxrate)+"%"):(e[1]+=Object(r["p"])(o)*Object(r["p"])(n.ladder_taxrate/100),e[3]+="+"+Object(r["o"])(o)+"*"+Object(r["o"])(n.ladder_taxrate)+"%",o=0)}))}else if(2==this.info.event_info_configure.service_fee_calculation_method){i=this.price_no[2],o=this.price_no[3];for(var n=0;n<this.info.event_info_grade_taxrates.length;n++)if(n==this.info.event_info_grade_taxrates.length-1||Object(r["o"])(i)>=this.info.event_info_grade_taxrates[n].grade_money&&Object(r["o"])(i)<this.info.event_info_grade_taxrates[n+1].grade_money){e[0]=Object(r["o"])(i)*this.info.event_info_grade_taxrates[n].grade_taxrate/100*this.info.fzc_service/100,e[2]=Object(r["m"])(i)+"*"+this.info.event_info_grade_taxrates[n].grade_taxrate+"%",1==this.info.event_info_configure.service_fee_ratio&&(e[2]+="*"+this.info.fzc_service+"%"),1==this.info.event_info_configure.minimum_service_fee&&e[0]<this.info.event_info_configure.minimum_service_fee_money&&(e[0]=this.info.event_info_configure.minimum_service_fee_money);break}for(n=0;n<this.info.event_info_grade_taxrates.length;n++)if(n==this.info.event_info_grade_taxrates.length-1||Object(r["o"])(o)>=this.info.event_info_grade_taxrates[n].grade_money&&Object(r["o"])(o)<this.info.event_info_grade_taxrates[n+1].grade_money){e[1]=Object(r["o"])(o)*this.info.event_info_grade_taxrates[n].grade_taxrate/100*this.info.sheet_fzc_service/100,e[3]=Object(r["m"])(o)+"*"+this.info.event_info_grade_taxrates[n].grade_taxrate+"%",1==this.info.event_info_configure.minimum_service_fee&&e[1]<this.info.event_info_configure.minimum_service_fee_money&&(e[1]=this.info.event_info_configure.minimum_service_fee_money);break}}return 1==this.info.zhicai_service&&(this.info.event_quoted_price_zhicai_service.forEach((function(t){var i;e[8]+=null!==(i=t.grade_price*t.grade_count)&&void 0!==i?i:0})),this.info.event_settlement_sheet_zhicai_service.forEach((function(t){var i;e[9]+=null!==(i=t.grade_price*t.grade_count)&&void 0!==i?i:0}))),e[2]=e[2].replace("+",""),e[3]=e[3].replace("+",""),this.info.quoted_travelagency_payment_money||(this.info.quoted_travelagency_payment_money=0),this.info.quoted_travelagency_payment_proportion||(this.info.quoted_travelagency_payment_proportion=0),e[4]=Object(r["p"])(this.info.quoted_travelagency_payment_money)*Object(r["p"])(this.info.quoted_travelagency_payment_proportion/100),e[5]=Object(r["p"])(this.info.settlement_advance_amount)*Object(r["p"])(this.info.settlement_advance_proportion/100),e[6]=Object(r["o"])(this.info.quoted_travelagency_payment_money)+"*"+Object(r["o"])(this.info.quoted_travelagency_payment_proportion)+"%",e[7]=Object(r["o"])(this.info.settlement_advance_amount)+"*"+Object(r["o"])(this.info.settlement_advance_proportion)+"%",this.info.feizhicai_service=e[1],e},vatPrice:function(){var t=[0,0,"",""];return t[0]=(Object(r["p"])(this.roomPrice[0].all)+Object(r["p"])(this.conferencePrice[0].all)+Object(r["p"])(this.foodPrice[0].all)+Object(r["p"])(this.otherfoodPrice[0].all)+Object(r["p"])(this.intercitytrafficPrice[0].all)+Object(r["p"])(this.carPrice[0].all)+Object(r["p"])(this.otherPrice[0])+(0==this.info.zhicai_service?Object(r["p"])(this.servicePrice[4]):Object(r["p"])(this.servicePrice[8])))*this.info.taxrate/100,1!=this.info.event_info_configure.fzc_service_fee_money&&null!=this.info.event_info_configure.fzc_service_fee_money||(t[0]+=Object(r["p"])(this.servicePrice[0])*Object(r["p"])(this.info.taxrate/100)),t[1]=(Object(r["p"])(this.roomPrice[1].all)+Object(r["p"])(this.conferencePrice[1].all)+Object(r["p"])(this.foodPrice[1].all)+Object(r["p"])(this.otherfoodPrice[1].all)+Object(r["p"])(this.intercitytrafficPrice[1].all)+Object(r["p"])(this.carPrice[1].all)+Object(r["p"])(this.otherPrice[1])+(0==this.info.zhicai_service?Object(r["p"])(this.servicePrice[5]):Object(r["p"])(this.servicePrice[9])))*this.info.settlement_taxrate/100,(this.info.event_info_configure.fzc_service_fee_money||null==this.info.event_info_configure.fzc_service_fee_money)&&(t[1]+=Object(r["p"])(this.servicePrice[1])*Object(r["p"])(this.info.settlement_taxrate/100)),t[2]="("+Object(r["m"])(this.price_no[0])+"+"+Object(r["m"])((0==this.info.event_info_configure.fzc_service_fee_money?0:Object(r["o"])(this.servicePrice[0]))+Object(r["o"])(0==this.info.zhicai_service?this.servicePrice[4]:this.servicePrice[8]))+") *"+Object(r["o"])(this.info.taxrate)+"%",t[3]="("+Object(r["m"])(this.price_no[1])+"+"+Object(r["m"])((0==this.info.event_info_configure.fzc_service_fee_money?0:Object(r["o"])(this.servicePrice[1]))+Object(r["o"])(0==this.info.zhicai_service?this.servicePrice[5]:this.servicePrice[9]))+") ",this.info.taxation=t[1],t},price_no:function(){var t=[0,0,0,0];return t[0]=this.roomPrice[0].all+this.conferencePrice[0].all+this.foodPrice[0].all+this.otherfoodPrice[0].all+this.intercitytrafficPrice[0].all+this.carPrice[0].all+this.otherPrice[0],t[1]=this.roomPrice[1].all+this.conferencePrice[1].all+this.foodPrice[1].all+this.otherfoodPrice[1].all+this.intercitytrafficPrice[1].all+this.carPrice[1].all+this.otherPrice[1],console.log(t[1],this.roomPrice[1].all,this.conferencePrice[1].all,this.foodPrice[1].all,this.otherfoodPrice[1].all,this.intercitytrafficPrice[1].all,this.carPrice[1].all,this.otherPrice[1]),this.info.settlement_total_price=t[1],t[2]=this.roomPrice[5]+this.conferencePrice[5]+this.foodPrice[5]+this.otherfoodPrice[5]+this.intercitytrafficPrice[5]+this.carPrice[5]+this.otherPrice[5],t[3]=this.roomPrice[6]+this.conferencePrice[6]+this.foodPrice[6]+this.otherfoodPrice[6]+this.intercitytrafficPrice[6]+this.carPrice[6]+this.otherPrice[6],t},price:function(){var t=[0,0];return t[0]=Object(r["o"])(this.price_no[0])+Object(r["m"])(this.servicePrice[0])+(0===this.info.zhicai_service?Object(r["m"])(this.servicePrice[4]):Object(r["m"])(this.servicePrice[8]))+Object(r["m"])(this.vatPrice[0]),t[1]=Object(r["o"])(this.price_no[1])+Object(r["m"])(this.servicePrice[1])+(0===this.info.zhicai_service?Object(r["m"])(this.servicePrice[5]):Object(r["m"])(this.servicePrice[9]))+Object(r["m"])(this.vatPrice[1]),this.info.total_amount=t[1],t}},methods:{guid:r["k"],positiveInteger:r["q"],positiveFloatOne:r["n"],positiveFloatSix:r["o"],positiveFloat:r["m"],formatNum:r["e"],positiveFloatZero:r["p"],excelExport:d["a"],getFormatDate:r["g"],limitsEffect:_["a"],changekefang:function(t,e){var i=this.roomcostProjects.filter((function(e){return e.code==t}));e.settlement_itemname=i[0].name},changehuichang:function(t,e){var i=this.meetingcostProjects.filter((function(e){return e.code==t}));e.settlement_itemname=i[0].name},changehotelnei:function(t,e){var i=this.foodcostProjects.filter((function(e){return e.code==t}));e.settlement_itemname=i[0].name},changehotelwai:function(t,e){var i=this.otherfoodcostProjects.filter((function(e){return e.code==t}));e.settlement_itemname=i[0].name},changebigcar:function(t,e){var i=this.transportationcostProjects.filter((function(e){return e.code==t}));food.settlement_itemname=i[0].name},changecar:function(t,e){var i=this.carcostProjects.filter((function(e){return e.code==t}));food.settlement_itemname=i[0].name},openAddSettle:function(){var t=this;this.cost_project_load=!0;var e=Object(r["g"])(this.info.event_info.event_startdate).slice(0,10),i=Object(r["g"])(this.info.event_info.event_enddate).slice(0,10),o=f()(e).subtract(3,"days").format("YYYY-MM-DD"),n=f()(i).add(1,"days").format("YYYY-MM-DD"),s=Object(r["f"])(o,n);this.costDates=[],s.forEach((function(e,i){t.costDates.push({value:e,label:e})})),this.changeProjectClass(),this.addSettleShow=!0},changecostProject:function(){"zafei"==this.addSettleInfo.costProject||"009"==this.addSettleInfo.projectClass?(this.needCostDate=!1,this.addSettleRules.costDate[0].required=!1):(this.needCostDate=!0,this.addSettleRules.costDate[0].required=!0)},changeProjectClass:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={"0034":{selects:"roomcostProjects"},"0049":{selects:"meetingcostProjects"},"0050":{selects:"foodcostProjects"},"0051":{selects:"otherfoodcostProjects"},"003":{selects:"transportationcostProjects"},"006":{selects:"carcostProjects"},"009":{selects:"othercostProjects"}},"009"==t.addSettleInfo.projectClass?(t.needCostDate=!1,t.addSettleRules.costDate[0].required=!1):(t.needCostDate=!0,t.addSettleRules.costDate[0].required=!0),t.cost_project_load=!0,{code:t.addSettleInfo.projectClass},t.addSettleInfo.projectClass,e.next=7,t.$api.getCostProjects({code:t.addSettleInfo.projectClass,meetingid:"009"==t.addSettleInfo.projectClass?t.info.meeting_id:""},"POST");case 7:o=e.sent,t.cost_project_load=!1,t.costProjects=o.map((function(t){return t.value=t.code,t.label=t.name,t})),t[i[t.addSettleInfo.projectClass].selects]=o.map((function(t){return t.value=t.code,t.label=t.name,t})),t.costProjects.push({label:"杂费",value:"zafei"}),t.addSettleInfo.costProject=t.costProjects[0].value;case 13:case"end":return e.stop()}}),e)})))()},initCostProject:function(){var t=this;this.$api.getCostProjects({code:""},"POST").then((function(e){var i=e.filter((function(t){return"0034"==t.event_dictionary_code})),o=e.filter((function(t){return"0049"==t.event_dictionary_code})),n=e.filter((function(t){return"0050"==t.event_dictionary_code})),s=e.filter((function(t){return"0051"==t.event_dictionary_code})),a=e.filter((function(t){return"003"==t.event_dictionary_code})),r=e.filter((function(t){return"006"==t.event_dictionary_code})),c=e.filter((function(t){return"009"==t.event_dictionary_code}));t.roomcostProjects=i.map((function(t){return t.label=t.name,t.value=t.code,t})),t.meetingcostProjects=o.map((function(t){return t.label=t.name,t.value=t.code,t})),t.foodcostProjects=n.map((function(t){return t.label=t.name,t.value=t.code,t})),t.otherfoodcostProjects=s.map((function(t){return t.label=t.name,t.value=t.code,t})),t.transportationcostProjects=a.map((function(t){return t.label=t.name,t.value=t.code,t})),t.carcostProjects=r.map((function(t){return t.label=t.name,t.value=t.code,t})),t.othercostProjects=c.map((function(t){return t.label=t.name,t.value=t.code,t}))}))},addSettle:function(){var t=this,e={"0034":{dataList:"roomlist",addBusinessBlock:"addroomBusiness",addDataBlock:"addroom",selects:"roomcostProjects"},"0049":{dataList:"conferencelist",addBusinessBlock:"addconferenceBusiness",addDataBlock:"addconference",selects:"meetingcostProjects"},"0050":{dataList:"foodlist",addBusinessBlock:"addfoodBusiness",addDataBlock:"addfood",selects:"foodcostProjects"},"0051":{dataList:"otherfoodlist",addBusinessBlock:"addotherfoodBusiness",addDataBlock:"addotherfood",selects:"otherfoodcostProjects"},"003":{dataList:"transportationlist",addBusinessBlock:"addstransportationBusiness",addDataBlock:"addstransportation",selects:"transportationcostProjects"},"006":{dataList:"carlist",addBusinessBlock:"addcarBusiness",addDataBlock:"addcar",selects:"carcostProjects"},"009":{dataList:"otherlist",addBusinessBlock:"addsundryBusiness",addDataBlock:"addsundry",selects:"othercostProjects"}},i={"0034":1,"0049":2,"0050":3,"0051":7,"003":4,"006":5,"009":6};this.$refs.addSettleInfo.validate((function(o){if(o){var n=e[t.addSettleInfo.projectClass];if(n)if(t[n.selects]=Object(s["a"])(t.costProjects),"zafei"==t.addSettleInfo.costProject)t.addOther(i[t.addSettleInfo.projectClass]);else if(t.info[n.dataList]&&t.info[n.dataList].length)if("009"==t.addSettleInfo.projectClass)t[n.addDataBlock](!0);else{var a=t.info[n.dataList].filter((function(e){return t.addSettleInfo.costDate==f()(e.date).format("YYYY-MM-DD")}));a&&a.length?t[n.addDataBlock](a[0],!0):t[n.addBusinessBlock](!0)}else t[n.addBusinessBlock](!0);t.addSettleShow=!1}}))},excelDownload:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!=t.$route.params.issubmit){e.next=6;break}return t.info.settlement_status=t.status_draft,e.next=4,t.save(2);case 4:e.next=8;break;case 6:i="DMC结算单",t.excelExport("/Template/GetTemplate",{eventid:t.info.event_info.id,type:4,param:t.$route.params.id},i);case 8:case"end":return e.stop()}}),e)})))()},downloadSettlementConfirm:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!=t.$route.params.issubmit){e.next=6;break}return t.info.settlement_status=t.status_draft,e.next=4,t.save(1);case 4:e.next=8;break;case 6:i="结算确认单",t.excelExport("/Template/GetTemplate",{eventid:t.info.event_info.id,type:6,param:t.$route.params.id},i);case 8:case"end":return e.stop()}}),e)})))()},handleChangeAttach:function(t,e,i){var o=this,n=t.size/1024/1024<30;if(this.limitsEffect(t)){if(!n)return this.$message.error("上传附件大小不能超过 30MB!"),void this.arrayList.forEach((function(n,s){i==n.type&&o.$refs.upload[s].handleRemove(t,e,i)}));this.arrayList.forEach((function(t,o){i==t.type&&(t.fileList=e)})),this.initFileRename()}else this.arrayList.forEach((function(n,s){i==n.type&&o.$refs.upload[s].handleRemove(t,e,i)}))},handleRemoveAttach:function(t,e,i){this.arrayList.forEach((function(t,o){i==t.type&&(t.fileList=e)})),this.initFileRename()},getImg:function(t){console.log(t),console.log(t.target.currentSrc);var e=t.target.currentSrc;e&&this.$hevueImgPreview(e)},handlePreview:function(t){var e=this;if(t.url){var i=t.url.substring(t.url.lastIndexOf(".")+1),o=["pdf","jpeg","jpg","png","txt"],n=["docx","doc","xls","xlsx","xlsm","ppt","pptx"];t.url=t.url.replace(/http:/,"https:"),this.downloadUrl=t.url,n.includes(i)?this.downloadUrl="https://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(t.url):o.includes(i)?this.downloadUrl=t.url:this.$message.info("文件格式不支持预览，下载后查看"),setTimeout((function(){e.$refs.a_click.click()}),100)}},initFileRename:function(){var t=this;this.$nextTick((function(){var e=document.getElementsByClassName("el-upload-list__item-name")||null;Array.from(e).forEach((function(e,i,o){var n=e.innerText;e.getElementsByTagName("span")[0]||(e.innerHTML+="<span style='color:#199ED8;cursor: pointer;'>重命名</span>"),e.getElementsByTagName("span")[0].addEventListener("click",(function(i){i.stopPropagation(),t.rename=!0,t.fileName=n.slice(0,n.lastIndexOf(".")),t.suffix=n.slice(n.lastIndexOf(".")),console.log(e.getElementsByTagName("span")[0].parentNode.parentNode.parentNode)}))}))}))},fileRename:function(t,e,i){this.rename=!0,this.updateIndex=e,this.updateFileIndex=i,this.fileName=t.name.slice(0,t.name.lastIndexOf(".")),this.suffix=t.name.slice(t.name.lastIndexOf("."))},saveFileName:function(){var t=this;if(this.arrayList[this.updateIndex].fileList[this.updateFileIndex].name=this.fileName+this.suffix,this.info.attachlist.forEach((function(e,i){e.id==t.arrayList[t.updateIndex].fileList[t.updateFileIndex].id&&(t.info.attachlist[i].filename=t.fileName+t.suffix)})),this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw){var e=new File([this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw],this.fileName+this.suffix,{lastModified:this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw.lastModified,lastModifiedDate:this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw.lastModifiedDate,type:this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw.type});this.arrayList[this.updateIndex].fileList[this.updateFileIndex].raw=e}this.rename=!1},deleteFile:function(t,e,i,o){i==o&&(this.isFail=0),this.arrayList[e].fileList.splice(i,1)},addOther:function(t){this.info.sundrieslist.push({id:this.guid(),type:t,price:0,count:0,comments:"",content:"",isnotservice:0,settlementservice_taxrate:0,lineoroffline:0,sumprice:0})},delOther:function(t){1==this.info.sundrieslist.length?this.info.sundrieslist[0].isdelete=1:this.info.sundrieslist=this.info.sundrieslist.filter((function(e){return e.id!=t}))},addroom:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e){o.next=4;break}return i.addSettleInfo.projectClass="0034",o.next=4,i.changeProjectClass();case 4:t.roomlists.push({settlement_itemid:i.addSettleInfo.costProject,roomtypename:"",totalprice:0,unitprice:0,roomcount:0,inside_roomcount:0,settlement_inside_roomcount:0,outside_roomcount:0,settlement_outside_roomcount:0,settlement_unitprice:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return o.stop()}}),o)})))()},findCostProjectByKey:function(t){var e=this.costProjects.filter((function(e){return t==e.value}));return e&&e.length?e[0]:null},addroomBusiness:function(t){this.info.roomlist.push({date:f()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),roomlists:[{settlement_itemid:this.addSettleInfo.costProject,roomtypename:"",totalprice:0,unitprice:0,roomcount:0,inside_roomcount:0,settlement_inside_roomcount:0,outside_roomcount:0,settlement_outside_roomcount:0,settlement_unitprice:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0}]}),this.info.roomlist=this.info.roomlist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delroom:function(t,e){t.roomlists.splice(e,1)},addconference:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e){o.next=4;break}return i.addSettleInfo.projectClass="0049",o.next=4,i.changeProjectClass();case 4:t.conferencelists.push({settlement_itemid:i.addSettleInfo.costProject,is_important:"",price:0,count:0,settlement_price:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return o.stop()}}),o)})))()},addconferenceBusiness:function(t){this.info.conferencelist.push({date:f()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),conferencelists:[{settlement_itemid:this.addSettleInfo.costProject,is_important:"",price:0,count:0,settlement_price:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0}]}),this.info.conferencelist=this.info.conferencelist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delconference:function(t,e){t.conferencelists.splice(e,1)},addfood:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e){o.next=4;break}return i.addSettleInfo.projectClass="0050",o.next=4,i.changeProjectClass();case 4:t.foodlists.push({settlement_itemid:i.addSettleInfo.costProject,foodtypename:"",addresstype:"0",personcount:0,price:0,settlement_unitprice:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return o.stop()}}),o)})))()},addfoodBusiness:function(t){this.info.foodlist.push({date:f()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),foodlists:[{settlement_itemid:this.addSettleInfo.costProject,foodtypename:"",addresstype:"0",personcount:0,price:0,settlement_unitprice:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0}]}),this.info.foodlist=this.info.foodlist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delfood:function(t,e){t.foodlists.splice(e,1)},addotherfood:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e){o.next=4;break}return i.addSettleInfo.projectClass="0051",o.next=4,i.changeProjectClass();case 4:t.foodlists.push({settlement_itemid:i.addSettleInfo.costProject,foodtypename:"",addresstype:"0",personcount:0,price:0,settlement_unitprice:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return o.stop()}}),o)})))()},addotherfoodBusiness:function(t){this.info.otherfoodlist.push({date:f()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),foodlists:[{settlement_itemid:this.addSettleInfo.costProject,foodtypename:"",addresstype:"0",personcount:0,price:0,settlement_unitprice:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0}]}),this.info.otherfoodlist=this.info.otherfoodlist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delotherfood:function(t,e){t.foodlists.splice(e,1)},addstransportation:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e){o.next=4;break}return i.addSettleInfo.projectClass="003",o.next=4,i.changeProjectClass();case 4:t.tranlists.push({settlement_itemid:i.addSettleInfo.costProject,joinname:"",passengercount:0,unitprice:0,settlement_unitprice:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return o.stop()}}),o)})))()},addstransportationBusiness:function(t){this.info.transportationlist.push({date:f()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),tranlists:[{settlement_itemid:this.addSettleInfo.costProject,joinname:"",passengercount:0,unitprice:0,settlement_unitprice:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0}]}),this.info.transportationlist=this.info.transportationlist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delstransportation:function(t,e){t.tranlists.splice(e,1)},addcar:function(t,e){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e){o.next=4;break}return i.addSettleInfo.projectClass="006",o.next=4,i.changeProjectClass();case 4:t.carlists.push({settlement_itemid:i.addSettleInfo.costProject,purposename:"",carcount:0,price:0,settlement_unitprice:"0",settlement_itemname:i.findCostProjectByKey(i.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0});case 5:case"end":return o.stop()}}),o)})))()},addcarBusiness:function(t){this.info.carlist.push({date:f()(this.addSettleInfo.costDate).format("YYYY/MM/DD"),carlists:[{settlement_itemid:this.addSettleInfo.costProject,purposename:"",carcount:0,price:0,settlement_unitprice:"0",settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,settlement_count:"0",settlement_comments:"",lineoroffline:0,quotationsumprice:0,settlementsumprice:0}]}),this.info.carlist=this.info.carlist.sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},delcar:function(t,e){t.carlists.splice(e,1)},addsundry:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){var o,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t){i.next=4;break}return e.addSettleInfo.projectClass="009",i.next=4,e.changeProjectClass();case 4:o=e.findCostProjectByKey(e.addSettleInfo.costProject),n={settlement_itemid:e.addSettleInfo.costProject,settlement_itemname:o.label,servicetype:e.addSettleInfo.costProject,servicetypename:o.label,offerparticipatecount:0,offerservicedaycount:0,price:0,settlement_unitprice:"0",settlement_count:"0",settlement_comments:"",isnotservice:o.isnotservice,service_taxrate:0,lineoroffline:0,settlementservice_taxrate:0,quotationsumprice:0,settlementsumprice:0,two_level_code:""},e.othercostProjects.forEach((function(t,i){console.log(e.addSettleInfo.costProject),e.addSettleInfo.costProject==t.code&&(n.servicetypename=t.name,n.detail=t.detail,n.two_level_code="",n.isnotservice=t.isnotservice)})),e.info.otherlist.push(n);case 8:case"end":return i.stop()}}),i)})))()},addsundryBusiness:function(t){this.info.otherlist.push({settlement_itemid:this.addSettleInfo.costProject,settlement_itemname:this.findCostProjectByKey(this.addSettleInfo.costProject).label,servicetype:this.addSettleInfo.costProject,servicetypename:this.findCostProjectByKey(this.addSettleInfo.costProject).label,offerparticipatecount:0,offerservicedaycount:0,price:0,settlement_unitprice:"0",settlement_count:"0",settlement_comments:"",isnotservice:0,service_taxrate:0,lineoroffline:0,settlementservice_taxrate:0,quotationsumprice:0,settlementsumprice:0})},delsother:function(t,e){this.info.otherlist.splice(e,1)},submit:function(){var t=this;this.validate()&&(this.info.settlement_status!=this.status_confirm&&(this.info.settlement_status=this.status_tobeconfirmed),this.info.event_info.pocode?this.save():this.$confirm("当前会议活动未录入PO，不能提交结算单，请您先在“我的会议”-》查看详情-》录入PO 后，再返回当前页面提交结算单！","提示",{confirmButtonText:"确定",center:!0,showCancelButton:!1}).then((function(){t.draft(),t.$router.go(-1)})).catch((function(){})))},draft:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.info.settlement_status=t.status_draft,e.next=3,t.save();case 3:case"end":return e.stop()}}),e)})))()},differenceShowErrorMessage:function(){var t="";this.errormsg.forEach((function(e){t+="<p style='padding:5px;'>"+e+"</p>"})),this.$message({message:t,dangerouslyUseHTMLString:!0,type:"error",lockScroll:!1})},validate:function(){return this.errormsg=[],this.checkRoomDifference,this.checkConferenceDifference,this.checkFoodDifference,this.checkOtherFoodDifference,this.checkTransportationDifference,this.checkCarDifference,this.checkOtherDifference,this.errormsg.length>0&&this.differenceShowErrorMessage(),0==this.errormsg.length},save:function(t){var e=this;this.info.pre_settlement_status===this.status_reject&&(this.info.settlement_sheet_id=null),this.info.transportationlist.forEach((function(t,i){t.tranlists.forEach((function(t,o){e.info.trantypelist.forEach((function(n,s){t.settlement_itemid==n.trancode&&(e.info.transportationlist[i].tranlists[o].settlement_itemname||(e.info.transportationlist[i].tranlists[o].settlement_itemname=n.tranname))}))}))})),this.intercitytrafficincidental.forEach((function(t,i){e.info.trantypelist.forEach((function(o,n){t.itemcode==o.trancode&&(e.intercitytrafficincidental[i].content=o.tranname)}))})),this.info.settlement_settlementsheetexplain=this.arrayList[0].remark,this.info.settlement_confirmmail=this.arrayList[1].remark,this.info.settlement_po=this.arrayList[2].remark,this.info.settlement_invoice=this.arrayList[3].remark,this.info.settlement_voucher=this.arrayList[4].remark,this.info.settlement_contract=this.arrayList[5].remark,this.info.settlement_waterbill=this.arrayList[6].remark,this.info.settlement_outsidefoodinvoiceexplain=this.arrayList[7].remark,this.info.settlement_registinvoiceexplain=this.arrayList[8].remark,this.info.settlement_carinvoiceexplain=this.arrayList[9].remark,this.info.settlement_productsvoiceexplain=this.arrayList[10].remark,this.info.settlement_insureinvoiceexplain=this.arrayList[11].remark,this.info.settlement_signexplain=this.arrayList[12].remark,this.info.settlement_photoexplain=this.arrayList[13].remark,this.info.settlement_other=this.arrayList[14].remark,1==this.info.zhicai_service&&(this.info.settlement_advance_amount=this.servicePrice[9],this.info.settlement_advance_proportion=100);var i=[{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]},{urLs:[]}];i.forEach((function(t,i){if(e.arrayList[i]){e.arrayList[i].fileList.filter((function(t){return""!=t.uid}));if(1==e.arrayList.filter((function(t){return null!=t.arrayLength})).length){var o=null;e.arrayList.forEach((function(t,e){null!=t.arrayLength&&(o=e)})),e.arrayList[i].fileList.length>0&&(i>o||i==o)&&e.arrayList[i].fileList.forEach((function(e,i){t.urLs.push({key:e.uid,file:e.raw})}))}else e.arrayList[i].fileList.length>0&&e.arrayList[i].fileList.forEach((function(e){t.urLs.push({key:e.uid,file:e.raw})}))}})),this.isFail=1,this.arrayList.forEach((function(t,i){e.arrayList[i].arrayLength=null})),Object(c["a"])(i[0].urLs).then((function(t){return console.log(t),t&&void 0!=t.tag?(e.arrayList[0].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[0].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[0].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[0].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[0].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(c["a"])(i[1].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[1].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[1].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[1].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[1].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[1].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(c["a"])(i[2].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[2].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[2].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[2].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[2].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[2].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(c["a"])(i[3].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[3].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[3].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[3].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[3].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[3].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(c["a"])(i[4].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[4].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[4].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[4].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[4].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[4].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(c["a"])(i[5].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[5].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[5].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[5].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[5].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[5].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(c["a"])(i[6].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[6].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[6].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[6].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[6].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[6].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(c["a"])(i[7].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[7].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[7].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[7].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[7].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[7].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(c["a"])(i[8].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[8].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[8].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[8].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[8].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[8].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(c["a"])(i[9].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[9].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[9].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[9].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[9].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[9].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(c["a"])(i[10].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[10].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[10].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[10].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[10].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[10].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(c["a"])(i[11].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[11].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[11].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[11].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[11].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[11].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(c["a"])(i[12].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[12].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[12].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[12].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[12].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[12].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(c["a"])(i[13].urLs))})).then((function(t){return t&&void 0!=t.tag?(e.arrayList[13].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[13].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}))):(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[13].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[13].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[13].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),Object(c["a"])(i[14].urLs))})).then((function(t){if(t&&void 0!=t.tag)return e.arrayList[14].arrayLength=t.tag,void t.uploadImageList.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[14].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})}));if(e.info.attachlist&&e.info.attachlist.length>0&&e.info.attachlist.forEach((function(t){0==e.arrayList[14].fileList.filter((function(e){return e.id==t.id})).length&&t.filetype==e.arrayList[14].type&&(t.delete=!0)})),t.forEach((function(t){t&&e.info.attachlist.push({filetype:e.arrayList[14].type,filepath:t.FilePath,filename:t.OriginalFileName,create_date:t.create_date?Object(r["g"])(t.create_date):""})})),e.info.attachlist.forEach((function(t){t.create_date=t.create_date?Object(r["g"])(t.create_date):""})),e.info.roomlist&&e.info.roomlist.forEach((function(t){for(var e=0;e<t.roomlists.length;e++)t.roomlists[e].indexs=e+1})),e.info.conferencelist&&e.info.conferencelist.forEach((function(t){for(var e=0;e<t.conferencelists.length;e++)t.conferencelists[e].indexs=e+1})),e.info.foodlist&&e.info.foodlist.forEach((function(t){for(var e=0;e<t.foodlists.length;e++)t.foodlists[e].indexs=e+1})),e.info.otherfoodlist&&e.info.otherfoodlist.forEach((function(t){for(var e=0;e<t.foodlists.length;e++)t.foodlists[e].indexs=e+1})),e.info.transportationlist&&e.info.transportationlist.forEach((function(t){for(var e=0;e<t.tranlists.length;e++)t.tranlists[e].indexs=e+1})),e.info.carlist&&e.info.carlist.forEach((function(t){for(var e=0;e<t.carlists.length;e++)t.carlists[e].indexs=e+1})),e.info.otherlist)for(var i=0;i<e.info.otherlist.length;i++)e.info.otherlist[i].indexs=i+1;return e.$api.DMCOnlineSubmit(e.info,"POST")})).then((function(i){if(i){if(1==t){var o="结算确认单";e.excelExport("/Template/GetTemplate",{eventid:e.info.event_info.id,type:6,param:e.$route.params.id},o)}else if(2==t){o="DMC结算单";e.excelExport("/Template/GetTemplate",{eventid:e.info.event_info.id,type:4,param:e.$route.params.id},o)}e.$message({message:"保存成功！",type:"success"}),e.$router.push({name:"orderInfo",params:{id:e.info.orderform_id}})}else e.$message({message:"保存失败！",type:"error"})}))},changeOtherSel:function(t,e,i){var o=this,n=this.othercostProjects.filter((function(t){return t.code==i}));t.settlement_itemname=n[0].name,t.isnotservice=n[0].isnotservice,this.othercostProjects.forEach((function(e,i){t.settlement_itemid==e.code&&(t.servicetypename=e.name,t.detail=e.detail.filter((function(t){return"0"!==t.detail_type})),t.two_level_code="",t.isnotservice=e.isnotservice)})),this.info.eventinfoother.forEach((function(i,n){t.settlement_itemid==i.othercode&&(o.info.otherlist[e].settlementservice_taxrate=i.servicerate,o.info.otherlist[e].isnotservice=i.iscalservice,console.log(o.info.otherlist[e].isnotservice,i.iscalservice))}))},initInfo:function(){var t=this;this.info.roomlist.forEach((function(e,i){e.roomlists.forEach((function(e){e.quoted_price_room_id&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.unitprice),"0"==t.info.is_Inside_outside&&(e.settlement_count=e.provide_count,e.settlement_inside_roomcount=0,e.settlement_outside_roomcount=e.provide_count),"1"==t.info.is_Inside_outside&&(e.settlement_count=e.provide_count,e.settlement_inside_roomcount=e.inside_roomcount,e.settlement_outside_roomcount=e.outside_roomcount))}))})),this.info.conferencelist.forEach((function(e,i){e.conferencelists.forEach((function(e){e.quoted_price_conference_id&&null==t.info.id&&(e.settlement_price=Object(r["o"])(e.price),e.settlement_count=Object(r["m"])(e.count))}))})),this.info.foodlist.forEach((function(e,i){e.foodlists.forEach((function(e){e.quoted_price_food_id&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.price),e.settlement_count=Object(r["m"])(e.personcount))}))})),this.info.otherfoodlist.forEach((function(e,i){e.foodlists.forEach((function(e){e.quoted_price_food_id&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.price),e.settlement_count=Object(r["m"])(e.personcount))}))})),this.info.transportationlist.forEach((function(e,i){e.tranlists.forEach((function(e){e.quoted_price_transportation_id&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.unitprice),e.settlement_count=Object(r["m"])(e.passengercount))}))})),this.info.carlist.forEach((function(e,i){e.carlists.forEach((function(e){e.quoted_price_car_id&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.price),e.settlement_count=Object(r["m"])(e.carcount))}))})),this.info.otherlist.forEach((function(e,i){e.quoted_price_other_id&&null==t.info.id&&(e.settlement_unitprice=Object(r["o"])(e.price),e.settlement_count=Object(r["m"])(e.offerservicedaycount)*Object(r["m"])(e.offerparticipatecount))})),null==this.info.id&&(this.info.settlement_advance_amount=this.info.quoted_travelagency_payment_money,this.info.settlement_advance_proportion=this.info.quoted_travelagency_payment_proportion,this.info.settlement_taxrate=this.info.taxrate,this.info.settlement_advance_amount||(this.info.settlement_advance_amount=0),this.info.settlement_advance_proportion||(this.info.settlement_advance_proportion=0)),"0020-1"==this.info.orderstatus&&(this.showPriceInfo=!1)}},mounted:function(){var t=this;this.initCostProject(),this.$api.DMCOnlineInfo({orderformid:this.$route.params.id},"POST").then((function(e){t.info=e,console.log(e),0!=t.info.event_info_configure.service_fee_ratio&&null!=t.info.sheet_fzc_service||(t.info.sheet_fzc_service=t.info.fzc_service),t.initInfo(),t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){t.arrayList.forEach((function(i,o){e.filetype==i.type&&t.arrayList[o].fileList.push({id:e.id,uid:"",name:e.filename,url:t.info.fileuploaddomin+e.filepath,update_time:e.update_time,create_date:e.create_date})}))})),t.arrayList[0].remark=t.info.settlement_settlementsheetexplain,t.arrayList[1].remark=t.info.settlement_confirmmail,t.arrayList[2].remark=t.info.settlement_po,t.arrayList[3].remark=t.info.settlement_invoice,t.arrayList[4].remark=t.info.settlement_voucher,t.arrayList[5].remark=t.info.settlement_contract,t.arrayList[6].remark=t.info.settlement_waterbill,t.arrayList[7].remark=t.info.settlement_outsidefoodinvoiceexplain,t.arrayList[8].remark=t.info.settlement_registinvoiceexplain,t.arrayList[9].remark=t.info.settlement_carinvoiceexplain,t.arrayList[10].remark=t.info.settlement_productsvoiceexplain,t.arrayList[11].remark=t.info.settlement_insureinvoiceexplain,t.arrayList[12].remark=t.info.settlement_signexplain,t.arrayList[13].remark=t.info.settlement_photoexplain,t.arrayList[14].remark=t.info.settlement_other,t.arrayList[0].dissent=t.info.dissent_settlementsheetexplain,t.arrayList[1].dissent=t.info.dissent_confirmmail,t.arrayList[2].dissent=t.info.dissent_po,t.arrayList[3].dissent=t.info.dissent_invoice,t.arrayList[4].dissent=t.info.dissent_voucher,t.arrayList[5].dissent=t.info.dissent_contract,t.arrayList[6].dissent=t.info.dissent_waterbill,t.arrayList[7].dissent=t.info.dissent_outsidefoodinvoiceexplain,t.arrayList[8].dissent=t.info.dissent_registinvoiceexplain,t.arrayList[9].dissent=t.info.dissent_carinvoiceexplain,t.arrayList[10].dissent=t.info.dissent_productsvoiceexplain,t.arrayList[11].dissent=t.info.dissent_insureinvoiceexplain,t.arrayList[12].dissent=t.info.dissent_signexplain,t.arrayList[13].dissent=t.info.dissent_photoexplain,t.arrayList[14].dissent=t.info.dissent_other,t.initFileRename()}))}}),m=u,h=(i("e676"),i("2877")),p=Object(h["a"])(m,o,n,!1,null,"87ad216c",null);e["default"]=p.exports},b93d:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAATxJREFUaEPtWV0OgjAM7iTeQhO9jhzCB2+BD+KD3MIHD4HXkURuYWRGA0YJg86WzSXllbXr97OOFAWBPyrw+kEA+FZQFAhGgdthlU6UWgPAwmHRRaX1abo9p6Y9URaqi985LPxrq0rrvQkECsA9i68AMPMFAADKKMnnXftjAegmuI8NToBt1aMk76zVGoApEWfxTa57Fr+JEwANK6KAhdfEQjaHyUQshkVK7OhdSADU8nhro6KAKAAAGBt8rrFo9a+lJn9j9mXrQgKgQzanClAuI0osm4UoRVBiBcBQx8H4WBTwzeJfKzBETt97jP1GP8QCwPfHnCjArUCok7mL46l023lFlOTLn2ejwU+nn8hrEBvHU+qy0vpI/j9A6SRjx6IusrGLoOQXABT2OGJFAQ4WKTlEAQp7HLHBK/AA4k5IQOfQdIYAAAAASUVORK5CYII="},d991:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAWRJREFUaEPtmT1Ow0AQhd+sgcPAAZISKn6cS3ACJCQKVqJCWiQKpNyAQ2B+KijjA8BhAO+gpTJ2iDYMS9ZiUlozz/Pe51SPMPAfDfx+qIFVE5xL4NUdjNZAUwZGqz4wvJ+A+h18tGFv6+49PQPs9jc9zHMOh3dvMPBbZO9e2s97Brwr7xnY9Q3trJ/dPOVg5O18sm0KfiTgwdhqb6GBxpUcBgpbZfUH/+6u3pFqINE3pwQSBRstqwSio0o0qAQSBRstqwSio0o0qAQSBRstqwSio0o0qASai8klmE8SBfxVlnBdnFaH7YdiAoM38CfJL3iJmIAaECagBIQBiteVgDhCoYASEAYoXlcC4giFAkpAGKB4XQmIIxQK/B8C3pWzUO5lWjHVxlbjNsxeQxMaygI0ExJPst6Ax92mcm4PFppKhrkKZV+SS5YUDeUewR93G8ogk1WRt6Svz3E18JPUfnNn8AQ+AEV+WkBcQgngAAAAAElFTkSuQmCC"},e676:function(t,e,i){"use strict";i("80e3")}}]);