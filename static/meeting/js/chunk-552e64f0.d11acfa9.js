(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-552e64f0"],{1201:function(t,e,a){"use strict";a("9386")},9386:function(t,e,a){},e617:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ItineraryList"},[e("div",{staticClass:"title"},[t._v("行程管理")]),e("div",{staticClass:"content"},[e("div",{staticClass:"tools"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addProjectStatus=!0}}},[t._v("添加新项目")])],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData.List,stripe:"",height:"100%"}},[e("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("date_day")(e.row.start_date))+" ")]}}])}),e("el-table-column",{attrs:{label:"行程日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("date_day")(e.row.start_date))+" - "+t._s(t._f("date_day")(e.row.end_date))+" ")]}}])}),e("el-table-column",{attrs:{prop:"event_name",label:"项目名称"}}),e("el-table-column",{attrs:{prop:"project_manager_name",label:"项目经理"}}),e("el-table-column",{attrs:{prop:"customer_company_name",label:"客户公司名称"}}),e("el-table-column",{attrs:{prop:"customer_name",label:"客户姓名"}}),e("el-table-column",{attrs:{prop:"contact_number",label:"联系方式"}}),e("el-table-column",{attrs:{prop:"number_of_participants",label:"参与人数"}}),e("el-table-column",{attrs:{prop:"statusname",label:"项目状态"}}),e("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticClass:"tools_btn",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.goInfo(a.$index,a.row)}}},[t._v("查看项目")]),e("el-button",{staticClass:"tools_btn",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.addStroke(a.$index,a.row)}}},[t._v("添加行程")]),a.row.status!=t.cancelprojectstatus?e("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定要取消此项目吗？"},on:{confirm:function(e){return t.onDelete(a.$index,a.row)}}},[e("el-button",{staticClass:"tools_btn",attrs:{slot:"reference",size:"mini",type:"text"},slot:"reference"},[t._v("取消项目")])],1):t._e(),e("el-button",{staticClass:"tools_btn",attrs:{size:"mini",type:"text"},on:{click:function(e){return t.update(a.$index,a.row)}}},[t._v("编辑")])]}}])})],1),e("el-pagination",{staticClass:"pages",attrs:{background:"",layout:"prev, pager, next",total:t.tableData.Counts,"current-page":t.tableData.CurrentPage},on:{"current-change":t.currentChange}})],1),e("el-dialog",{attrs:{title:t.projectTitle,visible:t.addProjectStatus,"before-close":t=>{this.projectTitle="添加项目",this.itemData=null,t()},width:"700px"},on:{"update:visible":function(e){t.addProjectStatus=e}}},[t.addProjectStatus?e("projectAdded",{attrs:{"item-data":t.itemData},on:{onColse:t.save}}):t._e()],1)],1)},n=[],o=a("97aa"),i={name:"ItineraryList",components:{projectAdded:o["a"]},data(){return{projectTitle:"添加项目",addProjectStatus:!1,cancelprojectstatus:"0022-4",itemData:null,tableData:{CurrentPage:1,List:[]}}},methods:{update(t,e){this.itemData=e,this.projectTitle="编辑项目",this.addProjectStatus=!0},offShelf(t,e){this.$api.casefrozen({id:e.id},"POST").then(t=>{this.$message({message:"冻结成功！",type:"success"}),this.GetList()})},onDelete(t,e){this.$api.cancelproject({id:e.id},"POST").then(t=>{this.$message({message:"项目取消成功！",type:"success"}),this.GetList()})},GetList(){this.$api.projectlist({Page:this.tableData.CurrentPage,Rows:10},"POST").then(t=>{this.tableData=t})},currentChange(t){this.tableData.CurrentPage=t,this.GetList()},save(t){this.$api.projectsave(t,"POST").then(e=>{this.$message({message:t.id?"修改成功！":"添加成功！",type:"success"}),this.addProjectStatus=!1,t.id||(this.tableData.CurrentPage=1),this.GetList()})},goInfo(t,e){this.$router.push({name:"ItineraryManagementInfo",params:{id:e.id}})},addStroke(t,e){this.$router.push({name:"addStroke",params:{id:e.id}})}},mounted(){this.GetList()}},r=i,l=(a("1201"),a("0b56")),c=Object(l["a"])(r,s,n,!1,null,"3aed1a32",null);e["default"]=c.exports}}]);