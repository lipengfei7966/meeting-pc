(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b677eb96"],{2654:function(e,t,r){"use strict";r.d(t,"j",(function(){return a})),r.d(t,"k",(function(){return n})),r.d(t,"i",(function(){return u})),r.d(t,"h",(function(){return l})),r.d(t,"l",(function(){return i})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return m})),r.d(t,"b",(function(){return c})),r.d(t,"g",(function(){return d})),r.d(t,"a",(function(){return p})),r.d(t,"c",(function(){return f})),r.d(t,"d",(function(){return b}));var o=r("53ca");r("ac1f"),r("00b4"),r("d9e2"),r("a9e3"),r("d3b7"),r("159b");function a(e,t,r){var o=/^((0\d{2,3}-\d{7,8})|(1[34578]\d{9}))$/;""==t||void 0==t||null==t||o.test(t)||""==t?r():r(new Error("请输入正确的电话号码或者固话号码"))}function n(e,t,r){var o=/0\d{2}-\d{7,8}/;""==t||void 0==t||null==t||o.test(t)||""==t?r():r(new Error("请输入正确的固话（格式：区号+号码,如010-1234567）"))}function u(e,t,r){var o=/^[1][3,4,5,7,8][0-9]{9}$/;""==t||void 0==t||null==t||o.test(t)||""==t?r():r(new Error("请输入正确的电话号码"))}function l(e,t,r){var o=/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;""==t||void 0==t||null==t||o.test(t)?r():r(new Error("请输入正确的邮箱地址"))}function i(e,t,r){var o=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/;""==t||void 0==t||null==t||o.test(t)?r():r(new Error("请输入正确的URL"))}function s(e,t,r){if(!t)return r(new Error("输入不可以为空"));setTimeout((function(){if(Number(t)){var e=/^[0-9]*[1-9][0-9]*$/,o=e.test(t);o?r():r(new Error("请输入正整数"))}else r(new Error("请输入正整数"))}),0)}function m(e,t,r){t||r(),setTimeout((function(){if(Number(t)){var e=/^[0-9]*[1-9][0-9]*$/,o=e.test(t);o?r():r(new Error("请输入正整数"))}else r(new Error("请输入正整数"))}),1e3)}function c(e,t){var r={},a=[];if(e=Array.isArray(e)?e:[],t)for(var n=0;n<e.length;n++)if(r[e[n].date]){for(var u=0;u<a.length;u++)if(e[n].date===a[u].date){a[u].settlement+=Number("object"==Object(o["a"])(e[n].settlement_total_price)?e[n].settlement_total_price.value:e[n].settlement_total_price),a[u].orgSettlement+=Number("object"==Object(o["a"])(e[n].total_price)?e[n].total_price.value:e[n].total_price),a[u].data.push(e[n]);break}}else a.push({date:e[n].date,settlement:Number("object"==Object(o["a"])(e[n].settlement_total_price)?e[n].settlement_total_price.value:e[n].settlement_total_price),orgSettlement:Number("object"==Object(o["a"])(e[n].total_price)?e[n].total_price.value:e[n].total_price),data:[e[n]]}),r[e[n].date]=e[n];else for(var l=0;l<e.length;l++)if(r[e[l].date]){for(var i=0;i<a.length;i++)if(e[l].date===a[i].date){a[i].settlement+="object"==Object(o["a"])(e[l].settlement_price)?e[l].settlement_price.value:e[l].settlement_price,a[i].orgSettlement+="object"==Object(o["a"])(e[l].price)?e[l].price.value:e[l].price,a[i].data.push(e[l]);break}}else a.push({date:e[l].date,settlement:"object"==Object(o["a"])(e[l].settlement_price)?e[l].settlement_price.value:e[l].settlement_price,orgSettlement:"object"==Object(o["a"])(e[l].price)?e[l].price.value:e[l].price,data:[e[l]]}),r[e[l].date]=e[l];return a}function d(e){var t={},r=[];e=Array.isArray(e)?e:[];for(var o=0;o<e.length;o++)if(t[e[o].checkindate]){for(var a=0;a<r.length;a++)if(e[o].checkindate===r[a].checkindate){"大床房"==e[o].roomtype?(r[a].bigBedNum=e[o].roomcount,r[a].totalNum+=e[o].roomcount):"双床房"==e[o].roomtype?(r[a].doubleBedNum=e[o].roomcount,r[a].totalNum+=e[o].roomcount):(r[a].suiteNum=e[o].roomcount,r[a].totalNum+=e[o].roomcount);break}}else e[o].bigBedNum=0,e[o].doubleBedNum=0,e[o].suiteNum=0,e[o].totalNum=0,"大床房"==e[o].roomtype?(e[o].bigBedNum=e[o].roomcount,e[o].totalNum+=e[o].roomcount):"双床房"==e[o].roomtype?(e[o].doubleBedNum=e[o].roomcount,e[o].totalNum+=e[o].roomcount):(e[o].suiteNum=e[o].roomcount,e[o].totalNum+=e[o].roomcount),r.push(e[o]),t[e[o].checkindate]=e[o];return r}function p(e){for(var t={},r=[],o=0;o<e.length;o++){var a=(e[o].build?e[o].build.price:0)+(e[o].rentalCosts?e[o].rentalCosts.price:0);if(e[o].equipment&&e[o].equipment.forEach((function(e){a+=e.price||0})),t[e[o].rentalCosts.time])for(var n=function(t){if(e[o].rentalCosts.time===r[t].time)return r[t].totalPrice+=(e[o].build?e[o].build.price:0)+(e[o].rentalCosts?e[o].rentalCosts.price:0),e[o].equipment&&e[o].equipment.forEach((function(e){r[t].totalPrice+=e.price||0})),r[t].data.push(e[o]),"break"},u=0;u<r.length;u++){var l=n(u);if("break"===l)break}else r.push({time:e[o].rentalCosts.time,totalPrice:a,data:[e[o]]}),t[e[o].rentalCosts.time]=e[o]}return r}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time",r={},o=[];e=e||[];for(var a=0;a<e.length;a++)if(r[e[a][t]]){for(var n=0;n<o.length;n++)if(e[a][t]===o[n].time){o[n].data.push(e[a]),o[n].car.push(e[a]);break}}else o.push({time:e[a][t],car_date:e[a][t].substring(0,10),breakfast:e[a].breakfast,networks:e[a].networks,describe:e[a].describe,otherrequirements:e[a].otherrequirements,type:e[a].type,room_budget:e[a].room_budget,purpose:e[a].purpose,offer_remarks:e[a].offer_remarks,comments:e[a].comments,data:[e[a]],car:[e[a]]}),r[e[a][t]]=e[a];return o}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time",r={},o=[];e=e||[];for(var a=0;a<e.length;a++)o.push({time:e[a][t],car_date:e[a][t].substring(0,10),breakfast:e[a].breakfast,networks:e[a].networks,describe:e[a].describe,otherrequirements:e[a].otherrequirements,type:e[a].type,room_budget:e[a].room_budget,purpose:e[a].purpose,offer_remarks:e[a].offer_remarks,comments:e[a].comments,data:[e[a]],car:[e[a]]}),r[e[a][t]]=e[a];return o}},"44f4":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ItineraryList"},[r("div",{staticClass:"title"},[e._v(e._s(e.ruleForm.id?"修改行程":"添加行程"))]),r("div",{staticClass:"content"},[r("div",{staticClass:"content"},[r("el-form",{ref:"ruleForm",staticClass:"form",attrs:{"label-width":"120px",model:e.ruleForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"行程标题",prop:"title"}},[r("el-input",{attrs:{placeholder:"行程标题"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),r("el-form-item",{attrs:{label:"时间",prop:"start_date"}},[r("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择开始日期"},model:{value:e.ruleForm.start_date,callback:function(t){e.$set(e.ruleForm,"start_date",t)},expression:"ruleForm.start_date"}}),r("span",{staticStyle:{margin:"10px"}},[e._v("-")]),r("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择结束日期"},model:{value:e.ruleForm.end_date,callback:function(t){e.$set(e.ruleForm,"end_date",t)},expression:"ruleForm.end_date"}})],1),r("el-form-item",{attrs:{prop:"end_date"}}),r("el-form-item",{attrs:{label:"地点",prop:"address"}},[r("el-input",{attrs:{placeholder:"地点"},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1),r("el-form-item",{attrs:{label:"人数",prop:"number_of_people"}},[r("el-input",{attrs:{placeholder:"人数"},model:{value:e.ruleForm.number_of_people,callback:function(t){e.$set(e.ruleForm,"number_of_people",t)},expression:"ruleForm.number_of_people"}})],1),r("el-form-item",{attrs:{label:"行程负责人",prop:"person_in_charge"}},[r("el-input",{attrs:{placeholder:"行程负责人"},model:{value:e.ruleForm.person_in_charge,callback:function(t){e.$set(e.ruleForm,"person_in_charge",t)},expression:"ruleForm.person_in_charge"}})],1),r("el-form-item",{attrs:{label:"手机号码",prop:"phone_number"}},[r("el-input",{attrs:{placeholder:"手机号码"},model:{value:e.ruleForm.phone_number,callback:function(t){e.$set(e.ruleForm,"phone_number",t)},expression:"ruleForm.phone_number"}})],1),r("el-form-item",{attrs:{label:"客户要求"}},[r("el-input",{attrs:{type:"textarea",rows:5,placeholder:"客户要求"},model:{value:e.ruleForm.customer_requirements,callback:function(t){e.$set(e.ruleForm,"customer_requirements",t)},expression:"ruleForm.customer_requirements"}})],1),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{type:"textarea",rows:5,placeholder:"备注"},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("立即保存")])],1)],1)],1)])])},a=[],n=r("2654"),u={data:function(){return{ruleForm:{id:null,event_project_id:this.$route.params.id,title:"",start_date:"",end_date:"",address:"",longitude:"",latitude:"",number_of_people:"",person_in_charge:"",phone_number:"",customer_requirements:"",remark:""},rules:{title:[{required:!0,message:"请输入行程标题",trigger:"change"}],start_date:[{required:!0,message:"请输入开始时间",trigger:"change"}],end_date:[{required:!0,message:"请输入结束时间",trigger:"change"}],address:[{required:!0,message:"请输入地点",trigger:"change"}],number_of_people:[{required:!0,message:"请输入人数",trigger:"change"},{validator:n["e"],trigger:"change"}],person_in_charge:[{required:!0,message:"请输入行程负责人",trigger:"change"}],phone_number:[{required:!0,message:"请输入公司手机号码",trigger:"change"},{validator:n["i"],trigger:"blur"}]}}},methods:{save:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.$api.schedulingsave(e.ruleForm,"POST").then((function(t){e.$message({message:"保存成功！",type:"success"}),e.$router.push({name:"strokeList",params:{id:e.$route.params.id}})}))}))}},mounted:function(){var e=this;this.$route.params.strokeid&&this.$api.schedulinginfo({id:this.$route.params.strokeid},"POST").then((function(t){e.ruleForm=t}))}},l=u,i=(r("abbd"),r("2877")),s=Object(i["a"])(l,o,a,!1,null,"68308396",null);t["default"]=s.exports},"53ca":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}},6758:function(e,t,r){},abbd:function(e,t,r){"use strict";r("6758")}}]);