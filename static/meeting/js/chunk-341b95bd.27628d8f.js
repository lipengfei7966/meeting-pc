(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-341b95bd"],{"06c1":function(t,e,o){var i=o("17e9"),n=String,r=TypeError;t.exports=function(t){if("object"==typeof t||i(t))return t;throw r("Can't set "+n(t)+" as a prototype")}},"0e5c":function(t,e,o){"use strict";var i=o("5829"),n=o("8642");e["a"]=function(t){return new Promise((function(e,o){let r=[],a={},s=t.length;console.log(t.length,t);const c=()=>0==t.length?e(r):String(t[0].file).IsPicture()?(t.shift(),c()):void i["a"].upload({file:t[0].file},"POST",{type:"form"}).then(o=>{console.log(o);var i=!0;if(void 0!=o&&""==o.FilePath&&""==o.OriginalFileName&&(console.log("重复了"),o=void 0,i=!1),void 0==o&&i){n["default"].prototype.$alert("网络不稳定, 文件上传失败, 请重新上传","提示",{confirmButtonText:"确定",callback:t=>{n["default"].prototype.$message({message:"上传失败的文件已标记",type:"warning"})}});let o=s-t.length;return e({tag:o,uploadImageList:r})}a=o,r.push(a),t.shift(),c()});c()}))}},2654:function(t,e,o){"use strict";o.d(e,"j",(function(){return i})),o.d(e,"k",(function(){return n})),o.d(e,"i",(function(){return r})),o.d(e,"h",(function(){return a})),o.d(e,"l",(function(){return s})),o.d(e,"e",(function(){return c})),o.d(e,"f",(function(){return l})),o.d(e,"b",(function(){return d})),o.d(e,"g",(function(){return f})),o.d(e,"a",(function(){return u})),o.d(e,"c",(function(){return p})),o.d(e,"d",(function(){return h}));o("9b2a");function i(t,e,o){const i=/^((0\d{2,3}-\d{7,8})|(1[34578]\d{9}))$/;""==e||void 0==e||null==e||i.test(e)||""==e?o():o(new Error("请输入正确的电话号码或者固话号码"))}function n(t,e,o){const i=/0\d{2}-\d{7,8}/;""==e||void 0==e||null==e||i.test(e)||""==e?o():o(new Error("请输入正确的固话（格式：区号+号码,如010-1234567）"))}function r(t,e,o){const i=/^[1][3,4,5,7,8][0-9]{9}$/;""==e||void 0==e||null==e||i.test(e)||""==e?o():o(new Error("请输入正确的电话号码"))}function a(t,e,o){const i=/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;""==e||void 0==e||null==e||i.test(e)?o():o(new Error("请输入正确的邮箱地址"))}function s(t,e,o){const i=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/;""==e||void 0==e||null==e||i.test(e)?o():o(new Error("请输入正确的URL"))}function c(t,e,o){if(!e)return o(new Error("输入不可以为空"));setTimeout(()=>{if(Number(e)){const t=/^[0-9]*[1-9][0-9]*$/,i=t.test(e);i?o():o(new Error("请输入正整数"))}else o(new Error("请输入正整数"))},0)}function l(t,e,o){e||o(),setTimeout(()=>{if(Number(e)){const t=/^[0-9]*[1-9][0-9]*$/,i=t.test(e);i?o():o(new Error("请输入正整数"))}else o(new Error("请输入正整数"))},1e3)}function d(t,e){let o={},i=[];if(t=Array.isArray(t)?t:[],e)for(let n=0;n<t.length;n++)if(o[t[n].date]){for(let e=0;e<i.length;e++)if(t[n].date===i[e].date){i[e].settlement+=Number("object"==typeof t[n].settlement_total_price?t[n].settlement_total_price.value:t[n].settlement_total_price),i[e].orgSettlement+=Number("object"==typeof t[n].total_price?t[n].total_price.value:t[n].total_price),i[e].data.push(t[n]);break}}else i.push({date:t[n].date,settlement:Number("object"==typeof t[n].settlement_total_price?t[n].settlement_total_price.value:t[n].settlement_total_price),orgSettlement:Number("object"==typeof t[n].total_price?t[n].total_price.value:t[n].total_price),data:[t[n]]}),o[t[n].date]=t[n];else for(let n=0;n<t.length;n++)if(o[t[n].date]){for(let e=0;e<i.length;e++)if(t[n].date===i[e].date){i[e].settlement+="object"==typeof t[n].settlement_price?t[n].settlement_price.value:t[n].settlement_price,i[e].orgSettlement+="object"==typeof t[n].price?t[n].price.value:t[n].price,i[e].data.push(t[n]);break}}else i.push({date:t[n].date,settlement:"object"==typeof t[n].settlement_price?t[n].settlement_price.value:t[n].settlement_price,orgSettlement:"object"==typeof t[n].price?t[n].price.value:t[n].price,data:[t[n]]}),o[t[n].date]=t[n];return i}function f(t){let e={},o=[];t=Array.isArray(t)?t:[];for(let i=0;i<t.length;i++)if(e[t[i].checkindate]){for(let e=0;e<o.length;e++)if(t[i].checkindate===o[e].checkindate){"大床房"==t[i].roomtype?(o[e].bigBedNum=t[i].roomcount,o[e].totalNum+=t[i].roomcount):"双床房"==t[i].roomtype?(o[e].doubleBedNum=t[i].roomcount,o[e].totalNum+=t[i].roomcount):(o[e].suiteNum=t[i].roomcount,o[e].totalNum+=t[i].roomcount);break}}else t[i].bigBedNum=0,t[i].doubleBedNum=0,t[i].suiteNum=0,t[i].totalNum=0,"大床房"==t[i].roomtype?(t[i].bigBedNum=t[i].roomcount,t[i].totalNum+=t[i].roomcount):"双床房"==t[i].roomtype?(t[i].doubleBedNum=t[i].roomcount,t[i].totalNum+=t[i].roomcount):(t[i].suiteNum=t[i].roomcount,t[i].totalNum+=t[i].roomcount),o.push(t[i]),e[t[i].checkindate]=t[i];return o}function u(t){let e={},o=[];for(let i=0;i<t.length;i++){let n=(t[i].build?t[i].build.price:0)+(t[i].rentalCosts?t[i].rentalCosts.price:0);if(t[i].equipment&&t[i].equipment.forEach(t=>{n+=t.price||0}),e[t[i].rentalCosts.time]){for(let e=0;e<o.length;e++)if(t[i].rentalCosts.time===o[e].time){o[e].totalPrice+=(t[i].build?t[i].build.price:0)+(t[i].rentalCosts?t[i].rentalCosts.price:0),t[i].equipment&&t[i].equipment.forEach(t=>{o[e].totalPrice+=t.price||0}),o[e].data.push(t[i]);break}}else o.push({time:t[i].rentalCosts.time,totalPrice:n,data:[t[i]]}),e[t[i].rentalCosts.time]=t[i]}return o}function p(t,e="time"){let o={},i=[];t=t||[];for(let n=0;n<t.length;n++)if(o[t[n][e]]){for(let o=0;o<i.length;o++)if(t[n][e]===i[o].time){i[o].data.push(t[n]),i[o].car.push(t[n]);break}}else i.push({time:t[n][e],car_date:t[n][e].substring(0,10),breakfast:t[n].breakfast,networks:t[n].networks,describe:t[n].describe,otherrequirements:t[n].otherrequirements,type:t[n].type,room_budget:t[n].room_budget,purpose:t[n].purpose,offer_remarks:t[n].offer_remarks,comments:t[n].comments,data:[t[n]],car:[t[n]]}),o[t[n][e]]=t[n];return i}function h(t,e="time"){let o={},i=[];t=t||[];for(let n=0;n<t.length;n++)i.push({time:t[n][e],car_date:t[n][e].substring(0,10),breakfast:t[n].breakfast,networks:t[n].networks,describe:t[n].describe,otherrequirements:t[n].otherrequirements,type:t[n].type,room_budget:t[n].room_budget,purpose:t[n].purpose,offer_remarks:t[n].offer_remarks,comments:t[n].comments,data:[t[n]],car:[t[n]]}),o[t[n][e]]=t[n];return i}},3471:function(t,e,o){var i=o("17e9"),n=o("de03"),r=o("78a8");t.exports=function(t,e,o){var a,s;return r&&i(a=e.constructor)&&a!==o&&n(s=a.prototype)&&s!==o.prototype&&r(t,s),t}},"672b":function(t,e,o){var i=o("b23f"),n=Function.prototype,r=n.apply,a=n.call;t.exports="object"==typeof Reflect&&Reflect.apply||(i?a.bind(r):function(){return a.apply(r,arguments)})},7538:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"quotedprice"},[e("div",{staticClass:"path"},[e("ul",[e("li",{staticStyle:{color:"#409EFF",cursor:"pointer"},on:{click:function(e){return t.$router.replace({path:"/activityInquiry/orderList"})}}},[t._v("活动询价订单列表")]),e("li",{staticStyle:{color:"#7c7f82"}},[t._v(">")]),e("li",{staticStyle:{color:"#409EFF",cursor:"pointer"},on:{click:function(e){return t.$router.replace({path:"/activityInquiry/orderList/"+t.info.inquiry_sheet_object_id})}}},[t._v("活动询价订单详情")]),e("li",{staticStyle:{color:"#7c7f82"}},[t._v(">")]),e("li",{staticStyle:{color:"#7c7f82"}},[t._v("活动询价订单报价")])])]),t.info?e("div",{staticClass:"content"},[e("div",{staticClass:"info"},[e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("询价单号")]),e("div",{staticClass:"context"},[t._v(t._s(t.info.inquiry_sheet_code))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("报名截至日期")]),e("div",{staticClass:"context"},[t._v(t._s(t._f("date_ex")(t.info.offerenddate)))])])]),e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("活动名称")]),e("div",{staticClass:"context"},[t._v(t._s(t.info.activity_name))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("城市")]),e("div",{staticClass:"context"},[t._v(t._s(t.info.event_city))])])]),e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("最多活动人数")]),e("div",{staticClass:"context"},[t._v(t._s(t.info.activity_count))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("活动日期")]),e("div",{staticClass:"context"},[t._v(" "+t._s(t._f("date_day")(t.info.activity_startdate))+" 至 "+t._s(t._f("date_day")(t.info.activity_enddate))+" "+t._s(1==t.info.isadjustdate?"[会议日期可以调整]":"[会议日期不可调整]")+" ")])])]),e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("公司名称")]),e("div",{staticClass:"context"},[t._v(t._s(t.info.company_name))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("联系人")]),e("div",{staticClass:"context"},[t._v(t._s(t.info.contacts))])])]),e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("联系邮箱")]),e("div",{staticClass:"context"},[t._v(t._s(t.info.mailbox))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("联系电话")]),e("div",{staticClass:"context"},[t._v(t._s(t.info.customer_service_telephone_numbers))])])])]),e("div",{staticClass:"info"},[e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("酒店")]),e("div",{staticClass:"context"},[t._v(t._s(t.info.hotelname))])]),e("div",{staticClass:"item"},[t._m(0),e("div",{staticClass:"context contextSel"},[e("el-select",{attrs:{disabled:t.readonly,placeholder:"请选择"},on:{change:t.changeSel},model:{value:t.contractsId,callback:function(e){t.contractsId=e},expression:"contractsId"}},t._l(t.info.contactslist,(function(t){return e("el-option",{key:t.id,attrs:{label:t.contacts,value:t.id}})})),1),e("el-input",{attrs:{disabled:t.disabled||t.readonly,placeholder:"请输入您的姓名"},model:{value:t.info.biddername,callback:function(e){t.$set(t.info,"biddername",e)},expression:"info.biddername"}})],1)])]),e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[t._m(1),e("div",{staticClass:"context"},[e("el-input",{attrs:{disabled:t.disabled||t.readonly,placeholder:"请输入您的联系电话"},model:{value:t.info.biddertel,callback:function(e){t.$set(t.info,"biddertel",e)},expression:"info.biddertel"}})],1)]),e("div",{staticClass:"item"},[t._m(2),e("div",{staticClass:"context"},[e("el-input",{attrs:{disabled:t.disabled||t.readonly,placeholder:"请输入您的联系邮箱"},model:{value:t.info.bidderemail,callback:function(e){t.$set(t.info,"bidderemail",e)},expression:"info.bidderemail"}})],1)])])]),e("div",{staticClass:"excel"},[e("span",[t._v("采购需求报价")]),0==this.$route.params.isSubmit?e("a",{staticStyle:{cursor:"pointer"},attrs:{download:""},on:{click:t.excelexport}},[t._v("下载excel")]):t._e()]),t.hotelVisible?e("div",{staticClass:"title_item"},[t._v("采购酒店")]):t._e(),t.hotelVisible?e("div",{staticClass:"section"},[e("el-select",{attrs:{remote:"",filterable:"","reserve-keyword":"",placeholder:"请选择采购酒店","remote-method":t.remoteMethod,loading:t.loading},model:{value:t.info.hotel_id,callback:function(e){t.$set(t.info,"hotel_id",e)},expression:"info.hotel_id"}},t._l(t.hotelList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),1==t.info.event_info_configure.bjqrisdisplay?e("span",{staticStyle:{color:"rgb(22, 155, 213)","line-height":"30px",cursor:"pointer",float:"right"},on:{click:t.downloadOfferConfirm}},[t._v("下载报价确认单")]):t._e()],1):t._e(),t.roomVisible?e("div",{staticClass:"title_item title_item_sel"},[e("div",[t._v("客房需求")]),e("div",{staticClass:"sel_el"},[e("el-select",{staticStyle:{width:"100%"},attrs:{disabled:t.readonly,size:"medium",placeholder:"请选择"},on:{change:function(e){return t.roomVat(e)}},model:{value:t.info.roomtaxid,callback:function(e){t.$set(t.info,"roomtaxid",e)},expression:"info.roomtaxid"}},t._l(t.info.taxlist,(function(t){return e("el-option",{key:t.id,attrs:{label:t.taxname,value:t.id}})})),1)],1)]):t._e(),t.roomVisible?e("div",{staticClass:"section"},[t._l(t.info.quoted_price_room,(function(o,i){return e("table",{key:"kefang"+i},[o.room_list&&o.room_list.length>0?e("thead",[e("tr",{staticClass:"color_1"},[e("th",{staticClass:"topleft datecolor",attrs:{colspan:"4"}},[t._v(" 日期: "+t._s(t._f("date_day_ex")(o.date))+" "),0!=i&&1==t.$route.params.isSubmit?e("el-button",{staticClass:"copy",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.copyRoomDay(i)}}},[t._v("复制上一天")]):t._e()],1),e("th",{staticClass:"topleft"},[t._v("一天总金额 ￥"+t._s(t.dayMoney(o.room_list).toFixed(2)))])]),t._m(3,!0)]):t._e(),e("tbody",[t._l(o.room_list,(function(i,n){return e("tr",{key:"c_"+n},[e("td",[null!=i.inquiry_sheet_room_id?[t._v(" "+t._s(i.roomtypename)+" ")]:e("el-select",{attrs:{size:"small",filterable:""},on:{change:function(e){return t.changeCostProject(e,i)}},model:{value:i.roomtype,callback:function(e){t.$set(i,"roomtype",e)},expression:"item_c.roomtype"}},t._l(t.roomcostProjects,(function(t){return e("el-option",{directives:[{name:"show",rawName:"v-show",value:"0"!==t.detail_type,expression:"rc.detail_type !== '0'"}],key:t.code,attrs:{label:t.name,value:t.code}})})),1)],2),e("td",[t._v(t._s(i.roomcount))]),e("td",[e("el-input",{class:{difference:t.roomProvideCountDifference(i)},attrs:{readonly:t.readonly},on:{input:function(e){i.provide_count=t.formatNum(i.provide_count,3)}},model:{value:i.provide_count,callback:function(e){t.$set(i,"provide_count",e)},expression:"item_c.provide_count"}})],1),e("td",[e("el-input",{class:{difference:t.roomDifference(i)},attrs:{readonly:t.readonly},on:{input:function(e){i.unitprice=t.formatNum(i.unitprice,2)}},model:{value:i.unitprice,callback:function(e){t.$set(i,"unitprice",e)},expression:"item_c.unitprice"}})],1),e("td",[e("el-input",{class:{room_line:!i.inquiry_sheet_room_id},attrs:{readonly:t.readonly},model:{value:i.remarks,callback:function(e){t.$set(i,"remarks",e)},expression:"item_c.remarks"}}),i.inquiry_sheet_room_id||1!=t.$route.params.isSubmit?t._e():e("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini"},on:{click:function(e){return t.delNewRoomType(o,n)}}})],1)])})),1==t.$route.params.isSubmit?e("tr",[e("td",[t._v("其他要求")]),e("td",{attrs:{colspan:"3"}},[o.room_list.length>0?[t._v(" "+t._s(o.room_list[0].otherrequirements)+" ")]:t._e()],2),e("td",{staticStyle:{"text-align":"center"}},[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.addNewRoomType(o.room_list)}}},[t._v("添加新房型")])],1)]):t._e()],2)])})),e("div",{staticClass:"total"},[e("div",[t._v(" 客房报价总价: "),e("span",[t._v("￥"+t._s(t.allMoney.toFixed(2)))])]),e("div",[t._v(" 客房报价总备注： "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.info.room_remarks,expression:"info.room_remarks"}],attrs:{type:"text",placeholder:"请备注您的客房优势",readonly:t.readonly},domProps:{value:t.info.room_remarks},on:{input:function(e){e.target.composing||t.$set(t.info,"room_remarks",e.target.value)}}})])])],2):t._e(),t.conferenceVisible?e("div",{staticClass:"title_item title_item_sel"},[e("div",[t._v("会场需求")]),e("div",{staticClass:"sel_el"},[e("el-select",{staticStyle:{width:"100%"},attrs:{disabled:t.readonly,size:"medium",placeholder:"请选择"},on:{change:function(e){return t.conferenceVat(e)}},model:{value:t.info.conferencetaxid,callback:function(e){t.$set(t.info,"conferencetaxid",e)},expression:"info.conferencetaxid"}},t._l(t.info.taxlist,(function(t){return e("el-option",{key:t.id,attrs:{label:t.taxname,value:t.id}})})),1)],1)]):t._e(),t.conferenceVisible?e("div",{staticClass:"section"},[t._l(t.info.quoted_price_conference,(function(o,i){return e("table",{key:i},[e("thead",[e("tr",{staticClass:"color_1"},[e("th",{staticClass:"topleft datecolor",attrs:{colspan:"3"}},[t._v("日期: "+t._s(t._f("date_day_ex")(o.date)))]),e("th",{staticClass:"topleft",attrs:{colspan:"2"}},[t._v("一天总金额 ￥"+t._s(t.meetingDayMoney(o.conference_list).toFixed(2)))])]),t._m(4,!0)]),e("tbody",t._l(o.conference_list,(function(i,n){return e("tr",{key:"c_"+n},[e("td",[1==i.type?[t._v(" "+t._s(0==i.is_important?"主会场":"子会场")+"-场租 ")]:t._e(),2==i.type?[t._v(" "+t._s(0==i.is_important?"主会场":"子会场")+"-搭建 ")]:t._e(),3==i.type?[t._v(" "+t._s(0==i.is_important?"主会场":"子会场")+"-设备 ")]:t._e(),4==i.type?[e("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.conferenceTypeChange(i)}},model:{value:i.quoted_code,callback:function(e){t.$set(i,"quoted_code",e)},expression:"item_c.quoted_code"}},t._l(t.addConferenceSelects,(function(t){return e("el-option",{directives:[{name:"show",rawName:"v-show",value:"0"!==t.detail_type,expression:"option.detail_type !== '0'"}],key:t.code,attrs:{label:t.name,value:t.code}})})),1)]:t._e()],2),e("td",[1==i.type?[e("p",[t._v("会议时间:"+t._s(i.starttime)+"~"+t._s(i.endtime))]),e("p",[t._v("出席人数: "+t._s(i.attendees)+"人")]),e("p",[t._v("会场台型: "+t._s(i.roomsetuptypename))]),e("p",[t._v("会场面积范围:"+t._s(i.min_area)+"~"+t._s(i.max_area)+" sqm")])]:t._e(),2==i.type?[e("p",[t._v(t._s(t._f("date_day")(o.date))+" "+t._s(i.starttime)+"~"+t._s(t._f("date_day")(i.advance_date))+" "+t._s(i.endtime)+" "),e("br"),t._v(" "+t._s(i.related_information))])]:t._e(),3==i.type?[e("p",[t._v(t._s(i.equipment))])]:t._e(),4==i.type?[e("div",[t._v(" 数量： "),e("el-input-number",{staticStyle:{width:"50%"},attrs:{controls:!1,precision:0,placeholder:"请输入数量",readonly:t.readonly},model:{value:i.count,callback:function(e){t.$set(i,"count",t._n(e))},expression:"item_c.count"}})],1)]:t._e()],2),e("td",[2==i.type?[t._v(" "+t._s(i.describe)+" ")]:t._e(),3==i.type?[t._v(" "+t._s(i.microphonedescribe)+" ")]:t._e(),4==i.type?[e("div",[t._v(" 单价： ￥ "),e("el-input",{staticStyle:{width:"60%"},attrs:{readonly:t.readonly},on:{input:function(e){i.price=t.formatNum(i.price,2)}},model:{value:i.price,callback:function(e){t.$set(i,"price",e)},expression:"item_c.price"}})],1)]:t._e()],2),e("td",[4==i.type?[t._v(" ￥ "+t._s((i.price*i.count).toFixed(2))+" ")]:[e("el-input",{class:{difference:t.conferenceDifference(i)},attrs:{readonly:t.readonly},on:{input:function(e){i.price=t.formatNum(i.price,2)}},model:{value:i.price,callback:function(e){t.$set(i,"price",e)},expression:"item_c.price"}})]],2),e("td",[e("el-input",{staticStyle:{width:"auto"},attrs:{readonly:t.readonly},model:{value:i.comments,callback:function(e){t.$set(i,"comments",e)},expression:"item_c.comments"}}),1==i.type?e("span",{staticStyle:{"margin-left":"10px",color:"#409eff",cursor:"pointer"},on:{click:function(e){return t.addConferenceOther(o,i,n)}}},[t._v("添加其他费用")]):t._e(),4==i.type?e("span",{staticStyle:{"margin-left":"10px",color:"#409eff",cursor:"pointer"},on:{click:function(e){return t.delConferenceOther(o,i,n)}}},[t._v("删除")]):t._e()],1)])})),0)])})),e("div",{staticClass:"total"},[e("div",[t._v(" 会场报价总计: "),e("span",[t._v("￥"+t._s(t.meetingAllMoney.toFixed(2)))])]),e("div",[t._v(" 会议报价总备注： "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.info.conference_remarks,expression:"info.conference_remarks"}],attrs:{type:"text",placeholder:"您可以填写详细的报价备注",readonly:t.readonly},domProps:{value:t.info.conference_remarks},on:{input:function(e){e.target.composing||t.$set(t.info,"conference_remarks",e.target.value)}}})])])],2):t._e(),t.foodVisible?e("div",{staticClass:"title_item title_item_sel"},[e("div",[t._v("酒店内餐饮需求")]),e("div",[t._v("餐标Dining Standard:￥"+t._s(t.positiveFloatSix(t.info.food_limit).toFixed(2))+" ")]),e("div",{staticClass:"sel_el"},[e("el-select",{staticStyle:{width:"100%"},attrs:{disabled:t.readonly,size:"medium",placeholder:"请选择"},on:{change:function(e){return t.foodVat(e)}},model:{value:t.info.foodtaxid,callback:function(e){t.$set(t.info,"foodtaxid",e)},expression:"info.foodtaxid"}},t._l(t.info.taxlist,(function(t){return e("el-option",{key:t.id,attrs:{label:t.taxname,value:t.id}})})),1)],1)]):t._e(),t.foodVisible?e("div",{staticClass:"section"},[t._l(t.info.quoted_price_food,(function(o,i){return e("table",{key:i},[e("thead",[e("tr",{staticClass:"color_1"},[e("th",{staticClass:"topleft datecolor",attrs:{colspan:"4"}},[t._v("日期: "+t._s(t._f("date_day_ex")(o.date)))]),e("th",{staticClass:"topleft",attrs:{colspan:"2"}},[t._v("一天总金额 ￥"+t._s(t.repastDayMoney(o.food_list).toFixed(2)))])]),t._m(5,!0)]),e("tbody",t._l(o.food_list,(function(o,i){return e("tr",{key:"c_"+i},[e("td",[t._v(" "+t._s(o.foodtypename)+" "),o.usetypename?e("span",[t._v("["+t._s(o.usetypename)+"]")]):t._e()]),e("td",[t._v(t._s(o.personcount))]),e("td",[t._v(t._s(o.comments))]),e("td",[e("el-input",{class:{difference:t.foodDifference(o)},attrs:{type:"text",readonly:t.readonly},on:{input:function(e){o.price=t.formatNum(o.price,2)}},model:{value:o.price,callback:function(e){t.$set(o,"price",e)},expression:"item_c.price"}})],1),e("td",[1==o.addresstype?e("el-input",{attrs:{readonly:t.readonly,placeholder:"请注明餐厅名称或其他备注"},model:{value:o.offer_remarks,callback:function(e){t.$set(o,"offer_remarks",e)},expression:"item_c.offer_remarks"}}):e("el-input",{attrs:{placeholder:"请填写针对这个项目的特殊备注",readonly:t.readonly},model:{value:o.offer_remarks,callback:function(e){t.$set(o,"offer_remarks",e)},expression:"item_c.offer_remarks"}})],1),e("td",[t._v(t._s(t.positiveFloatSix(t.positiveInteger(o.personcount)*t.positiveFloatSix(o.price)).toFixed(2)))])])})),0)])})),e("div",{staticClass:"total"},[e("div",[t._v(" 酒店内餐饮报价总计: "),e("span",[t._v("￥"+t._s(t.repastAllMoney.toFixed(2)))])]),e("div",[t._v(" 酒店内餐饮报价总备注: "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.info.food_remarks,expression:"info.food_remarks"}],attrs:{type:"text",placeholder:"您可以填写详细的报价备注",readonly:t.readonly},domProps:{value:t.info.food_remarks},on:{input:function(e){e.target.composing||t.$set(t.info,"food_remarks",e.target.value)}}})])])],2):t._e(),e("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"a_click",attrs:{href:t.downloadUrl,target:"_blank",download:""}}),e("div",{staticClass:"title_item"},[t._v("报价书、报价说明（付款条件及其他备注）")]),e("div",{staticClass:"section"},[e("div",{staticClass:"uploadFile"},[e("span",[t._v("上传报价书：")]),e("el-upload",{staticClass:"upload-demo",attrs:{"on-change":(e,o)=>{t.handleChangeAttach(e,o)},"on-remove":(e,o)=>{t.handleRemoveAttach(e,o)},"on-preview":t.handlePreview,"auto-upload":!1,"file-list":this.fileList,multiple:!1,action:"",disabled:t.readonly}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("选择文件")])],1)],1),e("div",{staticClass:"remark"},[t._v("您可以上传您的官方报价书给终端客户。这份报价书将为保存保证此次交易的合规性。")]),e("div",{staticClass:"selDate"},[e("span",[t._v("*")]),t._v(" 报价有效期： "),e("div",{staticClass:"block"},[e("el-date-picker",{attrs:{readonly:t.readonly,type:"datetime",placeholder:"选择日期时间"},on:{change:t.dataChange},model:{value:t.info.quotationenddate,callback:function(e){t.$set(t.info,"quotationenddate",e)},expression:"info.quotationenddate"}})],1)]),e("div",{staticClass:"explain"},[t._v("报价说明（付款条件及其他备注）")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.info.offer_remarks,expression:"info.offer_remarks"}],staticClass:"bz",attrs:{placeholder:"请填写会场可使用面积、订金比例、订金支付和尾款结算方式等。"},domProps:{value:t.info.offer_remarks},on:{input:function(e){e.target.composing||t.$set(t.info,"offer_remarks",e.target.value)}}})]),e("div",{staticClass:"title_item"}),e("div",{staticClass:"section"},[e("div",{staticClass:"total"},[e("div",[e("span",{staticStyle:{"font-size":"32px"}},[t._v("总报价: ￥"+t._s(t.quotedPrice.toFixed(2)))])])])]),1==this.$route.params.isSubmit?e("div",{staticClass:"section btn_sec"},[e("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交报价")])],1):t._e()]):t._e()])},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"label"},[e("span",[t._v("*")]),t._v(" 报价人 ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"label"},[e("span",[t._v("*")]),t._v(" 联系电话 ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"label"},[e("span",[t._v("*")]),t._v(" 联系邮箱 ")])},function(){var t=this,e=t._self._c;return e("tr",{staticClass:"color_2"},[e("th",[t._v("房型")]),e("th",[t._v("所需数量")]),e("th",[t._v("酒店可提供数量")]),e("th",[t._v("单价")]),e("th",[t._v("报价备注")])])},function(){var t=this,e=t._self._c;return e("tr",{staticClass:"color_2"},[e("th",[t._v("项目")]),e("th",[t._v("需求")]),e("th",[t._v("需求备注")]),e("th",[t._v("报价")]),e("th",[t._v("报价备注")])])},function(){var t=this,e=t._self._c;return e("tr",{staticClass:"color_2"},[e("th",[t._v("项目")]),e("th",[t._v("人数/人次")]),e("th",[t._v("需求备注")]),e("th",[t._v("单价（RMB/人）")]),e("th",[t._v("报价备注")]),e("th",[t._v("总价（¥）")])])}],r=o("2654"),a=(o("b587"),o("0e5c")),s=o("cf45"),c=o("acd6"),l={data(){return{info:{},hotelList:[],rules:{IntegerNotMust:[{validator:r["f"],trigger:"change"}]},readonly:!1,loading:!1,addConferenceSelects:[],errormsg:[],warningmsg:"",foodlimitwarningmsg:[],selVat:"",info:{},contractsId:"",fileList:[],roomOut:1,conferenceOut:1,foodOut:1,transportationOut:1,carOut:1,otherOut:1,disabled:!0,downloadUrl:"",roomcostProjects:[]}},methods:{positiveInteger:s["q"],positiveFloatSix:s["o"],formatNum:s["e"],formatDate:s["d"],getNextDateFormat:s["i"],excelExport:c["a"],getFormatDate:s["g"],CompareDate:s["a"],downloadOfferConfirm(){var t="报价确认单";this.excelExport("/Template/GetTemplate",{eventid:this.info.activity_id,type:5,param:this.info.id},t)},addConferenceOther(t,e,o){let i=0;t.conference_list.forEach(t=>{4==t.type&&(i+=1)});let n={quoted_firstid:e.inquiry_sheet_conference_id,order_name:e.order_name,date:e.date,indexs:i+1,type:4,quoted_code:"",quoted_name:"",count:"",price:"",comments:""};t.conference_list.splice(o+i+1,0,n)},delConferenceOther(t,e,o){let i=0;t.conference_list.splice(o,1),t.conference_list.forEach(t=>{4==t.type&&(i+=1,t.indexs=i)})},searchSelectOption(){this.$api.getCostProjects({code:"0049"},"POST").then(t=>{this.addConferenceSelects=t})},conferenceTypeChange(t){this.addConferenceSelects.forEach(e=>{t.quoted_code==e.code&&(t.quoted_name=e.name)})},excelexport(){var t="报价单"+this.info.id;this.excelExport("/quotation/exportexcel",{eventId:this.info.activity_id},t)},dataChange(t){this.info.quotationenddate=this.formatDate("YYYY-mm-dd HH:MM:SS",t)},changeCostProject(t,e){e.roomtypename=e.custom_roomtype=this.roomcostProjects.filter(e=>e.code==t)[0].name,e.custom_roomtypeid=t,e.roomtypid=t},changeSel(t){this.info.contactslist.forEach((e,o)=>{t==e.id&&(this.info.bidder=e.id,this.info.biddername=e.contacts,this.info.biddertel=e.telephone,this.info.bidderemail=e.email,this.disabled=!0),t==e.id&&"其他"==e.contacts&&(this.disabled=!1,this.info.biddername="")})},initVat(){null==this.info.roomtaxid&&(this.info.roomtaxid=this.info.taxlist[0].id),null==this.info.conferencetaxid&&(this.info.conferencetaxid=this.info.taxlist[0].id),null==this.info.foodtaxid&&this.info.taxlist.forEach((t,e)=>{1==t.outtaxrate&&1==t.invoicetype&&(this.info.foodtaxid=t.id)}),this.info.taxlist.forEach((t,e)=>{t.id==this.info.roomtaxid&&(this.roomOut=t.outtaxrate),t.id==this.info.conferencetaxid&&(this.conferenceOut=t.outtaxrate),t.id==this.info.foodtaxid&&(this.foodOut=t.outtaxrate),t.id==this.info.transportationtaxid&&(this.transportationOut=t.outtaxrate),t.id==this.info.cartaxid&&(this.carOut=t.outtaxrate),t.id==this.info.othertaxid&&(this.otherOut=t.outtaxrate)})},roomVat(t){this.info.taxlist.forEach((e,o)=>{e.id==t&&(this.roomOut=e.outtaxrate)}),this.info.roomtaxid=t},conferenceVat(t){this.info.taxlist.forEach((e,o)=>{e.id==t&&(this.conferenceOut=e.outtaxrate)}),this.info.conferencetaxid=t},foodVat(t){this.info.taxlist.forEach((e,o)=>{e.id==t&&(this.foodOut=e.outtaxrate)}),this.info.foodtaxid=t},transportationVat(t){this.info.taxlist.forEach((e,o)=>{e.id==t&&(this.transportationOut=e.outtaxrate)}),this.info.transportationtaxid=t},carVat(t){this.info.taxlist.forEach((e,o)=>{e.id==t&&(this.carOut=e.outtaxrate)}),this.info.cartaxid=t},otherVat(t){this.info.taxlist.forEach((e,o)=>{e.id==t&&(this.otherOut=e.outtaxrate)}),this.info.othertaxid=t},handleChangeAttach(t,e){const o=t.size/1024/1024<10;if(!o)return this.$message.error("上传附件大小不能超过 10MB!"),void this.$refs.upload.handleRemove(t);this.fileList=e},handleRemoveAttach(t,e){this.fileList=e},handlePreview(t){if(!t.url)return;let e=t.url.substring(t.url.lastIndexOf(".")+1),o=["pdf","jpeg","jpg","png","txt"],i=["docx","doc","xls","xlsx","xlsm","ppt","pptx"];t.url=t.url.replace(/http:/,"https:"),this.downloadUrl=t.url,i.includes(e)?this.downloadUrl="https://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(t.url):o.includes(e)?this.downloadUrl=t.url:this.$message.info("文件格式不支持预览，下载后查看"),setTimeout(()=>{this.$refs.a_click.click()},100)},remoteMethod(t){this.loading=!0,this.$api.hotelList({Page:1,Rows:99,keyword:t},"POST").then(t=>{this.loading=!1,this.hotelList=t.List})},addNewRoomType(t){t.push({roomtypename:"免房",provide_count:0,remarks:"",unitprice:0,roomtype:"0034-4",custom_roomtype:"免房",custom_roomtypeid:"0034-4"})},delNewRoomType(t,e){t.room_list.splice(e,1)},copyRoomDay(t){this.info.quoted_price_room[t-1].room_list.forEach((e,o)=>{this.info.quoted_price_room[t].room_list.forEach((t,o)=>{t.roomtype==e.roomtype&&(t.roomtypename=e.roomtypename,t.provide_count=e.provide_count,t.remarks=e.remarks,t.unitprice=e.unitprice)})})},differenceShowErrorMessage:function(){let t="";this.errormsg.forEach(e=>{t+="<p style='padding:5px;'>"+e+"</p>"}),this.$message({message:t,dangerouslyUseHTMLString:!0,type:"error",lockScroll:!1})},addroomProvidecountwarningmsg:function(){this.warningmsg="";let t=!1,e=[],o=[],i=[],n=[],r=[];if(this.info.quoted_price_room&&this.info.quoted_price_room.length>0&&(this.info.quoted_price_room.forEach(t=>{t.room_list&&t.room_list.length>0&&t.room_list.forEach((t,n)=>{e.push(t),t.inquiry_sheet_room_id&&!o.includes(t.roomtypename)&&o.push(t.roomtypename),t.inquiry_sheet_room_id||i.includes(t.roomtypename)||i.push(t.roomtypename)})}),o.length>0&&o.forEach(o=>{let i=0,r=0,a=e.filter(t=>t.roomtypename==o);a.length>0&&a.forEach(t=>{i+=Object(s["q"])(t.roomcount),r+=Object(s["q"])(t.provide_count)}),r<i&&(t=!0),n.push({name:o,roomcount:i,provide_count:r})}),i.length>0&&i.forEach(t=>{let o=0,i=e.filter(e=>e.roomtypename==t);i.length>0&&i.forEach(t=>{o+=Object(s["q"])(t.provide_count)}),r.push({name:t,provide_count:o})}),t)){let t="",e="";n.forEach((o,i)=>{t+=o.name+o.roomcount.toString(),e+=o.name+o.provide_count.toString(),i<n.length-1&&(t+=" ",e+=" "),console.log(t)}),r.length>0&&(""!=e&&(e+=" "),r.forEach((t,o)=>{e+=t.name+t.provide_count.toString(),o<r.length-1&&(e+=" ")}));let o="<p>客户所需客房数量<"+t+"></p>",i="<p>与您填写的数量<"+e+"></p>";this.warningmsg=o+i}this.foodlimitwarningmsg.length>0&&this.foodlimitwarningmsg.forEach(t=>{this.warningmsg+="<p>"+t+"</p>"}),""!=this.warningmsg&&(this.warningmsg+="<p>确认提交当前报价吗？</p>")},validate:function(){return this.errormsg=[],this.checkRoomDifference,this.checkConferenceDifference,this.checkFoodDifference,this.checkTransportationDifference,this.checkCarDifference,this.checkOtherDifference,this.errormsg.length>0&&this.differenceShowErrorMessage(),0==this.errormsg.length},submit(){if(!this.disabled){var t=/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;if(!(this.info.biddername&&this.info.biddertel&&this.info.bidderemail))return void this.$message.error("姓名、手机、邮箱缺一不可！");if(!t.test(this.info.bidderemail))return void this.$message.error("邮箱格式不正确！")}null!=this.info.roomtaxid&&null!=this.info.conferencetaxid&&null!=this.info.foodtaxid?this.info.quotationenddate?this.CompareDate(this.info.quotationenddate,this.formatDate("YYYY-mm-dd HH:MM:SS",new Date))?this.validate()&&(this.addroomProvidecountwarningmsg(),""==this.warningmsg?this.save():this.$confirm(this.warningmsg,"提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定提交",cancelButtonText:"返回修改",type:"warning"}).then(()=>{this.save()}).catch(()=>{})):this.$message.error("有效期不允许在当前日期之前!"):this.$message.error("报价有效期未填写!"):this.$message.error("税率未选择！")},save(){let t=[],e=this.fileList.filter(t=>""!=t.uid);this.fileList.length>0&&e.forEach(e=>{t.push({key:e.uid,file:e.raw})}),console.log(t),Object(a["a"])(t).then(t=>{this.info.attachlist&&this.info.attachlist.length>0&&this.info.attachlist.forEach(t=>{0==this.fileList.filter(e=>e.id==t.id).length&&(t.delete=!0)}),t.forEach(t=>{t&&this.info.attachlist.push({filepath:t.FilePath,filename:t.OriginalFileName,filetype:1})});let e=this.quotedPrice.toFixed(2);this.$confirm("您报价￥"+e+"元,确认提交?","提示",{confirmButtonText:"确定提交报价",cancelButtonText:"取消",type:"warning"}).then(()=>{"非VAT"==this.info.taxtype&&(this.info.taxrate=0);let t=this.info.quoted_price_room;for(let e=0;e<t.length;e++){let o=t[e].room_list;for(let t=0;t<o.length;t++)o[t].TableName?(0==this.info.is_Inside_outside&&(o[t].inside_roomcount=0,o[t].outside_roomcount=o[t].provide_count),1==this.info.is_Inside_outside&&(o[t].provide_count<=o[t].outside_roomcount?(o[t].outside_roomcount=o[t].provide_count,o[t].inside_roomcount=0):o[t].provide_count>o[t].outside_roomcount&&(o[t].inside_roomcount=o[t].provide_count-o[t].outside_roomcount))):(o[t].indexs=t+1,o[t].inside_roomcount=0,o[t].outside_roomcount=o[t].provide_count)}this.$api.quotationsubmit(this.info,"POST").then(t=>{if(t){console.log(t);var e=t.event_quoted_price_id;return console.log(e),this.$api.SendQuotation({QuotationId:e},"POST").then(t=>{this.$router.push({name:"activityOrderInfo",params:{id:this.$route.params.id}})})}this.$message({message:"提交失败",type:"fail"})})}).catch(()=>{})})}},computed:{formateDate:()=>function(t){return Object(s["d"])("YYYY年mm月dd日",new Date(t))},hotelVisible:function(){return 1==this.info.inquirysheetType},roomVisible:function(){return this.info.quoted_price_room&&this.info.quoted_price_room.length>0},conferenceVisible:function(){return this.info.quoted_price_conference&&this.info.quoted_price_conference.length>0},foodVisible:function(){return this.info.quoted_price_food&&this.info.quoted_price_food.length>0},transportationVisible:function(){return this.info.quoted_price_transportation&&this.info.quoted_price_transportation.length>0},carVisible:function(){return this.info.quoted_price_car&&this.info.quoted_price_car.length>0},otherVisible:function(){return this.info.quoted_price_other&&this.info.quoted_price_other.length>0},adddifferenceerrormsg:()=>function(t,e,o){let i="";1==t?i=this.formateDate(e)+"客房,第"+o+"行,单价未填写,请填写单价":2==t?i=this.formateDate(e)+"会场,第"+o+"行,报价未填写,请填写报价":3==t?i=this.formateDate(e)+"餐饮,第"+o+"行,单价未填写,请填写单价":4==t?i=this.formateDate(e)+"大交通,第"+o+"单价未填写,请填写单价":5==t?i=this.formateDate(e)+"地面交通,第"+o+"行,单价未填写,请填写单价":6==t&&(i="其他服务,第"+o+"行,单价未填写,请填写单价"),this.errormsg.push(i)},addnewitemerrormsg:()=>function(t,e,o){let i="";1==t?i=this.formateDate(e)+"新增客房,第"+o+"行,消费项目名称为必填项,请填写房型":2==t?i=this.formateDate(e)+"新增会场,第"+o+"行,消费项目名称为必填项,请填写消费项目名称":3==t?i=this.formateDate(e)+"新增餐饮,第"+o+"行,消费项目名称为必填项,请填写消费项目名称":4==t?i=this.formateDate(e)+"新增大交通,第"+o+"行,消费项目名称为必填项,请填写消费项目名称":5==t&&(i=this.formateDate(e)+"新增地面交通,第"+o+"行,消费项目名称为必填项,请填写消费项目名称"),this.errormsg.push(i)},addfoodlimiterrormsg:()=>function(t,e,o){let i="";3==t&&(i=this.formateDate(e)+"酒店内餐饮,第"+o+"行,超过餐标"),this.foodlimitwarningmsg.push(i)},roomProvideCountDifference:()=>function(t){return Object(s["q"])(t.provide_count)<Object(s["q"])(t.roomcount)},roomDifference:()=>function(t){return""===t.unitprice},checkRoomDifference:function(){let t=!1;this.info.quoted_price_room&&this.info.quoted_price_room.length>0&&this.info.quoted_price_room.forEach(e=>{if(e.room_list&&e.room_list.length>0){e.room_list.forEach((o,i)=>{t=this.roomDifference(o),t&&this.adddifferenceerrormsg(1,e.date,i+1)});let o=e.room_list.filter(t=>null==t.inquiry_sheet_room_id&&""==t.roomtypename);o.length>0&&o.forEach((t,o)=>{this.addnewitemerrormsg(1,e.date,o+1)})}})},dayMoney:()=>function(t){let e=0;return t.forEach(t=>{let o=0;o=t.provide_count<0?Number(t.provide_count):this.positiveInteger(t.provide_count),e+=o*this.positiveFloatSix(t.unitprice)}),this.positiveFloatSix(e*parseFloat(this.roomOut))},allMoney:function(){let t=0;return this.info.quoted_price_room&&this.info.quoted_price_room.length>0&&this.info.quoted_price_room.forEach(e=>{t+=this.positiveFloatSix(this.dayMoney(e.room_list))}),this.positiveFloatSix(t)},meetingDayMoney:()=>function(t){let e=0;return t.forEach(t=>{var o;e+=this.positiveFloatSix(t.price*(null!==(o=t.count)&&void 0!==o?o:0))}),this.positiveFloatSix(e*parseFloat(this.conferenceOut))},meetingAllMoney:function(){let t=0;return this.info.quoted_price_conference&&this.info.quoted_price_conference.length>0&&this.info.quoted_price_conference.forEach(e=>{t+=this.meetingDayMoney(e.conference_list)}),this.positiveFloatSix(t)},conferenceDifference:()=>function(t){return""===t.price},checkConferenceDifference:function(){let t=!1;this.info.quoted_price_conference&&this.info.quoted_price_conference.length>0&&this.info.quoted_price_conference.forEach(e=>{e.conference_list&&e.conference_list.length>0&&e.conference_list.forEach((o,i)=>{t=this.conferenceDifference(o),t&&this.adddifferenceerrormsg(2,e.date,i+1)})})},repastDayMoney:()=>function(t){let e=0;return t.forEach(t=>{e+=this.positiveInteger(t.personcount)*this.positiveFloatSix(t.price)}),this.positiveFloatSix(e*parseFloat(this.foodOut))},repastAllMoney:function(){let t=0;return this.info.quoted_price_food&&this.info.quoted_price_food.length>0&&this.info.quoted_price_food.forEach(e=>{t+=this.repastDayMoney(e.food_list)}),this.positiveFloatSix(t)},foodDifference:()=>function(t){return""===t.price},foodLimit:()=>function(t,e){return parseFloat(t.price)>parseFloat(e)},checkFoodDifference:function(){let t=!1,e=!1;this.foodlimitwarningmsg=[],this.info.quoted_price_food&&this.info.quoted_price_food.length>0&&this.info.quoted_price_food.forEach(o=>{o.food_list&&o.food_list.length>0&&o.food_list.forEach((i,n)=>{t=this.foodDifference(i),t&&this.adddifferenceerrormsg(3,o.date,n+1),e=this.foodLimit(i,this.info.food_limit),e&&this.addfoodlimiterrormsg(3,o.date,n+1)})})},IntercityTransportationDayMoney:()=>function(t){let e=0;return t.forEach(t=>{e+=this.positiveInteger(t.passengercount)*this.positiveFloatSix(t.unitprice)}),this.positiveFloatSix(e)},IntercityTransportationAllMoney:function(){let t=0;return this.info.quoted_price_transportation&&this.info.quoted_price_transportation.length>0&&this.info.quoted_price_transportation.forEach(e=>{t+=this.IntercityTransportationDayMoney(e.transportation_list)}),this.positiveFloatSix(t*parseFloat(this.transportationOut))},transportationDifference:()=>function(t){return""===t.unitprice},checkTransportationDifference:function(){let t=!1;this.info.quoted_price_transportation&&this.info.quoted_price_transportation.length>0&&this.info.quoted_price_transportation.forEach(e=>{e.transportation_list&&e.transportation_list.length>0&&e.transportation_list.forEach((o,i)=>{t=this.transportationDifference(o),t&&this.adddifferenceerrormsg(4,e.date,i+1)})})},CityDayMoney:()=>function(t){let e=0;return t.forEach(t=>{e+=this.positiveInteger(t.carcount)*this.positiveFloatSix(t.price)}),this.positiveFloatSix(e)},CityAllMoney:function(){let t=0;return this.info.quoted_price_car&&this.info.quoted_price_car.length>0&&this.info.quoted_price_car.forEach(e=>{t+=this.CityDayMoney(e.carlist)}),this.positiveFloatSix(t*parseFloat(this.carOut))},carDifference:()=>function(t){return""===t.price},checkCarDifference:function(){let t=!1;this.info.quoted_price_car&&this.info.quoted_price_car.length>0&&this.info.quoted_price_car.forEach(e=>{e.car_list&&e.car_list.length>0&&e.car_list.forEach((o,i)=>{t=this.carDifference(o),t&&this.adddifferenceerrormsg(5,e.date,i+1)})})},otherAllMoney:function(){let t=0;return this.info.quoted_price_other&&this.info.quoted_price_other.length>0&&this.info.quoted_price_other.forEach(e=>{t+=this.positiveInteger(e.offerparticipatecount)*this.positiveInteger(e.offerservicedaycount)*this.positiveFloatSix(e.price)}),this.positiveFloatSix(t*parseFloat(this.otherOut))},otherDifference:()=>function(t){return""===t.price},checkOtherDifference:function(){let t=!1;this.info.quoted_price_other&&this.info.quoted_price_other.length>0&&this.info.quoted_price_other.forEach((e,o)=>{t=this.otherDifference(e),t&&this.adddifferenceerrormsg(6,null,o+1)})},money:function(){return this.info.total_price=Object(s["o"])(this.allMoney)+Object(s["o"])(this.meetingAllMoney)+Object(s["o"])(this.repastAllMoney),Object(s["o"])(this.info.total_price)},quotedPrice:function(){return this.info.feizhicai_service=0,this.info.taxation=0,this.info.total_amount=Object(s["o"])(this.money),this.info.total_amount}},mounted(){this.$api.getCostProjects({code:"0034"},"POST").then(t=>{this.roomcostProjects=t}),0==this.$route.params.isSubmit&&(this.readonly=!0),this.searchSelectOption(),this.$api.hotelList({Page:1,Rows:99},"POST").then(t=>{this.hotelList=t.List}),this.$api.quotationInfo({id:this.$route.params.id,type:this.$route.params.type||""},"POST").then(t=>{null!=t.quotationenddate&&(t.quotationenddate=this.getFormatDate(t.quotationenddate)),1==this.$route.params.isSubmit&&(t.quotationenddate=this.getNextDateFormat(new Date,10)),this.info=t,void 0!=this.info.bidder&&(this.contractsId=this.info.bidder),null==this.info.id&&this.info.quoted_price_room.forEach(t=>{t.room_list.forEach(t=>{t.provide_count=t.roomcount})}),this.initVat(),this.info.attachlist&&this.info.attachlist.forEach(t=>{this.fileList.push({name:t.filename,url:this.info.quotationfile_domin+t.filepath,id:t.id})})})}},d=l,f=(o("f820"),o("0b56")),u=Object(f["a"])(d,i,n,!1,null,"7b6736cf",null);e["default"]=u.exports},"76b8":function(t,e,o){var i=o("de03"),n=o("9c10");t.exports=function(t,e){i(e)&&"cause"in e&&n(t,"cause",e.cause)}},"78a8":function(t,e,o){var i=o("5d05"),n=o("50b4"),r=o("06c1");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,o={};try{t=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),t(o,[]),e=o instanceof Array}catch(a){}return function(o,i){return n(o),r(i),e?t(o,i):o.__proto__=i,o}}():void 0)},"956c":function(t,e,o){var i=o("f44b"),n=String;t.exports=function(t){if("Symbol"===i(t))throw TypeError("Cannot convert a Symbol value to a string");return n(t)}},"9b2a":function(t,e,o){var i=o("ebdc"),n=o("c8a2"),r=o("672b"),a=o("b438"),s="WebAssembly",c=n[s],l=7!==Error("e",{cause:7}).cause,d=function(t,e){var o={};o[t]=a(t,e,l),i({global:!0,constructor:!0,arity:1,forced:l},o)},f=function(t,e){if(c&&c[t]){var o={};o[t]=a(s+"."+t,e,l),i({target:s,stat:!0,constructor:!0,arity:1,forced:l},o)}};d("Error",(function(t){return function(e){return r(t,this,arguments)}})),d("EvalError",(function(t){return function(e){return r(t,this,arguments)}})),d("RangeError",(function(t){return function(e){return r(t,this,arguments)}})),d("ReferenceError",(function(t){return function(e){return r(t,this,arguments)}})),d("SyntaxError",(function(t){return function(e){return r(t,this,arguments)}})),d("TypeError",(function(t){return function(e){return r(t,this,arguments)}})),d("URIError",(function(t){return function(e){return r(t,this,arguments)}})),f("CompileError",(function(t){return function(e){return r(t,this,arguments)}})),f("LinkError",(function(t){return function(e){return r(t,this,arguments)}})),f("RuntimeError",(function(t){return function(e){return r(t,this,arguments)}}))},a3d4:function(t,e,o){var i=o("5557").f;t.exports=function(t,e,o){o in t||i(t,o,{configurable:!0,get:function(){return e[o]},set:function(t){e[o]=t}})}},acd6:function(t,e,o){"use strict";var i=o("4ff3"),n=o.n(i),r=o("f121");const a=r["b"];e["a"]=function(t,e,o){return new Promise((function(i,r){const s=()=>{"/Template/GetTemplate"==t?n()({method:"post",url:a+t,data:e,headers:{"Content-Type":"application/json;charset=utf-8"}}).then(t=>{let i=document.createElement("a"),n=t.data.path.substring(t.data.path.lastIndexOf("."));fetch(t.data.path).then(t=>t.blob()).then(t=>{i.href=URL.createObjectURL(t),console.log(i.href),5==e.type||e.type,i.download=o+n,document.body.appendChild(i),i.click()})}):n()({method:"post",url:a+t,data:e,responseType:"blob",headers:{"Content-Type":"application/json;charset=utf-8"}}).then(i=>{console.log(i);let n=i.data;const r=new FileReader;r.readAsDataURL(n),r.onload=i=>{let n=document.createElement("a");n.style.display="none","/quotation/exportexcel"==t||"/SettlementSheet/ExportExcel1"==t||"/orderform/exportexcel"==t||"/Quotation/ExportExcel"==t?n.download=o+".xls":"/Template/GetTemplate"==t?5==e.type||6==e.type?n.download=o+".docx":n.download=o+".xls":"/Reporting/GetExcel"==t&&(n.download=o+".xls"),n.href=i.target.result;document.body;document.body.appendChild(n),n.click(),document.body.removeChild(n)}})};s()}))}},b438:function(t,e,o){"use strict";var i=o("3726"),n=o("e72e"),r=o("9c10"),a=o("70b8"),s=o("78a8"),c=o("6ac1"),l=o("a3d4"),d=o("3471"),f=o("dbbd"),u=o("76b8"),p=o("c436"),h=o("dc0f"),m=o("8d06"),_=o("3f11");t.exports=function(t,e,o,v){var y="stackTraceLimit",g=v?2:1,b=t.split("."),x=b[b.length-1],C=i.apply(null,b);if(C){var k=C.prototype;if(!_&&n(k,"cause")&&delete k.cause,!o)return C;var q=i("Error"),w=e((function(t,e){var o=f(v?e:t,void 0),i=v?new C(t):new C;return void 0!==o&&r(i,"message",o),h&&r(i,"stack",p(i.stack,2)),this&&a(k,this)&&d(i,this,w),arguments.length>g&&u(i,arguments[g]),i}));if(w.prototype=k,"Error"!==x?s?s(w,q):c(w,q,{name:!0}):m&&y in C&&(l(w,C,y),l(w,C,"prepareStackTrace")),c(w,C),!_)try{k.name!==x&&r(k,"name",x),k.constructor=w}catch(E){}return w}}},b587:function(t,e,o){"use strict";var i=o("8642");function n(t,e,o,i){function n(){let t=e.value;if(o.modifiers.float){if(t=t.replace(/[^\d.]/g,""),t=t.replace(/[^\d.]/g,""),t=t.replace(/\.{2,}/g,"."),t=t.replace(/^\./g,"0."),"undefined"!==typeof o.value){let e=0;if("string"!==typeof o.value&&"number"!==typeof o.value||(e=parseInt(o.value)),!isNaN(e)){(!Number.isInteger(e)||e<0)&&(e=0);const o="^(\\d+)\\.(\\d{"+e+"}).*$",i=new RegExp(o);t=0===e?t.replace(i,"$1"):t.replace(i,"$1.$2")}}}else t=t.replace(/[^\d]/g,"");t.split(".").length-1>1&&(t=t.substring(0,t.length-1)),e.value=t}return n}const r={bind(t,e,o){const i="INPUT"===t.tagName?t:t.querySelector("input");i.addEventListener("input",n(t,i,e,o),!1)}};i["default"].directive("number-input",r)},c3c0:function(t,e,o){var i=o("ecc1"),n=i("toStringTag"),r={};r[n]="z",t.exports="[object z]"===String(r)},c436:function(t,e,o){var i=o("5d05"),n=Error,r=i("".replace),a=function(t){return String(n(t).stack)}("zxcasd"),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(a);t.exports=function(t,e){if(c&&"string"==typeof t&&!n.prepareStackTrace)while(e--)t=r(t,s,"");return t}},dbbd:function(t,e,o){var i=o("956c");t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:i(t)}},dc0f:function(t,e,o){var i=o("071a"),n=o("4d51");t.exports=!i((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",n(1,7)),7!==t.stack)}))},f44b:function(t,e,o){var i=o("c3c0"),n=o("17e9"),r=o("7ea6"),a=o("ecc1"),s=a("toStringTag"),c=Object,l="Arguments"==r(function(){return arguments}()),d=function(t,e){try{return t[e]}catch(o){}};t.exports=i?r:function(t){var e,o,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(o=d(e=c(t),s))?o:l?r(e):"Object"==(i=r(e))&&n(e.callee)?"Arguments":i}},f820:function(t,e,o){"use strict";o("fb55")},fb55:function(t,e,o){}}]);