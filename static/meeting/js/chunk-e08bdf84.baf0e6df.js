(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e08bdf84"],{1892:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[r("div",{staticClass:"index"},[r("span",[e._v("首页->")]),r("span",{on:{click:function(t){return e.$router.push("/otherSettings")}}},[e._v("其他配置 ->")]),r("span",[e._v(e._s(e.addOrEdit?"新增/编辑报价结算规则":"编辑报价结算规则"))])]),r("div",{staticClass:"title"},[r("span",[e._v(e._s(e.addOrEdit?"新增/编辑报价结算规则":"编辑报价结算规则"))])]),r("el-form",{ref:"ruleInfo",staticClass:"form",attrs:{model:e.ruleInfo,"label-position":"left",rules:e.rules,"label-width":"250px"}},[1==e.type?r("el-form-item",{attrs:{label:"客户",prop:"customerid"}},[r("el-select",{attrs:{placeholder:"请选择客户",filterable:""},on:{change:e.customerChange},model:{value:e.ruleInfo.customerid,callback:function(t){e.$set(e.ruleInfo,"customerid",t)},expression:"ruleInfo.customerid"}},e._l(e.customers,(function(e,t){return r("el-option",{key:e.id,attrs:{label:e.shortname,value:e.id}})})),1)],1):r("el-form-item",{attrs:{label:"客户",prop:""}},[r("span",[e._v(e._s(e.company_name))])]),1==e.type?r("el-form-item",{attrs:{label:"会议类型",prop:"meeting"}},[r("el-checkbox-group",{model:{value:e.ruleInfo.meeting,callback:function(t){e.$set(e.ruleInfo,"meeting",t)},expression:"ruleInfo.meeting"}},e._l(e.meetingType,(function(e){return r("el-checkbox",{key:e.id,attrs:{label:e.name}})})),1)],1):e._e(),1==e.type?r("el-form-item",{attrs:{label:"服务类型",prop:"service_type"}},[r("el-checkbox-group",{model:{value:e.ruleInfo.service_type,callback:function(t){e.$set(e.ruleInfo,"service_type",t)},expression:"ruleInfo.service_type"}},e._l(e.serviceList,(function(e){return r("el-checkbox",{key:e.id,attrs:{label:e.name}})})),1)],1):e._e(),1==e.type?r("el-form-item",{attrs:{label:"会议城市",prop:"provinceList"}},[r("el-select",{attrs:{placeholder:"请选择城市",multiple:""},model:{value:e.ruleInfo.provinceList,callback:function(t){e.$set(e.ruleInfo,"provinceList",t)},expression:"ruleInfo.provinceList"}},e._l(e.city,(function(e){return r("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1):e._e(),r("el-form-item",{attrs:{label:"业务下载报价单模板",prop:"ruleTemplate_BusinessOffer_id"}},[r("el-select",{attrs:{placeholder:"请选择模板"},model:{value:e.ruleInfo.ruleTemplate_BusinessOffer_id,callback:function(t){e.$set(e.ruleInfo,"ruleTemplate_BusinessOffer_id",t)},expression:"ruleInfo.ruleTemplate_BusinessOffer_id"}},e._l(e.ruleTemplate_BusinessOffer,(function(e,t){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"业务下载结算单模板",prop:"ruleTemplate_BusinessSettlement_id"}},[r("el-select",{attrs:{placeholder:"请选择模板"},on:{change:e.eventData},model:{value:e.ruleInfo.ruleTemplate_BusinessSettlement_id,callback:function(t){e.$set(e.ruleInfo,"ruleTemplate_BusinessSettlement_id",t)},expression:"ruleInfo.ruleTemplate_BusinessSettlement_id"}},e._l(e.ruleTemplate_BusinessSettlement,(function(e,t){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"供应商下载报价单模板",prop:"ruleTemplate_VendorQuotation_id"}},[r("el-select",{attrs:{placeholder:"请选择模板"},model:{value:e.ruleInfo.ruleTemplate_VendorQuotation_id,callback:function(t){e.$set(e.ruleInfo,"ruleTemplate_VendorQuotation_id",t)},expression:"ruleInfo.ruleTemplate_VendorQuotation_id"}},e._l(e.ruleTemplate_VendorQuotation,(function(e,t){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"供应商下载结算单模板",prop:"ruleTemplate_SupplierSettlement_id"}},[r("el-select",{attrs:{placeholder:"请选择模板"},model:{value:e.ruleInfo.ruleTemplate_SupplierSettlement_id,callback:function(t){e.$set(e.ruleInfo,"ruleTemplate_SupplierSettlement_id",t)},expression:"ruleInfo.ruleTemplate_SupplierSettlement_id"}},e._l(e.ruleTemplate_SupplierSettlement,(function(e,t){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"供应商下载报价确认单",prop:"bjqrisdisplay"}},[r("el-radio-group",{on:{change:e.bjqrisdisplayChange},model:{value:e.ruleInfo.bjqrisdisplay,callback:function(t){e.$set(e.ruleInfo,"bjqrisdisplay",t)},expression:"ruleInfo.bjqrisdisplay"}},[r("el-radio",{attrs:{label:1}},[e._v("显示")]),r("el-radio",{attrs:{label:0}},[e._v("不显示")])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:e.ruleInfo.bjqrisdisplay,expression:"ruleInfo.bjqrisdisplay"}]},[r("el-form-item",{attrs:{label:"报价单确认模板",prop:"ruleTemplate_SupplierOfferConfirm_id"}},[r("el-select",{attrs:{placeholder:"请选择模板"},model:{value:e.ruleInfo.ruleTemplate_SupplierOfferConfirm_id,callback:function(t){e.$set(e.ruleInfo,"ruleTemplate_SupplierOfferConfirm_id",t)},expression:"ruleInfo.ruleTemplate_SupplierOfferConfirm_id"}},e._l(e.ruleTemplate_SupplierOfferConfirm,(function(e,t){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),r("el-form-item",{attrs:{label:"供应商下载结算确认单",prop:"jsqrisdisplay"}},[r("el-radio-group",{on:{change:e.jsqrisdisplayChange},model:{value:e.ruleInfo.jsqrisdisplay,callback:function(t){e.$set(e.ruleInfo,"jsqrisdisplay",t)},expression:"ruleInfo.jsqrisdisplay"}},[r("el-radio",{attrs:{label:1}},[e._v("显示")]),r("el-radio",{attrs:{label:0}},[e._v("不显示")])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:e.ruleInfo.jsqrisdisplay,expression:"ruleInfo.jsqrisdisplay"}]},[r("el-form-item",{attrs:{label:"结算单确认模板",prop:"ruleTemplate_SupplierSettlementConfirm_id"}},[r("el-select",{attrs:{placeholder:"请选择模板"},model:{value:e.ruleInfo.ruleTemplate_SupplierSettlementConfirm_id,callback:function(t){e.$set(e.ruleInfo,"ruleTemplate_SupplierSettlementConfirm_id",t)},expression:"ruleInfo.ruleTemplate_SupplierSettlementConfirm_id"}},e._l(e.ruleTemplate_SupplierSettlementConfirm,(function(e,t){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),r("el-form-item",{attrs:{label:"专票还原税前",prop:"vat_reduction_pre_tax"}},[r("el-radio-group",{model:{value:e.ruleInfo.vat_reduction_pre_tax,callback:function(t){e.$set(e.ruleInfo,"vat_reduction_pre_tax",t)},expression:"ruleInfo.vat_reduction_pre_tax"}},[r("el-radio",{attrs:{label:1}},[e._v("还原")]),r("el-radio",{attrs:{label:0}},[e._v("不还原")])],1)],1),0==e.ruleInfo.vatrule?r("el-form-item",{attrs:{label:"VAT规则",prop:"vatrule"}},[[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.ruleInfo.vatrule,callback:function(t){e.$set(e.ruleInfo,"vatrule",t)},expression:"ruleInfo.vatrule"}},[r("el-radio",{attrs:{label:0}},[e._v("分项VAT")]),r("el-radio",{attrs:{label:1}},[e._v("统一VAT")])],1)]],2):r("el-form-item",{attrs:{label:"VAT规则",prop:"flat_tax_rate"}},[[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.ruleInfo.vatrule,callback:function(t){e.$set(e.ruleInfo,"vatrule",t)},expression:"ruleInfo.vatrule"}},[r("el-radio",{attrs:{label:0}},[e._v("分项VAT")]),r("el-radio",{attrs:{label:1}},[e._v("统一VAT")])],1),[r("el-input",{staticStyle:{width:"10%","margin-left":"20px"},on:{input:function(t){e.ruleInfo.flat_tax_rate=e.formatNum(e.ruleInfo.flat_tax_rate)}},model:{value:e.ruleInfo.flat_tax_rate,callback:function(t){e.$set(e.ruleInfo,"flat_tax_rate",t)},expression:"ruleInfo.flat_tax_rate"}}),e._v(" % ")]]],2),r("el-form-item",{attrs:{label:"VAT比例是否可修改",prop:"vatcanedit"}},[r("el-radio-group",{model:{value:e.ruleInfo.vatcanedit,callback:function(t){e.$set(e.ruleInfo,"vatcanedit",t)},expression:"ruleInfo.vatcanedit"}},[r("el-radio",{attrs:{label:1}},[e._v("可修改")]),r("el-radio",{attrs:{label:0}},[e._v("不可修改")])],1)],1),r("el-form-item",{attrs:{label:"服务费计算方式",prop:"service_fee_calculation_method"}},[r("el-radio-group",{attrs:{disabled:!1},model:{value:e.ruleInfo.service_fee_calculation_method,callback:function(t){e.$set(e.ruleInfo,"service_fee_calculation_method",t)},expression:"ruleInfo.service_fee_calculation_method"}},[r("el-radio",{attrs:{label:0}},[e._v("分项计费")]),r("el-radio",{attrs:{label:1}},[e._v("阶梯计费")]),r("el-radio",{attrs:{label:2}},[e._v("跳档计费")])],1)],1),r("el-form-item",{attrs:{"label-width":"0"}},[1==e.ruleInfo.service_fee_calculation_method?r("div",e._l(e.ruleInfo.ladder,(function(t,n){return r("div",{staticClass:"ladderList"},[e._v(" 阶梯"+e._s(n+1)+" "),r("el-input",{staticStyle:{width:"100px"},attrs:{disabled:0==n},on:{input:function(r){t.ladder_min=e.formatNum(t.ladder_min)}},model:{value:t.ladder_min,callback:function(r){e.$set(t,"ladder_min",r)},expression:"item.ladder_min"}}),e._v(" ~ "),r("el-input",{staticStyle:{width:"100px"},on:{input:function(r){t.ladder_max=e.formatNum(t.ladder_max)}},model:{value:t.ladder_max,callback:function(r){e.$set(t,"ladder_max",r)},expression:"item.ladder_max"}}),e._v(" * "),r("el-input",{staticStyle:{width:"80px"},on:{input:function(r){t.ladder_taxrate=e.formatNum(t.ladder_taxrate)}},model:{value:t.ladder_taxrate,callback:function(r){e.$set(t,"ladder_taxrate",r)},expression:"item.ladder_taxrate"}}),e._v(" % "),r("el-button",{staticStyle:{"margin-left":"20px","text-decoration":"underline"},attrs:{type:"text"},on:{click:function(t){return e.addLadder()}}},[e._v("添加阶梯")]),0!=n?r("el-button",{staticStyle:{"margin-left":"20px","text-decoration":"underline"},attrs:{type:"text"},on:{click:function(t){return e.delLadder(n)}}},[e._v("删除阶梯")]):e._e()],1)})),0):e._e(),2==e.ruleInfo.service_fee_calculation_method?r("div",e._l(e.ruleInfo.grade,(function(t,n){return r("div",{key:n,staticClass:"ladderList"},[e._v(" 金额 >= "),r("el-input",{staticStyle:{width:"100px"},on:{input:function(r){t.grade_money=e.formatNum(t.grade_money)}},model:{value:t.grade_money,callback:function(r){e.$set(t,"grade_money",r)},expression:"item.grade_money"}}),e._v(" * "),r("el-input",{staticStyle:{width:"80px"},on:{input:function(r){t.grade_taxrate=e.formatNum(t.grade_taxrate)}},model:{value:t.grade_taxrate,callback:function(r){e.$set(t,"grade_taxrate",r)},expression:"item.grade_taxrate"}}),e._v(" % "),r("el-button",{staticStyle:{"margin-left":"20px","text-decoration":"underline"},attrs:{type:"text"},on:{click:function(t){return e.addTiaodang()}}},[e._v("添加档次")]),0!=n?r("el-button",{staticStyle:{"margin-left":"20px","text-decoration":"underline"},attrs:{type:"text"},on:{click:function(t){return e.delTiaodang(n)}}},[e._v("删除档次")]):e._e()],1)})),0):e._e(),r("el-table",{staticClass:"table",attrs:{data:e.tableData,border:"","span-method":e.arraySpanMethod}},[r("el-table-column",{attrs:{align:"center",prop:"project",label:"采购项目"}}),r("el-table-column",{attrs:{align:"center",prop:"type",label:"询价方式",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-radio-group",{on:{change:e.change},model:{value:t.row.type,callback:function(r){e.$set(t.row,"type",r)},expression:"scope.row.type"}},[r("el-radio",{attrs:{label:0}},[e._v("线上询价")]),r("el-radio",{attrs:{label:1}},[e._v("手工填报")])],1)]}}])}),r("el-table-column",{attrs:{align:"center",prop:"taxRate",label:"VAT"},scopedSlots:e._u([{key:"default",fn:function(t){return e.ruleInfo.vatrule?void 0:[r("el-input",{staticStyle:{width:"30%"},on:{input:function(r){t.row.taxRate=e.formatNum(t.row.taxRate)}},model:{value:t.row.taxRate,callback:function(r){e.$set(t.row,"taxRate",r)},expression:"scope.row.taxRate"}}),e._v(" % ")]}}],null,!0)}),r("el-table-column",{attrs:{align:"center",prop:"isnotservice",label:"是否计入服务费"},scopedSlots:e._u([{key:"default",fn:function(t){return 6!=t.$index?[r("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.row.isnotservice,callback:function(r){e.$set(t.row,"isnotservice",r)},expression:"scope.row.isnotservice"}},[e._v("计入服务费")])]:void 0}}],null,!0)}),r("el-table-column",{attrs:{align:"center",prop:"serviceFee",label:"服务费比例"},scopedSlots:e._u([{key:"default",fn:function(t){return 6!=t.$index&&0==e.ruleInfo.service_fee_calculation_method?[r("el-input",{staticStyle:{width:"30%"},on:{input:function(r){t.row.serviceFee=e.formatNum(t.row.serviceFee)}},model:{value:t.row.serviceFee,callback:function(r){e.$set(t.row,"serviceFee",r)},expression:"scope.row.serviceFee"}}),e._v(" % ")]:void 0}}],null,!0)})],1)],1),r("el-form-item",{attrs:{label:"服务费比例是否可修改",prop:"servicecanedit"}},[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.ruleInfo.servicecanedit,callback:function(t){e.$set(e.ruleInfo,"servicecanedit",t)},expression:"ruleInfo.servicecanedit"}},[r("el-radio",{attrs:{label:1}},[e._v("可修改")]),r("el-radio",{attrs:{label:0}},[e._v("不可修改")])],1)],1),r("el-form-item",{attrs:{label:"是否支持填写服务费总价比例",prop:"service_fee_ratio"}},[r("el-radio-group",{model:{value:e.ruleInfo.service_fee_ratio,callback:function(t){e.$set(e.ruleInfo,"service_fee_ratio",t)},expression:"ruleInfo.service_fee_ratio"}},[r("el-radio",{attrs:{label:1}},[e._v("支持")]),r("el-radio",{attrs:{label:0}},[e._v("不支持")])],1)],1),r("el-form-item",{attrs:{label:"是否有最低服务费费用",prop:"minimum_service_fee"}},[r("el-radio-group",{model:{value:e.ruleInfo.minimum_service_fee,callback:function(t){e.$set(e.ruleInfo,"minimum_service_fee",t)},expression:"ruleInfo.minimum_service_fee"}},[r("el-radio",{attrs:{label:0}},[e._v("无最低费用")]),r("el-radio",{attrs:{label:1}},[e._v("有最低费用")])],1),e.ruleInfo.minimum_service_fee?[e._v(" ￥ "),r("el-input",{staticStyle:{width:"10%","margin-left":"20px"},on:{input:function(t){e.ruleInfo.minimum_service_fee_money=e.positiveFloat(e.ruleInfo.minimum_service_fee_money)}},model:{value:e.ruleInfo.minimum_service_fee_money,callback:function(t){e.$set(e.ruleInfo,"minimum_service_fee_money",t)},expression:"ruleInfo.minimum_service_fee_money"}})]:e._e()],2),r("el-form-item",{attrs:{label:"非直采服务费是否计税",prop:"fzc_service_fee_money"}},[r("el-radio-group",{model:{value:e.ruleInfo.fzc_service_fee_money,callback:function(t){e.$set(e.ruleInfo,"fzc_service_fee_money",t)},expression:"ruleInfo.fzc_service_fee_money"}},[r("el-radio",{attrs:{label:1}},[e._v("计VAT税")]),r("el-radio",{attrs:{label:0}},[e._v("不计VAT税")])],1)],1),r("el-form-item",{attrs:{label:"直采服务费规则",prop:"zhicai_service"}},[r("el-radio-group",{model:{value:e.ruleInfo.zhicai_service,callback:function(t){e.$set(e.ruleInfo,"zhicai_service",t)},expression:"ruleInfo.zhicai_service"}},[r("el-radio",{attrs:{label:0}},[e._v("默认规则")]),r("el-radio",{attrs:{label:1}},[e._v("拜耳规则")])],1),r("div",[r("el-table",{directives:[{name:"show",rawName:"v-show",value:e.ruleInfo.zhicai_service,expression:"ruleInfo.zhicai_service"}],staticClass:"table",attrs:{data:e.ruleInfo.service_list,border:""}},[r("el-table-column",{attrs:{align:"center",prop:"grade_name",label:"等级名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{model:{value:t.row.grade_name,callback:function(r){e.$set(t.row,"grade_name",r)},expression:"scope.row.grade_name"}})]}}])}),r("el-table-column",{attrs:{align:"center",prop:"grade_price",label:"固定单价",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input-number",{staticStyle:{width:"50%"},attrs:{controls:!1,precision:2},model:{value:t.row.grade_price,callback:function(r){e.$set(t.row,"grade_price",e._n(r))},expression:"scope.row.grade_price"}})]}}])}),r("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.addGrade(t.$index)}}},[e._v(" 添加 ")]),r("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=t.$index,expression:"scope.$index != 0"}],attrs:{type:"text"},on:{click:function(r){return e.delGrade(t.$index)}}},[e._v(" 删除 ")])]}}])})],1)],1)],1),r("el-form-item",{attrs:{label:"“开票通知文件” 字段",prop:"kp_notice_file"}},[r("el-radio-group",{on:{change:e.kpNoticeChange},model:{value:e.ruleInfo.kp_notice_file,callback:function(t){e.$set(e.ruleInfo,"kp_notice_file",t)},expression:"ruleInfo.kp_notice_file"}},[r("el-radio",{attrs:{label:0}},[e._v("不显示")]),r("el-radio",{attrs:{label:1}},[e._v("订单中显示")])],1),r("span",{staticStyle:{"margin-left":"20px"}},[e._v("注：选择“订单中显示”，结算单审核通过后系统邮件/短信通知供应商上传“开票通知文件”")]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.ruleInfo.kp_notice_file,expression:"ruleInfo.kp_notice_file"}],staticStyle:{"margin-left":"30px"}},[r("el-radio",{attrs:{label:0,name:"person"},on:{change:e.personTypeChange},model:{value:e.ruleInfo.kp_relevant,callback:function(t){e.$set(e.ruleInfo,"kp_relevant",t)},expression:"ruleInfo.kp_relevant"}},[e._v("相关人员")]),r("div",{staticStyle:{"margin-left":"40px"}},[r("el-checkbox-group",{model:{value:e.ruleInfo.kp_relevant_user,callback:function(t){e.$set(e.ruleInfo,"kp_relevant_user",t)},expression:"ruleInfo.kp_relevant_user"}},e._l(e.relatedPersonList,(function(t){return r("el-checkbox",{key:t.id,attrs:{label:t.name,disabled:1==e.ruleInfo.kp_relevant}})})),1)],1),r("el-radio",{attrs:{label:1,name:"person"},on:{change:e.personTypeChange},model:{value:e.ruleInfo.kp_relevant,callback:function(t){e.$set(e.ruleInfo,"kp_relevant",t)},expression:"ruleInfo.kp_relevant"}},[e._v("指定人员")]),r("el-button",{staticStyle:{padding:"7px 6px","font-size":"7px","margin-left":"50px"},attrs:{type:"primary",disabled:0==e.ruleInfo.kp_relevant},on:{click:function(t){return e.addList(1)}}},[e._v("添加")]),r("p",[e._v(" "+e._s(this.kp_appoint_fullname)),r("i",{staticClass:"ico del"})])],1)],1),r("el-form-item",{attrs:{label:" “发票附件” 字段",prop:"invoice_file"}},[r("el-radio-group",{model:{value:e.ruleInfo.invoice_file,callback:function(t){e.$set(e.ruleInfo,"invoice_file",t)},expression:"ruleInfo.invoice_file"}},[r("el-radio",{attrs:{label:0}},[e._v("不显示")]),r("el-radio",{attrs:{label:1}},[e._v("订单中显示")])],1),r("span",{staticStyle:{"margin-left":"20px"}},[e._v(" 注：选择“订单中显示”，我方在结算单上传“发票附件”后系统邮件/短信通知供应商")])],1),r("el-form-item",{attrs:{label:" “Cevent 上传完成日期” 字段",prop:"cvent_date"}},[r("el-radio-group",{on:{change:e.cventDateChange},model:{value:e.ruleInfo.cvent_date,callback:function(t){e.$set(e.ruleInfo,"cvent_date",t)},expression:"ruleInfo.cvent_date"}},[r("el-radio",{attrs:{label:0}},[e._v("不显示")]),r("el-radio",{attrs:{label:1}},[e._v("订单中显示")])],1),r("span",{staticStyle:{"margin-left":"20px"}},[e._v(" 注：选择“订单中显示”，结算单审核通过后系统邮件/短信通知供应商上传“开票通知文件”")]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.ruleInfo.cvent_date,expression:"ruleInfo.cvent_date"}],staticStyle:{"margin-left":"30px"}},[r("el-radio",{attrs:{label:0,name:"person"},on:{change:e.updatedDate_personTypeChange},model:{value:e.ruleInfo.cvent_relevant,callback:function(t){e.$set(e.ruleInfo,"cvent_relevant",t)},expression:"ruleInfo.cvent_relevant"}},[e._v("相关人员")]),r("div",{staticStyle:{"margin-left":"40px"}},[r("el-checkbox-group",{model:{value:e.ruleInfo.cvent_relevant_user,callback:function(t){e.$set(e.ruleInfo,"cvent_relevant_user",t)},expression:"ruleInfo.cvent_relevant_user"}},e._l(e.relatedPersonList,(function(t){return r("el-checkbox",{key:t.id,attrs:{label:t.name,disabled:1==e.ruleInfo.cvent_relevant}})})),1)],1),r("el-radio",{attrs:{label:1,name:"person"},on:{change:e.updatedDate_personTypeChange},model:{value:e.ruleInfo.cvent_relevant,callback:function(t){e.$set(e.ruleInfo,"cvent_relevant",t)},expression:"ruleInfo.cvent_relevant"}},[e._v("指定人员")]),r("el-button",{staticStyle:{padding:"7px 6px","font-size":"7px","margin-left":"50px"},attrs:{type:"primary",disabled:0==e.ruleInfo.cvent_relevant},on:{click:function(t){return e.addList(2)}}},[e._v("添加")]),r("p",[e._v(" "+e._s(this.cvent_appoint_fullname)),r("i",{staticClass:"ico del"})])],1)],1),r("el-form-item",{attrs:{label:"备注说明",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:4}},model:{value:e.ruleInfo.remark,callback:function(t){e.$set(e.ruleInfo,"remark",t)},expression:"ruleInfo.remark"}})],1),r("el-form-item",[r("el-button",{staticClass:"form-btn",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleInfo")}}},[e._v("保存")]),r("el-button",{staticClass:"form-btn",on:{click:function(t){return e.toPage()}}},[e._v("取消")])],1)],1),r("el-dialog",{attrs:{title:"查找指定人员",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.getUserValue,callback:function(t){e.getUserValue=t},expression:"getUserValue"}},e._l(e.getUserList,(function(e){return r("el-option",{key:e.username,attrs:{label:e.fullname,value:e.username}})})),1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addPerson}},[e._v("确 定")])],1)],1)],1)},i=[],a=r("1da1"),l=(r("96cf"),r("a434"),r("d3b7"),r("159b"),r("b0c0"),r("4de4"),r("ac1f"),r("1276"),r("a15b"),r("e9c4"),r("cf45")),o={data:function(){return{tableData:[{project:"客房需求",type:0,taxRate:0,isnotservice:1,serviceFee:0},{project:"会场需求",type:0,taxRate:0,isnotservice:1,serviceFee:0},{project:"酒店内餐饮需求",type:0,taxRate:0,isnotservice:1,serviceFee:0},{project:"酒店外餐饮需求",type:0,taxRate:0,isnotservice:1,serviceFee:0},{project:"大交通",type:0,taxRate:0,isnotservice:1,serviceFee:0},{project:"地面交通",type:0,taxRate:0,isnotservice:1,serviceFee:0},{project:"其他服务",type:0,taxRate:0}],relatedPersonList:[{id:"0032-1",name:"会议创建人"},{id:"0032-2",name:"会议负责人"},{id:"0032-3",name:"会议指定采购"},{id:"0032-4",name:"会议指定合规人员"},{id:"0032-5",name:"会议助理"}],rules:{customerid:[{required:!0,message:"请选择客户",trigger:"change"}],ruleTemplate_BusinessOffer_id:[{required:!0,message:"请选择模板",trigger:"change"}],ruleTemplate_BusinessSettlement_id:[{required:!0,message:"请选择模板",trigger:"change"}],ruleTemplate_VendorQuotation_id:[{required:!0,message:"请选择模板",trigger:"change"}],ruleTemplate_SupplierSettlement_id:[{required:!0,message:"请选择模板",trigger:"change"}],flat_tax_rate:[{required:!0,message:"请输入税率",trigger:"blur"}],vat_reduction_pre_tax:[{required:!0,message:"请选择",trigger:"change"}],vatcanedit:[{required:!0,message:"请选择",trigger:"change"}],service_fee_calculation_method:[{required:!0,message:"请选择",trigger:"change"}],servicecanedit:[{required:!0,message:"请选择",trigger:"change"}],vatrule:[{required:!0,message:"请选择",trigger:"change"}]},ruleInfo:{car_inquiry_isnotservice:1,car_inquiry_service_taxrate:0,car_inquiry_taxrate:0,car_inquiry_type:0,conference_inquiry_isnotservice:1,conference_inquiry_service_taxrate:0,conference_inquiry_taxrate:0,conference_inquiry_type:0,customerid:null,eventtype:"",service_type:[],zhicai_service:0,kp_notice_file:0,kp_relevant:0,kp_relevant_user:[],kp_appoint_user:"",invoice_file:0,bjqrisdisplay:0,jsqrisdisplay:0,cvent_date:0,cvent_relevant:0,cvent_relevant_user:[],cvent_appoint_user:"",hotel_food_inquiry_isnotservice:1,hotel_food_inquiry_service_taxrate:0,hotel_food_inquiry_taxrate:0,hotel_food_inquiry_type:0,id:"",configid:"",ladder:[{id:"",ladder_min:0,ladder_max:"",ladder_taxrate:0}],grade:[{id:"",grade_money:"",grade_taxrate:0}],other:[{id:"",othercode:"",servicerate:0,iscalservice:1}],service_list:[{id:"",grade_name:"",grade_price:0}],other_inquiry_taxrate:"",other_inquiry_type:0,others_food_inquiry_isnotservice:1,others_food_inquiry_service_taxrate:0,others_food_inquiry_taxrate:0,others_food_inquiry_type:0,province_code:"",remark:"",room_inquiry_isnotservice:1,room_inquiry_service_taxrate:0,room_inquiry_taxrate:0,room_inquiry_type:0,service_fee_calculation_method:1,service_taxrate:0,servicecanedit:0,service_fee_ratio:0,minimum_service_fee:0,minimum_service_fee_money:0,fzc_service_fee_money:0,template:[{id:"",templateid:"",type:1}],transportation_inquiry_isnotservice:1,transportation_inquiry_service_taxrate:0,transportation_inquiry_taxrate:0,transportation_inquiry_type:0,vat_reduction_pre_tax:0,vatcanedit:0,vatrule:1,ruleTemplate_BusinessOffer_id:"",ruleTemplate_BusinessSettlement_id:"",ruleTemplate_VendorQuotation_id:"",ruleTemplate_SupplierSettlement_id:"",ruleTemplate_SupplierOfferConfirm_id:"",ruleTemplate_SupplierSettlementConfirm_id:"",flat_tax_rate:0,provinceList:[],meeting:[]},dialogVisible:!1,getUserValue:"",getUserList:[],kp_appoint_fullname:"",cvent_appoint_fullname:"",type:0,addtype:"",id:"",addOrEdit:0,company_name:"",meetingType:[],customers:[],city:[],serviceList:[],ruleTemplate:[],ruleTemplate_BusinessOffer:[],ruleTemplate_BusinessSettlement:[],ruleTemplate_VendorQuotation:[],ruleTemplate_SupplierSettlement:[],ruleTemplate_SupplierOfferConfirm:[],ruleTemplate_SupplierSettlementConfirm:[],BusinessOffer_id:"",BusinessSettlement_id:"",VendorQuotation_id:"",SupplierSettlement_id:"",SupplierOfferConfirm_id:"",SupplierSettlementConfirm_id:""}},mounted:function(){var e=this;this.type=this.$route.params.type,this.id=this.$route.params.id,this.company_name=this.$route.params.company_name,this.addOrEdit=this.$route.params.addOrEdit,this.getRuleTemplate(),this.$nextTick((function(){e.getRuleEdit(),1==e.addOrEdit&&e.getServiceType()}))},computed:{},watch:{},methods:{formatNum:l["e"],positiveFloat:l["m"],arraySpanMethod:function(e){e.row,e.column;var t=e.rowIndex,r=e.columnIndex;return t>=7&&0==r?[1,3]:t>=7&&(1==r||2==r)?[1,0]:void 0},addLadder:function(){this.ruleInfo.ladder[this.ruleInfo.ladder.length-1].ladder_max?this.ruleInfo.ladder.push({id:"",ladder_min:"",ladder_max:"",ladder_taxrate:""}):this.$message.error("请将上一阶梯信息填写完整")},delLadder:function(e){this.ruleInfo.ladder.splice(e,1)},addTiaodang:function(){""!=this.ruleInfo.grade[this.ruleInfo.grade.length-1].grade_money?this.ruleInfo.grade.push({id:"",grade_money:"",grade_taxrate:""}):this.$message.error("请将上一档次信息填写完整")},delTiaodang:function(e){this.ruleInfo.grade.splice(e,1)},addGrade:function(e){var t={id:"",grade_name:"",grade_price:0};this.ruleInfo.service_list.splice(e+1,0,t)},delGrade:function(e){this.ruleInfo.service_list.splice(e,1)},bjqrisdisplayChange:function(e){0==e&&(this.ruleInfo.ruleTemplate_SupplierOfferConfirm_id="")},jsqrisdisplayChange:function(e){0==e&&(this.ruleInfo.ruleTemplate_SupplierSettlementConfirm_id="")},kpNoticeChange:function(e){0==e&&(this.ruleInfo.kp_relevant_user=[],this.kp_appoint_fullname="")},cventDateChange:function(e){0==e&&(this.ruleInfo.cvent_relevant_user=[],this.cvent_appoint_fullname="")},personTypeChange:function(e){1==e?this.ruleInfo.kp_relevant_user=[]:this.kp_appoint_fullname=""},updatedDate_personTypeChange:function(e){1==e?this.ruleInfo.cvent_relevant_user=[]:this.cvent_appoint_fullname=""},addList:function(e){this.dialogVisible=!0,this.addtype=e,this.getUserValue=""},addPerson:function(){var e=this;this.dialogVisible=!1,this.getUserList.forEach((function(t){if(t.username==e.getUserValue)return 1==e.addtype?e.ruleInfo.kp_appoint_user.length>0?(e.ruleInfo.kp_appoint_user+=","+e.getUserValue,e.kp_appoint_fullname+=","+t.fullname):(e.ruleInfo.kp_appoint_user=e.getUserValue,e.kp_appoint_fullname=t.fullname):2==e.addtype&&(e.ruleInfo.cvent_appoint_user.length>0?(e.ruleInfo.cvent_appoint_user+=","+e.getUserValue,e.cvent_appoint_fullname+=","+t.fullname):(e.ruleInfo.cvent_appoint_user=e.getUserValue,e.cvent_appoint_fullname=t.fullname)),!1}))},toPage:function(){this.$router.push({name:"otherSeetings",params:{activeName:"second"}})},getServiceType:function(){var e=this;this.$api.getServiceType({},"post").then((function(t){e.serviceList=t,e.serviceList.forEach((function(t,r){e.ruleInfo.service_type.forEach((function(r,n){t.id==r&&(e.ruleInfo.service_type[n]=t.name,console.log(e.ruleInfo.service_type))}))}))}))},getMeetingTypeShow:function(){var e=this;this.$api.getMeetingTypeShow({CompanyID:this.ruleInfo.customerid},"POST").then((function(t){e.meetingType=null==t||void 0==t||1==t?[]:t,e.meetingType.forEach((function(t,r){e.ruleInfo.meeting.forEach((function(r,n){t.id==r&&(e.ruleInfo.meeting[n]=t.name)}))}))}))},getProvinceCity:function(){},getRuleTemplate:function(){var e=this;this.$api.getRuleTemplate({},"POST").then((function(t){e.ruleTemplate=null==t||void 0==t||1==t?[]:t,e.ruleTemplate_BusinessOffer=e.ruleTemplate.filter((function(e){return 1==e.type})),e.ruleTemplate_BusinessSettlement=e.ruleTemplate.filter((function(e){return 2==e.type})),e.ruleTemplate_VendorQuotation=e.ruleTemplate.filter((function(e){return 3==e.type})),e.ruleTemplate_SupplierSettlement=e.ruleTemplate.filter((function(e){return 4==e.type})),e.ruleTemplate_SupplierOfferConfirm=e.ruleTemplate.filter((function(e){return 5==e.type})),e.ruleTemplate_SupplierSettlementConfirm=e.ruleTemplate.filter((function(e){return 6==e.type}))}))},getRuleOther:function(){},getRuleEdit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getCompany({},"POST").then((function(t){e.customers=null==t||void 0==t||1==t?[]:t}));case 2:return t.next=4,e.$api.getRuleOther({},"POST").then((function(t){null!=t&&void 0!=t&&1!=t||(t=[]),t.forEach((function(t,r){e.tableData.push({project:t.name,isnotservice:1,code:t.code,serviceFee:0,id:""})}))}));case 4:return t.next=6,e.$api.ProvinceCity({},"POST").then((function(t){e.city=null==t||void 0==t||1==t?[]:t}));case 6:return t.next=8,e.$api.GetUser({},"POST").then((function(t){e.getUserList=t}));case 8:return t.next=10,e.$api.RuleEdit({RuleID:e.id},"POST").then((function(t){if(1==e.addOrEdit);else if(e.ruleInfo=t,e.ruleInfo.zhicai_service=""===e.ruleInfo.zhicai_service?0:e.ruleInfo.zhicai_service,0==e.ruleInfo.service_list.length){var r={id:"",grade_name:"",grade_price:0};e.ruleInfo.service_list.push(r)}e.$nextTick((function(){e.$set(e.ruleInfo,"provinceList",e.ruleInfo.province_code?e.ruleInfo.province_code.split(","):[]),e.$set(e.ruleInfo,"meeting",e.ruleInfo.eventtype?e.ruleInfo.eventtype.split(","):[]),e.$set(e.ruleInfo,"service_type","string"==typeof e.ruleInfo.service_type?e.ruleInfo.service_type.split(","):[]),e.$set(e.ruleInfo,"customerid",parseInt(e.ruleInfo.customerid)?parseInt(e.ruleInfo.customerid):null);var t=e.ruleInfo.kp_relevant_user.split(","),r=e.ruleInfo.kp_appoint_user.split(","),n=e.ruleInfo.cvent_relevant_user.split(","),i=e.ruleInfo.cvent_appoint_user.split(",");e.getUserList.forEach((function(t){r.forEach((function(r){t.username==r&&(e.kp_appoint_fullname.length>0?e.kp_appoint_fullname+=","+t.fullname:e.kp_appoint_fullname=t.fullname)})),i.forEach((function(r){t.username==r&&(e.cvent_appoint_fullname.length>0?e.cvent_appoint_fullname+=","+t.fullname:e.cvent_appoint_fullname=t.fullname)}))})),e.ruleInfo.kp_relevant_user=[],e.ruleInfo.cvent_relevant_user=[],e.relatedPersonList.forEach((function(r,i){t.forEach((function(t,n){r.id==t&&e.ruleInfo.kp_relevant_user.push(r.name)})),n.forEach((function(t,n){r.id==t&&e.ruleInfo.cvent_relevant_user.push(r.name)}))}));var a=e.ruleInfo.template.filter((function(e){return 1==e.type})),l=e.ruleInfo.template.filter((function(e){return 2==e.type})),o=e.ruleInfo.template.filter((function(e){return 3==e.type})),u=e.ruleInfo.template.filter((function(e){return 4==e.type})),s=e.ruleInfo.template.filter((function(e){return 5==e.type})),c=e.ruleInfo.template.filter((function(e){return 6==e.type}));e.$set(e.ruleInfo,"ruleTemplate_BusinessOffer_id",a[0]?a[0].templateid:null),e.$set(e.ruleInfo,"ruleTemplate_BusinessSettlement_id",l[0]?l[0].templateid:null),e.$set(e.ruleInfo,"ruleTemplate_VendorQuotation_id",o[0]?o[0].templateid:null),e.$set(e.ruleInfo,"ruleTemplate_SupplierSettlement_id",u[0]?u[0].templateid:null),e.$set(e.ruleInfo,"ruleTemplate_SupplierOfferConfirm_id",s[0]?s[0].templateid:null),e.$set(e.ruleInfo,"ruleTemplate_SupplierSettlementConfirm_id",c[0]?c[0].templateid:null),e.$set(e,"BusinessOffer_id",a[0]?a[0].id:null),e.$set(e,"BusinessSettlement_id",l[0]?l[0].id:null),e.$set(e,"VendorQuotation_id",o[0]?o[0].id:null),e.$set(e,"SupplierSettlement_id",u[0]?u[0].id:null),e.$set(e,"SupplierOfferConfirm_id",s[0]?s[0].id:null),e.$set(e,"SupplierSettlementConfirm_id",c[0]?c[0].id:null),e.$set(e.ruleInfo,"flat_tax_rate",e.ruleInfo.room_inquiry_taxrate),0!=e.ruleInfo.ladder.length&&e.ruleInfo.ladder||e.$set(e.ruleInfo,"ladder",[{id:"",ladder_min:0,ladder_max:"",ladder_taxrate:0}]),0!=e.ruleInfo.grade.length&&e.ruleInfo.grade||e.$set(e.ruleInfo,"grade",[{id:"",grade_money:"",grade_taxrate:0}]),1!=e.addOrEdit&&e.tableData.forEach((function(t,r){if(0==r&&(t.type=e.ruleInfo.room_inquiry_type,t.taxRate=e.ruleInfo.room_inquiry_taxrate,t.isnotservice=e.ruleInfo.room_inquiry_isnotservice,t.serviceFee=e.ruleInfo.room_inquiry_service_taxrate),1==r&&(t.type=e.ruleInfo.conference_inquiry_type,t.taxRate=e.ruleInfo.conference_inquiry_taxrate,t.isnotservice=e.ruleInfo.conference_inquiry_isnotservice,t.serviceFee=e.ruleInfo.conference_inquiry_service_taxrate),2==r&&(t.type=e.ruleInfo.hotel_food_inquiry_type,t.taxRate=e.ruleInfo.hotel_food_inquiry_taxrate,t.isnotservice=e.ruleInfo.hotel_food_inquiry_isnotservice,t.serviceFee=e.ruleInfo.hotel_food_inquiry_service_taxrate),3==r&&(t.type=e.ruleInfo.others_food_inquiry_type,t.taxRate=e.ruleInfo.others_food_inquiry_taxrate,t.isnotservice=e.ruleInfo.others_food_inquiry_isnotservice,t.serviceFee=e.ruleInfo.others_food_inquiry_service_taxrate),4==r&&(t.type=e.ruleInfo.transportation_inquiry_type,t.taxRate=e.ruleInfo.transportation_inquiry_taxrate,t.isnotservice=e.ruleInfo.transportation_inquiry_isnotservice,t.serviceFee=e.ruleInfo.transportation_inquiry_service_taxrate),5==r&&(t.type=e.ruleInfo.car_inquiry_type,t.taxRate=e.ruleInfo.car_inquiry_taxrate,t.isnotservice=e.ruleInfo.car_inquiry_isnotservice,t.serviceFee=e.ruleInfo.car_inquiry_service_taxrate),6==r&&(t.type=e.ruleInfo.other_inquiry_type,t.taxRate=e.ruleInfo.other_inquiry_taxrate),r>6){var n=e.ruleInfo.other.filter((function(e){return t.code==e.othercode}));t.isnotservice=n[0]?n[0].iscalservice:1,t.serviceFee=n[0]?n[0].servicerate:0,t.id=n[0]?n[0].id:""}})),e.getMeetingTypeShow(),e.getServiceType(),e.getRuleTemplate(),e.$forceUpdate()}))}));case 10:case"end":return t.stop()}}),t)})))()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){var r=!0;return 1==t.ruleInfo.zhicai_service&&t.ruleInfo.service_list.forEach((function(e){if(""===e.grade_name||""===e.grade_price)return r=!1,!1})),r?e?void t.RuleSava():(t.$message.error("请填写表单必填项！"),!1):(t.$message.error("等级列表请填写完整"),!1)}))},RuleSava:function(){var e=this;if(!this.ruleInfo.customerid&&1==this.type)return this.$message.error("请填写表单必填项！"),!1;if(1==this.ruleInfo.service_fee_calculation_method)for(var t=0;t<this.ruleInfo.ladder.length;t++){if(""==this.ruleInfo.ladder[t].ladder_taxrate||null==this.ruleInfo.ladder[t].ladder_taxrate||""===this.ruleInfo.ladder[t].ladder_min||""===this.ruleInfo.ladder[t].ladder_max)return void this.$message.error("阶梯".concat(t+1," 有未填写数据"));if(parseFloat(this.ruleInfo.ladder[t].ladder_max)<=parseFloat(this.ruleInfo.ladder[t].ladder_min))return void this.$message.error("阶梯".concat(t+1," 最大值必须大于最小值"));if(t>0&&parseFloat(this.ruleInfo.ladder[t].ladder_min)<=parseFloat(this.ruleInfo.ladder[t-1].ladder_max))return void this.$message.error("阶梯".concat(t+1," 最小值必须大于上一阶梯最大值"))}if(2==this.ruleInfo.service_fee_calculation_method)for(t=0;t<this.ruleInfo.grade.length;t++){if(""==this.ruleInfo.grade[t].grade_taxrate||null==this.ruleInfo.grade[t].grade_taxrate||""===this.ruleInfo.grade[t].grade_money)return void this.$message.error("档次".concat(t+1," 有未填写数据"));if(t>0&&parseFloat(this.ruleInfo.grade[t].grade_money)<=parseFloat(this.ruleInfo.grade[t-1].grade_money))return void this.$message.error("档次".concat(t+1," 金额必须大于上一档次金额"))}this.ruleInfo.province_code=this.ruleInfo.provinceList.join(","),this.ruleInfo.template=[],this.ruleInfo.template.push({id:this.BusinessOffer_id,templateid:this.ruleInfo.ruleTemplate_BusinessOffer_id,type:1}),this.ruleInfo.template.push({id:this.BusinessSettlement_id,templateid:this.ruleInfo.ruleTemplate_BusinessSettlement_id,type:2}),this.ruleInfo.template.push({id:this.VendorQuotation_id,templateid:this.ruleInfo.ruleTemplate_VendorQuotation_id,type:3}),this.ruleInfo.template.push({id:this.SupplierSettlement_id,templateid:this.ruleInfo.ruleTemplate_SupplierSettlement_id,type:4}),this.ruleInfo.template.push({id:this.SupplierOfferConfirm_id,templateid:this.ruleInfo.ruleTemplate_SupplierOfferConfirm_id,type:5}),this.ruleInfo.template.push({id:this.SupplierSettlementConfirm_id,templateid:this.ruleInfo.ruleTemplate_SupplierSettlementConfirm_id,type:6}),this.tableData.forEach((function(t,r){0==r&&(e.ruleInfo.room_inquiry_type=t.type,e.ruleInfo.room_inquiry_taxrate=t.taxRate,e.ruleInfo.room_inquiry_isnotservice=t.isnotservice,e.ruleInfo.room_inquiry_service_taxrate=t.serviceFee),1==r&&(e.ruleInfo.conference_inquiry_type=t.type,e.ruleInfo.conference_inquiry_taxrate=t.taxRate,e.ruleInfo.conference_inquiry_isnotservice=t.isnotservice,e.ruleInfo.conference_inquiry_service_taxrate=t.serviceFee),2==r&&(e.ruleInfo.hotel_food_inquiry_type=t.type,e.ruleInfo.hotel_food_inquiry_taxrate=t.taxRate,e.ruleInfo.hotel_food_inquiry_isnotservice=t.isnotservice,e.ruleInfo.hotel_food_inquiry_service_taxrate=t.serviceFee),3==r&&(e.ruleInfo.others_food_inquiry_type=t.type,e.ruleInfo.others_food_inquiry_taxrate=t.taxRate,e.ruleInfo.others_food_inquiry_isnotservice=t.isnotservice,e.ruleInfo.others_food_inquiry_service_taxrate=t.serviceFee),4==r&&(e.ruleInfo.transportation_inquiry_type=t.type,e.ruleInfo.transportation_inquiry_taxrate=t.taxRate,e.ruleInfo.transportation_inquiry_isnotservice=t.isnotservice,e.ruleInfo.transportation_inquiry_service_taxrate=t.serviceFee),5==r&&(e.ruleInfo.car_inquiry_type=t.type,e.ruleInfo.car_inquiry_taxrate=t.taxRate,e.ruleInfo.car_inquiry_isnotservice=t.isnotservice,e.ruleInfo.car_inquiry_service_taxrate=t.serviceFee),6==r&&(e.ruleInfo.other_inquiry_type=t.type,e.ruleInfo.other_inquiry_taxrate=t.taxRate),r>6&&(e.ruleInfo.other=[],e.tableData.forEach((function(t,r){r>6&&e.ruleInfo.other.push({othercode:t.code,servicerate:t.serviceFee,iscalservice:t.isnotservice,id:t.id})})))})),1==this.ruleInfo.vatrule&&(this.ruleInfo.room_inquiry_taxrate=this.ruleInfo.flat_tax_rate,this.ruleInfo.conference_inquiry_taxrate=this.ruleInfo.flat_tax_rate,this.ruleInfo.hotel_food_inquiry_taxrate=this.ruleInfo.flat_tax_rate,this.ruleInfo.others_food_inquiry_taxrate=this.ruleInfo.flat_tax_rate,this.ruleInfo.transportation_inquiry_taxrate=this.ruleInfo.flat_tax_rate,this.ruleInfo.car_inquiry_taxrate=this.ruleInfo.flat_tax_rate,this.ruleInfo.other_inquiry_taxrate=this.ruleInfo.flat_tax_rate,this.ruleInfo.service_taxrate=this.ruleInfo.flat_tax_rate);var r=JSON.parse(JSON.stringify(this.ruleInfo));this.meetingType.forEach((function(e,t){r.meeting.forEach((function(t,n){e.name==t&&(r.meeting[n]=e.id)}))})),this.serviceList.forEach((function(e,t){r.service_type.forEach((function(t,n){e.name==t&&(r.service_type[n]=e.id)}))})),this.relatedPersonList.forEach((function(e,t){r.kp_relevant_user.forEach((function(t,n){e.name==t&&(r.kp_relevant_user[n]=e.id)})),r.cvent_relevant_user.forEach((function(t,n){e.name==t&&(r.cvent_relevant_user[n]=e.id)}))})),r.kp_relevant_user=r.kp_relevant_user.join(","),r.cvent_relevant_user=r.cvent_relevant_user.join(","),r.eventtype=r.meeting.join(","),r.service_type=r.service_type.join(","),delete r.provinceList,delete r.meeting,delete r.flat_tax_rate,delete r.ruleTemplate_BusinessOffer_id,delete r.ruleTemplate_BusinessSettlement_id,delete r.ruleTemplate_VendorQuotation_id,delete r.ruleTemplate_SupplierSettlement_id,delete r.ruleTemplate_SupplierOfferConfirm_id,delete r.ruleTemplate_SupplierSettlementConfirm_id,this.$api.RuleSava({Parameter:JSON.stringify(r)},"POST").then((function(t){console.log(t),e.$router.push({name:"otherSeetings",params:{activeName:"second"}})}))},change:function(e){console.log(e)},eventData:function(e){console.log(e)},customerChange:function(e){this.getMeetingTypeShow()}}},u=o,s=(r("682d"),r("2877")),c=Object(s["a"])(u,n,i,!1,null,"1498092d",null);t["default"]=c.exports},"1da1":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r("d3b7");function n(e,t,r,n,i,a,l){try{var o=e[a](l),u=o.value}catch(s){return void r(s)}o.done?t(u):Promise.resolve(u).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var l=e.apply(t,r);function o(e){n(l,i,a,o,u,"next",e)}function u(e){n(l,i,a,o,u,"throw",e)}o(void 0)}))}}},"37d5":function(e,t,r){},"682d":function(e,t,r){"use strict";r("37d5")},"96cf":function(e,t){!function(t){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag",s="object"===typeof e,c=t.regeneratorRuntime;if(c)s&&(e.exports=c);else{c=t.regeneratorRuntime=s?e.exports:{},c.wrap=I;var f="suspendedStart",p="suspendedYield",_="executing",d="completed",m={},v={};v[l]=function(){return this};var h=Object.getPrototypeOf,y=h&&h(h(E([])));y&&y!==n&&i.call(y,l)&&(v=y);var g=S.prototype=b.prototype=Object.create(v);k.prototype=g.constructor=S,S.constructor=k,S[u]=k.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(g),e},c.awrap=function(e){return{__await:e}},T(w.prototype),w.prototype[o]=function(){return this},c.AsyncIterator=w,c.async=function(e,t,r,n){var i=new w(I(e,t,r,n));return c.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},T(g),g[u]="Generator",g[l]=function(){return this},g.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){while(t.length){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},c.values=E,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return o.type="throw",o.arg=e,t.next=n,i&&(t.method="next",t.arg=r),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],o=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var u=i.call(l,"catchLoc"),s=i.call(l,"finallyLoc");if(u&&s){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(u){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var l=a?a.completion:{};return l.type=e,l.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),m}}}function I(e,t,r,n){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),l=new L(n||[]);return a._invoke=q(e,r,l),a}function x(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function b(){}function k(){}function S(){}function T(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e){function t(r,n,a,l){var o=x(e[r],e,n);if("throw"!==o.type){var u=o.arg,s=u.value;return s&&"object"===typeof s&&i.call(s,"__await")?Promise.resolve(s.__await).then((function(e){t("next",e,a,l)}),(function(e){t("throw",e,a,l)})):Promise.resolve(s).then((function(e){u.value=e,a(u)}),l)}l(o.arg)}var r;function n(e,n){function i(){return new Promise((function(r,i){t(e,n,r,i)}))}return r=r?r.then(i,i):i()}this._invoke=n}function q(e,t,r){var n=f;return function(i,a){if(n===_)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw a;return j()}r.method=i,r.arg=a;while(1){var l=r.delegate;if(l){var o=$(l,r);if(o){if(o===m)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=_;var u=x(e,t,r);if("normal"===u.type){if(n=r.done?d:p,u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=d,r.method="throw",r.arg=u.arg)}}}function $(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,$(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=x(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,m):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function E(e){if(e){var t=e[l];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){while(++n<e.length)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return a.next=a}}return{next:j}}function j(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},a434:function(e,t,r){"use strict";var n=r("23e7"),i=r("da84"),a=r("23cb"),l=r("5926"),o=r("07fa"),u=r("7b0b"),s=r("65f0"),c=r("8418"),f=r("1dde"),p=f("splice"),_=i.TypeError,d=Math.max,m=Math.min,v=9007199254740991,h="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var r,n,i,f,p,y,g=u(this),I=o(g),x=a(e,I),b=arguments.length;if(0===b?r=n=0:1===b?(r=0,n=I-x):(r=b-2,n=m(d(l(t),0),I-x)),I+r-n>v)throw _(h);for(i=s(g,n),f=0;f<n;f++)p=x+f,p in g&&c(i,f,g[p]);if(i.length=n,r<n){for(f=x;f<I-n;f++)p=f+n,y=f+r,p in g?g[y]=g[p]:delete g[y];for(f=I;f>I-n+r;f--)delete g[f-1]}else if(r>n)for(f=I-n;f>x;f--)p=f+n-1,y=f+r-1,p in g?g[y]=g[p]:delete g[y];for(f=0;f<r;f++)g[f+x]=arguments[f+2];return g.length=I-n+r,i}})}}]);