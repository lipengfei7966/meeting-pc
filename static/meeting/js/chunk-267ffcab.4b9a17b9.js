(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-267ffcab"],{3629:function(t,e,i){"use strict";i("ecaa")},acd6:function(t,e,i){"use strict";var o=i("4ff3"),n=i.n(o),a=i("f121");const s=a["b"];e["a"]=function(t,e,i){return new Promise((function(o,a){const l=()=>{"/Template/GetTemplate"==t?n()({method:"post",url:s+t,data:e,headers:{"Content-Type":"application/json;charset=utf-8"}}).then(t=>{let o=document.createElement("a"),n=t.data.path.substring(t.data.path.lastIndexOf("."));fetch(t.data.path).then(t=>t.blob()).then(t=>{o.href=URL.createObjectURL(t),console.log(o.href),5==e.type||e.type,o.download=i+n,document.body.appendChild(o),o.click()})}):n()({method:"post",url:s+t,data:e,responseType:"blob",headers:{"Content-Type":"application/json;charset=utf-8"}}).then(o=>{console.log(o);let n=o.data;const a=new FileReader;a.readAsDataURL(n),a.onload=o=>{let n=document.createElement("a");n.style.display="none","/quotation/exportexcel"==t||"/SettlementSheet/ExportExcel1"==t||"/orderform/exportexcel"==t||"/Quotation/ExportExcel"==t?n.download=i+".xls":"/Template/GetTemplate"==t?5==e.type||6==e.type?n.download=i+".docx":n.download=i+".xls":"/Reporting/GetExcel"==t&&(n.download=i+".xls"),n.href=o.target.result;document.body;document.body.appendChild(n),n.click(),document.body.removeChild(n)}})};l()}))}},ada3:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"orderInfo"},[e("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"d_click",attrs:{href:t.downloadUrl,target:"_blank",download:""}}),e("div",{staticClass:"title"},[t._v(" 我的订单 - "),t.info?[t._v(" "+t._s(t.info.num)+" ")]:t._e()],2),t.info?e("div",{staticClass:"content"},["0020-1"===this.info.status?e("div",{staticClass:"tips"},[e("p",{staticClass:"dataState-one"},[t._v("订单状态：订单执行中")]),e("p",{staticClass:"dataState-two"},[t._v("会议进行中，请实时上传结算凭证文件！")]),e("p",[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.settlement}},[t._v(" "+t._s(t.info.settlement_sheet_status===t.settlement_sheet_status_draft?"提交结算单(草稿)":"提交结算单")+" ")])],1)]):t._e(),"0020-3"===this.info.status?e("div",{staticClass:"tips"},[e("p",{staticClass:"dataState-one"},[t._v("订单状态：已创建待执行")]),e("p",{staticClass:"dataState-two"},[t._v(" 请查看以下订单详情，如果客户需要使用会议室等场地，请为客户预留档期。 ")]),e("p",{staticClass:"special"},[e("span",[t._v("如果您遇到特殊情况需要取消订单，可以点击")]),e("el-link",{staticClass:"special_link",attrs:{name:"cancel",type:"primary"},on:{click:t.cancelorderform}},[t._v("取消订单")]),e("span",[t._v("并说明原委，我们将同时为您发送短信和邮件向客户致歉。")])],1)]):"0020-2"===this.info.status?e("div",{staticClass:"tips"},[e("p",{staticClass:"dataState-one"},[t._v("订单状态：已取消")]),e("p",{staticClass:"dataState-two"},[t._v(" "+t._s(t.info.contacts)+" - "+t._s(t.info.company_name)+" - 取消了订单 ("+t._s(t.info.activity_name)+") ")])]):t._e(),"0020-4"===this.info.status?e("div",{staticClass:"tips"},[e("p",{staticClass:"dataState-one"},[t._v("订单状态：已执行待结算")]),e("p",{staticClass:"dataState-two"},[t._v(" 会议服务商服务已经结束，请向客户提交结算单。结算单被确认后，您可以快递发票和结算单，以便客户付款。 ")]),e("p",[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.settlement}},[t._v(" "+t._s(t.info.settlement_sheet_status===t.settlement_sheet_status_draft?"提交结算单(草稿)":"提交结算单")+" ")])],1)]):"0020-5"===this.info.status?e("div",{staticClass:"tips"},[e("p",{staticClass:"dataState-one"},[t._v("订单状态：待确认结算单")]),e("p",{staticClass:"special dataState-two"},[e("span",[t._v("已提交结算单，正在等待客户确认。 ")]),e("span",[t._v("审批环节："+t._s(t.info.approval_phase)+"， ")]),e("span",[t._v("审批人："+t._s(t.info.approval_people)+" ")])]),e("p",[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.settlement}},[t._v("查看结算单")])],1)]):"0020-6"===this.info.status?e("div",{staticClass:"tips"},[e("p",{staticClass:"dataState-one"},[t._v("订单状态：已确认结算单")]),e("p",{staticClass:"dataState-two"},[t._v(" 客户确认了您的结算单，您可以与客户沟通发票、付款的事宜。 ")])]):"0020-7"===this.info.status?e("div",{staticClass:"tips"},[e("p",{staticClass:"dataState-one"},[t._v("订单状态：客户驳回结算单")]),e("p",{staticClass:"dataState-three"},[t._v(" 客户对结算单有异议，请查看、修改后重新移交结算单。 ")]),this.info.orderform_settlement_customer_objection?e("p",[t._v(" 客户异议： "),e("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"text"},on:{click:function(e){t.objectionVisible=!0}}},[t._v(" 查看异议 ")])],1):t._e(),e("p",[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.settlement}},[t._v("提交结算单")])],1)]):"0020-8"===this.info.status?e("div",{staticClass:"tips"},[e("p",{staticClass:"dataState-one"},[t._v("订单状态：要求补充结算单材料")]),e("p",{staticClass:"dataState-three"},[t._v(" 客户对结算单有异议，请查看、修改后重新移交结算单。 ")]),this.info.orderform_settlement_customer_objection?e("div",[t._v(" 客户异议： "),e("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"text"},on:{click:function(e){t.objectionVisible=!0}}},[t._v(" 查看异议 ")])],1):t._e(),e("p",[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.settlement}},[t._v("提交结算单")])],1)]):t._e(),e("div",{staticClass:"diameter"},[e("div",{staticClass:"title_record"},[t._v("结算记录")]),t.select.length>0?e("el-collapse",{attrs:{accordion:""},on:{change:t.handleChange}},t._l(t.select,(function(i,o){return e("el-collapse-item",{key:o},[e("template",{slot:"title"},[e("span",{staticClass:"sp_one"},[t._v("第"+t._s(o+1)+"次结算记录：")]),i.showDetail?t._e():e("span",{on:{click:function(t){i.showDetail=!i.showDetail}}},[e("span",{staticClass:"sp_two"},[t._v("展开")]),e("i",{staticClass:"el-icon-arrow-up icon_"})]),i.showDetail?e("span",{on:{click:function(t){i.showDetail=!i.showDetail}}},[e("span",{staticClass:"sp_two"},[t._v("收起")]),e("i",{staticClass:"el-icon-arrow-down icon_"})]):t._e()]),t._l(i.data,(function(i,o){return e("div",{key:o,staticClass:"txtCon",staticStyle:{margin:"10px 0","padding-bottom":"5px"}},[e("p",{staticStyle:{"font-size":"12px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#333333","margin-bottom":"5px"}},[t._v(" "+t._s(i.date)+" ")]),e("p",{staticStyle:{"font-size":"12px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#666666"}},[t._v(" "+t._s(i.username)+" ( "+t._s(i.company_name)+" ) ")]),e("p",{staticStyle:{"font-size":"12px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#666666"}},[t._v(" "+t._s(i.state)+" ")]),e("div",{staticClass:"objectionDetailStyle",staticStyle:{"font-size":"12px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#666666"},domProps:{innerHTML:t._s(i.message)},on:{click:function(e){return t.getImg(e)}}}),t._l(i.array,(function(i,o){return e("div",{key:o,staticClass:"flex_row"},[e("p",[t._v(t._s(i.name)+":")]),e("p",t._l(i.value,(function(i,o){return e("span",{key:o,staticClass:"filename",on:{click:function(e){return t.handlePreview(i)}}},[t._v(" "+t._s(i.name)+" ")])})),0)])})),t._l(i.dissent,(function(i,o){return e("div",{key:o,staticClass:"flex_row"},[e("p",[t._v(t._s(i.name)+":")]),e("p",[t._v(" "+t._s(i.value)+" ")])])}))],2)}))],2)})),1):e("div",{staticStyle:{"margin-bottom":"5px"}},[e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#666666"}},[t._v("暂无结算记录")])])],1),e("div",{staticStyle:{"font-size":"16px","font-family":"PingFang SC-特粗, PingFang SC","font-weight":"600",color:"#333333","border-left":"4px solid #1887ff","padding-left":"5px"}},[t._v(" 订单信息 ")]),e("div",[e("el-divider")],1),e("div",{staticStyle:{"margin-top":"10px"}},[e("el-descriptions",{attrs:{title:""}},[e("el-descriptions-item",{attrs:{label:"订单号"}},[e("span",{staticClass:"sp_three"},[t._v(t._s(t.info.num))])]),e("el-descriptions-item",{attrs:{label:"下单时间"}},[e("span",{staticClass:"sp_three"},[t._v(t._s(t._f("date_ex")(t.info.submit_time)))])]),e("el-descriptions-item",{attrs:{label:"活动名称"}},[e("span",{staticClass:"sp_three"},[t._v(t._s(t.info.activity_name))])]),e("el-descriptions-item",{attrs:{label:"活动日期"}},[e("span",{staticClass:"sp_three"},[t._v(t._s(t.info.activity_date))])]),e("el-descriptions-item",{attrs:{label:"客户名称"}},[e("span",{staticClass:"sp_three"},[t._v(t._s(t.info.company_name))])]),e("el-descriptions-item",{attrs:{label:"联系人"}},[e("span",{staticClass:"sp_three"},[t._v(t._s(t.info.contacts))])]),e("el-descriptions-item",{attrs:{label:"联系方式"}},[e("span",{staticClass:"sp_three"},[t._v(t._s(t.info.customer_service_telephone_numbers))])]),e("el-descriptions-item",{attrs:{label:"报价人"}},[e("span",{staticClass:"sp_three"},[t._v(t._s(t.info.bidder))])]),e("el-descriptions-item",{attrs:{label:"报价日期"}},[e("span",{staticClass:"sp_three"},[t._v(t._s(t._f("date_ex")(t.info.offer_data)))])]),e("el-descriptions-item",{attrs:{label:"采购酒店"}},[e("span",{staticClass:"sp_three"},[t._v(t._s(t.info.hotel_name))])])],1)],1),1==t.whetherShow.kp_notice_file||1==t.whetherShow.invoice_file||1==t.whetherShow.cvent_date?e("div",{staticClass:"info"},[e("div",{staticClass:"line"},[1==t.whetherShow.kp_notice_file?e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("开票通知文件")]),e("div",{staticClass:"context",staticStyle:{display:"flex"}},[e("ul",{staticStyle:{"margin-right":"50px"}},t._l(t.fileList.kpFile,(function(i,o){return e("li",{key:o,staticStyle:{margin:"10px 0"}},[e("span",{staticStyle:{color:"#409eff",cursor:"pointer"},on:{click:function(e){return t.downloadFile(i)}}},[t._v(" "+t._s(i.filename)+" ")]),e("span",[t._v(" 上传时间： "+t._s(i.create_time)+" ")])])})),0),e("el-upload",{ref:"upload",attrs:{action:t.UploadFilesUrl,"on-success":t.uploadFile,"on-preview":t.downloadFile,"file-list":t.fileList.kpFile,"show-file-list":!1,multiple:!0}},[e("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选择文件")])],1)],1)]):t._e()]),e("div",{staticClass:"line"},[1==t.whetherShow.invoice_file?e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("发票附件")]),e("div",{staticClass:"context"},[e("ul",t._l(t.fileList.fpFile,(function(i,o){return e("li",{key:o},[e("span",{staticStyle:{color:"#409eff",cursor:"pointer"},on:{click:function(e){return t.downloadFile(i)}}},[t._v(" "+t._s(i.filename)+" ")]),e("span",[t._v(" 上传时间： "+t._s(i.create_time)+" ")])])})),0)])]):t._e(),1==t.whetherShow.cvent_date?e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("Cevent 上传完成日期")]),e("div",{staticClass:"context",staticStyle:{display:"flex","justify-content":"space-between"}},[e("span",{staticStyle:{"line-height":"30px"}},[t._v(" "+t._s(t.fileList.cventDate)+" ")]),e("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},on:{click:function(e){t.CeventDateDialog=!0}},slot:"trigger"},[t._v("编辑")])],1)]):t._e()])]):t._e(),e("div",{staticStyle:{"margin-left":"55px"}},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.quotedprice}},[t._v("最终报价单")]),"0020-6"===this.info.status?e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.settlement}},[t._v("结算单 ")]):t._e()],1),e("div",{staticStyle:{"margin-top":"25px","font-size":"16px","font-family":"PingFang SC-特粗, PingFang SC","font-weight":"normal",color:"#333333","border-left":"4px solid #1887ff","padding-left":"5px",display:"flex","justify-content":"space-between"}},[t._m(0),e("div",[e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#1890ff","margin-right":"10px",cursor:"pointer"},on:{click:t.excelexport}},[e("i",{staticClass:"el-icon-document"}),t._v(" 下载excel ")]),e("span",{staticStyle:{"font-size":"18px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#333333"}},[t._v("总报价: ")]),e("span",{staticStyle:{"font-size":"18px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#eb5851"}},[t._v(" ￥"+t._s(t.totalPrices.toFixed(2)))])])]),e("div",[t.roomList.length>0?e("div",{staticClass:"tableStyle"},[e("div",{staticStyle:{"margin-left":"10px","font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[t._v(" 客房需求 ")]),e("div",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[t._v(" 客房报价总计： "),e("span",[t._v("￥"+t._s(this.allMoney.toFixed(2)))])])]):t._e(),t.roomList.length>0?e("div",[e("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.roomList,"cell-style":t.cellStyle,"header-cell-style":{textAlign:"center",background:"#fafafa"},"span-method":t.objectSpanMethod,border:""}},[e("el-table-column",{attrs:{prop:"data_",label:"日期","min-width":"15%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t._f("date_day")(i.row.data_)))])]}}],null,!1,1901885735)}),e("el-table-column",{attrs:{prop:"roomtypename",label:"房型","min-width":"20%"}}),e("el-table-column",{attrs:{prop:"roomcount",label:"数量",align:"right","min-width":"15%"}}),e("el-table-column",{attrs:{label:"报价",align:"right","min-width":"20%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[t._v(" ￥"+t._s(i.row.unitprice.toFixed(2))+"*"+t._s(i.row.provide_count)+"间 ￥"+t._s(i.row.totalprice.toFixed(2))+" ")])]}}],null,!1,1252707532)}),e("el-table-column",{attrs:{prop:"remarks",label:"报价备注","min-width":"30%"}})],1),e("div",{staticClass:"foodStyle",staticStyle:{"margin-bottom":"30px"}},[e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#666666","margin-left":"10px"}},[t._v("客房报价总备注：")]),e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#333","margin-left":"10px"}},[t._v(t._s(t.info.room_remarks))])])],1):t._e(),t.conferenceList.length>0?e("div",{staticClass:"tableStyle"},[e("div",{staticStyle:{"margin-left":"10px","font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[t._v(" 会场需求 ")]),e("div",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[t._v(" 报价： "),e("span",[t._v("￥"+t._s((this.EquipmentMoney+this.meetingMoney).toFixed(2)))])])]):t._e(),t.conferenceList.length>0?e("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.conferenceList,"cell-style":t.cellStyle,"header-cell-style":{textAlign:"center",background:"#fafafa"},border:"","span-method":t.objectSpanMethod_two}},[e("el-table-column",{attrs:{prop:"data_",label:"日期","min-width":"15%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t._f("date_day")(i.row.data_)))])]}}],null,!1,1901885735)}),e("el-table-column",{attrs:{label:"项目","min-width":"20%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[t._v(" "+t._s((i.row.item?i.row.item:"")+(i.row.order_name?i.row.order_name:"")+(i.row.typename?i.row.typename:""))+" ")])]}}],null,!1,3469534197)}),e("el-table-column",{attrs:{label:"需求","min-width":"20%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",[e("div",[t._v(" 会议时间："),e("span",{staticStyle:{color:"black"}},[t._v(t._s(i.row.starttime)+"-"+t._s(i.row.endtime))])]),e("div",[t._v(" 出席人数："),e("span",{staticStyle:{color:"black"}},[t._v(" "+t._s(i.row.attendees))])]),e("div",[t._v(" 会场台型："),e("span",{staticStyle:{color:"black"}},[t._v(t._s(i.row.roomsetuptypename))])]),e("div",[t._v(" 会场面积范围："),e("span",{staticStyle:{color:"black"}},[t._v(t._s(i.row.min_area)+"~"+t._s(i.row.max_area)+" sqm")])])])]}}],null,!1,3427457253)}),e("el-table-column",{attrs:{label:"报价",align:"right","min-width":"15%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[t._v("￥"+t._s(i.row.price.toFixed(2))+" ")])]}}],null,!1,2661236129)}),e("el-table-column",{attrs:{label:"报价备注","min-width":"30%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(" "+t._s(i.row.comments))])]}}],null,!1,2961875693)})],1):t._e(),t.conferenceList.length>0?e("div",{staticClass:"foodStyle",staticStyle:{"margin-bottom":"30px"}},[e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#666666","margin-left":"10px"}},[t._v("会议报价总备注：")]),e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#333","margin-left":"10px"}},[t._v(t._s(t.info.conference_remarks))])]):t._e(),t.theHotel.length>0?e("div",{staticClass:"tableStyle"},[e("div",{staticStyle:{"margin-left":"10px","font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[t._v(" 酒店内用餐需求 ")]),e("div",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[t._v(" 餐饮报价总计： "),e("span",[t._v("￥"+t._s(this.repastAllMoney.toFixed(2)))])])]):t._e(),t.theHotel.length>0?e("div",{staticStyle:{"margin-bottom":"30px"}},[e("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.theHotel,"cell-style":t.cellStyle,"header-cell-style":{textAlign:"center",background:"#fafafa"},"span-method":t.objectSpanMethod_three,border:""}},[e("el-table-column",{attrs:{prop:"data_",label:"日期","min-width":"15%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t._f("date_day")(i.row.data_)))])]}}],null,!1,1901885735)}),e("el-table-column",{attrs:{label:"项目","min-width":"20%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.foodtypename))]),e("span",[t._v(t._s(i.row.usetype?`[${i.row.usetype}]`:""))])]}}],null,!1,3360766568)}),e("el-table-column",{attrs:{prop:"roomcount",label:"人数",align:"right","min-width":"15%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.personcount))])]}}],null,!1,3887242544)}),e("el-table-column",{attrs:{label:"报价",align:"right","min-width":"20%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[t._v(" ￥"+t._s(i.row.price.toFixed(2))+"*"+t._s(i.row.personcount)+" 人 ￥"+t._s((i.row.price*i.row.personcount).toFixed(2))+" ")])]}}],null,!1,2460103906)}),e("el-table-column",{attrs:{prop:"offer_remarks",label:"报价备注","min-width":"30%"}})],1)],1):t._e(),t.theHotel_two.length>0?e("div",{staticClass:"tableStyle"},[e("div",{staticStyle:{"margin-left":"10px","font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[t._v(" 酒店外用餐需求 ")]),e("div",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[t._v(" 餐饮报价总计： "),e("span",[t._v("￥"+t._s(this.otherFoodAllMoney.toFixed(2)))])])]):t._e(),t.theHotel_two.length>0?e("div",{staticStyle:{"margin-bottom":"30px"}},[e("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.theHotel_two,"cell-style":t.cellStyle,"header-cell-style":{textAlign:"center",background:"#fafafa"},"span-method":t.objectSpanMethod_four,border:""}},[e("el-table-column",{attrs:{prop:"data_",label:"日期","min-width":"15%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t._f("date_day")(i.row.data_)))])]}}],null,!1,1901885735)}),e("el-table-column",{attrs:{label:"项目","min-width":"20%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.foodtypename))]),e("span",[t._v(t._s(i.row.usetype?`[${i.row.usetype}]`:""))])]}}],null,!1,3360766568)}),e("el-table-column",{attrs:{prop:"roomcount",label:"人数",align:"right","min-width":"15%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.personcount))])]}}],null,!1,3887242544)}),e("el-table-column",{attrs:{label:"报价",align:"right","min-width":"20%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[t._v(" ￥"+t._s(i.row.price.toFixed(2))+"*"+t._s(i.row.personcount)+" 人 ￥"+t._s((i.row.price*i.row.personcount).toFixed(2))+" ")])]}}],null,!1,2460103906)}),e("el-table-column",{attrs:{prop:"offer_remarks",label:"报价备注","min-width":"30%"}})],1)],1):t._e(),t.trafficList.length>0||t.groundTransportation.length>0?e("div",{staticClass:"tableStyle"},[e("div",{staticStyle:{"margin-left":"10px","font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[t._v(" 交通需求 ")]),e("div",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[t._v(" 交通报价总计： "),e("span",[t._v("￥"+t._s((this.IntercityTransportationAllMoney+this.CityAllMoney).toFixed(2)))])])]):t._e(),t.trafficList.length>0||t.groundTransportation.length>0?e("div",{staticStyle:{"margin-bottom":"30px"}},[t.trafficList.length>0||0==t.trafficList.length&&0==t.groundTransportation.length?e("el-table",{class:0==t.trafficList.length&&0==t.groundTransportation.length?"EmptyData":"",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.trafficList,"show-header":0==t.groundTransportation.length&&t.trafficList.length>0||t.groundTransportation.length>0&&t.trafficList.length>0,"cell-style":t.cellStyle,"header-cell-style":{textAlign:"center",background:"#fafafa"},"span-method":t.objectSpanMethod_five,border:""}},[e("el-table-column",{attrs:{prop:"data_",label:"分类","min-width":"15%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.isType))])]}}],null,!1,1039182948)}),e("el-table-column",{attrs:{label:"日期","min-width":"15%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t._f("date_day")(i.row.data_)))])]}}],null,!1,1901885735)}),e("el-table-column",{attrs:{prop:"roomcount",label:"需求","min-width":"20%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.origincity)+" - "+t._s(i.row.destinationcity)+" "+t._s(i.row.transtypename)+" "+t._s(i.row.seatclassesname)+" "+t._s(i.row.passengercount)+"人")])]}}],null,!1,4113743394)}),e("el-table-column",{attrs:{label:"报价",align:"right","min-width":"20%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[t._v("￥"+t._s(i.row.unitprice.toFixed(2))+"*"+t._s(i.row.passengercount)+" 人 ￥"+t._s((i.row.unitprice*i.row.passengercount).toFixed(2)))])]}}],null,!1,3647206153)}),e("el-table-column",{attrs:{prop:"requirement",label:"报价备注","min-width":"30%"}})],1):t._e(),t.trafficList.length>0?e("div",{class:0==t.groundTransportation.length?"EmptyData":"",staticStyle:{display:"flex","justify-content":"space-between"}},[e("div",{staticStyle:{"background-color":"#fafafa","border-bottom":"1px solid #ebeef5",width:"15.1%",height:"49px","margin-top":"-1px","z-index":"999999"}}),e("div",{staticStyle:{height:"48px",width:"84.8%","line-height":"48px","z-index":"999999","border-left":"1px solid #ebeef5","border-right":"1px solid #ebeef5","border-bottom":"1px solid #ebeef5",background:"#fafafa"}},[e("span",{staticStyle:{"margin-left":"10px",color:"#606266"}},[t._v("大交通报价总备注：")]),e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"600",color:"#666666"}},[t._v(t._s(t.info.transportation_remarks)+" ")])])]):t._e(),e("div",{staticStyle:{"margin-top":"-21px"}},[t.groundTransportation.length>0?e("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{"show-header":t.groundTransportation.length>0&&0==t.trafficList.length,"cell-style":t.cellStyle,data:t.groundTransportation,"header-cell-style":{textAlign:"center",background:"#fafafa"},border:"","span-method":t.objectSpanMethod_six}},[e("el-table-column",{attrs:{prop:"data_",label:"分类","min-width":"15%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.isType))])]}}],null,!1,1039182948)}),e("el-table-column",{attrs:{label:"日期","min-width":"15%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(t._f("date_day")(i.row.data_)))])]}}],null,!1,1901885735)}),e("el-table-column",{attrs:{prop:"roomcount",label:"需求","min-width":"20%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[e("p",[e("span",[t._v(t._s(i.row.purposename)+" ")]),t._v(" "+t._s(i.row.vehicletypename)+" "+t._s(i.row.carcount)+"辆 "+t._s(i.row.vehiclecount)+"人 ")]),i.row.city?e("p",[e("span",[t._v("用车城市")]),t._v(" "+t._s(i.row.city)+" ")]):t._e()])]}}],null,!1,939402494)}),e("el-table-column",{attrs:{label:"报价",align:"right","min-width":"20%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[t._v(" ￥"+t._s(i.row.price.toFixed(2))+"*"+t._s(i.row.carcount)+"辆 ￥"+t._s((i.row.price*i.row.carcount).toFixed(2))+" ")])]}}],null,!1,1746181822)}),e("el-table-column",{attrs:{prop:"offer_remarks",label:"报价备注","min-width":"30%"}})],1):t._e(),t.groundTransportation.length>0?e("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[e("div",{staticStyle:{"background-color":"#fafafa","border-bottom":"1px solid #ebeef5",width:"15.1%",height:"49px","margin-top":"-1px","z-index":"999999"}}),e("div",{staticStyle:{height:"48px",width:"84.8%","line-height":"48px","z-index":"999999","border-left":"1px solid #ebeef5","border-right":"1px solid #ebeef5","border-bottom":"1px solid #ebeef5",background:"#fafafa"}},[e("span",{staticStyle:{"margin-left":"10px",color:"#606266"}},[t._v("地面交通报价总备注：")]),e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"600",color:"#666666"}},[t._v(t._s(t.info.car_remarks)+" ")])])]):t._e()],1)],1):t._e(),t.info.quoted_price_other.length>0?e("div",{staticClass:"tableStyle"},[e("div",{staticStyle:{"margin-left":"10px","font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[t._v(" 其他服务 ")]),e("div",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[t._v(" 其他需求报价小计： "),e("span",[t._v("￥"+t._s(this.otherAllMoney.toFixed(2)))])])]):t._e(),t.info.quoted_price_other.length>0?e("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.info.quoted_price_other,"cell-style":t.cellStyle,"header-cell-style":{textAlign:"center",background:"#fafafa"},border:""}},[e("el-table-column",{attrs:{label:"项目","min-width":"15%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.servicetypename))])]}}],null,!1,3044759076)}),e("el-table-column",{attrs:{prop:"demandparticipatecount",label:"数量",align:"right","min-width":"15%"}}),e("el-table-column",{attrs:{prop:"roomcount",label:"报价",align:"right","min-width":"20%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[t._v(" ￥"+t._s(i.row.price.toFixed(2))+" * "+t._s(i.row.offerparticipatecount)+" ￥"+t._s((i.row.price*i.row.offerparticipatecount*i.row.offerservicedaycount).toFixed(2))+" ")])]}}],null,!1,4032886440)}),e("el-table-column",{attrs:{prop:"describe",label:"需求备注","min-width":"20%"}}),e("el-table-column",{attrs:{prop:"offer_remarks",label:"报价备注","min-width":"30%"}})],1):t._e(),t.info.quoted_price_other.length>0?e("div",{staticClass:"foodStyle",staticStyle:{"margin-bottom":"30px"}},[e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#666666","margin-left":"10px"}},[t._v("其他需求报价总备注：")]),e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#333","margin-left":"10px"}},[t._v(t._s(t.info.other_remarks))])]):t._e(),t.expensesOfTaxation.length>0?e("div",{staticClass:"tableStyle"},[e("div",{staticStyle:{"margin-left":"10px","font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[t._v(" 服务费和增值税 ")])]):t._e(),t.expensesOfTaxation.length>0?e("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.expensesOfTaxation,"header-cell-style":{textAlign:"center",background:"#fafafa"},"span-method":t.objectSpanMethod_,border:""}},[e("el-table-column",{attrs:{align:"right",label:"服务费","min-width":"40%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.isType)+" ")]),e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[t._v(" ￥"+t._s(i.row.numericalValue_one?t.positiveFloat(i.row.numericalValue_one).toFixed(2):"0.00")+" ")])]}}],null,!1,1424588214)}),e("el-table-column",{attrs:{label:"税费",align:"right","min-width":"50%"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[t._v("￥"+t._s(i.row.numericalValue_three.toFixed(2)))])]}}],null,!1,66614363)})],1):t._e(),e("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t._v(" "+t._s(this.serveAllMoney.toFixed(2))+" "+t._s(this.AdvancesMoney.toFixed(2))+" "+t._s(this.Taxes.toFixed(2))+" ")]),e("div",{staticStyle:{float:"right","margin-top":"20px","margin-bottom":"40px"}},[e("span",{staticStyle:{"font-size":"18px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"500",color:"#333333"}},[t._v("总报价：")]),e("span",{staticStyle:{"font-size":"22px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"600",color:"#fa5151"}},[t._v("￥"+t._s(t.totalPrices.toFixed(2)))])])],1),e("el-dialog",{attrs:{title:"添加项目",visible:t.addProjectStatus,"before-close":t=>{this.itemData=null,t()},width:"700px"},on:{"update:visible":function(e){t.addProjectStatus=e}}},[t.addProjectStatus?e("projectAdded",{attrs:{"item-data":t.itemData},on:{onColse:t.projectSave}}):t._e()],1),e("el-dialog",{attrs:{title:"编辑 Cevent 上传完成日期",visible:t.CeventDateDialog,width:"700px"},on:{"update:visible":function(e){t.CeventDateDialog=e}}},[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期时间"},model:{value:t.fileList.cventDate,callback:function(e){t.$set(t.fileList,"cventDate",e)},expression:"fileList.cventDate"}}),e("div",{staticStyle:{"margin-top":"50px","text-align":"center"}},[e("el-button",{on:{click:function(e){t.CeventDateDialog=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveCeventDate}},[t._v("保存")])],1)],1),e("el-dialog",{attrs:{title:"审批意见",visible:t.objectionVisible,"close-on-click-modal":!1,width:"70%",center:""},on:{"update:visible":function(e){t.objectionVisible=e},open:t.GetSettlementObjection}},[e("div",[e("p",[t._v(t._s(t.objectionDetail.date))]),e("p",[t._v(" "+t._s(t.objectionDetail.username)+" （"+t._s(t.objectionDetail.company_name)+"） ")]),e("p",{style:"color:"+("审核不通过"==t.objectionDetail.state?"red":"")},[t._v(" "+t._s(t.objectionDetail.state)+" ")]),e("p",{staticStyle:{"margin-top":"20px"}},[t._v("其他异议：")]),e("div",{staticClass:"objectionDetailStyle",domProps:{innerHTML:t._s(this.info.orderform_settlement_customer_objection)},on:{click:function(e){return t.getImg(e)}}})]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.objectionVisible=!1}}},[t._v("关 闭")])],1)])],1):t._e()])},n=[function(){var t=this,e=t._self._c;return e("div",[e("span",{staticStyle:{"font-size":"16px","font-weight":"600"}},[t._v("客户需求")])])}],a=i("97aa"),s=i("cf45"),l=(i("df68"),i("f121")),r=i("acd6"),c={name:"OrderInfo",components:{projectAdded:a["a"]},data(){return{roomList:[],conferenceList:[],theHotel:[],theHotel_two:[],trafficList:[],groundTransportation:[],expensesOfTaxation:[{numericalValue_one:"",numericalValue_three:"",isType:"非直采服务费"},{numericalValue_one:"",numericalValue_three:"",isType:"直采服务费"}],downloadUrl:"",fileList:{kpFile:[],fpFile:[],cventDate:""},objectionDetail:{username:"",company_name:"",date:"",message:"",state:""},objectionVisible:!1,select:[],UploadFilesUrl:l["b"]+"/MeetingMa/UploadFiles",uploadList:{},whetherShow:{cvent_date:0,invoice_file:0,kp_notice_file:0},info:null,addProjectStatus:!1,CeventDateDialog:!1,itemData:null,settlement_sheet_status_draft:"0029-1",excelAddress:"",totalPrices:""}},computed:{dayMoney:()=>function(t){let e=0;return t.forEach(t=>{e+=Number(t.provide_count)*this.positiveFloatSix(t.unitprice)}),this.positiveFloatSix(e)},allMoney:function(){let t=0;return this.info.quoted_price_room&&this.info.quoted_price_room.length>0&&this.info.quoted_price_room.forEach(e=>{t+=this.positiveFloatSix(this.dayMoney(e.room_list))}),this.positiveFloatSix(t)},meetingDayMoney:()=>function(t,e){let i=0;return t.forEach(t=>{i+=this.positiveFloatSix(t.price)}),this.positiveFloatSix(i)},meetingMoney:function(){let t=0;return this.info.quoted_price_conference&&this.info.quoted_price_conference.length>0&&this.info.quoted_price_conference.forEach(e=>{let i=e.conference_list.filter(t=>3!=t.type);t+=this.meetingDayMoney(i)}),this.positiveFloatSix(t)},EquipmentMoney:function(){let t=0;return this.info.quoted_price_conference&&this.info.quoted_price_conference.length>0&&this.info.quoted_price_conference.forEach(e=>{let i=e.conference_list.filter(t=>3==t.type);t+=this.meetingDayMoney(i)}),this.positiveFloatSix(t)},meetingAllMoney:function(){let t=0;return this.info.quoted_price_conference&&this.info.quoted_price_conference.length>0&&this.info.quoted_price_conference.forEach(e=>{t+=this.meetingDayMoney(e.conference_list)}),this.positiveFloatSix(t)},repastDayMoney:()=>function(t){let e=0;return t.forEach(t=>{e+=this.positiveInteger(t.personcount)*this.positiveFloatSix(t.price)}),this.positiveFloatSix(e)},repastAllMoney:function(){let t=0;return this.info.quoted_price_food&&this.info.quoted_price_food.length>0&&this.info.quoted_price_food.forEach(e=>{t+=this.repastDayMoney(e.food_list)}),this.positiveFloatSix(t)},otherFoodDayMoney:()=>function(t){let e=0;return t.forEach(t=>{e+=this.positiveInteger(t.personcount)*this.positiveFloatSix(t.price)}),this.positiveFloatSix(e)},otherFoodAllMoney:function(){let t=0;return this.info.quoted_price_outside_food&&this.info.quoted_price_outside_food.length>0&&this.info.quoted_price_outside_food.forEach(e=>{t+=this.otherFoodDayMoney(e.food_list)}),this.positiveFloatSix(t)},IntercityTransportationDayMoney:()=>function(t){let e=0;return t.forEach(t=>{e+=this.positiveInteger(t.passengercount)*this.positiveFloatSix(t.unitprice)}),this.positiveFloatSix(e)},IntercityTransportationAllMoney:function(){let t=0;return this.info.quoted_price_transportation&&this.info.quoted_price_transportation.length>0&&this.info.quoted_price_transportation.forEach(e=>{t+=this.IntercityTransportationDayMoney(e.transportation_list)}),this.positiveFloatSix(t)},CityDayMoney:()=>function(t){let e=0;return t.forEach(t=>{e+=this.positiveInteger(t.carcount)*this.positiveFloatSix(t.price)}),this.positiveFloatSix(e)},CityAllMoney:function(){let t=0;return this.info.quoted_price_car&&this.info.quoted_price_car.length>0&&this.info.quoted_price_car.forEach(e=>{t+=this.CityDayMoney(e.car_list)}),this.positiveFloatSix(t)},otherAllMoney:function(){let t=0;return this.info.quoted_price_other&&this.info.quoted_price_other.length>0&&this.info.quoted_price_other.forEach(e=>{t+=this.positiveInteger(e.offerparticipatecount)*this.positiveInteger(e.offerservicedaycount)*this.positiveFloatSix(e.price)}),this.positiveFloatSix(t)},money:function(){return this.info.total_price=Object(s["o"])(this.allMoney)+Object(s["o"])(this.meetingAllMoney)+Object(s["o"])(this.repastAllMoney)+Object(s["o"])(this.otherFoodAllMoney)+Object(s["o"])(this.IntercityTransportationAllMoney)+Object(s["o"])(this.CityAllMoney)+Object(s["o"])(this.otherAllMoney),Object(s["o"])(this.info.total_price)},TravelAgencyMoney:function(){return this.positiveFloatSix(this.info.travelagency_payment_money*this.info.travelagency_payment_proportion/100)},AdvancesMoney:function(){return this.expensesOfTaxation[1].numericalValue_one=Object(s["o"])(this.positiveFloatSix(this.info.advance_amount)*(this.positiveFloatSix(this.info.advance_proportion)/100)),Object(s["o"])(this.positiveFloatSix(this.info.advance_amount)*(this.positiveFloatSix(this.info.advance_proportion)/100))},OutsideHotelMoney:function(){return this.positiveFloatSix(this.info.off_hotel_expenses*this.info.off_hotel_proportion/100)},serviceAllMoney:function(){return Object(s["o"])(this.TravelAgencyMoney+this.AdvancesMoney+this.OutsideHotelMoney)},serveAllMoney:function(){let t=0;if(0==this.info.event_info_configure.service_fee_calculation_method)t=this.allMoney.toFixed(2)*(this.info.event_info_configure.room_inquiry_service_taxrate/100)+this.meetingAllMoney.toFixed(2)*(this.info.event_info_configure.conference_inquiry_service_taxrate/100)+this.repastAllMoney.toFixed(2)*(this.info.event_info_configure.hotel_food_inquiry_service_taxrate/100)+this.otherFoodAllMoney.toFixed(2)*(this.info.event_info_configure.others_food_inquiry_service_taxrate/100)+this.IntercityTransportationAllMoney.toFixed(2)*(this.info.event_info_configure.transportation_inquiry_service_taxrate/100)+this.CityAllMoney.toFixed(2)*(this.info.event_info_configure.car_inquiry_service_taxrate/100),this.offline_quoted_price_others.forEach(e=>{t+=e.offerparticipatecount*e.price*e.service_taxrate/100});else if(1==this.info.event_info_configure.service_fee_calculation_method){let e=0;e+=this.info.event_info_configure.room_inquiry_isnotservice?this.allMoney:0,e+=this.info.event_info_configure.conference_inquiry_isnotservice?this.meetingAllMoney:0,e+=this.info.event_info_configure.hotel_food_inquiry_isnotservice?this.repastAllMoney:0,e+=this.info.event_info_configure.others_food_inquiry_isnotservice?this.otherFoodAllMoney:0,e+=this.info.event_info_configure.transportation_inquiry_isnotservice?this.IntercityTransportationAllMoney:0,e+=this.info.event_info_configure.car_inquiry_isnotservice?this.CityAllMoney:0,this.info.quoted_price_other.forEach(t=>{e+=t.isnotservice?t.offerparticipatecount*t.price:0}),this.severEveryMoneyList=[],this.info.event_info_ladder_taxrates.forEach((i,o)=>{e<=i.ladder_min||(e>=i.ladder_min&&e<=i.ladder_max?(t+=(e-i.ladder_min+(0==o?0:1))*i.ladder_taxrate/100,this.severEveryMoneyList.push(Object(s["o"])((e-i.ladder_min+(0==o?0:1))*i.ladder_taxrate/100*this.info.fzc_service/100))):e>i.ladder_max&&this.info.event_info_ladder_taxrates[o+1]?(this.severEveryMoneyList.push(Object(s["o"])((i.ladder_max-i.ladder_min+(0==o?0:1))*i.ladder_taxrate/100*this.info.fzc_service/100)),t+=(i.ladder_max-i.ladder_min+(0==o?0:1))*i.ladder_taxrate/100):e>=i.ladder_max&&!this.info.event_info_ladder_taxrates[o+1]&&(this.severEveryMoneyList.push(Object(s["o"])((e-i.ladder_min+(0==o?0:1))*i.ladder_taxrate/100*this.info.fzc_service/100)),t+=(e-i.ladder_min+(0==o?0:1))*i.ladder_taxrate/100))})}else if(2==this.info.event_info_configure.service_fee_calculation_method){let i=0;i+=this.info.event_info_configure.room_inquiry_isnotservice?this.allMoney:0,i+=this.info.event_info_configure.conference_inquiry_isnotservice?this.meetingAllMoney:0,i+=this.info.event_info_configure.hotel_food_inquiry_isnotservice?this.repastAllMoney:0,i+=this.info.event_info_configure.others_food_inquiry_isnotservice?this.otherFoodAllMoney:0,i+=this.info.event_info_configure.transportation_inquiry_isnotservice?this.IntercityTransportationAllMoney:0,i+=this.info.event_info_configure.car_inquiry_isnotservice?this.CityAllMoney:0,this.info.quoted_price_other.forEach(t=>{i+=t.isnotservice?t.offerparticipatecount*t.price:0}),this.serviceTotalMoney=i;for(var e=0;e<this.info.event_info_grade_taxrates.length;e++)if(e==this.info.event_info_grade_taxrates.length-1||i>=this.info.event_info_grade_taxrates[e].grade_money&&i<this.info.event_info_grade_taxrates[e+1].grade_money){t=i*this.info.event_info_grade_taxrates[e].grade_taxrate/100,this.grade_taxrate=this.info.event_info_grade_taxrates[e].grade_taxrate;break}}return t*=this.info.fzc_service/100,1==this.info.event_info_configure.minimum_service_fee&&t<this.info.event_info_configure.minimum_service_fee_money&&(t=this.info.event_info_configure.minimum_service_fee_money),this.info.feizhicai_service=t,this.expensesOfTaxation[0].numericalValue_one=t,t},Taxes:function(){let t=0;return"VAT"==this.info.taxtype?(t=this.info.event_info_configure.fzc_service_fee_money?(this.money+this.serveAllMoney)*this.positiveFloatSix(this.info.taxrate)/100:(this.money+this.serveAllMoney-this.info.feizhicai_service)*this.positiveFloatSix(this.info.taxrate)/100,this.expensesOfTaxation[0].numericalValue_three=t,this.expensesOfTaxation[1].numericalValue_three=t,t):(this.expensesOfTaxation[0].numericalValue_three=0*(this.money+this.serveAllMoney),this.expensesOfTaxation[1].numericalValue_three=0*(this.money+this.serveAllMoney),0*(this.money+this.serveAllMoney))},OrderPrice:function(){return this.money+this.serveAllMoney+this.AdvancesMoney+this.Taxes}},methods:{positiveInteger:s["q"],positiveFloat:s["m"],positiveFloatSix:s["o"],excelExport:r["a"],formatDate:s["d"],WhetherShow(){this.$api.WhetherShow({OrderID:this.$route.params.id},"post").then(t=>{this.whetherShow=t})},GetSettlementObjection(){this.$api.GetSettlementObjection({OrderFromID:this.$route.params.id},"POST").then(t=>{this.objectionDetail=t})},getImg(t){console.log(t),console.log(t.target.currentSrc);let e=t.target.currentSrc;e&&this.$hevueImgPreview(e)},handlePreview(t){if(!t.value)return;let e=t.value.substring(t.value.lastIndexOf(".")+1),i=["pdf","jpeg","jpg","png","txt"],o=["docx","doc","xls","xlsx","xlsm","ppt","pptx"];t.value=t.value.replace(/http:/,"https:"),this.downloadUrl=t.value,o.includes(e)?this.downloadUrl="https://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(t.value):i.includes(e)?this.downloadUrl=t.value:this.$message.info("文件格式不支持预览，下载后查看"),setTimeout(()=>{this.$refs.d_click.click()},100)},ApproveRecordDownloadFile(t){let e=document.createElement("a");e.href=t.value,e.download=t.name,e.target="_blank",document.body.appendChild(e),e.click()},getSelect(){this.$api.getrecord({OrderID:this.$route.params.id},"POST").then(t=>{this.select=t,this.select.forEach(t=>{this.$set(t,"showDetail",!1)})})},GetFile(){this.$api.GetFile({OrderID:this.$route.params.id,SheetID:""},"POST").then(t=>{this.fileList=t})},saveCeventDate(){this.$api.CventDateAdd({OrderID:this.$route.params.id,Datetime:this.fileList.cventDate},"POST").then(t=>{t&&(this.CeventDateDialog=!1)})},excelexport(){var t="DMC报价单"+this.info.event_info_id;this.excelExport("/Template/GetTemplate",{eventid:this.info.event_info_id,type:3,param:this.info.quoted_price_id},t)},uploadFile(t){this.uploadList=t;let e={orderid:this.$route.params.id,sheet_id:"",type:1,file_name:t.title,file_path:t.weburl};this.$api.FileAdd(e,"post").then(t=>{t&&(this.$message.success("上传成功"),this.GetFile())})},downloadFile(t){var e,i;let o=null!==(e=t.file_path)&&void 0!==e?e:t.filepath;null!==(i=t.file_name)&&void 0!==i||t.filename;if(!o)return;let n=o.substring(o.lastIndexOf(".")+1),a=["pdf","jpeg","jpg","png","txt"],s=["docx","doc","xls","xlsx","xlsm","ppt","pptx"];o=o.replace(/http:/,"https:"),this.downloadUrl=o,s.includes(n)?this.downloadUrl="https://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(o):a.includes(n)?this.downloadUrl=o:this.$message.info("文件格式不支持预览，下载后查看"),setTimeout(()=>{this.$refs.d_click.click()},100)},project(){this.info.project_id?this.$router.push({name:"ItineraryManagement",params:{id:this.info.project_id}}):this.addProjectStatus=!0},projectSave(t){this.$api.projectsave(t,"POST").then(e=>{this.$message({message:t.id?"修改成功！":"添加成功！",type:"success"}),this.$router.push({name:"ItineraryManagement",params:{id:this.info.project_id}})})},quotedprice(){let t=this.$router.resolve({name:"DMCquotedprice",params:{id:this.info.quoted_price_id,isSubmit:0}});window.open(t.href,"_blank")},settlement(){let t=this.$route.params.id,e=1;this.info.settlement_sheet_status,this.settlement_sheet_status_draft,"0020-5"!==this.info.status&&"0020-6"!==this.info.status&&"0020-8"!==this.info.status||(e=0),0==this.info.serviceprovider_or_hotel?this.$router.push({name:"settleAccounts_Hotel",params:{id:t,issubmit:e}}):this.$router.push({name:"settleAccounts",params:{id:t,issubmit:e}})},cancelorderform(){this.$prompt("请简要说明取消订单的原因","拒绝接单",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"textarea"}).then(({value:t})=>{this.$api.cancelorderform({id:this.info.orderform_id,object_id:this.info.object_id,reason:t},"POST").then(t=>{t?(this.$message({message:"订单已取消",type:"success"}),this.$router.go(0)):this.$message({message:"订单取消失败",type:"fail"})})}).catch(()=>{})},againform(){this.$api.againform({id:this.info.orderform_id,object_id:this.info.object_id},"POST").then(t=>{t?this.$message({message:"提醒成功",type:"success"}):this.$message({message:"提醒失败",type:"fail"})})},handleChange(t){console.log(t)},objectSpanMethod({row:t,column:e,rowIndex:i,columnIndex:o}){if(0===o){const t=this.flitterData(this.roomList).two[i],e=t>0?1:0;return{rowspan:t,colspan:e}}},objectSpanMethod_two({row:t,column:e,rowIndex:i,columnIndex:o}){if(0===o){const t=this.flitterData(this.conferenceList).two[i],e=t>0?1:0;return{rowspan:t,colspan:e}}},objectSpanMethod_three({row:t,column:e,rowIndex:i,columnIndex:o}){if(0===o){const t=this.flitterData(this.theHotel).two[i],e=t>0?1:0;return{rowspan:t,colspan:e}}},objectSpanMethod_four({row:t,column:e,rowIndex:i,columnIndex:o}){if(0===o){const t=this.flitterData(this.theHotel_two).two[i],e=t>0?1:0;return{rowspan:t,colspan:e}}},objectSpanMethod_five({row:t,column:e,rowIndex:i,columnIndex:o}){if(0===o){const t=this.flitterData_(this.trafficList).two[i],e=t>0?1:0;return{rowspan:t,colspan:e}}if(1===o){const t=this.flitterData(this.trafficList).two[i],e=t>0?1:0;return{rowspan:t,colspan:e}}},objectSpanMethod_six({row:t,column:e,rowIndex:i,columnIndex:o}){if(0===o){const t=this.flitterData_(this.groundTransportation).two[i],e=t>0?1:0;return{rowspan:t,colspan:e}}if(1===o){const t=this.flitterData(this.groundTransportation).two[i],e=t>0?1:0;return{rowspan:t,colspan:e}}},flitterData(t){let e=[],i=[],o=0,n=0;return t.forEach((a,s)=>{console.log(a,s),0===s?(e.push(1),i.push(1)):(a.data_===t[s-1].data_?(e[o]+=1,e.push(0)):(e.push(1),o=s),a.data_===t[s-1].data_?(i[n]+=1,i.push(0)):(i.push(1),n=s))}),{one:e,two:i}},flitterData_(t){let e=[],i=[],o=0,n=0;return t.forEach((a,s)=>{console.log(a,s),0===s?(e.push(1),i.push(1)):(a.isType===t[s-1].isType?(e[o]+=1,e.push(0)):(e.push(1),o=s),a.isType===t[s-1].isType?(i[n]+=1,i.push(0)):(i.push(1),n=s))}),{one:e,two:i}},objectSpanMethod_({row:t,column:e,rowIndex:i,columnIndex:o}){if(1===o)return i%2===0?{rowspan:2,colspan:1}:{rowspan:0,colspan:0}},cellStyle({row:t,column:e,rowIndex:i,columnIndex:o}){let n;return 0==o&&(n="background: #FAFAFA; font-size: 14px;font-family: PingFang SC-粗体, PingFang SC; font-weight: 600; color: #333333;"),1!=o||"大交通"!=t.isType&&"地面交通"!=t.isType||(n="background: #FAFAFA; font-size: 14px;font-family: PingFang SC-粗体, PingFang SC; font-weight: 600; color: #333333;"),n}},mounted(){this.WhetherShow(),this.getSelect(),this.$api.orderInfo({id:this.$route.params.id},"POST").then(t=>{this.info=t,this.roomList=[];for(let e=0;e<this.info.quoted_price_room.length;e++)for(let t=0;t<this.info.quoted_price_room[e].room_list.length;t++)this.info.quoted_price_room[e].room_list[t].data_=this.info.quoted_price_room[e].date,this.info.quoted_price_room[e].room_list[t].totalprice_=this.info.quoted_price_room[e].totalprice,this.roomList.push(this.info.quoted_price_room[e].room_list[t]);this.conferenceList=[];for(let e=0;e<this.info.quoted_price_conference.length;e++)for(let t=0;t<this.info.quoted_price_conference[e].conference_list.length;t++)this.info.quoted_price_conference[e].conference_list[t].data_=this.info.quoted_price_conference[e].date,this.info.quoted_price_conference[e].conference_list[t].totalprice_=this.info.quoted_price_conference[e].totalprice,4!=this.info.quoted_price_conference[e].conference_list[t].type&&this.conferenceList.push(this.info.quoted_price_conference[e].conference_list[t]);this.theHotel=[];for(let e=0;e<this.info.quoted_price_food.length;e++)for(let t=0;t<this.info.quoted_price_food[e].food_list.length;t++)this.info.quoted_price_food[e].food_list[t].data_=this.info.quoted_price_food[e].date,this.info.quoted_price_food[e].food_list[t].totalprice_=this.info.quoted_price_food[e].totalprice,this.theHotel.push(this.info.quoted_price_food[e].food_list[t]);this.theHotel_two=[];for(let e=0;e<this.info.quoted_price_outside_food.length;e++)for(let t=0;t<this.info.quoted_price_outside_food[e].food_list.length;t++)this.info.quoted_price_outside_food[e].food_list[t].data_=this.info.quoted_price_outside_food[e].date,this.info.quoted_price_outside_food[e].food_list[t].totalprice_=this.info.quoted_price_outside_food[e].totalprice,this.theHotel_two.push(this.info.quoted_price_outside_food[e].food_list[t]);this.trafficList=[];for(let e=0;e<this.info.quoted_price_transportation.length;e++)for(let t=0;t<this.info.quoted_price_transportation[e].transportation_list.length;t++)this.info.quoted_price_transportation[e].transportation_list[t].data_=this.info.quoted_price_transportation[e].date,this.info.quoted_price_transportation[e].transportation_list[t].totalprice_=this.info.quoted_price_transportation[e].totalprice,this.info.quoted_price_transportation[e].transportation_list[t].isType="大交通",this.info.quoted_price_transportation[e].transportation_list[t].remarks_=this.info.transportation_remarks,this.trafficList.push(this.info.quoted_price_transportation[e].transportation_list[t]);console.log(this.trafficList,"大交通"),this.groundTransportation=[];for(let e=0;e<this.info.quoted_price_car.length;e++)for(let t=0;t<this.info.quoted_price_car[e].car_list.length;t++)this.info.quoted_price_car[e].car_list[t].data_=this.info.quoted_price_car[e].date,this.info.quoted_price_car[e].car_list[t].totalprice_=this.info.quoted_price_car[e].totalprice,this.info.quoted_price_car[e].car_list[t].isType="地面交通",this.info.quoted_price_car[e].car_list[t].remarks_=this.info.car_remarks,this.groundTransportation.push(this.info.quoted_price_car[e].car_list[t]);console.log("地面交通",this.groundTransportation),this.totalPrices=t.total_price,0!=this.info.event_info_configure.service_fee_ratio&&null!=this.info.fzc_service||(this.info.fzc_service=100),"0020-6"===this.info.status&&this.GetFile()}),console.log("测试测得")}},f=c,p=(i("3629"),i("0b56")),_=Object(p["a"])(f,o,n,!1,null,"28afbc10",null);e["default"]=_.exports},ecaa:function(t,e,i){}}]);