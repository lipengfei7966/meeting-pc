(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b42fd52c"],{"16b8":function(t,e,i){"use strict";i("236c")},"236c":function(t,e,i){},acd6:function(t,e,i){"use strict";i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861");var o=i("bc3a"),n=i.n(o),a=i("f121"),s=a["b"];e["a"]=function(t,e,i){return new Promise((function(o,a){var r=function(){"/Template/GetTemplate"==t?n()({method:"post",url:s+t,data:e,headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(t){var o=document.createElement("a"),n=t.data.path.substring(t.data.path.lastIndexOf("."));fetch(t.data.path).then((function(t){return t.blob()})).then((function(t){o.href=URL.createObjectURL(t),console.log(o.href),5==e.type||e.type,o.download=i+n,document.body.appendChild(o),o.click()}))})):n()({method:"post",url:s+t,data:e,responseType:"blob",headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(o){console.log(o);var n=o.data,a=new FileReader;a.readAsDataURL(n),a.onload=function(o){var n=document.createElement("a");n.style.display="none","/quotation/exportexcel"==t||"/SettlementSheet/ExportExcel1"==t||"/orderform/exportexcel"==t||"/Quotation/ExportExcel"==t?n.download=i+".xls":"/Template/GetTemplate"==t?5==e.type||6==e.type?n.download=i+".docx":n.download=i+".xls":"/Reporting/GetExcel"==t&&(n.download=i+".xls"),n.href=o.target.result;document.body;document.body.appendChild(n),n.click(),document.body.removeChild(n)}}))};r()}))}},ada3:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=this,i=e.$createElement,o=e._self._c||i;return o("div",{staticClass:"orderInfo"},[o("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"d_click",attrs:{href:e.downloadUrl,target:"_blank",download:""}}),o("div",{staticClass:"title"},[e._v(" 我的订单 - "),e.info?[e._v(" "+e._s(e.info.num)+" ")]:e._e()],2),e.info?o("div",{staticClass:"content"},["0020-1"===this.info.status?o("div",{staticClass:"tips"},[o("p",{staticClass:"dataState-one"},[e._v("订单状态：订单执行中")]),o("p",{staticClass:"dataState-two"},[e._v("会议进行中，请实时上传结算凭证文件！")]),o("p",[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.settlement}},[e._v(" "+e._s(e.info.settlement_sheet_status===e.settlement_sheet_status_draft?"提交结算单(草稿)":"提交结算单")+" ")])],1)]):e._e(),"0020-3"===this.info.status?o("div",{staticClass:"tips"},[o("p",{staticClass:"dataState-one"},[e._v("订单状态：已创建待执行")]),o("p",{staticClass:"dataState-two"},[e._v(" 请查看以下订单详情，如果客户需要使用会议室等场地，请为客户预留档期。 ")]),o("p",{staticClass:"special"},[o("span",[e._v("如果您遇到特殊情况需要取消订单，可以点击")]),o("el-link",{staticClass:"special_link",attrs:{name:"cancel",type:"primary"},on:{click:e.cancelorderform}},[e._v("取消订单")]),o("span",[e._v("并说明原委，我们将同时为您发送短信和邮件向客户致歉。")])],1)]):"0020-2"===this.info.status?o("div",{staticClass:"tips"},[o("p",{staticClass:"dataState-one"},[e._v("订单状态：已取消")]),o("p",{staticClass:"dataState-two"},[e._v(" "+e._s(e.info.contacts)+" - "+e._s(e.info.company_name)+" - 取消了订单 ("+e._s(e.info.activity_name)+") ")])]):e._e(),"0020-4"===this.info.status?o("div",{staticClass:"tips"},[o("p",{staticClass:"dataState-one"},[e._v("订单状态：已执行待结算")]),o("p",{staticClass:"dataState-two"},[e._v(" 会议服务商服务已经结束，请向客户提交结算单。结算单被确认后，您可以快递发票和结算单，以便客户付款。 ")]),o("p",[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.settlement}},[e._v(" "+e._s(e.info.settlement_sheet_status===e.settlement_sheet_status_draft?"提交结算单(草稿)":"提交结算单")+" ")])],1)]):"0020-5"===this.info.status?o("div",{staticClass:"tips"},[o("p",{staticClass:"dataState-one"},[e._v("订单状态：待确认结算单")]),o("p",{staticClass:"special dataState-two"},[o("span",[e._v("已提交结算单，正在等待客户确认。 ")]),o("span",[e._v("审批环节："+e._s(e.info.approval_phase)+"， ")]),o("span",[e._v("审批人："+e._s(e.info.approval_people)+" ")])]),o("p",[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.settlement}},[e._v("查看结算单")])],1)]):"0020-6"===this.info.status?o("div",{staticClass:"tips"},[o("p",{staticClass:"dataState-one"},[e._v("订单状态：已确认结算单")]),o("p",{staticClass:"dataState-two"},[e._v(" 客户确认了您的结算单，您可以与客户沟通发票、付款的事宜。 ")])]):"0020-7"===this.info.status?o("div",{staticClass:"tips"},[o("p",{staticClass:"dataState-one"},[e._v("订单状态：客户驳回结算单")]),o("p",{staticClass:"dataState-three"},[e._v(" 客户对结算单有异议，请查看、修改后重新移交结算单。 ")]),this.info.orderform_settlement_customer_objection?o("p",[e._v(" 客户异议： "),o("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"text"},on:{click:function(t){e.objectionVisible=!0}}},[e._v(" 查看异议 ")])],1):e._e(),o("p",[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.settlement}},[e._v("提交结算单")])],1)]):"0020-8"===this.info.status?o("div",{staticClass:"tips"},[o("p",{staticClass:"dataState-one"},[e._v("订单状态：要求补充结算单材料")]),o("p",{staticClass:"dataState-three"},[e._v(" 客户对结算单有异议，请查看、修改后重新移交结算单。 ")]),this.info.orderform_settlement_customer_objection?o("div",[e._v(" 客户异议： "),o("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"text"},on:{click:function(t){e.objectionVisible=!0}}},[e._v(" 查看异议 ")])],1):e._e(),o("p",[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.settlement}},[e._v("提交结算单")])],1)]):e._e(),o("div",{staticClass:"diameter"},[o("div",{staticClass:"title_record"},[e._v("结算记录")]),e.select.length>0?o("el-collapse",{attrs:{accordion:""},on:{change:e.handleChange}},e._l(e.select,(function(t,i){return o("el-collapse-item",{key:i},[o("template",{slot:"title"},[o("span",{staticClass:"sp_one"},[e._v("第"+e._s(i+1)+"次结算记录：")]),t.showDetail?e._e():o("span",{on:{click:function(e){t.showDetail=!t.showDetail}}},[o("span",{staticClass:"sp_two"},[e._v("展开")]),o("i",{staticClass:"el-icon-arrow-up icon_"})]),t.showDetail?o("span",{on:{click:function(e){t.showDetail=!t.showDetail}}},[o("span",{staticClass:"sp_two"},[e._v("收起")]),o("i",{staticClass:"el-icon-arrow-down icon_"})]):e._e()]),e._l(t.data,(function(t,i){return o("div",{key:i,staticClass:"txtCon",staticStyle:{margin:"10px 0","padding-bottom":"5px"}},[o("p",{staticStyle:{"font-size":"12px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#333333","margin-bottom":"5px"}},[e._v(" "+e._s(t.date)+" ")]),o("p",{staticStyle:{"font-size":"12px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#666666"}},[e._v(" "+e._s(t.username)+" ( "+e._s(t.company_name)+" ) ")]),o("p",{staticStyle:{"font-size":"12px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#666666"}},[e._v(" "+e._s(t.state)+" ")]),o("div",{staticClass:"objectionDetailStyle",staticStyle:{"font-size":"12px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#666666"},domProps:{innerHTML:e._s(t.message)},on:{click:function(t){return e.getImg(t)}}}),e._l(t.array,(function(t,i){return o("div",{key:i,staticClass:"flex_row"},[o("p",[e._v(e._s(t.name)+":")]),o("p",e._l(t.value,(function(t,i){return o("span",{key:i,staticClass:"filename",on:{click:function(i){return e.handlePreview(t)}}},[e._v(" "+e._s(t.name)+" ")])})),0)])})),e._l(t.dissent,(function(t,i){return o("div",{key:i,staticClass:"flex_row"},[o("p",[e._v(e._s(t.name)+":")]),o("p",[e._v(" "+e._s(t.value)+" ")])])}))],2)}))],2)})),1):o("div",{staticStyle:{"margin-bottom":"5px"}},[o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#666666"}},[e._v("暂无结算记录")])])],1),o("div",{staticStyle:{"font-size":"16px","font-family":"PingFang SC-特粗, PingFang SC","font-weight":"600",color:"#333333","border-left":"4px solid #1887ff","padding-left":"5px"}},[e._v(" 订单信息 ")]),o("div",[o("el-divider")],1),o("div",{staticStyle:{"margin-top":"10px"}},[o("el-descriptions",{attrs:{title:""}},[o("el-descriptions-item",{attrs:{label:"订单号"}},[o("span",{staticClass:"sp_three"},[e._v(e._s(e.info.num))])]),o("el-descriptions-item",{attrs:{label:"下单时间"}},[o("span",{staticClass:"sp_three"},[e._v(e._s(e._f("date_ex")(e.info.submit_time)))])]),o("el-descriptions-item",{attrs:{label:"活动名称"}},[o("span",{staticClass:"sp_three"},[e._v(e._s(e.info.activity_name))])]),o("el-descriptions-item",{attrs:{label:"活动日期"}},[o("span",{staticClass:"sp_three"},[e._v(e._s(e.info.activity_date))])]),o("el-descriptions-item",{attrs:{label:"客户名称"}},[o("span",{staticClass:"sp_three"},[e._v(e._s(e.info.company_name))])]),o("el-descriptions-item",{attrs:{label:"联系人"}},[o("span",{staticClass:"sp_three"},[e._v(e._s(e.info.contacts))])]),o("el-descriptions-item",{attrs:{label:"联系方式"}},[o("span",{staticClass:"sp_three"},[e._v(e._s(e.info.customer_service_telephone_numbers))])]),o("el-descriptions-item",{attrs:{label:"报价人"}},[o("span",{staticClass:"sp_three"},[e._v(e._s(e.info.bidder))])]),o("el-descriptions-item",{attrs:{label:"报价日期"}},[o("span",{staticClass:"sp_three"},[e._v(e._s(e._f("date_ex")(e.info.offer_data)))])]),o("el-descriptions-item",{attrs:{label:"采购酒店"}},[o("span",{staticClass:"sp_three"},[e._v(e._s(e.info.hotel_name))])])],1)],1),1==e.whetherShow.kp_notice_file||1==e.whetherShow.invoice_file||1==e.whetherShow.cvent_date?o("div",{staticClass:"info"},[o("div",{staticClass:"line"},[1==e.whetherShow.kp_notice_file?o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[e._v("开票通知文件")]),o("div",{staticClass:"context",staticStyle:{display:"flex"}},[o("ul",{staticStyle:{"margin-right":"50px"}},e._l(e.fileList.kpFile,(function(t,i){return o("li",{key:i,staticStyle:{margin:"10px 0"}},[o("span",{staticStyle:{color:"#409eff",cursor:"pointer"},on:{click:function(i){return e.downloadFile(t)}}},[e._v(" "+e._s(t.filename)+" ")]),o("span",[e._v(" 上传时间： "+e._s(t.create_time)+" ")])])})),0),o("el-upload",{ref:"upload",attrs:{action:e.UploadFilesUrl,"on-success":e.uploadFile,"on-preview":e.downloadFile,"file-list":e.fileList.kpFile,"show-file-list":!1,multiple:!0}},[o("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选择文件")])],1)],1)]):e._e()]),o("div",{staticClass:"line"},[1==e.whetherShow.invoice_file?o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[e._v("发票附件")]),o("div",{staticClass:"context"},[o("ul",e._l(e.fileList.fpFile,(function(t,i){return o("li",{key:i},[o("span",{staticStyle:{color:"#409eff",cursor:"pointer"},on:{click:function(i){return e.downloadFile(t)}}},[e._v(" "+e._s(t.filename)+" ")]),o("span",[e._v(" 上传时间： "+e._s(t.create_time)+" ")])])})),0)])]):e._e(),1==e.whetherShow.cvent_date?o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[e._v("Cevent 上传完成日期")]),o("div",{staticClass:"context",staticStyle:{display:"flex","justify-content":"space-between"}},[o("span",{staticStyle:{"line-height":"30px"}},[e._v(" "+e._s(e.fileList.cventDate)+" ")]),o("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},on:{click:function(t){e.CeventDateDialog=!0}},slot:"trigger"},[e._v("编辑")])],1)]):e._e()])]):e._e(),o("div",{staticStyle:{"margin-left":"55px"}},[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.quotedprice}},[e._v("最终报价单")]),"0020-6"===this.info.status?o("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.settlement}},[e._v("结算单 ")]):e._e()],1),o("div",{staticStyle:{"margin-top":"25px","font-size":"16px","font-family":"PingFang SC-特粗, PingFang SC","font-weight":"normal",color:"#333333","border-left":"4px solid #1887ff","padding-left":"5px",display:"flex","justify-content":"space-between"}},[e._m(0),o("div",[o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#1890ff","margin-right":"10px",cursor:"pointer"},on:{click:e.excelexport}},[o("i",{staticClass:"el-icon-document"}),e._v(" 下载excel ")]),o("span",{staticStyle:{"font-size":"18px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#333333"}},[e._v("总报价: ")]),o("span",{staticStyle:{"font-size":"18px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#eb5851"}},[e._v(" ￥"+e._s(e.totalPrices.toFixed(2)))])])]),o("div",[e.roomList.length>0?o("div",{staticClass:"tableStyle"},[o("div",{staticStyle:{"margin-left":"10px","font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[e._v(" 客房需求 ")]),o("div",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[e._v(" 客房报价总计： "),o("span",[e._v("￥"+e._s(this.allMoney.toFixed(2)))])])]):e._e(),e.roomList.length>0?o("div",[o("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.roomList,"cell-style":e.cellStyle,"header-cell-style":{textAlign:"center",background:"#fafafa"},"span-method":e.objectSpanMethod,border:""}},[o("el-table-column",{attrs:{prop:"data_",label:"日期","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e._f("date_day")(t.row.data_)))])]}}],null,!1,1901885735)}),o("el-table-column",{attrs:{prop:"roomtypename",label:"房型","min-width":"20%"}}),o("el-table-column",{attrs:{prop:"roomcount",label:"数量",align:"right","min-width":"15%"}}),o("el-table-column",{attrs:{label:"报价",align:"right","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[e._v(" ￥"+e._s(t.row.unitprice.toFixed(2))+"*"+e._s(t.row.provide_count)+"间 ￥"+e._s(t.row.totalprice.toFixed(2))+" ")])]}}],null,!1,1252707532)}),o("el-table-column",{attrs:{prop:"remarks",label:"报价备注","min-width":"30%"}})],1),o("div",{staticClass:"foodStyle",staticStyle:{"margin-bottom":"30px"}},[o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#666666","margin-left":"10px"}},[e._v("客房报价总备注：")]),o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#333","margin-left":"10px"}},[e._v(e._s(e.info.room_remarks))])])],1):e._e(),e.conferenceList.length>0?o("div",{staticClass:"tableStyle"},[o("div",{staticStyle:{"margin-left":"10px","font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[e._v(" 会场需求 ")]),o("div",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[e._v(" 报价： "),o("span",[e._v("￥"+e._s((this.EquipmentMoney+this.meetingMoney).toFixed(2)))])])]):e._e(),e.conferenceList.length>0?o("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.conferenceList,"cell-style":e.cellStyle,"header-cell-style":{textAlign:"center",background:"#fafafa"},border:"","span-method":e.objectSpanMethod_two}},[o("el-table-column",{attrs:{prop:"data_",label:"日期","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e._f("date_day")(t.row.data_)))])]}}],null,!1,1901885735)}),o("el-table-column",{attrs:{label:"项目","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[e._v(" "+e._s((t.row.item?t.row.item:"")+(t.row.order_name?t.row.order_name:"")+(t.row.typename?t.row.typename:""))+" ")])]}}],null,!1,3469534197)}),o("el-table-column",{attrs:{label:"需求","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("div",[e._v(" 会议时间："),o("span",{staticStyle:{color:"black"}},[e._v(e._s(t.row.starttime)+"-"+e._s(t.row.endtime))])]),o("div",[e._v(" 出席人数："),o("span",{staticStyle:{color:"black"}},[e._v(" "+e._s(t.row.attendees))])]),o("div",[e._v(" 会场台型："),o("span",{staticStyle:{color:"black"}},[e._v(e._s(t.row.roomsetuptypename))])]),o("div",[e._v(" 会场面积范围："),o("span",{staticStyle:{color:"black"}},[e._v(e._s(t.row.min_area)+"~"+e._s(t.row.max_area)+" sqm")])])])]}}],null,!1,3427457253)}),o("el-table-column",{attrs:{label:"报价",align:"right","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[e._v("￥"+e._s(t.row.price.toFixed(2))+" ")])]}}],null,!1,2661236129)}),o("el-table-column",{attrs:{label:"报价备注","min-width":"30%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(" "+e._s(t.row.comments))])]}}],null,!1,2961875693)})],1):e._e(),e.conferenceList.length>0?o("div",{staticClass:"foodStyle",staticStyle:{"margin-bottom":"30px"}},[o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#666666","margin-left":"10px"}},[e._v("会议报价总备注：")]),o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#333","margin-left":"10px"}},[e._v(e._s(e.info.conference_remarks))])]):e._e(),e.theHotel.length>0?o("div",{staticClass:"tableStyle"},[o("div",{staticStyle:{"margin-left":"10px","font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[e._v(" 酒店内用餐需求 ")]),o("div",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[e._v(" 餐饮报价总计： "),o("span",[e._v("￥"+e._s(this.repastAllMoney.toFixed(2)))])])]):e._e(),e.theHotel.length>0?o("div",{staticStyle:{"margin-bottom":"30px"}},[o("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.theHotel,"cell-style":e.cellStyle,"header-cell-style":{textAlign:"center",background:"#fafafa"},"span-method":e.objectSpanMethod_three,border:""}},[o("el-table-column",{attrs:{prop:"data_",label:"日期","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e._f("date_day")(t.row.data_)))])]}}],null,!1,1901885735)}),o("el-table-column",{attrs:{label:"项目","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.foodtypename))]),o("span",[e._v(e._s(t.row.usetype?"["+t.row.usetype+"]":""))])]}}],null,!1,3360766568)}),o("el-table-column",{attrs:{prop:"roomcount",label:"人数",align:"right","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.personcount))])]}}],null,!1,3887242544)}),o("el-table-column",{attrs:{label:"报价",align:"right","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[e._v(" ￥"+e._s(t.row.price.toFixed(2))+"*"+e._s(t.row.personcount)+" 人 ￥"+e._s((t.row.price*t.row.personcount).toFixed(2))+" ")])]}}],null,!1,2460103906)}),o("el-table-column",{attrs:{prop:"offer_remarks",label:"报价备注","min-width":"30%"}})],1)],1):e._e(),e.theHotel_two.length>0?o("div",{staticClass:"tableStyle"},[o("div",{staticStyle:{"margin-left":"10px","font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[e._v(" 酒店外用餐需求 ")]),o("div",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[e._v(" 餐饮报价总计： "),o("span",[e._v("￥"+e._s(this.otherFoodAllMoney.toFixed(2)))])])]):e._e(),e.theHotel_two.length>0?o("div",{staticStyle:{"margin-bottom":"30px"}},[o("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.theHotel_two,"cell-style":e.cellStyle,"header-cell-style":{textAlign:"center",background:"#fafafa"},"span-method":e.objectSpanMethod_four,border:""}},[o("el-table-column",{attrs:{prop:"data_",label:"日期","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e._f("date_day")(t.row.data_)))])]}}],null,!1,1901885735)}),o("el-table-column",{attrs:{label:"项目","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.foodtypename))]),o("span",[e._v(e._s(t.row.usetype?"["+t.row.usetype+"]":""))])]}}],null,!1,3360766568)}),o("el-table-column",{attrs:{prop:"roomcount",label:"人数",align:"right","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.personcount))])]}}],null,!1,3887242544)}),o("el-table-column",{attrs:{label:"报价",align:"right","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[e._v(" ￥"+e._s(t.row.price.toFixed(2))+"*"+e._s(t.row.personcount)+" 人 ￥"+e._s((t.row.price*t.row.personcount).toFixed(2))+" ")])]}}],null,!1,2460103906)}),o("el-table-column",{attrs:{prop:"offer_remarks",label:"报价备注","min-width":"30%"}})],1)],1):e._e(),e.trafficList.length>0||e.groundTransportation.length>0?o("div",{staticClass:"tableStyle"},[o("div",{staticStyle:{"margin-left":"10px","font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[e._v(" 交通需求 ")]),o("div",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[e._v(" 交通报价总计： "),o("span",[e._v("￥"+e._s((this.IntercityTransportationAllMoney+this.CityAllMoney).toFixed(2)))])])]):e._e(),e.trafficList.length>0||e.groundTransportation.length>0?o("div",{staticStyle:{"margin-bottom":"30px"}},[e.trafficList.length>0||0==e.trafficList.length&&0==e.groundTransportation.length?o("el-table",{class:0==e.trafficList.length&&0==e.groundTransportation.length?"EmptyData":"",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.trafficList,"show-header":0==e.groundTransportation.length&&e.trafficList.length>0||e.groundTransportation.length>0&&e.trafficList.length>0,"cell-style":e.cellStyle,"header-cell-style":{textAlign:"center",background:"#fafafa"},"span-method":e.objectSpanMethod_five,border:""}},[o("el-table-column",{attrs:{prop:"data_",label:"分类","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.isType))])]}}],null,!1,1039182948)}),o("el-table-column",{attrs:{label:"日期","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e._f("date_day")(t.row.data_)))])]}}],null,!1,1901885735)}),o("el-table-column",{attrs:{prop:"roomcount",label:"需求","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.origincity)+" - "+e._s(t.row.destinationcity)+" "+e._s(t.row.transtypename)+" "+e._s(t.row.seatclassesname)+" "+e._s(t.row.passengercount)+"人")])]}}],null,!1,4113743394)}),o("el-table-column",{attrs:{label:"报价",align:"right","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[e._v("￥"+e._s(t.row.unitprice.toFixed(2))+"*"+e._s(t.row.passengercount)+" 人 ￥"+e._s((t.row.unitprice*t.row.passengercount).toFixed(2)))])]}}],null,!1,3647206153)}),o("el-table-column",{attrs:{prop:"requirement",label:"报价备注","min-width":"30%"}})],1):e._e(),e.trafficList.length>0?o("div",{class:0==e.groundTransportation.length?"EmptyData":"",staticStyle:{display:"flex","justify-content":"space-between"}},[o("div",{staticStyle:{"background-color":"#fafafa","border-bottom":"1px solid #ebeef5",width:"15.1%",height:"49px","margin-top":"-1px","z-index":"999999"}}),o("div",{staticStyle:{height:"48px",width:"84.8%","line-height":"48px","z-index":"999999","border-left":"1px solid #ebeef5","border-right":"1px solid #ebeef5","border-bottom":"1px solid #ebeef5",background:"#fafafa"}},[o("span",{staticStyle:{"margin-left":"10px",color:"#606266"}},[e._v("大交通报价总备注：")]),o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"600",color:"#666666"}},[e._v(e._s(e.info.transportation_remarks)+" ")])])]):e._e(),o("div",{staticStyle:{"margin-top":"-21px"}},[e.groundTransportation.length>0?o("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{"show-header":e.groundTransportation.length>0&&0==e.trafficList.length,"cell-style":e.cellStyle,data:e.groundTransportation,"header-cell-style":{textAlign:"center",background:"#fafafa"},border:"","span-method":e.objectSpanMethod_six}},[o("el-table-column",{attrs:{prop:"data_",label:"分类","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.isType))])]}}],null,!1,1039182948)}),o("el-table-column",{attrs:{label:"日期","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e._f("date_day")(t.row.data_)))])]}}],null,!1,1901885735)}),o("el-table-column",{attrs:{prop:"roomcount",label:"需求","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[o("p",[o("span",[e._v(e._s(t.row.purposename)+" ")]),e._v(" "+e._s(t.row.vehicletypename)+" "+e._s(t.row.carcount)+"辆 "+e._s(t.row.vehiclecount)+"人 ")]),t.row.city?o("p",[o("span",[e._v("用车城市")]),e._v(" "+e._s(t.row.city)+" ")]):e._e()])]}}],null,!1,939402494)}),o("el-table-column",{attrs:{label:"报价",align:"right","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[e._v(" ￥"+e._s(t.row.price.toFixed(2))+"*"+e._s(t.row.carcount)+"辆 ￥"+e._s((t.row.price*t.row.carcount).toFixed(2))+" ")])]}}],null,!1,1746181822)}),o("el-table-column",{attrs:{prop:"offer_remarks",label:"报价备注","min-width":"30%"}})],1):e._e(),e.groundTransportation.length>0?o("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[o("div",{staticStyle:{"background-color":"#fafafa","border-bottom":"1px solid #ebeef5",width:"15.1%",height:"49px","margin-top":"-1px","z-index":"999999"}}),o("div",{staticStyle:{height:"48px",width:"84.8%","line-height":"48px","z-index":"999999","border-left":"1px solid #ebeef5","border-right":"1px solid #ebeef5","border-bottom":"1px solid #ebeef5",background:"#fafafa"}},[o("span",{staticStyle:{"margin-left":"10px",color:"#606266"}},[e._v("地面交通报价总备注：")]),o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"600",color:"#666666"}},[e._v(e._s(e.info.car_remarks)+" ")])])]):e._e()],1)],1):e._e(),e.info.quoted_price_other.length>0?o("div",{staticClass:"tableStyle"},[o("div",{staticStyle:{"margin-left":"10px","font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[e._v(" 其他服务 ")]),o("div",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[e._v(" 其他需求报价小计： "),o("span",[e._v("￥"+e._s(this.otherAllMoney.toFixed(2)))])])]):e._e(),e.info.quoted_price_other.length>0?o("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.info.quoted_price_other,"cell-style":e.cellStyle,"header-cell-style":{textAlign:"center",background:"#fafafa"},border:""}},[o("el-table-column",{attrs:{label:"项目","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.servicetypename))])]}}],null,!1,3044759076)}),o("el-table-column",{attrs:{prop:"demandparticipatecount",label:"数量",align:"right","min-width":"15%"}}),o("el-table-column",{attrs:{prop:"roomcount",label:"报价",align:"right","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[e._v(" ￥"+e._s(t.row.price.toFixed(2))+" * "+e._s(t.row.offerparticipatecount)+" ￥"+e._s((t.row.price*t.row.offerparticipatecount*t.row.offerservicedaycount).toFixed(2))+" ")])]}}],null,!1,4032886440)}),o("el-table-column",{attrs:{prop:"describe",label:"需求备注","min-width":"20%"}}),o("el-table-column",{attrs:{prop:"offer_remarks",label:"报价备注","min-width":"30%"}})],1):e._e(),e.info.quoted_price_other.length>0?o("div",{staticClass:"foodStyle",staticStyle:{"margin-bottom":"30px"}},[o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#666666","margin-left":"10px"}},[e._v("其他需求报价总备注：")]),o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"normal",color:"#333","margin-left":"10px"}},[e._v(e._s(e.info.other_remarks))])]):e._e(),e.expensesOfTaxation.length>0?o("div",{staticClass:"tableStyle"},[o("div",{staticStyle:{"margin-left":"10px","font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#333333"}},[e._v(" 服务费和增值税 ")])]):e._e(),e.expensesOfTaxation.length>0?o("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.expensesOfTaxation,"header-cell-style":{textAlign:"center",background:"#fafafa"},"span-method":e.objectSpanMethod_,border:""}},[o("el-table-column",{attrs:{align:"right",label:"服务费","min-width":"40%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.isType)+" ")]),o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[e._v(" ￥"+e._s(t.row.numericalValue_one?e.positiveFloat(t.row.numericalValue_one).toFixed(2):"0.00")+" ")])]}}],null,!1,1424588214)}),o("el-table-column",{attrs:{label:"税费",align:"right","min-width":"50%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticStyle:{"font-size":"14px","font-family":"PingFang SC-粗体, PingFang SC","font-weight":"600",color:"#fa5151"}},[e._v("￥"+e._s(t.row.numericalValue_three.toFixed(2)))])]}}],null,!1,66614363)})],1):e._e(),o("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(" "+e._s(this.serveAllMoney.toFixed(2))+" "+e._s(this.AdvancesMoney.toFixed(2))+" "+e._s(this.Taxes.toFixed(2))+" ")]),o("div",{staticStyle:{float:"right","margin-top":"20px","margin-bottom":"40px"}},[o("span",{staticStyle:{"font-size":"18px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"500",color:"#333333"}},[e._v("总报价：")]),o("span",{staticStyle:{"font-size":"22px","font-family":"PingFang SC-常规体, PingFang SC","font-weight":"600",color:"#fa5151"}},[e._v("￥"+e._s(e.totalPrices.toFixed(2)))])])],1),o("el-dialog",{attrs:{title:"添加项目",visible:e.addProjectStatus,"before-close":function(e){t.itemData=null,e()},width:"700px"},on:{"update:visible":function(t){e.addProjectStatus=t}}},[e.addProjectStatus?o("projectAdded",{attrs:{"item-data":e.itemData},on:{onColse:e.projectSave}}):e._e()],1),o("el-dialog",{attrs:{title:"编辑 Cevent 上传完成日期",visible:e.CeventDateDialog,width:"700px"},on:{"update:visible":function(t){e.CeventDateDialog=t}}},[o("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期时间"},model:{value:e.fileList.cventDate,callback:function(t){e.$set(e.fileList,"cventDate",t)},expression:"fileList.cventDate"}}),o("div",{staticStyle:{"margin-top":"50px","text-align":"center"}},[o("el-button",{on:{click:function(t){e.CeventDateDialog=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.saveCeventDate}},[e._v("保存")])],1)],1),o("el-dialog",{attrs:{title:"审批意见",visible:e.objectionVisible,"close-on-click-modal":!1,width:"70%",center:""},on:{"update:visible":function(t){e.objectionVisible=t},open:e.GetSettlementObjection}},[o("div",[o("p",[e._v(e._s(e.objectionDetail.date))]),o("p",[e._v(" "+e._s(e.objectionDetail.username)+" （"+e._s(e.objectionDetail.company_name)+"） ")]),o("p",{style:"color:"+("审核不通过"==e.objectionDetail.state?"red":"")},[e._v(" "+e._s(e.objectionDetail.state)+" ")]),o("p",{staticStyle:{"margin-top":"20px"}},[e._v("其他异议：")]),o("div",{staticClass:"objectionDetailStyle",domProps:{innerHTML:e._s(this.info.orderform_settlement_customer_objection)},on:{click:function(t){return e.getImg(t)}}})]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.objectionVisible=!1}}},[e._v("关 闭")])],1)])],1):e._e()])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("span",{staticStyle:{"font-size":"16px","font-weight":"600"}},[t._v("客户需求")])])}],a=(i("d3b7"),i("159b"),i("a9e3"),i("4de4"),i("b680"),i("ac1f"),i("5319"),i("caad"),i("b0c0"),i("97aa")),s=i("cf45"),r=(i("df68"),i("f121")),l=i("acd6"),c={name:"OrderInfo",components:{projectAdded:a["a"]},data:function(){return{roomList:[],conferenceList:[],theHotel:[],theHotel_two:[],trafficList:[],groundTransportation:[],expensesOfTaxation:[{numericalValue_one:"",numericalValue_three:"",isType:"非直采服务费"},{numericalValue_one:"",numericalValue_three:"",isType:"直采服务费"}],downloadUrl:"",fileList:{kpFile:[],fpFile:[],cventDate:""},objectionDetail:{username:"",company_name:"",date:"",message:"",state:""},objectionVisible:!1,select:[],UploadFilesUrl:r["b"]+"/MeetingMa/UploadFiles",uploadList:{},whetherShow:{cvent_date:0,invoice_file:0,kp_notice_file:0},info:null,addProjectStatus:!1,CeventDateDialog:!1,itemData:null,settlement_sheet_status_draft:"0029-1",excelAddress:"",totalPrices:""}},computed:{dayMoney:function(){return function(t){var e=this,i=0;return t.forEach((function(t){i+=Number(t.provide_count)*e.positiveFloatSix(t.unitprice)})),this.positiveFloatSix(i)}},allMoney:function(){var t=this,e=0;return this.info.quoted_price_room&&this.info.quoted_price_room.length>0&&this.info.quoted_price_room.forEach((function(i){e+=t.positiveFloatSix(t.dayMoney(i.room_list))})),this.positiveFloatSix(e)},meetingDayMoney:function(){return function(t,e){var i=this,o=0;return t.forEach((function(t){o+=i.positiveFloatSix(t.price)})),this.positiveFloatSix(o)}},meetingMoney:function(){var t=this,e=0;return this.info.quoted_price_conference&&this.info.quoted_price_conference.length>0&&this.info.quoted_price_conference.forEach((function(i){var o=i.conference_list.filter((function(t){return 3!=t.type}));e+=t.meetingDayMoney(o)})),this.positiveFloatSix(e)},EquipmentMoney:function(){var t=this,e=0;return this.info.quoted_price_conference&&this.info.quoted_price_conference.length>0&&this.info.quoted_price_conference.forEach((function(i){var o=i.conference_list.filter((function(t){return 3==t.type}));e+=t.meetingDayMoney(o)})),this.positiveFloatSix(e)},meetingAllMoney:function(){var t=this,e=0;return this.info.quoted_price_conference&&this.info.quoted_price_conference.length>0&&this.info.quoted_price_conference.forEach((function(i){e+=t.meetingDayMoney(i.conference_list)})),this.positiveFloatSix(e)},repastDayMoney:function(){return function(t){var e=this,i=0;return t.forEach((function(t){i+=e.positiveInteger(t.personcount)*e.positiveFloatSix(t.price)})),this.positiveFloatSix(i)}},repastAllMoney:function(){var t=this,e=0;return this.info.quoted_price_food&&this.info.quoted_price_food.length>0&&this.info.quoted_price_food.forEach((function(i){e+=t.repastDayMoney(i.food_list)})),this.positiveFloatSix(e)},otherFoodDayMoney:function(){return function(t){var e=this,i=0;return t.forEach((function(t){i+=e.positiveInteger(t.personcount)*e.positiveFloatSix(t.price)})),this.positiveFloatSix(i)}},otherFoodAllMoney:function(){var t=this,e=0;return this.info.quoted_price_outside_food&&this.info.quoted_price_outside_food.length>0&&this.info.quoted_price_outside_food.forEach((function(i){e+=t.otherFoodDayMoney(i.food_list)})),this.positiveFloatSix(e)},IntercityTransportationDayMoney:function(){return function(t){var e=this,i=0;return t.forEach((function(t){i+=e.positiveInteger(t.passengercount)*e.positiveFloatSix(t.unitprice)})),this.positiveFloatSix(i)}},IntercityTransportationAllMoney:function(){var t=this,e=0;return this.info.quoted_price_transportation&&this.info.quoted_price_transportation.length>0&&this.info.quoted_price_transportation.forEach((function(i){e+=t.IntercityTransportationDayMoney(i.transportation_list)})),this.positiveFloatSix(e)},CityDayMoney:function(){return function(t){var e=this,i=0;return t.forEach((function(t){i+=e.positiveInteger(t.carcount)*e.positiveFloatSix(t.price)})),this.positiveFloatSix(i)}},CityAllMoney:function(){var t=this,e=0;return this.info.quoted_price_car&&this.info.quoted_price_car.length>0&&this.info.quoted_price_car.forEach((function(i){e+=t.CityDayMoney(i.car_list)})),this.positiveFloatSix(e)},otherAllMoney:function(){var t=this,e=0;return this.info.quoted_price_other&&this.info.quoted_price_other.length>0&&this.info.quoted_price_other.forEach((function(i){e+=t.positiveInteger(i.offerparticipatecount)*t.positiveInteger(i.offerservicedaycount)*t.positiveFloatSix(i.price)})),this.positiveFloatSix(e)},money:function(){return this.info.total_price=Object(s["o"])(this.allMoney)+Object(s["o"])(this.meetingAllMoney)+Object(s["o"])(this.repastAllMoney)+Object(s["o"])(this.otherFoodAllMoney)+Object(s["o"])(this.IntercityTransportationAllMoney)+Object(s["o"])(this.CityAllMoney)+Object(s["o"])(this.otherAllMoney),Object(s["o"])(this.info.total_price)},TravelAgencyMoney:function(){return this.positiveFloatSix(this.info.travelagency_payment_money*this.info.travelagency_payment_proportion/100)},AdvancesMoney:function(){return this.expensesOfTaxation[1].numericalValue_one=Object(s["o"])(this.positiveFloatSix(this.info.advance_amount)*(this.positiveFloatSix(this.info.advance_proportion)/100)),Object(s["o"])(this.positiveFloatSix(this.info.advance_amount)*(this.positiveFloatSix(this.info.advance_proportion)/100))},OutsideHotelMoney:function(){return this.positiveFloatSix(this.info.off_hotel_expenses*this.info.off_hotel_proportion/100)},serviceAllMoney:function(){return Object(s["o"])(this.TravelAgencyMoney+this.AdvancesMoney+this.OutsideHotelMoney)},serveAllMoney:function(){var t=this,e=0;if(0==this.info.event_info_configure.service_fee_calculation_method)e=this.allMoney.toFixed(2)*(this.info.event_info_configure.room_inquiry_service_taxrate/100)+this.meetingAllMoney.toFixed(2)*(this.info.event_info_configure.conference_inquiry_service_taxrate/100)+this.repastAllMoney.toFixed(2)*(this.info.event_info_configure.hotel_food_inquiry_service_taxrate/100)+this.otherFoodAllMoney.toFixed(2)*(this.info.event_info_configure.others_food_inquiry_service_taxrate/100)+this.IntercityTransportationAllMoney.toFixed(2)*(this.info.event_info_configure.transportation_inquiry_service_taxrate/100)+this.CityAllMoney.toFixed(2)*(this.info.event_info_configure.car_inquiry_service_taxrate/100),this.offline_quoted_price_others.forEach((function(t){e+=t.offerparticipatecount*t.price*t.service_taxrate/100}));else if(1==this.info.event_info_configure.service_fee_calculation_method){var i=0;i+=this.info.event_info_configure.room_inquiry_isnotservice?this.allMoney:0,i+=this.info.event_info_configure.conference_inquiry_isnotservice?this.meetingAllMoney:0,i+=this.info.event_info_configure.hotel_food_inquiry_isnotservice?this.repastAllMoney:0,i+=this.info.event_info_configure.others_food_inquiry_isnotservice?this.otherFoodAllMoney:0,i+=this.info.event_info_configure.transportation_inquiry_isnotservice?this.IntercityTransportationAllMoney:0,i+=this.info.event_info_configure.car_inquiry_isnotservice?this.CityAllMoney:0,this.info.quoted_price_other.forEach((function(t){i+=t.isnotservice?t.offerparticipatecount*t.price:0})),this.severEveryMoneyList=[],this.info.event_info_ladder_taxrates.forEach((function(o,n){i<=o.ladder_min||(i>=o.ladder_min&&i<=o.ladder_max?(e+=(i-o.ladder_min+(0==n?0:1))*o.ladder_taxrate/100,t.severEveryMoneyList.push(Object(s["o"])((i-o.ladder_min+(0==n?0:1))*o.ladder_taxrate/100*t.info.fzc_service/100))):i>o.ladder_max&&t.info.event_info_ladder_taxrates[n+1]?(t.severEveryMoneyList.push(Object(s["o"])((o.ladder_max-o.ladder_min+(0==n?0:1))*o.ladder_taxrate/100*t.info.fzc_service/100)),e+=(o.ladder_max-o.ladder_min+(0==n?0:1))*o.ladder_taxrate/100):i>=o.ladder_max&&!t.info.event_info_ladder_taxrates[n+1]&&(t.severEveryMoneyList.push(Object(s["o"])((i-o.ladder_min+(0==n?0:1))*o.ladder_taxrate/100*t.info.fzc_service/100)),e+=(i-o.ladder_min+(0==n?0:1))*o.ladder_taxrate/100))}))}else if(2==this.info.event_info_configure.service_fee_calculation_method){var o=0;o+=this.info.event_info_configure.room_inquiry_isnotservice?this.allMoney:0,o+=this.info.event_info_configure.conference_inquiry_isnotservice?this.meetingAllMoney:0,o+=this.info.event_info_configure.hotel_food_inquiry_isnotservice?this.repastAllMoney:0,o+=this.info.event_info_configure.others_food_inquiry_isnotservice?this.otherFoodAllMoney:0,o+=this.info.event_info_configure.transportation_inquiry_isnotservice?this.IntercityTransportationAllMoney:0,o+=this.info.event_info_configure.car_inquiry_isnotservice?this.CityAllMoney:0,this.info.quoted_price_other.forEach((function(t){o+=t.isnotservice?t.offerparticipatecount*t.price:0})),this.serviceTotalMoney=o;for(var n=0;n<this.info.event_info_grade_taxrates.length;n++)if(n==this.info.event_info_grade_taxrates.length-1||o>=this.info.event_info_grade_taxrates[n].grade_money&&o<this.info.event_info_grade_taxrates[n+1].grade_money){e=o*this.info.event_info_grade_taxrates[n].grade_taxrate/100,this.grade_taxrate=this.info.event_info_grade_taxrates[n].grade_taxrate;break}}return e*=this.info.fzc_service/100,1==this.info.event_info_configure.minimum_service_fee&&e<this.info.event_info_configure.minimum_service_fee_money&&(e=this.info.event_info_configure.minimum_service_fee_money),this.info.feizhicai_service=e,this.expensesOfTaxation[0].numericalValue_one=e,e},Taxes:function(){var t=0;return"VAT"==this.info.taxtype?(t=this.info.event_info_configure.fzc_service_fee_money?(this.money+this.serveAllMoney)*this.positiveFloatSix(this.info.taxrate)/100:(this.money+this.serveAllMoney-this.info.feizhicai_service)*this.positiveFloatSix(this.info.taxrate)/100,this.expensesOfTaxation[0].numericalValue_three=t,this.expensesOfTaxation[1].numericalValue_three=t,t):(this.expensesOfTaxation[0].numericalValue_three=0*(this.money+this.serveAllMoney),this.expensesOfTaxation[1].numericalValue_three=0*(this.money+this.serveAllMoney),0*(this.money+this.serveAllMoney))},OrderPrice:function(){return this.money+this.serveAllMoney+this.AdvancesMoney+this.Taxes}},methods:{positiveInteger:s["q"],positiveFloat:s["m"],positiveFloatSix:s["o"],excelExport:l["a"],formatDate:s["d"],WhetherShow:function(){var t=this;this.$api.WhetherShow({OrderID:this.$route.params.id},"post").then((function(e){t.whetherShow=e}))},GetSettlementObjection:function(){var t=this;this.$api.GetSettlementObjection({OrderFromID:this.$route.params.id},"POST").then((function(e){t.objectionDetail=e}))},getImg:function(t){console.log(t),console.log(t.target.currentSrc);var e=t.target.currentSrc;e&&this.$hevueImgPreview(e)},handlePreview:function(t){var e=this;if(t.value){var i=t.value.substring(t.value.lastIndexOf(".")+1),o=["pdf","jpeg","jpg","png","txt"],n=["docx","doc","xls","xlsx","xlsm","ppt","pptx"];t.value=t.value.replace(/http:/,"https:"),this.downloadUrl=t.value,n.includes(i)?this.downloadUrl="https://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(t.value):o.includes(i)?this.downloadUrl=t.value:this.$message.info("文件格式不支持预览，下载后查看"),setTimeout((function(){e.$refs.d_click.click()}),100)}},ApproveRecordDownloadFile:function(t){var e=document.createElement("a");e.href=t.value,e.download=t.name,e.target="_blank",document.body.appendChild(e),e.click()},getSelect:function(){var t=this;this.$api.getrecord({OrderID:this.$route.params.id},"POST").then((function(e){t.select=e,t.select.forEach((function(e){t.$set(e,"showDetail",!1)}))}))},GetFile:function(){var t=this;this.$api.GetFile({OrderID:this.$route.params.id,SheetID:""},"POST").then((function(e){t.fileList=e}))},saveCeventDate:function(){var t=this;this.$api.CventDateAdd({OrderID:this.$route.params.id,Datetime:this.fileList.cventDate},"POST").then((function(e){e&&(t.CeventDateDialog=!1)}))},excelexport:function(){var t="DMC报价单"+this.info.event_info_id;this.excelExport("/Template/GetTemplate",{eventid:this.info.event_info_id,type:3,param:this.info.quoted_price_id},t)},uploadFile:function(t){var e=this;this.uploadList=t;var i={orderid:this.$route.params.id,sheet_id:"",type:1,file_name:t.title,file_path:t.weburl};this.$api.FileAdd(i,"post").then((function(t){t&&(e.$message.success("上传成功"),e.GetFile())}))},downloadFile:function(t){var e,i,o=this,n=null!==(e=t.file_path)&&void 0!==e?e:t.filepath;null!==(i=t.file_name)&&void 0!==i||t.filename;if(n){var a=n.substring(n.lastIndexOf(".")+1),s=["pdf","jpeg","jpg","png","txt"],r=["docx","doc","xls","xlsx","xlsm","ppt","pptx"];n=n.replace(/http:/,"https:"),this.downloadUrl=n,r.includes(a)?this.downloadUrl="https://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(n):s.includes(a)?this.downloadUrl=n:this.$message.info("文件格式不支持预览，下载后查看"),setTimeout((function(){o.$refs.d_click.click()}),100)}},project:function(){this.info.project_id?this.$router.push({name:"ItineraryManagement",params:{id:this.info.project_id}}):this.addProjectStatus=!0},projectSave:function(t){var e=this;this.$api.projectsave(t,"POST").then((function(i){e.$message({message:t.id?"修改成功！":"添加成功！",type:"success"}),e.$router.push({name:"ItineraryManagement",params:{id:e.info.project_id}})}))},quotedprice:function(){var t=this.$router.resolve({name:"DMCquotedprice",params:{id:this.info.quoted_price_id,isSubmit:0}});window.open(t.href,"_blank")},settlement:function(){var t=this.$route.params.id,e=1;this.info.settlement_sheet_status,this.settlement_sheet_status_draft,"0020-5"!==this.info.status&&"0020-6"!==this.info.status&&"0020-8"!==this.info.status||(e=0),0==this.info.serviceprovider_or_hotel?this.$router.push({name:"settleAccounts_Hotel",params:{id:t,issubmit:e}}):this.$router.push({name:"settleAccounts",params:{id:t,issubmit:e}})},cancelorderform:function(){var t=this;this.$prompt("请简要说明取消订单的原因","拒绝接单",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"textarea"}).then((function(e){var i=e.value;t.$api.cancelorderform({id:t.info.orderform_id,object_id:t.info.object_id,reason:i},"POST").then((function(e){e?(t.$message({message:"订单已取消",type:"success"}),t.$router.go(0)):t.$message({message:"订单取消失败",type:"fail"})}))})).catch((function(){}))},againform:function(){var t=this;this.$api.againform({id:this.info.orderform_id,object_id:this.info.object_id},"POST").then((function(e){e?t.$message({message:"提醒成功",type:"success"}):t.$message({message:"提醒失败",type:"fail"})}))},handleChange:function(t){console.log(t)},objectSpanMethod:function(t){t.row,t.column;var e=t.rowIndex,i=t.columnIndex;if(0===i){var o=this.flitterData(this.roomList).two[e],n=o>0?1:0;return{rowspan:o,colspan:n}}},objectSpanMethod_two:function(t){t.row,t.column;var e=t.rowIndex,i=t.columnIndex;if(0===i){var o=this.flitterData(this.conferenceList).two[e],n=o>0?1:0;return{rowspan:o,colspan:n}}},objectSpanMethod_three:function(t){t.row,t.column;var e=t.rowIndex,i=t.columnIndex;if(0===i){var o=this.flitterData(this.theHotel).two[e],n=o>0?1:0;return{rowspan:o,colspan:n}}},objectSpanMethod_four:function(t){t.row,t.column;var e=t.rowIndex,i=t.columnIndex;if(0===i){var o=this.flitterData(this.theHotel_two).two[e],n=o>0?1:0;return{rowspan:o,colspan:n}}},objectSpanMethod_five:function(t){t.row,t.column;var e=t.rowIndex,i=t.columnIndex;if(0===i){var o=this.flitterData_(this.trafficList).two[e],n=o>0?1:0;return{rowspan:o,colspan:n}}if(1===i){var a=this.flitterData(this.trafficList).two[e],s=a>0?1:0;return{rowspan:a,colspan:s}}},objectSpanMethod_six:function(t){t.row,t.column;var e=t.rowIndex,i=t.columnIndex;if(0===i){var o=this.flitterData_(this.groundTransportation).two[e],n=o>0?1:0;return{rowspan:o,colspan:n}}if(1===i){var a=this.flitterData(this.groundTransportation).two[e],s=a>0?1:0;return{rowspan:a,colspan:s}}},flitterData:function(t){var e=[],i=[],o=0,n=0;return t.forEach((function(a,s){console.log(a,s),0===s?(e.push(1),i.push(1)):(a.data_===t[s-1].data_?(e[o]+=1,e.push(0)):(e.push(1),o=s),a.data_===t[s-1].data_?(i[n]+=1,i.push(0)):(i.push(1),n=s))})),{one:e,two:i}},flitterData_:function(t){var e=[],i=[],o=0,n=0;return t.forEach((function(a,s){console.log(a,s),0===s?(e.push(1),i.push(1)):(a.isType===t[s-1].isType?(e[o]+=1,e.push(0)):(e.push(1),o=s),a.isType===t[s-1].isType?(i[n]+=1,i.push(0)):(i.push(1),n=s))})),{one:e,two:i}},objectSpanMethod_:function(t){t.row,t.column;var e=t.rowIndex,i=t.columnIndex;if(1===i)return e%2===0?{rowspan:2,colspan:1}:{rowspan:0,colspan:0}},cellStyle:function(t){var e,i=t.row,o=(t.column,t.rowIndex,t.columnIndex);return 0==o&&(e="background: #FAFAFA; font-size: 14px;font-family: PingFang SC-粗体, PingFang SC; font-weight: 600; color: #333333;"),1!=o||"大交通"!=i.isType&&"地面交通"!=i.isType||(e="background: #FAFAFA; font-size: 14px;font-family: PingFang SC-粗体, PingFang SC; font-weight: 600; color: #333333;"),e}},mounted:function(){var t=this;this.WhetherShow(),this.getSelect(),this.$api.orderInfo({id:this.$route.params.id},"POST").then((function(e){t.info=e,t.roomList=[];for(var i=0;i<t.info.quoted_price_room.length;i++)for(var o=0;o<t.info.quoted_price_room[i].room_list.length;o++)t.info.quoted_price_room[i].room_list[o].data_=t.info.quoted_price_room[i].date,t.info.quoted_price_room[i].room_list[o].totalprice_=t.info.quoted_price_room[i].totalprice,t.roomList.push(t.info.quoted_price_room[i].room_list[o]);t.conferenceList=[];for(var n=0;n<t.info.quoted_price_conference.length;n++)for(var a=0;a<t.info.quoted_price_conference[n].conference_list.length;a++)t.info.quoted_price_conference[n].conference_list[a].data_=t.info.quoted_price_conference[n].date,t.info.quoted_price_conference[n].conference_list[a].totalprice_=t.info.quoted_price_conference[n].totalprice,4!=t.info.quoted_price_conference[n].conference_list[a].type&&t.conferenceList.push(t.info.quoted_price_conference[n].conference_list[a]);t.theHotel=[];for(var s=0;s<t.info.quoted_price_food.length;s++)for(var r=0;r<t.info.quoted_price_food[s].food_list.length;r++)t.info.quoted_price_food[s].food_list[r].data_=t.info.quoted_price_food[s].date,t.info.quoted_price_food[s].food_list[r].totalprice_=t.info.quoted_price_food[s].totalprice,t.theHotel.push(t.info.quoted_price_food[s].food_list[r]);t.theHotel_two=[];for(var l=0;l<t.info.quoted_price_outside_food.length;l++)for(var c=0;c<t.info.quoted_price_outside_food[l].food_list.length;c++)t.info.quoted_price_outside_food[l].food_list[c].data_=t.info.quoted_price_outside_food[l].date,t.info.quoted_price_outside_food[l].food_list[c].totalprice_=t.info.quoted_price_outside_food[l].totalprice,t.theHotel_two.push(t.info.quoted_price_outside_food[l].food_list[c]);t.trafficList=[];for(var f=0;f<t.info.quoted_price_transportation.length;f++)for(var p=0;p<t.info.quoted_price_transportation[f].transportation_list.length;p++)t.info.quoted_price_transportation[f].transportation_list[p].data_=t.info.quoted_price_transportation[f].date,t.info.quoted_price_transportation[f].transportation_list[p].totalprice_=t.info.quoted_price_transportation[f].totalprice,t.info.quoted_price_transportation[f].transportation_list[p].isType="大交通",t.info.quoted_price_transportation[f].transportation_list[p].remarks_=t.info.transportation_remarks,t.trafficList.push(t.info.quoted_price_transportation[f].transportation_list[p]);console.log(t.trafficList,"大交通"),t.groundTransportation=[];for(var _=0;_<t.info.quoted_price_car.length;_++)for(var d=0;d<t.info.quoted_price_car[_].car_list.length;d++)t.info.quoted_price_car[_].car_list[d].data_=t.info.quoted_price_car[_].date,t.info.quoted_price_car[_].car_list[d].totalprice_=t.info.quoted_price_car[_].totalprice,t.info.quoted_price_car[_].car_list[d].isType="地面交通",t.info.quoted_price_car[_].car_list[d].remarks_=t.info.car_remarks,t.groundTransportation.push(t.info.quoted_price_car[_].car_list[d]);console.log("地面交通",t.groundTransportation),t.totalPrices=e.total_price,0!=t.info.event_info_configure.service_fee_ratio&&null!=t.info.fzc_service||(t.info.fzc_service=100),"0020-6"===t.info.status&&t.GetFile()})),console.log("测试测得")}},f=c,p=(i("16b8"),i("2877")),_=Object(p["a"])(f,o,n,!1,null,"28afbc10",null);e["default"]=_.exports}}]);