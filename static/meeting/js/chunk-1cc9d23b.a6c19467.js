(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cc9d23b"],{"7bd2":function(e,t,a){"use strict";a("b41c")},"9b16":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addPrincipal"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{staticClass:"el-breadcrumb-item",attrs:{to:{path:"/"}}},[e._v(" 首页 ")]),a("el-breadcrumb-item",{staticClass:"el-bread-item",attrs:{to:{path:"/distributionParent"}}},[e._v("会议相关人员配置")]),a("el-breadcrumb-item",{staticClass:"el-bread-item"},[e._v("编辑会议助理规则")])],1),a("p",{staticStyle:{"font-size":"17px",padding:"15px 0"}},[e._v("新建/编辑会议助理规则 ")]),a("el-form",{ref:"headeRuleForm",staticClass:"addPrincipalForm",attrs:{model:e.formData,rules:e.rules,"label-width":"250px","label-position":"left"}},[a("el-form-item",{attrs:{label:"助理用户:",prop:"username"}},[a("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择"},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username",t)},expression:"formData.username"}},e._l(e.userNameList,(function(e){return a("el-option",{key:e.username,attrs:{label:e.fullname,value:e.username}})})),1)],1),a("el-form-item",{attrs:{label:"客户:",prop:"company_id"}},[a("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择"},on:{change:e.changeCustomer},model:{value:e.formData.company_id,callback:function(t){e.$set(e.formData,"company_id",t)},expression:"formData.company_id"}},e._l(e.customerList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.shortname,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"会议类型:"}},[a("el-checkbox-group",{model:{value:e.formData.meeting_type,callback:function(t){e.$set(e.formData,"meeting_type",t)},expression:"formData.meeting_type"}},e._l(e.meetingTypeList,(function(t){return a("el-checkbox",{key:t.id,attrs:{value:t.id,label:t.name},on:{change:function(a){return e.chooseItem(a,t.id)}}})})),1)],1),a("el-form-item",{attrs:{label:"会议城市:"}},[a("el-select",{attrs:{size:"small",multiple:"",filterable:"",placeholder:"请选择"},model:{value:e.formData.city_code,callback:function(t){e.$set(e.formData,"city_code",t)},expression:"formData.city_code"}},e._l(e.meetingCityList,(function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)],1),a("el-form-item",{attrs:{label:"会议指定供应商:",prop:"service"}},[a("el-select",{attrs:{size:"small",multiple:"",filterable:"",placeholder:"请选择"},model:{value:e.formData.service,callback:function(t){e.$set(e.formData,"service",t)},expression:"formData.service"}},e._l(e.serviceList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"会议创建用户:",prop:"user_name_list"}},[a("el-select",{attrs:{size:"small",multiple:"",filterable:"",placeholder:"请选择"},model:{value:e.formData.user_name_list,callback:function(t){e.$set(e.formData,"user_name_list",t)},expression:"formData.user_name_list"}},e._l(e.userNameList,(function(e){return a("el-option",{key:e.username,attrs:{label:e.fullname,value:e.username}})})),1)],1)],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",disabled:e.saveDisabled},on:{click:e.save}},[e._v("保存")]),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)},r=[],n=(a("d3b7"),a("159b"),a("b0c0"),a("a9e3"),a("ac1f"),a("1276"),a("a15b"),a("e9c4"),a("a434"),{data:function(){return{formData:{id:"",username:"",company_id:"",meeting_type:[],city_code:[],service:[],user_name_list:[]},checkedMeetingTypes:[],checkedMeetingTypeIDs:[],selectCityCodes:[],userNameList:[],customerList:[],meetingTypeList:[],meetingCityList:[],serviceList:[],saveDisabled:!1,rules:{username:[{required:!0,message:"请选择会议助理用户",trigger:"change"}],company_id:[{required:!0,message:"请选择客户",trigger:"change"}]}}},watch:{meetingTypeList:{handler:function(e,t){var a=this;this.meetingTypeList.forEach((function(e){a.formData.meeting_type.forEach((function(t){e.name===t&&a.checkedMeetingTypeIDs.push(e.id)}))}))},deep:!0}},mounted:function(){this.ProvinceCity(),this.GetUser(),this.getCompany(),this.GetService(),this.$route.query.id&&this.OwnerRuleEdit()},methods:{OwnerRuleEdit:function(){var e=this;this.$api.OwnerRuleEdit({id:this.$route.query.id},"POST").then((function(t){e.formData.id=t.id,e.formData.username=t.username,e.formData.company_id=Number(t.company_id),e.GetMeetingType(e.formData.company_id),e.formData.meeting_type=t.meeting_type.split(","),t.city_code&&(e.formData.city_code=t.city_code.split(",")),t.service&&t.service.forEach((function(t){e.formData.service.push(t.serviceid)})),t.user_name_list&&t.user_name_list.forEach((function(t){e.formData.user_name_list.push(t.username)}))}))},GetService:function(){var e=this;this.$api.GetService({},"POST").then((function(t){e.serviceList=t}))},GetUser:function(){var e=this;this.$api.GetUser({},"POST").then((function(t){e.userNameList=t}))},getCompany:function(){var e=this;this.$api.getCompany({},"POST").then((function(t){e.customerList=t}))},GetMeetingType:function(e){var t=this;this.$api.GetMeetingType({CompanyID:e},"PSOT").then((function(e){t.meetingTypeList=e}))},ProvinceCity:function(){var e=this;this.$api.ProvinceCity({},"POST").then((function(t){e.meetingCityList=t}))},save:function(){var e=this;this.$refs["headeRuleForm"].validate((function(t){if(t){e.saveDisabled=!0;var a={id:e.formData.id,username:e.formData.username,company_id:e.formData.company_id,meeting_type:e.checkedMeetingTypeIDs.join(","),city_code:e.formData.city_code.join(","),type:3,service:e.formData.service.join(","),user_name_list:e.formData.user_name_list.join(",")};a=JSON.stringify(a),e.$api.OwnerRuleSava({Parameter:a},"PSOT").then((function(t){t&&(e.$message.success("保存成功"),e.saveDisabled=!1,e.cancel())}))}else e.$message.warning("请完善规则信息")}))},cancel:function(){this.$router.push({path:"/distributionParent",query:{activeName:"third"}})},changeCustomer:function(){this.GetMeetingType(this.formData.company_id)},chooseItem:function(e,t){e?this.checkedMeetingTypeIDs.push(t):this.checkedMeetingTypeIDs.splice(this.checkedMeetingTypeIDs.indexOf(t),1)}}}),s=n,o=(a("7bd2"),a("2877")),l=Object(o["a"])(s,i,r,!1,null,null,null);t["default"]=l.exports},a434:function(e,t,a){"use strict";var i=a("23e7"),r=a("da84"),n=a("23cb"),s=a("5926"),o=a("07fa"),l=a("7b0b"),c=a("65f0"),m=a("8418"),u=a("1dde"),f=u("splice"),d=r.TypeError,p=Math.max,h=Math.min,y=9007199254740991,b="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var a,i,r,u,f,_,v=l(this),g=o(v),D=n(e,g),k=arguments.length;if(0===k?a=i=0:1===k?(a=0,i=g-D):(a=k-2,i=h(p(s(t),0),g-D)),g+a-i>y)throw d(b);for(r=c(v,i),u=0;u<i;u++)f=D+u,f in v&&m(r,u,v[f]);if(r.length=i,a<i){for(u=D;u<g-i;u++)f=u+i,_=u+a,f in v?v[_]=v[f]:delete v[_];for(u=g;u>g-i+a;u--)delete v[u-1]}else if(a>i)for(u=g-i;u>D;u--)f=u+i-1,_=u+a-1,f in v?v[_]=v[f]:delete v[_];for(u=0;u<a;u++)v[u+D]=arguments[u+2];return v.length=g-i+a,r}})},b41c:function(e,t,a){}}]);