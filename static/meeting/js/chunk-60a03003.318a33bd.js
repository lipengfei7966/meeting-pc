(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60a03003"],{"33d1":function(t,i,s){"use strict";var e=s("23e7"),a=s("7b0b"),n=s("07fa"),o=s("5926"),c=s("44d2");e({target:"Array",proto:!0},{at:function(t){var i=a(this),s=n(i),e=o(t),c=e>=0?e:s+e;return c<0||c>=s?void 0:i[c]}}),c("at")},"8eb5":function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=this,s=i.$createElement,e=i._self._c||s;return e("div",{staticClass:"activityOrderInfo"},[e("div",{staticClass:"title"},[i._v("活动询价订单 - "+i._s(i.info.activity_name))]),e("div",{staticClass:"content"},["0012-1"===i.info.status&&Date.parse(i.info.offerenddate)>new Date?e("div",{staticClass:"tips"},[e("p",[i._v("请尽快给客户报价吧")]),e("p",[i._v("请查看以下订单详情，如果客户需要使用会议室等场地，请为客户预留档期")]),e("a",{on:{click:i.goquotedprice}},[i._v("立即报价")])]):"0012-2"===i.info.status?e("div",{staticClass:"tips"},[e("p",[i._v("等待客户决定")]),e("p",[i._v("请查看以下订单详情，如果客户需要使用会议室等场地，请为客户预留档期")]),e("a",{on:{click:i.anewquotation}},[i._v("更新报价")]),e("a",{staticStyle:{"margin-left":"20px"},on:{click:i.checkquotation}},[i._v("查看报价")])]):"0012-3"===i.info.status?e("div",[e("div",{staticClass:"tips3"},[e("p",[i._v(" 恭喜您，已经中标！请尽快与客户联系确定相关事宜。 "),e("el-button",{attrs:{type:"warning"},on:{click:i.Orderform}},[i._v("查看关联订单")])],1)]),e("div",{staticClass:"tips_bttton_info"},[e("el-button",{attrs:{type:"primary"},on:{click:i.project}},[i._v(i._s(i.info.project_id?"查看行程":"添加行程"))])],1)]):"0012-4"===i.info.status?e("div",{staticClass:"tips"},[e("p",[i._v("您已谢绝了此询价单，无法再进行报价。")])]):"0012-5"===i.info.status?e("div",{staticClass:"tips2"},[e("p",[i._v("很遗憾，未中标")]),e("p",[i._v("客户谢绝了报价(谢绝报价)")])]):i._e(),"0012-6"===i.info.status&&Date.parse(i.info.offerenddate)>new Date?e("div",{staticClass:"tips"},[e("p",[i._v(" 客户请您重新报价，再优惠一些吧！ "),e("el-button",{attrs:{type:"primary"},on:{click:function(t){return i.goquotedprice(1)}}},[i._v("重新报价")])],1),e("p",[i._v("原因："+i._s(i.info.message.message))])]):("0012-1"===i.info.status||"0012-6"===i.info.status||"0012-8"===i.info.status)&&Date.parse(i.info.offerenddate)<=new Date?e("div",{staticClass:"tips2"},[e("p",[i._v("很遗憾，已经超过报价截止日期，无法再报价了。")]),"0012-8"===i.info.status?e("a",{staticStyle:{cursor:"pointer","text-decoration":"underline"},on:{click:i.checkquotation}},[i._v("查看报价（草稿）")]):i._e()]):i._e(),"0012-8"===i.info.status&&Date.parse(i.info.offerenddate)>new Date?e("div",{staticClass:"tips"},[e("p",[i._v("请尽快给客户报价吧")]),e("p",[i._v("请查看以下订单详情，如果客户需要使用会议室等场地，请为客户预留档期")]),e("a",{on:{click:i.goquotedprice}},[i._v("立即报价（草稿）")])]):i._e(),e("p",{staticStyle:{color:"#169BD5","font-weight":"bold","margin-top":"20px"}},[i._v("RFP信息")]),e("div",{staticClass:"info"},[e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("询价单号")]),e("div",{staticClass:"context"},[i._v(i._s(i.info.inquiry_sheet_code))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("报名截至日期")]),e("div",{staticClass:"context"},[i._v(i._s(i._f("date_ex")(i.info.offerenddate)))])])]),e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("活动名称")]),e("div",{staticClass:"context"},[i._v(i._s(i.info.activity_name))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("城市")]),e("div",{staticClass:"context"},[i._v(i._s(i.info.event_city))])])]),e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("最多活动人数")]),e("div",{staticClass:"context"},[i._v(i._s(i.info.activity_count))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("活动日期")]),e("div",{staticClass:"context"},[i._v(i._s(i._f("date_day")(i.info.activity_startdate))+" 至 "+i._s(i._f("date_day")(i.info.activity_enddate))+i._s(i.info.isadjustdate))])])]),e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("公司名称")]),e("div",{staticClass:"context"},[i._v(i._s(i.info.company_name))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("联系人")]),e("div",{staticClass:"context"},[i._v(i._s(i.info.contacts))])])]),e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("联系邮箱")]),e("div",{staticClass:"context"},[i._v(i._s(i.info.mailbox))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("联系电话")]),e("div",{staticClass:"context"},[i._v(i._s(i.info.customer_service_telephone_numbers))])])])]),e("p",{staticStyle:{color:"#169BD5","font-weight":"bold","margin-top":"20px"}},[i._v("您的信息")]),e("div",{staticClass:"info"},[e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("供应商")]),e("div",{staticClass:"context"},[i._v(i._s(i.info.hotel_name))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("联系人")]),e("div",{staticClass:"context"},[i._v(i._s(i.info.myinfo.contacts))])])]),e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("联系电话")]),e("div",{staticClass:"context"},[i._v(i._s(i.info.myinfo.telephone))])]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("联系邮箱")]),e("div",{staticClass:"context"},[i._v(i._s(i.info.myinfo.email))])])])]),e("p",{staticStyle:{color:"#169BD5","font-weight":"bold","margin-top":"20px"}},[i._v("采购需求")]),e("div",{staticClass:"info"},[i._m(0),e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("客房需求")]),e("div",{staticClass:"context"},i._l(i.info.inquiry_sheet_room,(function(t){return e("div",{key:t.id,staticClass:"hyxq_item"},[e("div",{staticClass:"date"},[i._v(i._s(i._f("date_day")(t.date)))]),i._l(t.roomlist,(function(t){return e("div",{key:t.id,staticClass:"c_item"},[i._v(i._s(t.roomtypename)+":"+i._s(t.roomcount)+" 间")])})),t.roomlist.length>0&&t.roomlist[0].otherrequirements?e("div",{staticClass:"otherrequirements"},[i._v(" 其他需求："+i._s(t.roomlist[0].otherrequirements)+" ")]):i._e()],2)})),0)]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("会议需求")]),e("div",{staticClass:"context"},i._l(i.info.inquiry_sheet_conference,(function(t){return e("div",{key:t.id,staticClass:"hyxq_item"},[e("div",{staticClass:"date"},[i._v(i._s(i._f("date_day")(t.conferencedate)))]),i._l(t.conferencelist,(function(s){return e("div",{key:s.id,staticClass:"c_item"},[1==s.type?e("div",[i._v(" "+i._s(s.item+s.order_name)+" "+i._s(s.starttime)+"-"+i._s(s.endtime)+" "+i._s(s.roomsetuptype)+" "+i._s(s.attendees)+" 人，会场面积范围："+i._s(s.min_area)+"~"+i._s(s.max_area)+" sqm ")]):2==s.type?e("div",[i._v(" "+i._s(s.related_information)+" "),i._v(" "+i._s(i._f("date_day")(t.conferencedate))+" "+i._s(s.starttime)+"~ "+i._s(i._f("date_day")(t.conferencedate))+" "+i._s(s.endtime)+" ")]):i._e(),2==s.type?e("div",{staticClass:"otherrequirements"},[i._v("需求备注："+i._s(s.describe))]):i._e(),3==s.type?e("div",[e("div",{staticClass:"date"},[i._v(i._s(i._f("date_day")(t.conferencedate))+" "+i._s(s.item))]),i._v(" "+i._s(s.equipment)+" "),e("div",{staticClass:"otherrequirements"},[i._v("需求备注："+i._s(s.microphonedescribe))])]):i._e()])}))],2)})),0)])]),e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("酒店内用餐需求")]),e("div",{staticClass:"context"},i._l(i.info.inquiry_sheet_food,(function(t){return e("div",{key:t.id,staticClass:"hyxq_item"},[e("div",{staticClass:"date"},[i._v(i._s(i._f("date_day")(t.date)))]),i._l(t.foodlist,(function(s,a){return e("div",{key:s.id,staticClass:"c_item"},[e("span",[i._v(i._s(s.foodtypename))]),i._v(" "+i._s(s.usetype?"["+s.usetype+"]":"")+" "+i._s(s.personcount)+" 人 "),1==s.addresstype?e("span",{staticClass:"outsidethehotel"},[i._v("酒店外")]):i._e(),a==t.foodlist.length-1?e("div",{staticClass:"otherrequirements"},[i._v("需求备注："+i._s(s.comments))]):i._e()])}))],2)})),0)]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("酒店外用餐需求")]),e("div",{staticClass:"context"},i._l(i.info.inquiry_sheet_outside_food,(function(t){return e("div",{key:t.id,staticClass:"hyxq_item"},[e("div",{staticClass:"date"},[i._v(i._s(i._f("date_day")(t.date)))]),i._l(t.foodlist,(function(s,a){return e("div",{key:s.id,staticClass:"c_item"},[e("span",[i._v(i._s(s.foodtypename))]),i._v(" "+i._s(s.usetype?"["+s.usetype+"]":"")+" "+i._s(s.personcount)+" 人 "),a==t.foodlist.length-1?e("div",{staticClass:"otherrequirements"},[i._v("需求备注："+i._s(s.comments))]):i._e()])}))],2)})),0)])]),e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("交通需求")]),e("div",{staticClass:"context"},[i._l(i.info.inquiry_sheet_transportation,(function(t){return e("div",{key:t.id,staticClass:"hyxq_item"},[e("div",{staticClass:"date"},[i._v(i._s(i._f("date_day")(t.date))+" 大交通")]),i._l(t.transportationlist,(function(t){return e("div",{key:t.id,staticClass:"c_item"},[e("span",[i._v(i._s(t.origincity)+" - "+i._s(t.destinationcity))]),i._v(" "+i._s(t.transtype)+" "+i._s(t.seatclasses)+" "+i._s(t.specialprice)+" "+i._s(t.passengercount)+" 人 ")])}))],2)})),i._l(i.info.inquiry_sheet_car,(function(t){return e("div",{key:t.id,staticClass:"hyxq_item"},[e("div",{staticClass:"date"},[i._v(i._s(i._f("date_day")(t.date))+" 地面交通")]),i._l(t.carlist,(function(t){return e("div",{key:t.id,staticClass:"c_item"},[e("p",[e("span",[i._v(i._s(t.purposename))]),i._v(" "+i._s(t.vehicletypename)+" "+i._s(t.carcount)+" 辆 ")]),t.city?e("p",[e("span",[i._v("用车城市")]),i._v(" "+i._s(t.city)+" ")]):i._e()])}))],2)}))],2)]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("其它需求")]),e("div",{staticClass:"context"},i._l(i.info.inquiry_sheet_other,(function(t,s){return e("div",{key:s,staticClass:"hyxq_item"},[e("p",[e("span",[i._v(i._s(t.custom_servicetypename)+" ")])]),e("p",[i._v("数量："+i._s(t.participatecount))]),t.describe?e("p",[i._v("需求备注："+i._s(t.describe))]):i._e()])})),0)])]),e("div",{staticClass:"line"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("附件")]),i._l(i.info.inquiry_sheet_attach,(function(t){return e("div",{key:t.id,staticClass:"context"},[e("a",{attrs:{target:"_blank",href:i.info.domain+t.filepath,download:""}},[i._v(i._s(t.filename))])])}))],2),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[i._v("其它需求信息或者注意事项")]),e("div",{staticClass:"context"},[e("span",[i._v(i._s(i.info.other))])])])])]),("0012-1"===i.info.status||"0012-6"===i.info.status)&&Date.parse(i.info.offerenddate)>new Date?e("div",{staticClass:"btn-group"},["0012-1"===i.info.status?e("el-button",{attrs:{type:"primary"},on:{click:i.goquotedprice}},[i._v("开始报价")]):e("el-button",{attrs:{type:"primary"},on:{click:function(t){return i.goquotedprice(1)}}},[i._v("重新报价")]),e("el-button",{attrs:{type:"danger"},on:{click:i.refusequoted}},[i._v("谢绝报价")])],1):i._e(),i.info.history_quotationprice&&i.info.history_quotationprice.length>0?e("div",{staticClass:"info"},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"header clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[i._v("您提交过"+i._s(i.info.history_quotationprice.length)+"次报价，以下为报价记录：")])]),i._l(i.info.history_quotationprice,(function(t,s){return e("div",{key:t.id,staticClass:"text item"},[i._v(" 第"+i._s(s+1)+"次报价 "),i._v(" ,总金额￥"+i._s(i.positiveFloat(t.total_amount).toFixed(2))+"元，[ "+i._s(i._f("date_ex")(t.offer_data))+" ] "),e("el-link",{staticClass:"quotedprice",attrs:{name:"quotedprice"},on:{click:function(s){return i.Quotedprice(t.id,0)}}},[i._v(" 查看报价单 "),e("i",{staticClass:"el-icon-view el-icon--right"})])],1)}))],2)],1):i._e(),e("el-dialog",{attrs:{title:"添加项目",visible:i.addProjectStatus,"before-close":function(i){t.itemData=null,i()},width:"700px"},on:{"update:visible":function(t){i.addProjectStatus=t}}},[i.addProjectStatus?e("projectAdded",{attrs:{"item-data":i.itemData},on:{onColse:i.projectSave}}):i._e()],1)],1)])},a=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label",staticStyle:{width:"100%","justify-content":"left"}},[t._v("客户需求")])])])}],n=(s("33d1"),s("ea98"),s("97aa")),o=s("cf45"),c={name:"ItineraryInfo",components:{projectAdded:n["a"]},data:function(){return{info:{},addProjectStatus:!1,itemData:null}},methods:{positiveFloat:o["m"],anewquotation:function(){var t=this,i=this;i.$confirm("是否确定更新报价?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.$api.AnewQuotation({id:i.info.object_id},"POST").then((function(s){s?i.goquotedprice():t.$message({message:"不能修改报价单!",type:"error"})}))}))},checkquotation:function(){var t=this.info.history_quotationprice.at(-1).id,i=this.$router.resolve({name:"DMCquotedprice",params:{id:t,isSubmit:0}});window.open(i.href,"_blank")},projectSave:function(t){var i=this;this.$api.projectsave(t,"POST").then((function(s){i.$message({message:t.id?"修改成功！":"添加成功！",type:"success"}),i.$router.push({name:"ItineraryManagement",params:{id:i.info.project_id}})}))},Quotedprice:function(t,i){var s=this.$router.resolve({name:"DMCquotedprice",params:{id:t,isSubmit:i}});window.open(s.href,"_blank")},Orderform:function(){this.$router.push({name:"orderInfo",params:{id:this.info.orderform_id}})},project:function(){this.info.project_id?this.$router.push({name:"ItineraryManagement",params:{id:this.info.project_id}}):this.addProjectStatus=!0},refusequoted:function(){var t=this;this.$prompt("请输入您谢绝报价的理由","谢绝报价",{confirmButtonText:"确定谢绝报价",showCancelButton:!1,inputPattern:/\S/,inputErrorMessage:"请填写谢绝报价的理由",inputType:"textarea"}).then((function(i){var s=i.value;t.$api.inquirysheetRefusequoted({id:t.info.object_id,reason:s},"POST").then((function(i){t.$message({message:"已拒绝报价",type:"success"}),location.reload()}))})).catch((function(){}))},goquotedprice:function(t){this.$router.push({name:"DMCquotedprice",params:{id:this.info.object_id,isSubmit:1,type:t}})}},mounted:function(){var t=this;this.$api.inquirysheetInfo({id:this.$route.params.id},"POST").then((function(i){t.info=i}))}},d=c,r=(s("e118"),s("2877")),l=Object(r["a"])(d,e,a,!1,null,"2a036203",null);i["default"]=l.exports},e118:function(t,i,s){"use strict";s("f919")},ea98:function(t,i,s){"use strict";var e=s("23e7"),a=s("e330"),n=s("1d80"),o=s("5926"),c=s("577e"),d=s("d039"),r=a("".charAt),l=d((function(){return"\ud842"!=="𠮷".at(-2)}));e({target:"String",proto:!0,forced:l},{at:function(t){var i=c(n(this)),s=i.length,e=o(t),a=e>=0?e:s+e;return a<0||a>=s?void 0:r(i,a)}})},f919:function(t,i,s){}}]);