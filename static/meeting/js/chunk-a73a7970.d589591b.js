(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a73a7970"],{"0b03":function(e,t,a){"use strict";a("4d90")},"0d4f":function(e,t,a){},"1f69":function(e,t,a){"use strict";a("725a")},"30f5":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"approve-page"},[t("div",{staticClass:"approve-page-body"},[t("div",{staticClass:"centerBox"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{staticClass:"el-breadcrumb-item",attrs:{to:{path:"/"}}},[e._v(" 首页 ")]),t("el-breadcrumb-item",{staticClass:"el-bread-item"},[e._v("其他配置")])],1),t("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{name:"first",label:"部门-会议类型设置"}},[t("approval")],1),t("el-tab-pane",{attrs:{name:"second",label:"报价结算规则配置"}},[t("quotationSettlement")],1),t("el-tab-pane",{attrs:{name:"third",label:"DMC-用户绑定配置"}},[t("DMCuserbind")],1),t("el-tab-pane",{attrs:{name:"fourth",label:"消息通知配置"}},[t("message")],1),t("el-tab-pane",{attrs:{name:"fifth",label:"会议附加信息配置"}},[t("otherMessage")],1),t("el-tab-pane",{attrs:{name:"sixth",label:"数据权限配置"}},[t("permissionConfig")],1)],1)],1)])])},i=[],l=a("52f1"),r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){return e.toPage()}}},[e._v("新增报价结算规则")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"company_name",label:"客户",width:"180"}}),t("el-table-column",{attrs:{prop:"eventtype",label:"会议类型",width:"180"}}),t("el-table-column",{attrs:{prop:"province_code",label:"会议城市"}}),t("el-table-column",{attrs:{prop:"servicerule",label:"服务费计算方式"}}),t("el-table-column",{attrs:{prop:"isrestore",label:"专票还原税前"}}),t("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.toPage(a.row)}}},[e._v("编辑")]),a.row.is_default?t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.deleteRule(a.row.id)}}},[e._v("删除")]):e._e(),t("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("span",[e._v("删除规则后不可恢复，请确认是否删除")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitDeleteRule()}}},[e._v("确 定")])],1)])]}}])})],1),t("el-pagination",{attrs:{"hide-on-single-page":"",background:"","current-page":e.pager,layout:"prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.pager=t},"update:current-page":function(t){e.pager=t}}})],1)},n=[],o=a("cf45"),u={data(){return{tableData:[],pager:1,total:0,dialogVisible:!1,id:""}},mounted(){this.getRuleList()},watch:{pager(e,t){this.getRuleList()}},methods:{guid:o["k"],getRuleList(){this.$api.getRuleList({pageIndex:this.pager,pageSize:10},"POST").then(e=>{this.tableData=e.EvetModels,this.pager=e.pageInfo.pageIndex,this.total=e.pageInfo.totalCount})},toPage(e){e?this.$router.push({name:"quotationSettlementEditor",params:{type:e.is_default,id:e.id,company_name:e.company_name,addOrEdit:0}}):this.$router.push({name:"quotationSettlementEditor",params:{type:1,id:this.guid(),company_name:"increase",addOrEdit:1}})},submitDeleteRule(){this.$api.ruleDelete({RuleID:this.id},"POST").then(e=>{e?this.$message({message:"删除成功",type:"success"}):this.$message.error("删除失败"),this.dialogVisible=!1,this.getRuleList()})},deleteRule(e){this.id=e,this.dialogVisible=!0}}},c=u,p=(a("1f69"),a("0b56")),d=Object(p["a"])(c,r,n,!1,null,"4fc5a059",null),m=d.exports,h=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{attrs:{model:e.searchFormData,"label-width":"120px"}},[t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"DMC供应商名称"}},[t("el-input",{staticClass:"demand_170",attrs:{size:"small",clearable:"",placeholder:"请输入名称模糊查询"},model:{value:e.searchFormData.name,callback:function(t){e.$set(e.searchFormData,"name",t)},expression:"searchFormData.name"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"绑定用户"}},[t("div",{staticStyle:{display:"flex"}},[t("el-select",{staticStyle:{width:"100px"},attrs:{size:"small"},on:{change:e.isnullChange},model:{value:e.searchFormData.isnull,callback:function(t){e.$set(e.searchFormData,"isnull",t)},expression:"searchFormData.isnull"}},[t("el-option",{attrs:{label:"全部",value:-1}}),t("el-option",{attrs:{label:"不为空",value:0}}),t("el-option",{attrs:{label:"为空",value:1}})],1),t("el-input",{directives:[{name:"show",rawName:"v-show",value:-1==e.searchFormData.isnull||0==e.searchFormData.isnull,expression:"searchFormData.isnull==-1 || searchFormData.isnull==0"}],staticClass:"demand_170",attrs:{size:"small",clearable:"",placeholder:"请输入账号模糊查询"},model:{value:e.searchFormData.username,callback:function(t){e.$set(e.searchFormData,"username",t)},expression:"searchFormData.username"}})],1)])],1),t("el-col",{attrs:{span:6,align:"right"}},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.getDataList(1)}}},[e._v("搜 索")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.getDataList(2)}}},[e._v("重 置")])],1)],1)],1),t("el-table",{staticStyle:{height:"380px"},attrs:{border:"",data:e.userbidData}},[t("el-table-column",{attrs:{label:"DMC供应商名称 ",prop:"company_name",align:"center",width:"350px","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"地址",prop:"company_address",align:"center",width:"330","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"绑定用户账号",prop:"username",align:"center",formatter:"","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",prop:"",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.updateBind(a.row)}}},[e._v("更新绑定用户")])]}}])})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.pageInfo.totalCount},on:{"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"更新绑定用户",visible:e.dialogVisible,top:"30vh",width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticStyle:{"line-height":"40px"}},[t("p",{staticClass:"flex_row"},[t("span",{staticStyle:{width:"150px"}},[e._v("DMC供应商名称：")]),t("span",[e._v(" "+e._s(e.updateInfo.company_name)+" ")])]),t("p",{staticClass:"flex_row"},[t("span",{staticStyle:{width:"150px"}},[e._v("地址：")]),t("span",[e._v(" "+e._s(e.updateInfo.company_address))])]),t("p",{staticClass:"flex_row"},[t("span",{staticStyle:{width:"150px"}},[e._v("绑定用户账号：")]),t("el-select",{attrs:{size:"mini",filterable:"",multiple:"",placeholder:"请选择"},model:{value:e.updateInfo.username,callback:function(t){e.$set(e.updateInfo,"username",t)},expression:"updateInfo.username"}},e._l(e.userOptionsList,(function(e){return t("el-option",{key:e.username,attrs:{label:e.fullname,value:e.username}})})),1)],1),t("p",{staticStyle:{color:"#999","line-height":"20px",margin:"20px 0"}},[e._v("注释：更新绑定用户后，当前供应商的历史询、报价、订单、结算单信息只有新绑定用户可见")])]),t("div",{staticStyle:{"text-align":"center"}},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveUpdateInfo}},[e._v("保 存")]),t("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)])],1)},g=[],b={data:function(){return{searchFormData:{pageIndex:1,pageSize:10,name:"",isnull:-1,username:""},isEmpty:1,userbidData:[{id:"",name:"昆明中国国际旅行社有限公司",address:"云南省昆明市环城南路1118号",username:"service001"},{id:"",name:"中国国旅（武汉）国际旅行社有限公司",address:"湖北省武汉市硚口区古田四路江城壹号文化创意园10号楼",username:"service002"},{id:"",name:"中国国旅（辽宁）国际旅行社有限公司",address:"沈阳市和平区南京北街65号华银大厦13层",username:"service003"},{id:"",name:"中国国旅（宁波）国际旅行社有限公司",address:"宁波市海曙区开明街396号平安大厦12楼",username:"service004"},{id:"",name:"中国国旅（青岛）国际旅行社有限公司",address:"青岛市市北区连云港路33号B座5层517-520室",username:"service005"}],userOptionsList:[],updateInfo:{id:"",name:"",address:"",username:""},pageInfo:{totalCount:0},dialogVisible:!1}},mounted(){this.getDataList(),this.GetUser()},methods:{handleCurrentChange(e){this.searchFormData.pageIndex=e,console.log("当前页: "+e),this.getDataList()},getDataList(e){2==e&&(this.searchFormData.name="",this.searchFormData.isnull=-1,this.searchFormData.username=""),this.$api.GetServiceProviderUser(this.searchFormData,"POST").then(e=>{this.userbidData=e.EvetModels,this.pageInfo=e.pageInfo})},GetUser(){this.$api.GetUser({},"POST").then(e=>{this.userOptionsList=e})},isnullChange(e){1==e&&(this.searchFormData.username="")},updateBind(e){this.dialogVisible=!0,this.updateInfo={...e},this.updateInfo.username=this.updateInfo.username.split(",")},saveUpdateInfo(){let e={ID:this.updateInfo.id,UserName:this.updateInfo.username.join()};this.$api.ServiceProviderEditUser(e,"POST").then(e=>{e?(this.$message.success("修改成功"),this.dialogVisible=!1,this.getDataList()):this.$message.error("已经有其他服务商使用该用户")})},userFormatter(e){let t="",a=e.username.split(",");return this.userOptionsList.forEach(e=>{a.forEach(a=>{a==e.username&&(t.length>0?t+="，"+e.fullname:t=e.fullname)})}),t}}},f=b,v=(a("0b03"),Object(p["a"])(f,h,g,!1,null,null,null)),y=v.exports,_=function(){var e=this,t=e._self._c;return t("div",[e._v(" 消息通知配置 ")])},w=[],x={},D=Object(p["a"])(x,_,w,!1,null,null,null),S=D.exports,k=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"permission_header"},[t("el-button",{staticClass:"add_button",attrs:{type:"primary"},on:{click:e.addPermission}},[e._v("新增用户组")])],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableInfo.EvetModels}},[t("el-table-column",{attrs:{align:"left",prop:"group_user_name",label:"用户组名称",width:"160"}}),t("el-table-column",{attrs:{align:"center",label:"组内用户",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticStyle:{color:"blue",cursor:"pointer"},on:{click:function(t){return e.member(a.$index,a.row)}}},[e._v(e._s(a.row.counts))])]}}])}),t("el-table-column",{attrs:{align:"center",prop:"group_user_type",label:"类型",width:"180"}}),t("el-table-column",{attrs:{align:"center",prop:"group_user_remarks",label:"备注",width:"180"}}),t("el-table-column",{attrs:{align:"right",label:"操作",width:"420"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.edit(a.$index,a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.member(a.$index,a.row)}}},[e._v("组员管理")]),1!=a.row.grouptype?t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.customer(a.$index,a.row)}}},[e._v("客户权限")]):e._e(),1!=a.row.grouptype?t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.report(a.$index,a.row)}}},[e._v("报表权限")]):e._e(),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.del(a.$index,a.row)}}},[e._v("删除")])]}}])})],1),e.tableInfo.EvetModels.length?t("el-pagination",{staticStyle:{"margin-top":"30px",width:"100%","text-align":"center"},attrs:{"current-page":e.pageIndex,"page-size":e.pageSize,background:"",layout:"total, prev, pager, next",total:e.tableInfo.pageInfo.totalCount},on:{"current-change":e.currentChange}}):e._e()],1)},C=[],I={components:{},data:function(){return{pageIndex:1,pageSize:10,tableInfo:{EvetModels:[],pageInfo:{totalCount:0}}}},mounted(){this.getList()},methods:{getList(){this.$api.GetUserGroupList({pageIndex:this.pageIndex,pageSize:this.pageSize},"POST").then(e=>{this.tableInfo=e})},addPermission(){this.$router.push({name:"addeditUsergroup",query:{}})},edit(e,t){this.$router.push({name:"addeditUsergroup",query:{id:t.id}})},member(e,t){this.$router.push({name:"membermanage",query:{id:t.id}})},customer(e,t){this.$router.push({name:"customermanage",query:{id:t.id}})},report(e,t){this.$router.push({name:"reportmanage",query:{id:t.id}})},del(e,t){this.$confirm("请确认是否执行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$api.DeleteUserGroupDate({usergroup_id:t.id},"POST").then(e=>{this.$message.success("删除成功"),this.pageIndex=1,this.pageSize=10,this.getList()}).catch(()=>{})})},currentChange(e){this.pageIndex=e,this.getList()}}},$=I,L=(a("b4dc"),Object(p["a"])($,k,C,!1,null,null,null)),z=L.exports,F=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){return e.toPage()}}},[e._v("新增附加信息规则配置")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"}}},[t("el-table-column",{attrs:{prop:"cusname",label:"客户",width:"380"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.isdefault?"ALL":t.row.cusname)+" ")]}}])}),t("el-table-column",{attrs:{prop:"fieldcount",label:"自定义字段",width:"180"}}),t("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.toPage(a.row)}}},[e._v("编辑")]),t("div",{staticStyle:{display:"inline-block","margin-left":"10px",width:"56px"}},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:!a.row.isdefault,expression:"!scope.row.isdefault"}],attrs:{size:"small"},on:{click:function(t){return e.deleteRule(a.row.id)}}},[e._v("删除")])],1),t("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("span",[e._v("删除规则后不可恢复，请确认是否删除")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitDeleteRule()}}},[e._v("确 定")])],1)])]}}])})],1),t("el-pagination",{attrs:{"hide-on-single-page":"",background:"","current-page":e.pager,layout:"prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.pager=t},"update:current-page":function(t){e.pager=t}}})],1)},O=[],P={data(){return{tableData:[],pager:1,total:0,dialogVisible:!1,id:""}},mounted(){this.getSelfformList()},watch:{pager(e,t){this.getSelfformList()}},methods:{guid:o["k"],getSelfformList(){this.$api.getSelfformList({},"POST").then(e=>{this.tableData=e.list})},toPage(e){e?this.$router.push({path:"/otherMessageSeetingEditor",query:{isdefault:e.isdefault,id:e.id,addOrEdit:0}}):this.$router.push({path:"/otherMessageSeetingEditor",query:{isdefault:0,id:this.guid(),addOrEdit:1}})},submitDeleteRule(){this.$api.DeleteSelfForm({id:this.id},"POST").then(e=>{e?this.$message({message:"删除成功",type:"success"}):this.$message.error("删除失败"),this.dialogVisible=!1,this.getSelfformList()})},deleteRule(e){this.id=e,this.dialogVisible=!0}}},V=P,E=(a("6091"),Object(p["a"])(V,F,O,!1,null,"5fa00d20",null)),M=E.exports,R={components:{approval:l["default"],DMCuserbind:y,message:S,quotationSettlement:m,otherMessage:M,permissionConfig:z},data:function(){return{activeName:"first"}},methods:{},mounted(){this.$route.params.activeName&&(this.activeName=this.$route.params.activeName)}},U=R,q=(a("7a40"),Object(p["a"])(U,s,i,!1,null,null,null));t["default"]=q.exports},"4d90":function(e,t,a){},"587b":function(e,t,a){},6091:function(e,t,a){"use strict";a("587b")},"725a":function(e,t,a){},"7a40":function(e,t,a){"use strict";a("0d4f")},b4dc:function(e,t,a){"use strict";a("b9c7")},b9c7:function(e,t,a){}}]);