(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-600fc3ed"],{"676f":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"approve-page-body",staticStyle:{"padding-top":"40px"}},[i("div",{staticClass:"centerBox"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{staticClass:"el-breadcrumb-item",attrs:{to:{path:"/"}}},[e._v(" 首页 ")]),i("el-breadcrumb-item",{staticClass:"el-bread-item",attrs:{to:{path:"/otherSettings"}}},[e._v(" 其他配置 ")]),i("el-breadcrumb-item",{staticClass:"el-bread-item"},[e._v(" 客户权限 ")])],1)],1)]),i("div",{staticClass:"search_area"},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("div",{staticStyle:{width:"80px"}},[e._v("客户名称")]),i("el-input",{attrs:{placeholder:"输入客户名称模糊查询",size:"mini",type:"text"},model:{value:e.customername,callback:function(t){e.customername=t},expression:"customername"}})],1),i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:e.query}},[e._v("查询")]),i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"mini"},on:{click:e.reset}},[e._v("重置")]),i("el-button",{staticStyle:{"margin-left":"80px"},attrs:{type:"primary",size:"mini"},on:{click:e.addUser}},[e._v("添加客户权限")]),i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:e.batchDel}},[e._v("批量移除客户权限")])],1),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableInfo.EvetModels,"tooltip-effect":"dark"},on:{"selection-change":e.userSelection}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{prop:"name",label:"客户名称",width:"220"}}),i("el-table-column",{attrs:{prop:"group_user_name",label:"所属用户组",width:"120"}}),i("el-table-column",{attrs:{label:"操作",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.delUser(t.$index,t.row)}}},[e._v("移除客户权限")])]}}])})],1),e.tableInfo.EvetModels.length?i("el-pagination",{staticStyle:{"margin-top":"30px",width:"100%","text-align":"center"},attrs:{"hide-on-single-page":!0,"current-page":e.pageIndex,"page-size":e.pageSize,background:"",layout:"total, prev, pager, next",total:e.tableInfo.pageInfo.totalCount},on:{"current-change":e.currentChange}}):e._e(),i("el-dialog",{attrs:{title:"请选择",visible:e.dialogVisible,width:"70%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"grid_content"},[i("div",{staticClass:"choose_area"},[i("div",{staticClass:"search_condition"},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("div",{staticStyle:{width:"80px"}},[e._v("客户名称")]),i("el-input",{attrs:{size:"mini",type:"text"},model:{value:e.grid.customer,callback:function(t){e.$set(e.grid,"customer",t)},expression:"grid.customer"}})],1),i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:e.queryGrid}},[e._v("查询")])],1),i("div",{staticClass:"search_result"},[i("el-table",{ref:"gridMultipleTable",staticStyle:{width:"100%"},attrs:{data:e.gridResult.EvetModels,"tooltip-effect":"dark",height:"250","header-cell-class-name":e.cellClass},on:{select:e.onTableSelect}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{prop:"name",label:"客户名称",width:"220"}})],1),e.gridResult.EvetModels.length?i("el-pagination",{staticStyle:{"margin-top":"30px",width:"100%","text-align":"center"},attrs:{small:!0,"hide-on-single-page":!0,"current-page":e.grid.pageIndex,"page-sizes":[5,10,20,30],"page-size":e.grid.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.gridResult.pageInfo.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)]),i("div",{staticClass:"result_area"},[i("div",{staticClass:"result_area_btn"},[i("div",[e._v("已选择列表")]),i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-delete"},on:{click:e.delChoose}},[e._v("删除选中")])],1),i("ul",{staticClass:"result_area_list"},e._l(e.chooseList,(function(t){return i("li",{key:t.id,style:t.chooseSave?"":"background:#99ccff",on:{click:function(i){return e.chooseData(t)}}},[e._v(e._s(t.name))])})),0)])]),i("span",{staticClass:"dialog-footer",staticStyle:{display:"flex","justify-content":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.saveGrid}},[e._v("确 定")])],1)])],1)},n=[],a=(i("d3b7"),i("159b"),i("a15b"),i("d81d"),i("4de4"),i("c740"),i("a434"),{data:function(){return{id:"",customername:"",pageIndex:1,pageSize:10,tableInfo:{EvetModels:[],pageInfo:{totalCount:0}},batchList:[],dialogVisible:!1,grid:{customer:"",pageIndex:1,pageSize:10},gridResult:{EvetModels:[],pageInfo:{totalCount:0}},chooseList:[]}},mounted:function(){this.id=this.$route.query.id,this.getCustomerGroupList()},methods:{getCustomerGroupList:function(){var e=this;this.$api.GetCustomerGroupList({usergroup_id:this.id,customername:this.customername,pageIndex:this.pageIndex,pageSize:this.pageSize},"POST").then((function(t){e.tableInfo=t}))},userSelection:function(e){this.batchList=e},query:function(){this.getCustomerGroupList()},reset:function(){this.customername="",this.pageIndex=1,this.pageSize=10,this.getCustomerGroupList()},batchDel:function(){var e=this;if(!this.batchList.length)return this.$message.success("未选中需要操作的记录！"),!1;this.$confirm("是否将选中客户权限移除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=[];e.batchList.forEach((function(e){t.push(e.customerid)})),e.$api.DeleteCustomerDate({usergroup_id:e.id,customerid:t.join(",")},"POST").then((function(t){t&&e.$message.success("删除成功"),e.batchList=[],e.reset()}))}))},delUser:function(e,t){var i=this;this.$confirm("是否将当前客户权限移除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.$api.DeleteCustomerDate({usergroup_id:i.id,customerid:t.customerid},"POST").then((function(e){e&&i.$message.success("删除成功"),i.reset()}))}))},currentChange:function(e){this.pageIndex=e,this.getCustomerGroupList()},getUserlist:function(e){var t=this;this.$api.GetCustomerList(this.grid,"POST").then((function(i){i.EvetModels=i.EvetModels.map((function(e){return e.chooseSave=0,e})),t.gridResult=i,e&&(t.dialogVisible=!0),t.$nextTick((function(){t.gridResult.EvetModels.forEach((function(e){var i=t.chooseList.filter((function(t){return t.id==e.id}));i&&i.length?t.$refs.gridMultipleTable.toggleRowSelection(e,!0):t.$refs.gridMultipleTable.toggleRowSelection(e,!1)}))}))}))},cellClass:function(e){if(0===e.columnIndex)return"disableheadselection"},addUser:function(){this.getUserlist(!0)},judgeUserData:function(e,t){var i=this.chooseList.findIndex((function(t){return e.id==t.id}));-1==i&&t&&(e.chooseSave=1,this.chooseList.push(e)),-1==i||t||this.chooseList.splice(i,1)},queryGrid:function(){this.grid.pageIndex=1,this.grid.pageSize=10,this.getUserlist()},handleClose:function(){this.resetSearch(),this.dialogVisible=!1},handleSizeChange:function(e){this.grid.pageSize=e,this.getUserlist()},onTableSelect:function(e,t){var i=e.findIndex((function(e){return e.id==t.id}));-1!=i?this.judgeUserData(t,!0):this.judgeUserData(t,!1)},delChoose:function(){var e=this;this.chooseList.forEach((function(t,i){0==t.chooseSave&&e.chooseList.splice(i,1)})),this.$nextTick((function(){e.gridResult.EvetModels.forEach((function(t){var i=e.chooseList.filter((function(e){return e.id==t.id}));i&&i.length?e.$refs.gridMultipleTable.toggleRowSelection(t,!0):e.$refs.gridMultipleTable.toggleRowSelection(t,!1)}))}))},chooseData:function(e){e.chooseSave=e.chooseSave?0:1},handleCurrentChange:function(e){this.grid.pageIndex=e,this.getUserlist()},resetSearch:function(){this.grid={customer:"",pageIndex:1,pageSize:10},this.chooseList=[]},saveGrid:function(){var e=this;if(!this.chooseList.length)return this.$message.success("请先选择客户"),!1;var t=[];this.chooseList.forEach((function(e){t.push(e.id)})),this.$api.PostCustomerDate({Usergroup_id:this.id,customerid:t.join(",")},"POST").then((function(t){e.$message.success(t.info),e.handleClose(),e.reset()}))}}}),o=a,r=(i("8dad"),i("2877")),l=Object(r["a"])(o,s,n,!1,null,"76c01852",null);t["default"]=l.exports},"8dad":function(e,t,i){"use strict";i("bcc4")},a434:function(e,t,i){"use strict";var s=i("23e7"),n=i("da84"),a=i("23cb"),o=i("5926"),r=i("07fa"),l=i("7b0b"),c=i("65f0"),u=i("8418"),d=i("1dde"),h=d("splice"),g=n.TypeError,p=Math.max,f=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!h},{splice:function(e,t){var i,s,n,d,h,v,y=l(this),x=r(y),S=a(e,x),C=arguments.length;if(0===C?i=s=0:1===C?(i=0,s=x-S):(i=C-2,s=f(p(o(t),0),x-S)),x+i-s>m)throw g(b);for(n=c(y,s),d=0;d<s;d++)h=S+d,h in y&&u(n,d,y[h]);if(n.length=s,i<s){for(d=S;d<x-s;d++)h=d+s,v=d+i,h in y?y[v]=y[h]:delete y[v];for(d=x;d>x-s+i;d--)delete y[d-1]}else if(i>s)for(d=x-s;d>S;d--)h=d+s-1,v=d+i-1,h in y?y[v]=y[h]:delete y[v];for(d=0;d<i;d++)y[d+S]=arguments[d+2];return y.length=x-s+i,n}})},bcc4:function(e,t,i){},c740:function(e,t,i){"use strict";var s=i("23e7"),n=i("b727").findIndex,a=i("44d2"),o="findIndex",r=!0;o in[]&&Array(1)[o]((function(){r=!1})),s({target:"Array",proto:!0,forced:r},{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),a(o)},d81d:function(e,t,i){"use strict";var s=i("23e7"),n=i("b727").map,a=i("1dde"),o=a("map");s({target:"Array",proto:!0,forced:!o},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);