(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19098267"],{"07ed":function(t,e,i){"use strict";i("bfc4")},"0e2b":function(t,e,i){},"0e5c":function(t,e,i){"use strict";i("d3b7");var a=i("5829"),s=i("2b0e");e["a"]=function(t){return new Promise((function(e,i){var n=[],r={},o=t.length;console.log(t.length,t);var l=function i(){return 0==t.length?e(n):String(t[0].file).IsPicture()?(t.shift(),i()):void a["a"].upload({file:t[0].file},"POST",{type:"form"}).then((function(a){console.log(a);var l=!0;if(void 0!=a&&""==a.FilePath&&""==a.OriginalFileName&&(console.log("重复了"),a=void 0,l=!1),void 0==a&&l){s["default"].prototype.$alert("网络不稳定, 文件上传失败, 请重新上传","提示",{confirmButtonText:"确定",callback:function(t){s["default"].prototype.$message({message:"上传失败的文件已标记",type:"warning"})}});var c=o-t.length;return e({tag:c,uploadImageList:n})}r=a,n.push(r),t.shift(),i()}))};l()}))}},3124:function(t,e,i){"use strict";i("0e2b")},9853:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"qualification-added"},[i("el-form",{ref:"ruleForm",attrs:{"label-width":"110px",model:t.FormData,rules:t.rules}},[i("el-form-item",{attrs:{label:"资质名称",prop:"type"}},[i("el-radio-group",{model:{value:t.FormData.type,callback:function(e){t.$set(t.FormData,"type",e)},expression:"FormData.type"}},t._l(t.namesData,(function(e){return i("el-radio",{key:e.name,attrs:{label:e.code}},[t._v(t._s(e.name))])})),1)],1),i("el-form-item",{attrs:{label:"资质名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"资质名称"},model:{value:t.FormData.name,callback:function(e){t.$set(t.FormData,"name",e)},expression:"FormData.name"}})],1),i("el-form-item",{attrs:{label:"上传资质图片",prop:"picture"}},[i("el-upload",{ref:"upload",attrs:{action:"","on-change":t.handleChangeAttach,"on-remove":t.handleRemoveAttach,"auto-upload":!1,"file-list":this.waitUpload,multiple:!1,accept:".jpg,.jpeg,.png"}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("从电脑选择文件")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件,大小不超过2M ")]),i("div",{staticClass:"yl"},[t.FormData.picture?i("img",{attrs:{src:t.FormData.picture,alt:""}}):t._e()])],1)],1),i("div",{staticClass:"btnGroup"},[i("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v(t._s(null==t.itemData?"立即添加":"确认修改"))])],1)],1)],1)},s=[],n=(i("e9c4"),i("ac1f"),i("1276"),i("d3b7"),i("159b"),i("0e5c")),r={props:{itemData:null|JSON,namesData:null|JSON},data:function(){return{FormData:{name:"",picture:""},waitUpload:[],rules:{name:[{required:!0,message:"请输入资质名称",trigger:"change"}]}}},mounted:function(){null!=this.itemData&&(this.FormData=JSON.parse(JSON.stringify(this.itemData)),this.FormData.picture=this.FormData.picture.split(","))},methods:{add:function(){var t=this;this.$refs["ruleForm"].validate((function(e){if(!e)return console.log("error submit!!"),!1;var i=[];t.waitUpload.forEach((function(t,e){var a={key:e,file:t.raw};i.push(a)})),Object(n["a"])(i).then((function(e){console.log(e);var i=[];e.forEach((function(t){i.push(t.FilePath)})),t.FormData.picture=i.toString(),t.$emit("onColse",t.FormData)}))}))},handleChangeAttach:function(t,e){var i="image/jpeg"===t.raw.type,a="image/png"===t.raw.type,s=t.size/1024/1024<2;if(console.log(i),console.log(a),console.log(s),!i&&!a||!s)return i&&a?this.$message.error("上传图片大小不能超过 2MB!"):this.$message.error("上传图片只能是 JPG 或者 PNG 格式!"),void this.$refs.upload.handleRemove(t);this.waitUpload=e},handleRemoveAttach:function(t,e){this.waitUpload=e}}},o=r,l=(i("3124"),i("2877")),c=Object(l["a"])(o,a,s,!1,null,"7057475c",null);e["a"]=c.exports},"9c98":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hotleIndex"},[i("div",{staticClass:"section"},[i("div",{staticClass:"path"},[i("ul",[i("li",{staticStyle:{color:"#409EFF",cursor:"pointer"},on:{click:function(e){return t.$router.go(-1)}}},[t._v(" 采购需求 ")]),i("li",{staticStyle:{color:"#7c7f82"}},[t._v(">")]),i("li",{staticStyle:{color:"#7c7f82"}},[t._v("找服务商")])])]),i("div",{staticClass:"search"},[i("a",{class:{select:!t.listFormData.isagreement},attrs:{href:"javascript:void(0)"},on:{click:t.searchall}},[t._v("所有服务商")]),i("a",{class:{select:t.listFormData.isagreement},attrs:{href:"javascript:void(0)"},on:{click:t.searchagreement}},[t._v("公司协议服务商")]),i("div",{staticClass:"R global-search"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.listFormData.keyword,expression:"listFormData.keyword"}],staticClass:"text br2 new-search-input",attrs:{placeholder:"输入服务商名称或关键词",type:"text",name:"keyword"},domProps:{value:t.listFormData.keyword},on:{input:function(e){e.target.composing||t.$set(t.listFormData,"keyword",e.target.value)}}}),i("i",{staticClass:"el-icon-search"}),i("input",{staticClass:"btn br4 btn-primary",attrs:{type:"submit",id:"top_search",value:"搜索"},on:{click:t.getList}})]),i("div",{staticClass:"clear"})]),i("div",{staticClass:"typeList"},[null!=t.type.city?i("div",{staticClass:"item"},[i("div",{staticClass:"name"},[t._v("选择城市")]),i("div",{staticClass:"context"},[i("div",{staticClass:"item",class:{current:0==t.listFormData.city.length},on:{click:function(e){return t.selectedCity()}}},[t._v(" 不限 ")]),t._l(t.type.city[0].city_list,(function(e){return i("div",{key:e.code,staticClass:"item",class:{current:-1!=t.listFormData.city.findIndex((function(t){return t.code==e.code}))},on:{click:function(i){return t.selectedCity(e.code)}}},[t._v(" "+t._s(e.AbbreviationName)+" ")])})),t._l(t.type.city,(function(e){return["热门"!=e.Key&&t.statusList.cityStatus?i("div",{key:e.Key,staticClass:"more"},[i("div",{staticClass:"moreTitle"},[t._v(t._s(e.Key))]),i("div",{staticClass:"moreItems"},t._l(e.city_list,(function(e){return i("div",{key:e.code,staticClass:"item",class:{current:-1!=t.listFormData.city.findIndex((function(t){return t.code==e.code}))},on:{click:function(i){return t.selectedCity(e.code)}}},[t._v(" "+t._s(e.AbbreviationName)+" ")])})),0)]):t._e()]}))],2),i("div",{staticClass:"opt"},[i("el-button",{attrs:{type:t.statusList.cityStatus?"warning":"success",size:"mini"},on:{click:function(e){t.statusList.cityStatus=!t.statusList.cityStatus}}},[t._v(" "+t._s(t.statusList.cityStatus?"收起":"展开")+" ")])],1)]):t._e()]),i("div",{staticClass:"botContext"},[i("div",{staticClass:"hotelList"},[i("div",{staticClass:"number"},[t._v(" 共 "),i("span",[t._v(t._s(t.hotel.Counts))]),t._v(" 家服务商 ")]),i("div",{staticClass:"list"},t._l(t.hotel.List,(function(e){return i("div",{key:e.id,staticClass:"item"},[i("img",{attrs:{src:e.company_logo,alt:""}}),i("div",{staticClass:"center"},[i("div",{staticClass:"name"},[t._v(t._s(e.company_name))]),i("div",{staticClass:"address"},[t._v("服务范围: "+t._s(e.cityname))]),i("div",{staticClass:"other"},[i("p",[t._m(0,!0),t._v(" "+t._s(e.customer_service_name)+" ")]),i("p",[t._m(1,!0),t._v(" "+t._s(e.customer_service_telephone_numbers)+" ")]),i("p",[t._m(2,!0),t._v(" "+t._s(e.company_email)+" ")])]),i("div",{staticClass:"profile"},[t._v(t._s(e.company_profile))])]),i("div",{staticClass:"right"},[t._e(),t.routeType?i("div",{staticClass:"bottom"},[-1==t.HotelSelectedList.findIndex((function(t){return t.id==e.id}))?i("el-button",{attrs:{type:"warning"},on:{click:function(i){return t.selected(e)}}},[t._v("邀请询价")]):i("el-button",{attrs:{type:"info"},on:{click:function(i){return t.selected(e)}}},[t._v("取消邀请")])],1):t._e()])])})),0),i("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next",total:t.hotel.Counts},on:{"current-change":t.sizeChange}})],1),t.routeType?i("div",{staticClass:"right"},[i("div",{staticClass:"selectedHotel"},[i("div",{staticClass:"title"},[t._v("已选择目标服务商")]),i("div",{staticClass:"context"},[0==t.HotelSelectedList.length?i("div",{staticClass:"tips"},[t._v("暂未选择目标服务商")]):t._e(),t._l(t.HotelSelectedList,(function(e){return i("div",{key:""+e.id,staticClass:"item"},[i("div",{staticClass:"company_name"},[t._v(t._s(e.company_name))]),i("i",{staticClass:"el-icon-delete-solid",on:{click:function(i){return t.cancel(e)}}})])}))],2),i("div",{staticClass:"buttons"},[i("el-button",{staticStyle:{width:"100%"},attrs:{type:"warning"},on:{click:t.Inquiry}},[t._v("一键询价")])],1)])]):t._e()])])])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[i("i",{staticClass:"el-icon-user"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[i("i",{staticClass:"el-icon-phone-outline"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[i("i",{staticClass:"el-icon-upload2"})])}],n=(i("c740"),i("a434"),i("4de4"),i("d3b7"),i("9853")),r={name:"Qualification",components:{qualificationAdded:n["a"]},data:function(){return{routeType:null,HotelSelectedList:[],type:{city:null,sitetype:null,brand:null,venuearea:null,venuepeoplenumber:null,roomprice:null},statusList:{cityStatus:!1,brandStatus:!1},listFormData:{city:[],keyword:"",isagreement:!1,Page:1,Rows:10},hotel:{Counts:0,CurrentPage:0,List:[],PageCount:0},test:100}},computed:{},methods:{Inquiry:function(){var t=this;0!==this.HotelSelectedList.length?this.$api.selectserviceprovider({serviceprovider:this.HotelSelectedList},"POST").then((function(e){t.$router.push({name:"ServiceProviderProcurement",params:{id:t.$route.params.id,type:t.$route.params.type}})})):this.$message({message:"至少选择一家服务商",type:"warning"})},cancel:function(t){var e=this.HotelSelectedList.findIndex((function(e){return e.id==t.id}));e>-1&&this.HotelSelectedList.splice(e,1)},selected:function(t){var e=this.HotelSelectedList.findIndex((function(e){return e.id==t.id}));-1==e?this.HotelSelectedList.push({id:t.id,company_name:t.company_name,company_email:t.company_email}):this.HotelSelectedList.splice(e,1)},jumpInfo:function(t){},getList:function(){var t=this;this.$api.serviceproviderlist(this.listFormData,"POST").then((function(e){t.hotel=e}))},sizeChange:function(t){this.listFormData.Page=t,this.getList()},selectedCity:function(t){t?-1==this.listFormData.city.findIndex((function(e){return e.code===t}))?this.listFormData.city.push({code:t}):this.listFormData.city=this.listFormData.city.filter((function(e){return e.code!=t})):this.listFormData.city=[],this.listFormData.Page=1,this.getList()},searchall:function(){this.listFormData.Page=1,this.listFormData.isagreement=!1,this.getList()},searchagreement:function(){this.listFormData.Page=1,this.listFormData.isagreement=!0,this.getList()}},mounted:function(){var t=this;this.routeCity=this.$route.params.city,this.routeCity&&this.selectedCity(this.routeCity),this.routeType=this.$route.params.type,this.routeType&&this.$api.getserviceprovider({},"POST").then((function(e){e.length>0?t.HotelSelectedList=e:t.HotelSelectedList=[]})),this.getList(),this.$api.serviceprovidercity({},"POST").then((function(e){t.type.city=e.city}))}},o=r,l=(i("07ed"),i("2877")),c=Object(l["a"])(o,a,s,!1,null,"3032fb5b",null);e["default"]=c.exports},a434:function(t,e,i){"use strict";var a=i("23e7"),s=i("da84"),n=i("23cb"),r=i("5926"),o=i("07fa"),l=i("7b0b"),c=i("65f0"),u=i("8418"),d=i("1dde"),m=d("splice"),p=s.TypeError,h=Math.max,f=Math.min,v=9007199254740991,y="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!m},{splice:function(t,e){var i,a,s,d,m,g,_=l(this),C=o(_),b=n(t,C),F=arguments.length;if(0===F?i=a=0:1===F?(i=0,a=C-b):(i=F-2,a=f(h(r(e),0),C-b)),C+i-a>v)throw p(y);for(s=c(_,a),d=0;d<a;d++)m=b+d,m in _&&u(s,d,_[m]);if(s.length=a,i<a){for(d=b;d<C-a;d++)m=d+a,g=d+i,m in _?_[g]=_[m]:delete _[g];for(d=C;d>C-a+i;d--)delete _[d-1]}else if(i>a)for(d=C-a;d>b;d--)m=d+a-1,g=d+i-1,m in _?_[g]=_[m]:delete _[g];for(d=0;d<i;d++)_[d+b]=arguments[d+2];return _.length=C-a+i,s}})},bfc4:function(t,e,i){},c740:function(t,e,i){"use strict";var a=i("23e7"),s=i("b727").findIndex,n=i("44d2"),r="findIndex",o=!0;r in[]&&Array(1)[r]((function(){o=!1})),a({target:"Array",proto:!0,forced:o},{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n(r)}}]);