(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c9d385c"],{7787:function(e,t,a){},e396:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"event_list"},[t("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"我创建的会议",name:"0"}}),t("el-tab-pane",{attrs:{label:"我负责的会议",name:"1"}}),t("el-tab-pane",{attrs:{label:"我采购的",name:"2"}}),t("el-tab-pane",{attrs:{label:"全部会议",name:"3"}}),t("el-tab-pane",{attrs:{label:"我的草稿",name:"4"}})],1),t("div",{staticStyle:{padding:"5px 0px"}},[t("screen",{ref:"screen_",attrs:{filtrate:e.filtrate},on:{screen:e.screen,reset:e.reset}}),t("mettingList",{ref:"mettingList",attrs:{tableData:e.tableData,columns:e.columns,operate:e.operate},on:{classifyName:e.classifyName,handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.newMessageShow,expression:"newMessageShow"}],ref:"newMessageBox",staticClass:"newMessageBox",on:{mouseover:function(t){e.newMessageShow=!0},mouseleave:function(t){e.newMessageShow=!1}}},[t("div",{staticStyle:{"font-size":"20px",color:"#999","border-bottom":"1px solid #999",padding:"10px 20px"}},[e._v(" 会议动态 ")]),t("ul",{staticStyle:{padding:"20px"}},e._l(e.messageList,(function(a,s){return t("li",{key:s},[t("span",[e._v(" "+e._s(a.date_time)+" ")]),t("span",[e._v(" "+e._s(a.company_name)+" ")]),t("span",[e._v(" "+e._s(a.content)+" ")]),t("span",{directives:[{name:"show",rawName:"v-show",value:1==a.remind,expression:"message.remind == 1"}],staticStyle:{color:"red","font-weight":"bold","font-style":"oblique"}},[e._v(" NEW ")])])})),0)])],1)},i=[],n=a("cf45"),l=a("87da"),o=a("b7e4"),r={name:"eventList",components:{screen:l["a"],mettingList:o["a"]},data(){return{newMessageShow:!1,showMoreSearch:!0,messageList:[],biddingStatus:[{code:"0010-11",name:"结算完成"},{code:"0010-5",name:"会议已创建"},{code:"0010-8",name:"会议进行中"},{code:"0010-6",name:"询价中"},{code:"0010-1",name:"已取消"},{code:"0010-7",name:"已确定供应商"},{code:"0010-9",name:"待结算（尚无结算单）"},{code:"0010-12",name:"会议过期"},{code:"0010-10",name:"结算中（待审核）"}],cityList:[],event_date:[],eventSearch:{eventName:"",eventId:"",buyer:"",RFPNo:"",po:"",biddingStatus:"",pageSize:10,page:1,eventSearchType:"3",tourist_group_no:"",event_city:"",createUser:"",ownerUser:"",event_assistant:"",event_settlement:"",cvent_no:"",pr:"",event_startdate:"",event_enddate:""},customerList:[],pageInfo:{totalCount:0},searchInfo:{},activeName:"3",dataList:[],buyerOptions:[],filtrate:[{label:"客户",type:"select",fieId:"company_id",modelVal:"",selsetVal:[]},{label:"会议名称",type:"input",modelVal:"",fieId:"eventName",inputType:"string"},{label:"会议状态",type:"select",fieId:"biddingStatus",modelVal:"",selsetVal:[{code:"0010-11",name:"结算完成"},{code:"0010-5",name:"会议已创建"},{code:"0010-8",name:"会议进行中"},{code:"0010-6",name:"询价中"},{code:"0010-1",name:"已取消"},{code:"0010-7",name:"已确定供应商"},{code:"0010-9",name:"待结算（尚无结算单）"},{code:"0010-12",name:"会议过期"},{code:"0010-10",name:"结算中（待审核）"}]},{label:"会议ID",type:"input",modelVal:"",fieId:"eventId",inputType:"string"},{label:"会议时间",type:"daterange",modelVal:"",fieId:"event_date"},{label:"团电脑号",type:"input",modelVal:"",fieId:"tourist_group_no",inputType:"string"},{label:"PO单号",type:"input",modelVal:"",fieId:"po",inputType:"string"},{label:"询价单号",type:"input",modelVal:"",fieId:"RFPNo",inputType:"string"},{label:"会议城市",type:"select",fieId:"event_city",modelVal:"",selsetVal:[]},{label:"会议创建人",type:"select",fieId:"createUser",disabled:!1,modelVal:"",selsetVal:[]},{label:"会议负责人",type:"select",fieId:"ownerUser",disabled:!1,modelVal:"",selsetVal:[]},{label:"采购负责人",type:"select",fieId:"buyer",disabled:!1,modelVal:"",selsetVal:[]},{label:"会议助理",type:"select",fieId:"event_assistant",modelVal:"",selsetVal:[]},{label:"合规审查人",type:"select",fieId:"event_settlement",modelVal:"",selsetVal:[]},{label:"Cvent号",type:"input",modelVal:"",fieId:"cvent_no",inputType:"string"},{label:"PR号",type:"input",modelVal:"",fieId:"pr",inputType:"string"}],seek:{eventName:"",eventId:"",buyer:"",RFPNo:"",po:"",biddingStatus:"",pageSize:10,page:1,eventSearchType:"3",tourist_group_no:"",event_city:"",createUser:"",ownerUser:"",event_assistant:"",event_settlement:"",cvent_no:"",pr:"",event_startdate:"",event_enddate:""},tableData:[],columns:[{label:"会议名称",minWidth:"15%",prop:"event_name",align:"left",hidden:!0},{label:"团电脑号",minWidth:"10%",prop:"tourist_group_no",hidden:!0},{label:"会议时间",minWidth:"15%",prop:"event_startdate",slot:"time",hidden:!0},{label:"会议城市",minWidth:"10%",prop:"event_city_name",hidden:!1},{label:"采购负责人",minWidth:"10%",prop:"purchaseInfo",slot:"purchaseInfo",hidden:!1},{label:"客户联系人",minWidth:"10%",prop:"contact_name",hidden:!1},{label:"会议概况",minWidth:"15%",prop:"inquiry_count",slot:"inquiry_count",hidden:!0},{label:"会议状态",minWidth:"20%",prop:"eventTypeName",slot:"eventTypeName",hidden:!0}],operate:[{propName:"查看详情",classifyName:"particulars"},{propName:"编辑会议",classifyName:"editClick"}],operates:[],state:!0}},created(){this.operates=JSON.parse(JSON.stringify(this.operate)),this.operate.splice(1,1),console.log(this.operates)},mounted(){this.loadData(),this.getBuyerOptions(),this.company(),this.getCityList(),this.$refs.mettingList.tableTitle="会议列表"},methods:{formatDate:n["d"],goDetail(e){console.log(e),this.$router.push({path:"/EventDetail",query:{id:e.id,name:e.event_name,eventSearchType:this.eventSearch.eventSearchType}})},editBaseTap(e){this.$router.push({name:"CreateEvent",query:{event_num:e.event_num,id:e.id,name:e.name,eventSearchType:this.eventSearch.eventSearchType,type:"edit"}})},company(){this.$api.GetCustomerEventInfoPost({},"POST").then(e=>{this.filtrate[0].selsetVal=e})},changeEventDate(e){var t,a;this.eventSearch.event_startdate=null!==(t=this.formatDate("YYYY-mm-dd",e[0]))&&void 0!==t?t:"",this.eventSearch.event_enddate=null!==(a=this.formatDate("YYYY-mm-dd",e[1]))&&void 0!==a?a:""},getCityList(){this.$api.getCityList({},"GET").then(e=>{this.cityList=e,e&&(this.filtrate[8].selsetVal=e)})},mouseOver(e){this.newMessageShow=!0,this.messageList=e.row.message_list;let t=this.$refs["eventTypeName"+e.$index].getBoundingClientRect().top,a=this.$refs["eventTypeName"+e.$index].getBoundingClientRect().right;this.$refs.newMessageBox.style.top=t+"px",this.$nextTick(e=>{let t=this.$refs.newMessageBox.offsetWidth;this.$refs.newMessageBox.style.left=a-t+"px"})},mouseLeave(){this.newMessageShow=!1},getDataList(e=0){1===e?this.eventSearch.page=1:2===e&&(this.eventSearch={eventName:"",eventId:"",buyer:"",RFPNo:"",po:"",biddingStatus:"",pageSize:10,page:1,tourist_group_no:"",event_city:"",createUser:"",ownerUser:"",event_assistant:"",event_settlement:"",cvent_no:"",pr:"",event_startdate:"",event_enddate:"",eventSearchType:this.activeName},this.event_date=[]),this.$api.getEventList(this.eventSearch,"GET").then(e=>{this.tableData=e.EventModels,this.pageInfo=e.pageInfo,this.$refs.mettingList.pageIndex=this.pageInfo.pageIndex,this.$refs.mettingList.pageSize=this.pageInfo.pageSize,this.$refs.mettingList.totalCount=this.pageInfo.totalCount})},changeMore(){this.showMoreSearch=!this.showMoreSearch,this.eventSearch.eventId="",this.eventSearch.tourist_group_no="",this.eventSearch.po="",this.eventSearch.RFPNo="",this.eventSearch.event_city="",this.eventSearch.createUser="",this.eventSearch.ownerUser="",this.eventSearch.buyer="",this.eventSearch.event_assistant="",this.eventSearch.event_settlement="",this.eventSearch.cvent_no="",this.eventSearch.pr=""},handleSizeChange(e){console.log(`每页 ${e} 条`),this.eventSearch.pageSize=e,this.getDataList()},handleCurrentChange(e){console.log("当前页: "+e),this.eventSearch.page=e,this.getDataList()},handleClick(e,t){console.log(e,t),0==e.name?(this.filtrate[9].disabled=!0,this.filtrate[10].disabled=!1,this.filtrate[11].disabled=!1):1==e.name?(this.filtrate[10].disabled=!0,this.filtrate[9].disabled=!1,this.filtrate[11].disabled=!1):2==e.name?(this.filtrate[11].disabled=!0,this.filtrate[10].disabled=!1,this.filtrate[9].disabled=!1):(this.filtrate[9].disabled=!1,this.filtrate[10].disabled=!1,this.filtrate[11].disabled=!1),4==e.name?(this.operate=JSON.parse(JSON.stringify(this.operates)),this.operate.splice(0,1),console.log(this.operates)):(this.operate=JSON.parse(JSON.stringify(this.operates)),this.operate.splice(1,1),console.log(this.operates)),this.seek.eventSearchType=this.activeName,this.seek.page=1,this.$refs.screen_.reset()},getBuyerOptions(){this.$api.getCustomerContacts({},"get").then(e=>{this.filtrate[9].selsetVal=e,this.filtrate[10].selsetVal=e,this.filtrate[11].selsetVal=e,this.filtrate[12].selsetVal=e,this.filtrate[13].selsetVal=e})},screen(e){this.seek=e,this.seek.pageSize=this.pageInfo.pageSize,this.seek.page=1,this.seek.eventSearchType=this.activeName,e.event_date?(e.event_startdate=e.event_date[0],e.event_enddate=e.event_date[1]):(e.event_startdate="",e.event_enddate=""),console.log(this.seek),this.loadData()},loadData(){this.$api.getEventList(this.seek,"GET").then(e=>{this.tableData=e.EventModels,e&&(this.state=!0),this.pageInfo=e.pageInfo,this.$refs.mettingList.pageIndex=this.pageInfo.pageIndex,this.$refs.mettingList.pageSize=this.pageInfo.pageSize,this.$refs.mettingList.totalCount=this.pageInfo.totalCount})},classifyName(e,t){let a=this.$options.methods;const s=this;a[e](s,t)},editClick(e,t){console.log(e,t,"编辑"),e.$router.push({name:"CreateEvent",query:{event_num:t.event_num,id:t.id,name:t.name,eventSearchType:e.activeName,type:"edit"}})},particulars(e,t){console.log(e,t,"详情"),e.$router.push({path:"/EventDetail",query:{id:t.id,name:t.event_name,eventSearchType:e.activeName}})},handleSizeChange(e){console.log(`每页 ${e} 条-`),this.pageInfo.pageSize=e,this.seek.pageSize=e,this.seek.page=1,this.state=!1,this.loadData()},handleCurrentChange(e){this.state&&(console.log(`当前页: ${e}-`),this.pageInfo.pageIndex=e,this.seek.page=e,this.loadData())},reset(){this.seek={eventName:"",eventId:"",buyer:"",RFPNo:"",po:"",biddingStatus:"",pageSize:10,page:1,eventSearchType:this.activeName,tourist_group_no:"",event_city:"",createUser:"",ownerUser:"",event_assistant:"",event_settlement:"",cvent_no:"",pr:"",event_startdate:"",event_enddate:""},this.loadData()}}},h=r,d=(a("fe68"),a("0b56")),p=Object(d["a"])(h,s,i,!1,null,null,null);t["default"]=p.exports},fe68:function(e,t,a){"use strict";a("7787")}}]);