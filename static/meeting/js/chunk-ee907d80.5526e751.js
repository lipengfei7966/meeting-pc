(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee907d80"],{"0a69":function(t,e,s){"use strict";s("85e5")},2785:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"approve-page-body",staticStyle:{"padding-top":"40px"}},[s("div",{staticClass:"centerBox"},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{staticClass:"el-breadcrumb-item",attrs:{to:{path:"/"}}},[t._v(" 首页 ")]),s("el-breadcrumb-item",{staticClass:"el-bread-item",attrs:{to:{path:"/approveSetting"}}},[t._v(" 审批流配置 ")]),s("el-breadcrumb-item",{staticClass:"el-bread-item"},[t._v(" 编辑结算审批规则 ")])],1)],1)]),s("div",{staticClass:"addedit_header"},[t._v(t._s(t.title))]),s("div",{staticClass:"custom"},[s("div",{staticClass:"custom_title"},[t._v("客户")]),s("div",{staticClass:"custom_list"},[s("el-checkbox-group",{model:{value:t.customChoose,callback:function(e){t.customChoose=e},expression:"customChoose"}},t._l(t.customList,(function(t){return s("el-checkbox",{key:t.id,staticClass:"custom_checkbox",attrs:{label:t.shortname,border:""}})})),1)],1)]),s("div",{staticClass:"remark_area"},[s("div",{staticStyle:{width:"60px"}},[t._v("备注")]),s("el-input",{attrs:{rows:"6",type:"textarea"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1),s("div",{staticClass:"btns"},[s("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),s("el-button",{on:{click:t.cancel}},[t._v("取消")])],1)])},a=[],o=(s("4de4"),s("d3b7"),{components:{},data:function(){return{back:"",type:"",id:"",title:"",customList:[],customChoose:[],editList:[],remark:""}},mounted:function(){this.back=this.$route.query.back,this.type=this.$route.query.type,this.id=this.$route.query.id,"1"==this.type&&(this.title=this.$route.query.id?"编辑结算审批规则":"新建结算审批规则"),"2"==this.type&&(this.title=this.$route.query.id?"编辑中标审批规则":"新建中标审批规则"),this.GetAllCompany()},methods:{GetAllCompany:function(){var t=this;this.$api.GetAllCompany({},"POST").then((function(e){t.customList=e,t.id&&t.$api.EditGetApporval({id:t.id},"POST").then((function(e){t.editList=e.approval_company,t.remark=e.remarks;for(var s=function(s){var i=e.approval_company[s],a=t.customList.filter((function(t){return t.id==i.company_id}));a&&a.length&&t.customChoose.push(a[0].shortname)},i=0;i<e.approval_company.length;i++)s(i)}))}))},save:function(){var t=this;if(!this.customChoose.length)return this.$message.warning("请选择客户"),!1;for(var e=[],s=0;s<this.customChoose.length;s++)for(var i=0;i<this.customList.length;i++)this.customChoose[s]==this.customList[i].shortname&&e.push({id:"",company_id:this.customList[i].id});this.$api.ApporvalSava({id:this.id,remarks:this.remark,type:this.type,approval_company:e},"POST").then((function(e){e&&(t.$message.success("保存成功"),t.$router.push({name:"approveSetting"}))}))},cancel:function(){this.$router.push({name:this.back,query:{id:this.id,type:this.type}})}}}),r=o,c=(s("0a69"),s("2877")),n=Object(c["a"])(r,i,a,!1,null,null,null);e["default"]=n.exports},"85e5":function(t,e,s){}}]);