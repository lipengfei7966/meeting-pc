(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f822442"],{"06c1":function(e,t,a){var i=a("17e9"),s=String,n=TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw n("Can't set "+s(e)+" as a prototype")}},2654:function(e,t,a){"use strict";a.d(t,"j",(function(){return i})),a.d(t,"k",(function(){return s})),a.d(t,"i",(function(){return n})),a.d(t,"h",(function(){return r})),a.d(t,"l",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"b",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"a",(function(){return p})),a.d(t,"c",(function(){return m})),a.d(t,"d",(function(){return b}));a("9b2a");function i(e,t,a){const i=/^((0\d{2,3}-\d{7,8})|(1[34578]\d{9}))$/;""==t||void 0==t||null==t||i.test(t)||""==t?a():a(new Error("请输入正确的电话号码或者固话号码"))}function s(e,t,a){const i=/0\d{2}-\d{7,8}/;""==t||void 0==t||null==t||i.test(t)||""==t?a():a(new Error("请输入正确的固话（格式：区号+号码,如010-1234567）"))}function n(e,t,a){const i=/^[1][3,4,5,7,8][0-9]{9}$/;""==t||void 0==t||null==t||i.test(t)||""==t?a():a(new Error("请输入正确的电话号码"))}function r(e,t,a){const i=/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;""==t||void 0==t||null==t||i.test(t)?a():a(new Error("请输入正确的邮箱地址"))}function o(e,t,a){const i=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/;""==t||void 0==t||null==t||i.test(t)?a():a(new Error("请输入正确的URL"))}function l(e,t,a){if(!t)return a(new Error("输入不可以为空"));setTimeout(()=>{if(Number(t)){const e=/^[0-9]*[1-9][0-9]*$/,i=e.test(t);i?a():a(new Error("请输入正整数"))}else a(new Error("请输入正整数"))},0)}function c(e,t,a){t||a(),setTimeout(()=>{if(Number(t)){const e=/^[0-9]*[1-9][0-9]*$/,i=e.test(t);i?a():a(new Error("请输入正整数"))}else a(new Error("请输入正整数"))},1e3)}function u(e,t){let a={},i=[];if(e=Array.isArray(e)?e:[],t)for(let s=0;s<e.length;s++)if(a[e[s].date]){for(let t=0;t<i.length;t++)if(e[s].date===i[t].date){i[t].settlement+=Number("object"==typeof e[s].settlement_total_price?e[s].settlement_total_price.value:e[s].settlement_total_price),i[t].orgSettlement+=Number("object"==typeof e[s].total_price?e[s].total_price.value:e[s].total_price),i[t].data.push(e[s]);break}}else i.push({date:e[s].date,settlement:Number("object"==typeof e[s].settlement_total_price?e[s].settlement_total_price.value:e[s].settlement_total_price),orgSettlement:Number("object"==typeof e[s].total_price?e[s].total_price.value:e[s].total_price),data:[e[s]]}),a[e[s].date]=e[s];else for(let s=0;s<e.length;s++)if(a[e[s].date]){for(let t=0;t<i.length;t++)if(e[s].date===i[t].date){i[t].settlement+="object"==typeof e[s].settlement_price?e[s].settlement_price.value:e[s].settlement_price,i[t].orgSettlement+="object"==typeof e[s].price?e[s].price.value:e[s].price,i[t].data.push(e[s]);break}}else i.push({date:e[s].date,settlement:"object"==typeof e[s].settlement_price?e[s].settlement_price.value:e[s].settlement_price,orgSettlement:"object"==typeof e[s].price?e[s].price.value:e[s].price,data:[e[s]]}),a[e[s].date]=e[s];return i}function d(e){let t={},a=[];e=Array.isArray(e)?e:[];for(let i=0;i<e.length;i++)if(t[e[i].checkindate]){for(let t=0;t<a.length;t++)if(e[i].checkindate===a[t].checkindate){"大床房"==e[i].roomtype?(a[t].bigBedNum=e[i].roomcount,a[t].totalNum+=e[i].roomcount):"双床房"==e[i].roomtype?(a[t].doubleBedNum=e[i].roomcount,a[t].totalNum+=e[i].roomcount):(a[t].suiteNum=e[i].roomcount,a[t].totalNum+=e[i].roomcount);break}}else e[i].bigBedNum=0,e[i].doubleBedNum=0,e[i].suiteNum=0,e[i].totalNum=0,"大床房"==e[i].roomtype?(e[i].bigBedNum=e[i].roomcount,e[i].totalNum+=e[i].roomcount):"双床房"==e[i].roomtype?(e[i].doubleBedNum=e[i].roomcount,e[i].totalNum+=e[i].roomcount):(e[i].suiteNum=e[i].roomcount,e[i].totalNum+=e[i].roomcount),a.push(e[i]),t[e[i].checkindate]=e[i];return a}function p(e){let t={},a=[];for(let i=0;i<e.length;i++){let s=(e[i].build?e[i].build.price:0)+(e[i].rentalCosts?e[i].rentalCosts.price:0);if(e[i].equipment&&e[i].equipment.forEach(e=>{s+=e.price||0}),t[e[i].rentalCosts.time]){for(let t=0;t<a.length;t++)if(e[i].rentalCosts.time===a[t].time){a[t].totalPrice+=(e[i].build?e[i].build.price:0)+(e[i].rentalCosts?e[i].rentalCosts.price:0),e[i].equipment&&e[i].equipment.forEach(e=>{a[t].totalPrice+=e.price||0}),a[t].data.push(e[i]);break}}else a.push({time:e[i].rentalCosts.time,totalPrice:s,data:[e[i]]}),t[e[i].rentalCosts.time]=e[i]}return a}function m(e,t="time"){let a={},i=[];e=e||[];for(let s=0;s<e.length;s++)if(a[e[s][t]]){for(let a=0;a<i.length;a++)if(e[s][t]===i[a].time){i[a].data.push(e[s]),i[a].car.push(e[s]);break}}else i.push({time:e[s][t],car_date:e[s][t].substring(0,10),breakfast:e[s].breakfast,networks:e[s].networks,describe:e[s].describe,otherrequirements:e[s].otherrequirements,type:e[s].type,room_budget:e[s].room_budget,purpose:e[s].purpose,offer_remarks:e[s].offer_remarks,comments:e[s].comments,data:[e[s]],car:[e[s]]}),a[e[s][t]]=e[s];return i}function b(e,t="time"){let a={},i=[];e=e||[];for(let s=0;s<e.length;s++)i.push({time:e[s][t],car_date:e[s][t].substring(0,10),breakfast:e[s].breakfast,networks:e[s].networks,describe:e[s].describe,otherrequirements:e[s].otherrequirements,type:e[s].type,room_budget:e[s].room_budget,purpose:e[s].purpose,offer_remarks:e[s].offer_remarks,comments:e[s].comments,data:[e[s]],car:[e[s]]}),a[e[s][t]]=e[s];return i}},2830:function(e,t,a){},3471:function(e,t,a){var i=a("17e9"),s=a("de03"),n=a("78a8");e.exports=function(e,t,a){var r,o;return n&&i(r=t.constructor)&&r!==a&&s(o=r.prototype)&&o!==a.prototype&&n(e,o),e}},"393b":function(e,t,a){"use strict";const i=function(e,t,a){e.addEventListener(t,a,!1)},s=function(e){i(e,"keyup",()=>{e.value=e.value.replace(/\s+/,"")})},n=function(e){i(e,"keyup",()=>{e.value=e.value.replace(/\D/g,""),console.log(e.value)})},r=function(e){i(e,"keyup",()=>{e.value=e.value.replace(/[^\d.]*/g,""),isNaN(e.value)&&(e.value="")})},o=function(e){i(e,"keyup",()=>{e.value=e.value.replace(/[^\a-\z\A-\Z0-9\u4E00-\u9FA5]/g,"")})},l=function(e){i(e,"blur",()=>{if(!e.value)return;const t=new RegExp("^(13|14|15|16|17|18|19)[0-9]{9}$");t.test(e.value)||(e.value="")})},c=function(e){i(e,"blur",()=>{if(!e.value)return;const t=/(^#)|(^http(s*):\/\/[^\s]+\.[^\s]+)/;t.test(e.value)||(e.value="")})};var u={bind(e,t){switch("input"!==e.tagName.toLowerCase()&&(e=e.getElementsByTagName("input")[0]),s(e),t.arg){case"int":n(e);break;case"price":r(e);break;case"special":o(e);break;case"phone":l(e);break;case"url":c(e);break;default:break}}};const d=function(e){e.directive("inputFilter",u)};window.Vue&&(window.inputFilter=u,Vue.use(d)),u.install=d;t["a"]=u},"672b":function(e,t,a){var i=a("b23f"),s=Function.prototype,n=s.apply,r=s.call;e.exports="object"==typeof Reflect&&Reflect.apply||(i?r.bind(n):function(){return r.apply(n,arguments)})},"6dc5":function(e,t,a){"use strict";a("2830")},"76b8":function(e,t,a){var i=a("de03"),s=a("9c10");e.exports=function(e,t){i(t)&&"cause"in t&&s(e,"cause",t.cause)}},"78a8":function(e,t,a){var i=a("5d05"),s=a("50b4"),n=a("06c1");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,a={};try{e=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(a,[]),t=a instanceof Array}catch(r){}return function(a,i){return s(a),n(i),t?e(a,i):a.__proto__=i,a}}():void 0)},"956c":function(e,t,a){var i=a("f44b"),s=String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return s(e)}},"9b2a":function(e,t,a){var i=a("ebdc"),s=a("c8a2"),n=a("672b"),r=a("b438"),o="WebAssembly",l=s[o],c=7!==Error("e",{cause:7}).cause,u=function(e,t){var a={};a[e]=r(e,t,c),i({global:!0,constructor:!0,arity:1,forced:c},a)},d=function(e,t){if(l&&l[e]){var a={};a[e]=r(o+"."+e,t,c),i({target:o,stat:!0,constructor:!0,arity:1,forced:c},a)}};u("Error",(function(e){return function(t){return n(e,this,arguments)}})),u("EvalError",(function(e){return function(t){return n(e,this,arguments)}})),u("RangeError",(function(e){return function(t){return n(e,this,arguments)}})),u("ReferenceError",(function(e){return function(t){return n(e,this,arguments)}})),u("SyntaxError",(function(e){return function(t){return n(e,this,arguments)}})),u("TypeError",(function(e){return function(t){return n(e,this,arguments)}})),u("URIError",(function(e){return function(t){return n(e,this,arguments)}})),d("CompileError",(function(e){return function(t){return n(e,this,arguments)}})),d("LinkError",(function(e){return function(t){return n(e,this,arguments)}})),d("RuntimeError",(function(e){return function(t){return n(e,this,arguments)}}))},"9e72":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"create_event box"},[t("div",{staticClass:"path"},[t("ul",[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$router.replace({path:"/DMCeventlist"})}}},[e._v("我的会议")]),e.$route.query.type?t("li",{staticStyle:{color:"#7c7f82"}},[e._v(">")]):e._e(),e.$route.query.type?t("li",{staticStyle:{color:"#409EFF",cursor:"pointer"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("会议详情 ("+e._s(e.$route.query.name)+")")]):e._e(),t("li",{staticStyle:{color:"#7c7f82"}},[e._v(">")]),t("li",{staticStyle:{color:"#7c7f82"}},[e._v(e._s(e.eventId?"编辑会议":"创建会议"))])],1)]),t("el-container",{staticStyle:{height:"100%"}},[t("el-header",{staticClass:"header_title space-between"},[t("h2",[e._v("填写会议基本信息")]),t("h2",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.hisDialog=!0}}},[e._v("复制历史会议")])]),t("el-main",[t("div",{staticClass:"base_meet"},[t("el-form",{ref:"baseMeet",attrs:{model:e.baseMeet,rules:e.rules,"label-width":"300px"}},[t("el-form-item",{attrs:{label:"会议名称 Event Name",prop:"event_name"}},[t("el-input",{staticClass:"demand_500",attrs:{clearable:""},model:{value:e.baseMeet.event_name,callback:function(t){e.$set(e.baseMeet,"event_name",t)},expression:"baseMeet.event_name"}})],1),t("el-form-item",{attrs:{label:"建团类型 Group Type",prop:"tourist_group_type"}},[t("el-select",{staticClass:"demand_500",attrs:{clearable:""},model:{value:e.baseMeet.tourist_group_type,callback:function(t){e.$set(e.baseMeet,"tourist_group_type",t)},expression:"baseMeet.tourist_group_type"}},[t("el-option",{attrs:{label:"普通团",value:"1"}}),t("el-option",{attrs:{label:"转团",value:"0"}})],1)],1),0==e.baseMeet.tourist_group_type?t("el-form-item",{attrs:{label:"原团电脑号",prop:"oldEventId"}},[t("el-input",{staticClass:"demand_500",attrs:{clearable:""},model:{value:e.baseMeet.oldEventId,callback:function(t){e.$set(e.baseMeet,"oldEventId",t)},expression:"baseMeet.oldEventId"}})],1):e._e(),t("el-form-item",{attrs:{label:"客户 Consumer",prop:"company_id"}},[t("el-select",{staticClass:"demand_500",attrs:{clearable:"",filterable:""},on:{change:function(t){return e.getCustomerConfig(2)}},model:{value:e.baseMeet.company_id,callback:function(t){e.$set(e.baseMeet,"company_id",t)},expression:"baseMeet.company_id"}},e._l(e.customerList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.shortname,value:e.id.toString()}})})),1)],1),t("el-form-item",{attrs:{label:"客户联系人 Event Owner",prop:"company_contacts"}},[t("el-select",{staticClass:"demand_500",attrs:{clearable:"",filterable:""},on:{change:e.getContact},model:{value:e.baseMeet.company_contacts,callback:function(t){e.$set(e.baseMeet,"company_contacts",t)},expression:"baseMeet.company_contacts"}},e._l(e.customerContactList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),t("el-button",{staticClass:"mar_l10",attrs:{size:"small",type:"text"},on:{click:e.addContactDialogTap}},[e._v("添加客户联系人")])],1),t("el-form-item",{attrs:{label:"客户所属部门 Owner's Department",prop:"departmentName"}},[t("el-input",{staticClass:"demand_500",attrs:{disabled:""},model:{value:e.baseMeet.departmentName,callback:function(t){e.$set(e.baseMeet,"departmentName",t)},expression:"baseMeet.departmentName"}})],1),t("el-form-item",{attrs:{label:"客户联系电话 Owner's Phone NO."}},[t("el-input",{staticClass:"demand_500",attrs:{disabled:"",clearable:""},model:{value:e.baseMeet.phone,callback:function(t){e.$set(e.baseMeet,"phone",t)},expression:"baseMeet.phone"}})],1),t("el-form-item",{attrs:{label:"客户邮箱 Owner's E-mail"}},[t("el-input",{staticClass:"demand_500",attrs:{disabled:""},model:{value:e.baseMeet.email,callback:function(t){e.$set(e.baseMeet,"email",t)},expression:"baseMeet.email"}})],1),t("el-form-item",{attrs:{label:"MSA",prop:"MSA"}},[t("el-input",{staticClass:"demand_500",attrs:{clearable:""},model:{value:e.baseMeet.MSA,callback:function(t){e.$set(e.baseMeet,"MSA",t)},expression:"baseMeet.MSA"}})],1),t("el-form-item",{attrs:{label:"活动类型 Event Type",prop:"activity_type"}},[t("el-select",{staticClass:"demand_500",attrs:{clearable:""},on:{change:e.selectActive},model:{value:e.baseMeet.activity_type,callback:function(t){e.$set(e.baseMeet,"activity_type",t)},expression:"baseMeet.activity_type"}},e._l(e.activityList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"餐标限制 Food Limit",prop:"food_limit"}},[t("el-input",{staticClass:"demand_500",attrs:{disabled:"",clearable:""},model:{value:e.baseMeet.food_limit,callback:function(t){e.$set(e.baseMeet,"food_limit",t)},expression:"baseMeet.food_limit"}})],1),t("el-form-item",{attrs:{label:"Cvent号",prop:"cvent_no"}},[t("el-input",{staticClass:"demand_500",attrs:{clearable:""},model:{value:e.baseMeet.cvent_no,callback:function(t){e.$set(e.baseMeet,"cvent_no",t)},expression:"baseMeet.cvent_no"}})],1),t("el-form-item",{attrs:{label:"会议总预算 Total Budget"}},[t("el-input",{staticClass:"demand_500",attrs:{clearable:""},model:{value:e.baseMeet.total_budget,callback:function(t){e.$set(e.baseMeet,"total_budget",t)},expression:"baseMeet.total_budget"}})],1),t("el-form-item",{attrs:{label:"服务类型 Service Type",prop:"service_type"}},[t("el-select",{staticClass:"demand_500",attrs:{clearable:""},on:{change:e.serviceTypeChange},model:{value:e.baseMeet.service_type,callback:function(t){e.$set(e.baseMeet,"service_type",t)},expression:"baseMeet.service_type"}},e._l(e.serviceList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"会议城市 City",prop:"event_city"}},[t("el-select",{staticClass:"demand_500",attrs:{disabled:e.baseMeet.online_meeting,clearable:"",filterable:""},model:{value:e.baseMeet.event_city,callback:function(t){e.$set(e.baseMeet,"event_city",t)},expression:"baseMeet.event_city"}},e._l(e.cityList,(function(e){return t("el-option",{key:e.code,attrs:{label:e.value,value:e.code}})})),1),t("el-checkbox",{staticStyle:{"margin-left":"20px"},attrs:{"true-label":1,"false-label":0},model:{value:e.baseMeet.online_meeting,callback:function(t){e.$set(e.baseMeet,"online_meeting",t)},expression:"baseMeet.online_meeting"}},[e._v("线上会议")])],1),t("el-form-item",{attrs:{label:"会议地点 Place",prop:"meeting_place"}},[t("el-input",{staticClass:"demand_500",attrs:{clearable:""},model:{value:e.baseMeet.meeting_place,callback:function(t){e.$set(e.baseMeet,"meeting_place",t)},expression:"baseMeet.meeting_place"}}),t("el-checkbox",{staticStyle:{"margin-left":"20px"},attrs:{"true-label":1,"false-label":0},model:{value:e.baseMeet.is_hotel,callback:function(t){e.$set(e.baseMeet,"is_hotel",t)},expression:"baseMeet.is_hotel"}},[e._v("是否在酒店开会")])],1),t("el-form-item",{staticClass:"attendee_no",attrs:{label:"参会人数 Attendee NO.",prop:"attendee_no"}},[t("el-col",{staticClass:"flex_row",attrs:{span:5}},[t("el-form-item",{staticClass:"attendee_no",attrs:{prop:"inside_number"}},[e._v(" 内部人数： "),t("el-input",{attrs:{clearable:""},model:{value:e.baseMeet.inside_number,callback:function(t){e.$set(e.baseMeet,"inside_number",e._n(t))},expression:"baseMeet.inside_number"}})],1)],1),t("el-col",{staticClass:"flex_row",attrs:{span:5}},[t("el-form-item",{staticClass:"attendee_no",attrs:{prop:"external_number"}},[e._v(" 外部人数： "),t("el-input",{attrs:{clearable:""},model:{value:e.baseMeet.external_number,callback:function(t){e.$set(e.baseMeet,"external_number",e._n(t))},expression:"baseMeet.external_number"}})],1)],1),t("el-col",{staticClass:"flex_row",attrs:{span:5}},[e._v(" 总人数："+e._s(e.baseMeet.attendee_no)+" ")])],1),t("el-form-item",{attrs:{label:"会议开始日期 Start Date",prop:"event_startdate"}},[t("el-date-picker",{staticClass:"demand_500",attrs:{clearable:"",type:"date","picker-options":e.pickerStart,"value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:e.timeStart},model:{value:e.baseMeet.event_startdate,callback:function(t){e.$set(e.baseMeet,"event_startdate",t)},expression:"baseMeet.event_startdate"}})],1),t("el-form-item",{attrs:{label:"会议结束日期 End Date",prop:"event_enddate"}},[t("el-date-picker",{staticClass:"demand_500",attrs:{clearable:"",type:"date","picker-options":e.pickerEnd,"value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.baseMeet.event_enddate,callback:function(t){e.$set(e.baseMeet,"event_enddate",t)},expression:"baseMeet.event_enddate"}})],1),t("el-form-item",{attrs:{label:"发票类型 Invoice Type",prop:"invoice_type"}},[t("el-radio",{attrs:{disabled:"",label:0},model:{value:e.baseMeet.invoice_type,callback:function(t){e.$set(e.baseMeet,"invoice_type",t)},expression:"baseMeet.invoice_type"}},[e._v("普票")]),t("el-radio",{attrs:{disabled:"",label:1},model:{value:e.baseMeet.invoice_type,callback:function(t){e.$set(e.baseMeet,"invoice_type",t)},expression:"baseMeet.invoice_type"}},[e._v("专票")]),t("el-radio",{attrs:{disabled:"",label:2},model:{value:e.baseMeet.invoice_type,callback:function(t){e.$set(e.baseMeet,"invoice_type",t)},expression:"baseMeet.invoice_type"}},[e._v("免税")])],1),t("el-form-item",{attrs:{label:"是否办理免税 Duty Free",prop:"is_duty_free"}},[t("el-radio",{attrs:{label:0},model:{value:e.baseMeet.is_duty_free,callback:function(t){e.$set(e.baseMeet,"is_duty_free",t)},expression:"baseMeet.is_duty_free"}},[e._v("否")]),t("el-radio",{attrs:{label:1},model:{value:e.baseMeet.is_duty_free,callback:function(t){e.$set(e.baseMeet,"is_duty_free",t)},expression:"baseMeet.is_duty_free"}},[e._v("是")])],1),t("el-form-item",{attrs:{label:"是否是DMC创建会议",prop:"meeting_type",hidden:""}},[t("el-input",{attrs:{value:"1"}})],1),t("el-form-item",{attrs:{label:"附件 Document Attachments"}},[t("div",{staticClass:"demand_500 text_left"},[t("el-upload",{ref:"upload",attrs:{"before-upload":e.fileLimit,action:e.UploadFilesUrl,"on-success":e.uploadFile,"on-preview":e.downloadFile,"on-remove":e.deleteFile,"file-list":e.fileList,"show-file-list":!0,multiple:!0}},[t("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选择文件")])],1),t("br"),t("span",{staticClass:"ps"},[e._v("注意: 只允许上传以下文件类型：doc、docx、xls、xlsx、pdf、ppt、pptx、jpeg、jpg、png、zip、eml、rtf、msg、gif、bmp、tif、tiff、rar、iso、7z、tar、bz2、gzip、txt、mp4、xps、odf，最大30M")])],1)]),t("el-form-item",{attrs:{label:"指定供应商 supplier"}},[t("el-input",{directives:[{name:"input-filter",rawName:"v-input-filter:int",arg:"int"}],staticClass:"demand_500",attrs:{disabled:""},model:{value:e.baseMeet.service_provider_name,callback:function(t){e.$set(e.baseMeet,"service_provider_name",t)},expression:"baseMeet.service_provider_name"}})],1),t("div",{staticClass:"row_around",staticStyle:{"margin-right":"50px"}},[t("el-button",{staticClass:"submit_btn",attrs:{type:"primary"},on:{click:function(t){return e.subEvent(0)}}},[e._v(e._s(this.$route.query.eventSearchType&&4!=this.$route.query.eventSearchType?"保存":"创建会议"))]),e.eventId&&4!=this.$route.query.eventSearchType?e._e():t("el-button",{staticClass:"submit_btn",attrs:{type:"info"},on:{click:function(t){return e.subEvent(1)}}},[e._v("保存草稿")])],1)],1)],1)])],1),e.hisDialog?t("el-dialog",{attrs:{title:"复制历史会议",visible:e.hisDialog,width:"650px",center:""},on:{"update:visible":function(t){e.hisDialog=t},close:function(t){e.hisDialog=!1}}},[e.eventList.length?t("div",{staticClass:"event_list"},[e._l(e.eventList,(function(a,i){return t("div",{key:i,staticClass:"event_item"},[t("p",{staticClass:"text_left"},[e._v("会议名称："+e._s(a.event_name))]),t("p",{staticClass:"text_left"},[e._v("活动类型："+e._s(a.activity_name))]),a.event_startdate&&a.event_enddate?t("p",{staticClass:"text_left"},[e._v("会议时间："+e._s(a.event_startdate.substring(0,10))+"--"+e._s(a.event_enddate.substring(0,10)))]):e._e(),t("p",{staticClass:"text_left"},[e._v("参会人数："+e._s(a.attendee_no))]),t("div",{staticClass:"flex_row justify_center"},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.copyEvent(a,1)}}},[e._v("复制此会议")])],1)])})),t("div",{staticClass:"flex_row justify_center",staticStyle:{width:"100%"}},[t("el-pagination",{attrs:{layout:"prev, pager, next",total:e.pageInfo.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],2):e._e()]):e._e(),t("el-dialog",{attrs:{visible:e.hisStartDialog,width:"650px",center:""},on:{"update:visible":function(t){e.hisStartDialog=t},close:function(t){e.hisStartDialog=!1}}},[t("div",{staticClass:"his_title"},[t("span",[e._v("复制会议")]),t("em",[e._v("（复制完成后可在会议详情页编辑会议基本信息和采购需求）")])]),t("div",{staticClass:"his_date"},[t("span",[e._v("会议开始时间：")]),t("el-date-picker",{staticClass:"demand_200",attrs:{size:"small",clearable:"",type:"date","picker-options":e.pickerStart,"value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.hisStartDate,callback:function(t){e.hisStartDate=t},expression:"hisStartDate"}})],1),t("span",{staticClass:"dialog-footer flex_row justify_center",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.preStep}},[e._v("上一步")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.copyEvent(0,2)}}},[e._v("完 成")])],1)]),t("el-dialog",{attrs:{title:e.eventId?"保存成功":"会议创建完成",visible:e.demandDialog,width:"650px",center:""},on:{"update:visible":function(t){e.demandDialog=t},close:function(t){e.demandDialog=!1}}},[t("span",{staticClass:"dialog-footer flex_row justify_center",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.goDemand}},[e._v("填写采购需求")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.goDetail}},[e._v("查看会议详情")])],1)]),t("el-dialog",{attrs:{title:"客户联系人",visible:e.addContactDialog,"close-on-click-modal":!1,width:"500px",center:""},on:{"update:visible":function(t){e.addContactDialog=t},close:function(t){e.addContactDialog=!1}}},[t("el-form",{ref:"contactInfo",attrs:{model:e.contactInfo,rules:e.contactRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{staticClass:"demand_300",attrs:{size:"small",clearable:""},model:{value:e.contactInfo.name,callback:function(t){e.$set(e.contactInfo,"name",t)},expression:"contactInfo.name"}})],1),t("el-form-item",{attrs:{label:"电话",prop:"phone"}},[t("el-input",{staticClass:"demand_300",attrs:{type:"number",maxlength:11,size:"small",clearable:""},model:{value:e.contactInfo.phone,callback:function(t){e.$set(e.contactInfo,"phone",t)},expression:"contactInfo.phone"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"mailbox"}},[t("el-input",{staticClass:"demand_300",attrs:{type:"email",size:"small",clearable:""},model:{value:e.contactInfo.mailbox,callback:function(t){e.$set(e.contactInfo,"mailbox","string"===typeof t?t.trim():t)},expression:"contactInfo.mailbox"}})],1),t("el-form-item",{attrs:{label:"公司",prop:"company_id"}},[t("el-select",{staticClass:"demand_300",attrs:{size:"small",clearable:"",filterable:""},on:{change:function(t){return e.getCustomerConfig(1)}},model:{value:e.contactInfo.company_id,callback:function(t){e.$set(e.contactInfo,"company_id",t)},expression:"contactInfo.company_id"}},e._l(e.customerList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.shortname,value:e.id.toString()}})})),1)],1),t("el-form-item",{attrs:{label:"部门",prop:"customer_id"}},[t("el-select",{staticClass:"demand_300",attrs:{size:"small",clearable:"",filterable:""},model:{value:e.contactInfo.customer_id,callback:function(t){e.$set(e.contactInfo,"customer_id",e._n(t))},expression:"contactInfo.customer_id"}},e._l(e.departmentList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.shortname,value:e.id}})})),1)],1)],1),t("span",{staticClass:"dialog-footer flex_row justify_center",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.addContactDialog=!1}}},[e._v("取 消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.addContactTap("contactRules")}}},[e._v("确 认")])],1)],1)],1)},s=[],n=a("393b"),r=a("2654"),o=a("f121"),l=a("df68"),c={name:"createEvent",data(){return{fileList:[],UploadFilesUrl:o["b"]+"/MeetingMa/UploadFiles",uploadList:{},eventId:"",limitDate:new Date,addContactDialog:!1,contactInfo:{id:"",name:"",phone:"",mailbox:"",customer_id:"",company_id:""},contactRules:{name:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入联系人电话",trigger:"blur"},{pattern:/^((0\d{2,3}-\d{7,8})|(1[3567849]\d{9}))$/,message:"请输入合法手机号/电话号",trigger:"blur"}],mailbox:[{required:!0,message:"请输入联系人邮箱",trigger:"blur"},{validator:r["h"],trigger:"blur"}],customer_id:[{required:!0,message:"请选择部门",trigger:"change"}],company_id:[{required:!0,message:"请选择公司",trigger:"change"}]},hisDialog:!1,hisStartDialog:!1,demandDialog:!1,hisStartDate:"",container_height:document.documentElement.clientHeight-20,eventList:[],cityList:[],customerList:[],customerContactList:[],mealList:[],activityList:[],departmentList:[],serviceList:[],cityLisy:[],rules:{attendee_no:[{required:!0,message:"请输入参会人数",trigger:"blur"}],external_number:[{required:!0,message:"请输入外部人数",trigger:"blur"}],inside_number:[{required:!0,message:"请输入内部人数",trigger:"blur"}],event_name:[{required:!0,message:"请输入会议名称",trigger:"blur"}],oldEventId:[{required:!0,message:"请输入原团电脑号",trigger:"blur"}],tourist_group_type:[{required:!0,message:"请选择建团类型",trigger:"change"}],company_id:[{required:!0,message:"请选择客户",trigger:"change"}],activity_type:[{required:!0,message:"请选择活动类型",trigger:"change"}],event_city:[{required:!0,message:"请选择会议城市",trigger:"change"}],company_contacts:[{required:!0,message:"请选择客户联系人",trigger:"change"}],departmentName:[{required:!0,message:"客户联系人必须有所属部门",trigger:"change"}],event_startdate:[{required:!0,message:"请选择日期",trigger:"change"}],event_enddate:[{required:!0,message:"请选择日期",trigger:"change"}],service_type:[{required:!0,message:"请选择服务类型",trigger:"change"}],invoice_type:[{required:!0,message:"请选择发票类型",trigger:"change"}]},baseMeet:{event_name:"",tourist_group_type:"1",oldEventId:"",company_id:"",activity_type:"",cvent_no:"",total_budget:"",service_type:"",food_limit:"",attendee_no:0,inside_number:"",external_number:"",event_startdate:"",event_enddate:"",company_contacts:"",email:"",phone:"",MSA:"",invoice_type:1,is_duty_free:"",department:"",departmentName:"",event_city:"",document_attachments_file_path:[],fileInfos:[],service_provider_id:"",service_provider_name:"",online_meeting:!1,meeting_place:"",is_hotel:!1,meeting_type:1},pageInfo:{totalCount:0},createDate:(new Date).getTime(),pageSize:6,page:1,hisId:"",hisItem:"",his_startDate:"",newEventId:"",newEventName:"",pickerStart:{disabledDate:e=>{}},pickerEnd:{disabledDate:e=>this.baseMeet.event_enddate?e.getTime()<=new Date(this.baseMeet.event_startdate).getTime()-864e5||e.getTime()<=new Date(this.baseMeet.createDate).getTime()-864e5:e.getTime()>=new Date(this.event_startdate).getTime()-864e5}}},directives:{inputFilter:n["a"]},watch:{"baseMeet.company_id":{deep:!0,handler:function(e,t){}},"baseMeet.company_contacts":{deep:!0,handler:function(e,t){}},"baseMeet.online_meeting":{deep:!0,handler:function(e,t){e?(this.rules.event_city[0].required=!1,this.baseMeet.event_city=""):this.rules.event_city[0].required=!0}},"baseMeet.inside_number":{deep:!0,handler:function(e,t){Number(e)&&e>0?(this.rules.external_number[0].required=!1,this.baseMeet.attendee_no=Number(e)+Number(this.baseMeet.external_number)):(this.baseMeet.inside_number="",this.baseMeet.attendee_no=this.baseMeet.external_number)}},"baseMeet.external_number":{deep:!0,handler:function(e,t){Number(e)&&e>0?(this.rules.inside_number[0].required=!1,this.baseMeet.attendee_no=Number(e)+Number(this.baseMeet.inside_number)):(this.baseMeet.external_number="",this.baseMeet.attendee_no=this.baseMeet.inside_number)}}},created(){this.getCustomerList(),this.getCityList(),this.getHistoryEvent(),this.getServiceType(),this.ServiceProviderUser()},mounted(){this.$nextTick(()=>{let e=this.$route.query;e&&e.type&&"edit"===e.type?(this.eventId=this.$route.query.id,this.baseMeet.id=this.$route.query.id,this.baseMeet.event_num=this.$route.query.event_num,this.getEventDetail()):this.eventId=""})},methods:{timeStart(){if(this.baseMeet.event_startdate>this.baseMeet.event_enddate)return this.baseMeet.event_enddate=this.baseMeet.event_startdate},ServiceProviderUser(){this.$api.ServiceProviderUser({},"POST").then(e=>{this.baseMeet.service_provider_id=e.service_provider_id,this.baseMeet.service_provider_name=e.name})},getServiceType(){this.$api.getServiceType({},"post").then(e=>{this.serviceList=e,this.baseMeet.service_type||(this.baseMeet.service_type=this.serviceList[0].id,this.baseMeet.invoice_type=1)})},serviceTypeChange(e){"456d1027-413b-11ec-9db6-fa163ed463f8"==e?this.baseMeet.invoice_type=1:"59266863-413b-11ec-9db6-fa163ed463f8"==e&&(this.baseMeet.invoice_type=0)},addContactDialogTap(){this.addContactDialog=!0,this.contactInfo={id:"",name:"",phone:"",mailbox:"",customer_id:"",company_id:""},this.contactInfo.company_id=this.baseMeet.company_id,this.getCustomerConfig(1)},addContactTap(e){this.$refs.contactInfo.validate(e=>{e&&this.$api.addContact({Parameter:JSON.stringify(this.contactInfo)},"post").then(e=>{e&&(this.addContactDialog=!1,this.$message.success("添加成功"),this.getCustomerConfig(2,"addContactSuccess"),this.baseMeet.company_contacts=e)})})},getEventDetail(){this.$api.getEventDetail({eventId:this.baseMeet.event_num,eventSearchType:this.$route.query.eventSearchType},"GET").then(e=>{e.EventModels&&(this.baseMeet=e.EventModels[0],this.fileList=[],this.baseMeet.fileInfos.forEach(e=>{this.fileList.push({id:e.id,name:e.file_name,url:e.file_path})}),this.baseMeet.tourist_group_type=this.baseMeet.tourist_group_type.toString()),this.ServiceProviderUser(),this.baseMeet.company_id&&this.$api.GetCustomerContactList({id:this.baseMeet.company_id,type:1},"post").then(e=>{if(e&&!0!==e){this.customerContactList=e;let t=this.customerContactList.find(e=>e.id==this.baseMeet.company_contacts);this.baseMeet.email=t.mailbox,this.baseMeet.phone=t.phone,this.getContactInfo(t.id)}else this.customerContactList=[]}),console.log(this.baseMeet)})},subEvent(e){this.baseMeet.event_status=e,0===e?(localStorage.setItem("event_city_code",this.baseMeet.event_city),this.$refs["baseMeet"].validate(e=>{e?(this.baseMeet.event_enddate=this.baseMeet.event_enddate.slice(0,10)+" 23:59:59",this.eventId?(this.baseMeet.id=this.eventId,this.$api.updateEvent(this.baseMeet,"POST").then(e=>{e&&(this.demandDialog=!0,this.newEventId=this.$route.query.id||this.eventId,this.newEventName=this.$route.query.name||this.baseMeet.event_name)})):this.$api.createEvent(this.baseMeet,"POST").then(e=>{e&&(this.demandDialog=!0,this.newEventId=e.eventId,this.newEventName=e.eventName)})):this.$message.warning("请完善会议信息")})):this.eventId?(this.baseMeet.id=this.eventId,this.$api.updateEvent(this.baseMeet,"POST").then(e=>{this.$message.success("已保存至草稿")})):this.$api.createEvent(this.baseMeet,"POST").then(e=>{this.eventId=e.eventId,this.$message.success("已保存至草稿")})},fileLimit(e){const t=e.size/1024/1024<30;return t?Object(l["a"])(e):(this.$message.error("上传附件大小不能超过 30MB!"),!1)},uploadFile(e){this.uploadList=e,this.baseMeet.fileInfos||(this.baseMeet.fileInfos=[]),this.baseMeet.fileInfos.push({id:"",file_name:e.title,file_path:e.weburl})},deleteFile(e,t){this.baseMeet.fileInfos=[],t.forEach(e=>{e.id?this.baseMeet.fileInfos.push({id:e.id,file_name:e.name,file_path:e.url}):this.baseMeet.fileInfos.push({id:"",file_name:e.name,file_path:e.response.weburl})})},downloadFile(e){let t=document.createElement("a");fetch(e.url).then(e=>e.blob()).then(a=>{t.href=URL.createObjectURL(a),console.log(t.href),t.download=e.name,document.body.appendChild(t),t.click()})},goDemand(){this.$router.push({path:"/DMCEventDemand",query:{id:this.newEventId,name:this.newEventName}})},goDetail(){this.$router.push({path:"/DMCEventDetail",query:{id:this.newEventId,name:this.newEventName,eventSearchType:0}})},getCustomerList(){this.$api.GetCustomerEventInfoPost({},"POST").then(e=>{this.customerList=e})},getCustomerConfig(e,t){2===e?(this.baseMeet.company_contacts="",this.baseMeet.department="",this.baseMeet.departmentName="",this.baseMeet.email="",this.baseMeet.phone="",this.baseMeet.activity_type="",this.baseMeet.food_limit="",this.$api.GetCustomerContactList({id:this.baseMeet.company_id,type:1},"post").then(e=>{e&&!0!==e?(this.customerContactList=e,t&&this.getContact()):this.customerContactList=[]})):1===e&&(this.contactInfo.customer_id="",this.$api.getDepartment({CompanyID:this.contactInfo.company_id},"post").then(e=>{e&&!0!==e?this.departmentList=e:(this.$message.warning("请配置该公司部门"),this.contactInfo.customer_id="")}))},getContactInfo(e){this.$api.getContactInfo({ContactID:e},"POST").then(t=>{t&&(this.baseMeet.department=t.departmentyid,this.$set(this.baseMeet,"departmentName",t.shortname),e?this.getMeetingType(t.departmentyid):this.activityList=[])})},getMeetingType(e){let t={};t=e?{DepartmentyID:e}:{CompanyID:this.baseMeet.company_id},this.$api.getMeetingTypeShow(t,"POST").then(e=>{this.activityList=e})},selectActive(){let e=this.activityList.find(e=>this.baseMeet.activity_type==e.id);this.baseMeet.food_limit=e?e.meal_label:""},getContact(){let e=this.customerContactList.filter(e=>e.id==this.baseMeet.company_contacts);this.baseMeet.activity_type="",this.baseMeet.food_limit="",e[0]?(this.baseMeet.email=e[0].mailbox,this.baseMeet.phone=e[0].phone,this.getContactInfo(e[0].id)):(this.baseMeet.email="",this.baseMeet.phone="",this.getContactInfo(""))},getCityList(){this.$api.getCityList({},"GET").then(e=>{this.cityList=e})},getHistoryEvent(){this.$api.getEventList({page:this.page,pageSize:this.pageSize},"GET").then(e=>{this.eventList=e.EventModels,this.pageInfo=e.pageInfo})},preStep(){this.hisDialog=!0,this.hisStartDialog=!1},copyEvent(e,t){if(1===t)localStorage.setItem("event_city_code",e.event_city),this.hisItem=e,this.hisDialog=!1,this.hisStartDialog=!0;else{if(!this.hisStartDate)return void this.$message.warning("请选择时间！");this.$api.copyEvent({id:this.hisItem.id,eventStartDate:this.hisStartDate},"POST").then(e=>{this.hisStartDialog=!1,this.demandDialog=!0,this.newEventId=e.newEventId})}},handleSizeChange(e){console.log(`每页 ${e} 条`),this.pageSize=e,this.getHistoryEvent()},handleCurrentChange(e){this.page=e,console.log("当前页: "+e),this.getHistoryEvent()}}},u=c,d=(a("6dc5"),a("0b56")),p=Object(d["a"])(u,i,s,!1,null,null,null);t["default"]=p.exports},a3d4:function(e,t,a){var i=a("5557").f;e.exports=function(e,t,a){a in e||i(e,a,{configurable:!0,get:function(){return t[a]},set:function(e){t[a]=e}})}},b438:function(e,t,a){"use strict";var i=a("3726"),s=a("e72e"),n=a("9c10"),r=a("70b8"),o=a("78a8"),l=a("6ac1"),c=a("a3d4"),u=a("3471"),d=a("dbbd"),p=a("76b8"),m=a("c436"),b=a("dc0f"),f=a("8d06"),_=a("3f11");e.exports=function(e,t,a,h){var v="stackTraceLimit",g=h?2:1,y=e.split("."),M=y[y.length-1],C=i.apply(null,y);if(C){var k=C.prototype;if(!_&&s(k,"cause")&&delete k.cause,!a)return C;var x=i("Error"),E=t((function(e,t){var a=d(h?t:e,void 0),i=h?new C(e):new C;return void 0!==a&&n(i,"message",a),b&&n(i,"stack",m(i.stack,2)),this&&r(k,this)&&u(i,this,E),arguments.length>g&&p(i,arguments[g]),i}));if(E.prototype=k,"Error"!==M?o?o(E,x):l(E,x,{name:!0}):f&&v in C&&(c(E,C,v),c(E,C,"prepareStackTrace")),l(E,C),!_)try{k.name!==M&&n(k,"name",M),k.constructor=E}catch(S){}return E}}},c3c0:function(e,t,a){var i=a("ecc1"),s=i("toStringTag"),n={};n[s]="z",e.exports="[object z]"===String(n)},c436:function(e,t,a){var i=a("5d05"),s=Error,n=i("".replace),r=function(e){return String(s(e).stack)}("zxcasd"),o=/\n\s*at [^:]*:[^\n]*/,l=o.test(r);e.exports=function(e,t){if(l&&"string"==typeof e&&!s.prepareStackTrace)while(t--)e=n(e,o,"");return e}},dbbd:function(e,t,a){var i=a("956c");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:i(e)}},dc0f:function(e,t,a){var i=a("071a"),s=a("4d51");e.exports=!i((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",s(1,7)),7!==e.stack)}))},f44b:function(e,t,a){var i=a("c3c0"),s=a("17e9"),n=a("7ea6"),r=a("ecc1"),o=r("toStringTag"),l=Object,c="Arguments"==n(function(){return arguments}()),u=function(e,t){try{return e[t]}catch(a){}};e.exports=i?n:function(e){var t,a,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=u(t=l(e),o))?a:c?n(t):"Object"==(i=n(t))&&s(t.callee)?"Arguments":i}}}]);