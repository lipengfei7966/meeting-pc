(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0342ca3d"],{"06c1":function(e,t,r){var o=r("17e9"),n=String,a=TypeError;e.exports=function(e){if("object"==typeof e||o(e))return e;throw a("Can't set "+n(e)+" as a prototype")}},2654:function(e,t,r){"use strict";r.d(t,"j",(function(){return o})),r.d(t,"k",(function(){return n})),r.d(t,"i",(function(){return a})),r.d(t,"h",(function(){return u})),r.d(t,"l",(function(){return i})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return c})),r.d(t,"b",(function(){return l})),r.d(t,"g",(function(){return m})),r.d(t,"a",(function(){return p})),r.d(t,"c",(function(){return f})),r.d(t,"d",(function(){return d}));r("9b2a");function o(e,t,r){const o=/^((0\d{2,3}-\d{7,8})|(1[34578]\d{9}))$/;""==t||void 0==t||null==t||o.test(t)||""==t?r():r(new Error("请输入正确的电话号码或者固话号码"))}function n(e,t,r){const o=/0\d{2}-\d{7,8}/;""==t||void 0==t||null==t||o.test(t)||""==t?r():r(new Error("请输入正确的固话（格式：区号+号码,如010-1234567）"))}function a(e,t,r){const o=/^[1][3,4,5,7,8][0-9]{9}$/;""==t||void 0==t||null==t||o.test(t)||""==t?r():r(new Error("请输入正确的电话号码"))}function u(e,t,r){const o=/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;""==t||void 0==t||null==t||o.test(t)?r():r(new Error("请输入正确的邮箱地址"))}function i(e,t,r){const o=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/;""==t||void 0==t||null==t||o.test(t)?r():r(new Error("请输入正确的URL"))}function s(e,t,r){if(!t)return r(new Error("输入不可以为空"));setTimeout(()=>{if(Number(t)){const e=/^[0-9]*[1-9][0-9]*$/,o=e.test(t);o?r():r(new Error("请输入正整数"))}else r(new Error("请输入正整数"))},0)}function c(e,t,r){t||r(),setTimeout(()=>{if(Number(t)){const e=/^[0-9]*[1-9][0-9]*$/,o=e.test(t);o?r():r(new Error("请输入正整数"))}else r(new Error("请输入正整数"))},1e3)}function l(e,t){let r={},o=[];if(e=Array.isArray(e)?e:[],t)for(let n=0;n<e.length;n++)if(r[e[n].date]){for(let t=0;t<o.length;t++)if(e[n].date===o[t].date){o[t].settlement+=Number("object"==typeof e[n].settlement_total_price?e[n].settlement_total_price.value:e[n].settlement_total_price),o[t].orgSettlement+=Number("object"==typeof e[n].total_price?e[n].total_price.value:e[n].total_price),o[t].data.push(e[n]);break}}else o.push({date:e[n].date,settlement:Number("object"==typeof e[n].settlement_total_price?e[n].settlement_total_price.value:e[n].settlement_total_price),orgSettlement:Number("object"==typeof e[n].total_price?e[n].total_price.value:e[n].total_price),data:[e[n]]}),r[e[n].date]=e[n];else for(let n=0;n<e.length;n++)if(r[e[n].date]){for(let t=0;t<o.length;t++)if(e[n].date===o[t].date){o[t].settlement+="object"==typeof e[n].settlement_price?e[n].settlement_price.value:e[n].settlement_price,o[t].orgSettlement+="object"==typeof e[n].price?e[n].price.value:e[n].price,o[t].data.push(e[n]);break}}else o.push({date:e[n].date,settlement:"object"==typeof e[n].settlement_price?e[n].settlement_price.value:e[n].settlement_price,orgSettlement:"object"==typeof e[n].price?e[n].price.value:e[n].price,data:[e[n]]}),r[e[n].date]=e[n];return o}function m(e){let t={},r=[];e=Array.isArray(e)?e:[];for(let o=0;o<e.length;o++)if(t[e[o].checkindate]){for(let t=0;t<r.length;t++)if(e[o].checkindate===r[t].checkindate){"大床房"==e[o].roomtype?(r[t].bigBedNum=e[o].roomcount,r[t].totalNum+=e[o].roomcount):"双床房"==e[o].roomtype?(r[t].doubleBedNum=e[o].roomcount,r[t].totalNum+=e[o].roomcount):(r[t].suiteNum=e[o].roomcount,r[t].totalNum+=e[o].roomcount);break}}else e[o].bigBedNum=0,e[o].doubleBedNum=0,e[o].suiteNum=0,e[o].totalNum=0,"大床房"==e[o].roomtype?(e[o].bigBedNum=e[o].roomcount,e[o].totalNum+=e[o].roomcount):"双床房"==e[o].roomtype?(e[o].doubleBedNum=e[o].roomcount,e[o].totalNum+=e[o].roomcount):(e[o].suiteNum=e[o].roomcount,e[o].totalNum+=e[o].roomcount),r.push(e[o]),t[e[o].checkindate]=e[o];return r}function p(e){let t={},r=[];for(let o=0;o<e.length;o++){let n=(e[o].build?e[o].build.price:0)+(e[o].rentalCosts?e[o].rentalCosts.price:0);if(e[o].equipment&&e[o].equipment.forEach(e=>{n+=e.price||0}),t[e[o].rentalCosts.time]){for(let t=0;t<r.length;t++)if(e[o].rentalCosts.time===r[t].time){r[t].totalPrice+=(e[o].build?e[o].build.price:0)+(e[o].rentalCosts?e[o].rentalCosts.price:0),e[o].equipment&&e[o].equipment.forEach(e=>{r[t].totalPrice+=e.price||0}),r[t].data.push(e[o]);break}}else r.push({time:e[o].rentalCosts.time,totalPrice:n,data:[e[o]]}),t[e[o].rentalCosts.time]=e[o]}return r}function f(e,t="time"){let r={},o=[];e=e||[];for(let n=0;n<e.length;n++)if(r[e[n][t]]){for(let r=0;r<o.length;r++)if(e[n][t]===o[r].time){o[r].data.push(e[n]),o[r].car.push(e[n]);break}}else o.push({time:e[n][t],car_date:e[n][t].substring(0,10),breakfast:e[n].breakfast,networks:e[n].networks,describe:e[n].describe,otherrequirements:e[n].otherrequirements,type:e[n].type,room_budget:e[n].room_budget,purpose:e[n].purpose,offer_remarks:e[n].offer_remarks,comments:e[n].comments,data:[e[n]],car:[e[n]]}),r[e[n][t]]=e[n];return o}function d(e,t="time"){let r={},o=[];e=e||[];for(let n=0;n<e.length;n++)o.push({time:e[n][t],car_date:e[n][t].substring(0,10),breakfast:e[n].breakfast,networks:e[n].networks,describe:e[n].describe,otherrequirements:e[n].otherrequirements,type:e[n].type,room_budget:e[n].room_budget,purpose:e[n].purpose,offer_remarks:e[n].offer_remarks,comments:e[n].comments,data:[e[n]],car:[e[n]]}),r[e[n][t]]=e[n];return o}},3471:function(e,t,r){var o=r("17e9"),n=r("de03"),a=r("78a8");e.exports=function(e,t,r){var u,i;return a&&o(u=t.constructor)&&u!==r&&n(i=u.prototype)&&i!==r.prototype&&a(e,i),e}},"44f4":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ItineraryList"},[t("div",{staticClass:"title"},[e._v(e._s(e.ruleForm.id?"修改行程":"添加行程"))]),t("div",{staticClass:"content"},[t("div",{staticClass:"content"},[t("el-form",{ref:"ruleForm",staticClass:"form",attrs:{"label-width":"120px",model:e.ruleForm,rules:e.rules}},[t("el-form-item",{attrs:{label:"行程标题",prop:"title"}},[t("el-input",{attrs:{placeholder:"行程标题"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),t("el-form-item",{attrs:{label:"时间",prop:"start_date"}},[t("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择开始日期"},model:{value:e.ruleForm.start_date,callback:function(t){e.$set(e.ruleForm,"start_date",t)},expression:"ruleForm.start_date"}}),t("span",{staticStyle:{margin:"10px"}},[e._v("-")]),t("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择结束日期"},model:{value:e.ruleForm.end_date,callback:function(t){e.$set(e.ruleForm,"end_date",t)},expression:"ruleForm.end_date"}})],1),t("el-form-item",{attrs:{prop:"end_date"}}),t("el-form-item",{attrs:{label:"地点",prop:"address"}},[t("el-input",{attrs:{placeholder:"地点"},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1),t("el-form-item",{attrs:{label:"人数",prop:"number_of_people"}},[t("el-input",{attrs:{placeholder:"人数"},model:{value:e.ruleForm.number_of_people,callback:function(t){e.$set(e.ruleForm,"number_of_people",t)},expression:"ruleForm.number_of_people"}})],1),t("el-form-item",{attrs:{label:"行程负责人",prop:"person_in_charge"}},[t("el-input",{attrs:{placeholder:"行程负责人"},model:{value:e.ruleForm.person_in_charge,callback:function(t){e.$set(e.ruleForm,"person_in_charge",t)},expression:"ruleForm.person_in_charge"}})],1),t("el-form-item",{attrs:{label:"手机号码",prop:"phone_number"}},[t("el-input",{attrs:{placeholder:"手机号码"},model:{value:e.ruleForm.phone_number,callback:function(t){e.$set(e.ruleForm,"phone_number",t)},expression:"ruleForm.phone_number"}})],1),t("el-form-item",{attrs:{label:"客户要求"}},[t("el-input",{attrs:{type:"textarea",rows:5,placeholder:"客户要求"},model:{value:e.ruleForm.customer_requirements,callback:function(t){e.$set(e.ruleForm,"customer_requirements",t)},expression:"ruleForm.customer_requirements"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:5,placeholder:"备注"},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("立即保存")])],1)],1)],1)])])},n=[],a=r("2654"),u={data(){return{ruleForm:{id:null,event_project_id:this.$route.params.id,title:"",start_date:"",end_date:"",address:"",longitude:"",latitude:"",number_of_people:"",person_in_charge:"",phone_number:"",customer_requirements:"",remark:""},rules:{title:[{required:!0,message:"请输入行程标题",trigger:"change"}],start_date:[{required:!0,message:"请输入开始时间",trigger:"change"}],end_date:[{required:!0,message:"请输入结束时间",trigger:"change"}],address:[{required:!0,message:"请输入地点",trigger:"change"}],number_of_people:[{required:!0,message:"请输入人数",trigger:"change"},{validator:a["e"],trigger:"change"}],person_in_charge:[{required:!0,message:"请输入行程负责人",trigger:"change"}],phone_number:[{required:!0,message:"请输入公司手机号码",trigger:"change"},{validator:a["i"],trigger:"blur"}]}}},methods:{save(){this.$refs["ruleForm"].validate(e=>{if(!e)return console.log("error submit!!"),!1;this.$api.schedulingsave(this.ruleForm,"POST").then(e=>{this.$message({message:"保存成功！",type:"success"}),this.$router.push({name:"strokeList",params:{id:this.$route.params.id}})})})}},mounted(){this.$route.params.strokeid&&this.$api.schedulinginfo({id:this.$route.params.strokeid},"POST").then(e=>{this.ruleForm=e})}},i=u,s=(r("454d"),r("0b56")),c=Object(s["a"])(i,o,n,!1,null,"68308396",null);t["default"]=c.exports},"454d":function(e,t,r){"use strict";r("6316")},6316:function(e,t,r){},"672b":function(e,t,r){var o=r("b23f"),n=Function.prototype,a=n.apply,u=n.call;e.exports="object"==typeof Reflect&&Reflect.apply||(o?u.bind(a):function(){return u.apply(a,arguments)})},"76b8":function(e,t,r){var o=r("de03"),n=r("9c10");e.exports=function(e,t){o(t)&&"cause"in t&&n(e,"cause",t.cause)}},"78a8":function(e,t,r){var o=r("5d05"),n=r("50b4"),a=r("06c1");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{e=o(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(r,[]),t=r instanceof Array}catch(u){}return function(r,o){return n(r),a(o),t?e(r,o):r.__proto__=o,r}}():void 0)},"956c":function(e,t,r){var o=r("f44b"),n=String;e.exports=function(e){if("Symbol"===o(e))throw TypeError("Cannot convert a Symbol value to a string");return n(e)}},"9b2a":function(e,t,r){var o=r("ebdc"),n=r("c8a2"),a=r("672b"),u=r("b438"),i="WebAssembly",s=n[i],c=7!==Error("e",{cause:7}).cause,l=function(e,t){var r={};r[e]=u(e,t,c),o({global:!0,constructor:!0,arity:1,forced:c},r)},m=function(e,t){if(s&&s[e]){var r={};r[e]=u(i+"."+e,t,c),o({target:i,stat:!0,constructor:!0,arity:1,forced:c},r)}};l("Error",(function(e){return function(t){return a(e,this,arguments)}})),l("EvalError",(function(e){return function(t){return a(e,this,arguments)}})),l("RangeError",(function(e){return function(t){return a(e,this,arguments)}})),l("ReferenceError",(function(e){return function(t){return a(e,this,arguments)}})),l("SyntaxError",(function(e){return function(t){return a(e,this,arguments)}})),l("TypeError",(function(e){return function(t){return a(e,this,arguments)}})),l("URIError",(function(e){return function(t){return a(e,this,arguments)}})),m("CompileError",(function(e){return function(t){return a(e,this,arguments)}})),m("LinkError",(function(e){return function(t){return a(e,this,arguments)}})),m("RuntimeError",(function(e){return function(t){return a(e,this,arguments)}}))},a3d4:function(e,t,r){var o=r("5557").f;e.exports=function(e,t,r){r in e||o(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},b438:function(e,t,r){"use strict";var o=r("3726"),n=r("e72e"),a=r("9c10"),u=r("70b8"),i=r("78a8"),s=r("6ac1"),c=r("a3d4"),l=r("3471"),m=r("dbbd"),p=r("76b8"),f=r("c436"),d=r("dc0f"),b=r("8d06"),h=r("3f11");e.exports=function(e,t,r,_){var g="stackTraceLimit",y=_?2:1,v=e.split("."),k=v[v.length-1],F=o.apply(null,v);if(F){var E=F.prototype;if(!h&&n(E,"cause")&&delete E.cause,!r)return F;var w=o("Error"),x=t((function(e,t){var r=m(_?t:e,void 0),o=_?new F(e):new F;return void 0!==r&&a(o,"message",r),d&&a(o,"stack",f(o.stack,2)),this&&u(E,this)&&l(o,this,x),arguments.length>y&&p(o,arguments[y]),o}));if(x.prototype=E,"Error"!==k?i?i(x,w):s(x,w,{name:!0}):b&&g in F&&(c(x,F,g),c(x,F,"prepareStackTrace")),s(x,F),!h)try{E.name!==k&&a(E,"name",k),E.constructor=x}catch($){}return x}}},c3c0:function(e,t,r){var o=r("ecc1"),n=o("toStringTag"),a={};a[n]="z",e.exports="[object z]"===String(a)},c436:function(e,t,r){var o=r("5d05"),n=Error,a=o("".replace),u=function(e){return String(n(e).stack)}("zxcasd"),i=/\n\s*at [^:]*:[^\n]*/,s=i.test(u);e.exports=function(e,t){if(s&&"string"==typeof e&&!n.prepareStackTrace)while(t--)e=a(e,i,"");return e}},dbbd:function(e,t,r){var o=r("956c");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:o(e)}},dc0f:function(e,t,r){var o=r("071a"),n=r("4d51");e.exports=!o((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",n(1,7)),7!==e.stack)}))},f44b:function(e,t,r){var o=r("c3c0"),n=r("17e9"),a=r("7ea6"),u=r("ecc1"),i=u("toStringTag"),s=Object,c="Arguments"==a(function(){return arguments}()),l=function(e,t){try{return e[t]}catch(r){}};e.exports=o?a:function(e){var t,r,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=l(t=s(e),i))?r:c?a(t):"Object"==(o=a(t))&&n(t.callee)?"Arguments":o}}}]);