(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84348a40"],{"0359":function(t,i,e){var s=e("3726");t.exports=s("document","documentElement")},"0cd2":function(t,i,e){"use strict";e("14dd")},"14dd":function(t,i,e){},"18ab":function(t,i,e){var s,a=e("50b4"),n=e("322a"),o=e("321e"),c=e("3940"),r=e("0359"),d=e("52c7"),l=e("006e"),_=">",v="<",u="prototype",f="script",p=l("IE_PROTO"),m=function(){},C=function(t){return v+f+_+t+v+"/"+f+_},h=function(t){t.write(C("")),t.close();var i=t.parentWindow.Object;return t=null,i},y=function(){var t,i=d("iframe"),e="java"+f+":";return i.style.display="none",r.appendChild(i),i.src=String(e),t=i.contentWindow.document,t.open(),t.write(C("document.F=Object")),t.close(),t.F},b=function(){try{s=new ActiveXObject("htmlfile")}catch(i){}b="undefined"!=typeof document?document.domain&&s?h(s):y():h(s);var t=o.length;while(t--)delete b[u][o[t]];return b()};c[p]=!0,t.exports=Object.create||function(t,i){var e;return null!==t?(m[u]=a(t),e=new m,m[u]=null,e[p]=t):e=b(),void 0===i?e:n.f(e,i)}},"322a":function(t,i,e){var s=e("8d06"),a=e("d5d3"),n=e("5557"),o=e("50b4"),c=e("efb2"),r=e("a2a9");i.f=s&&!a?Object.defineProperties:function(t,i){o(t);var e,s=c(i),a=r(i),d=a.length,l=0;while(d>l)n.f(t,e=a[l++],s[e]);return t}},4170:function(t,i,e){"use strict";var s=e("ebdc"),a=e("5d05"),n=e("da1c"),o=e("6134"),c=e("956c"),r=e("071a"),d=a("".charAt),l=r((function(){return"\ud842"!=="𠮷".at(-2)}));s({target:"String",proto:!0,forced:l},{at:function(t){var i=c(n(this)),e=i.length,s=o(t),a=s>=0?s:e+s;return a<0||a>=e?void 0:d(i,a)}})},6470:function(t,i,e){"use strict";var s=e("ebdc"),a=e("ae11"),n=e("e7b6"),o=e("6134"),c=e("c221");s({target:"Array",proto:!0},{at:function(t){var i=a(this),e=n(i),s=o(t),c=s>=0?s:e+s;return c<0||c>=e?void 0:i[c]}}),c("at")},a2a9:function(t,i,e){var s=e("eaba"),a=e("321e");t.exports=Object.keys||function(t){return s(t,a)}},c221:function(t,i,e){var s=e("ecc1"),a=e("18ab"),n=e("5557").f,o=s("unscopables"),c=Array.prototype;void 0==c[o]&&n(c,o,{configurable:!0,value:a(null)}),t.exports=function(t){c[o][t]=!0}},ed4f:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t._self._c;return i("div",{staticClass:"activityOrderInfo"},[i("div",{staticClass:"title"},[t._v("活动询价订单 - "+t._s(t.info.activity_name))]),i("div",{staticClass:"content"},["0012-1"===t.info.status&&Date.parse(t.info.offerenddate)>new Date?i("div",{staticClass:"tips"},[i("p",[t._v("请尽快给客户报价吧")]),i("p",[t._v("请查看以下订单详情，如果客户需要使用会议室等场地，请为客户预留档期")]),i("a",{on:{click:t.goquotedprice}},[t._v("立即报价")])]):t._e(),"0012-6"===t.info.status&&Date.parse(t.info.offerenddate)>new Date?i("div",{staticClass:"tips"},[i("p",[t._v(" 客户请您重新报价，再优惠一些吧！ "),i("el-button",{attrs:{type:"primary"},on:{click:function(i){return t.goquotedprice(1)}}},[t._v("重新报价")])],1),i("p",[t._v("原因："+t._s(t.info.message.message))])]):("0012-1"===t.info.status||"0012-6"===t.info.status)&&Date.parse(t.info.offerenddate)<=new Date?i("div",{staticClass:"tips2"},[i("p",[t._v("很遗憾，已经超过报价截止日期，无法再报价了。")])]):"0012-3"===t.info.status?i("div",[i("div",{staticClass:"tips3"},[i("p",[t._v(" 恭喜您，已经中标！请尽快与客户联系确定相关事宜。 "),i("el-button",{attrs:{type:"warning"},on:{click:t.Orderform}},[t._v("查看关联订单")])],1)]),i("div",{staticClass:"tips_bttton_info"},[i("el-button",{attrs:{type:"primary"},on:{click:t.project}},[t._v(t._s(t.info.project_id?"查看行程":"添加行程"))])],1)]):"0012-4"===t.info.status?i("div",{staticClass:"tips"},[i("p",[t._v("您已谢绝了此询价单，无法再进行报价。")])]):"0012-5"===t.info.status?i("div",{staticClass:"tips2"},[i("p",[t._v("很遗憾，未中标")]),i("p",[t._v("客户谢绝了报价(谢绝报价)")])]):t._e(),"0012-2"===t.info.status?i("div",{staticClass:"tips"},[i("p",[t._v("等待客户决定")]),i("p",[t._v("请查看以下订单详情，如果客户需要使用会议室等场地，请为客户预留档期")]),i("a",{on:{click:t.anewquotation}},[t._v("更新报价")]),i("a",{staticStyle:{"margin-left":"20px"},on:{click:t.checkquotation}},[t._v("查看报价")])]):t._e(),i("div",{staticClass:"info"},[i("div",{staticClass:"line"},[i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("询价单号")]),i("div",{staticClass:"context"},[t._v(t._s(t.info.inquiry_sheet_code))])]),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("报名截至日期")]),i("div",{staticClass:"context"},[t._v(t._s(t._f("date_ex")(t.info.offerenddate)))])])]),i("div",{staticClass:"line"},[i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("活动名称")]),i("div",{staticClass:"context"},[t._v(t._s(t.info.activity_name))])]),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("城市")]),i("div",{staticClass:"context"},[t._v(t._s(t.info.event_city))])])]),i("div",{staticClass:"line"},[i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("最多活动人数")]),i("div",{staticClass:"context"},[t._v(t._s(t.info.activity_count))])]),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("活动日期")]),i("div",{staticClass:"context"},[t._v(t._s(t._f("date_day")(t.info.activity_startdate))+" 至 "+t._s(t._f("date_day")(t.info.activity_enddate))+t._s(t.info.isadjustdate))])])]),i("div",{staticClass:"line"},[i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("客户公司")]),i("div",{staticClass:"context"},[t._v(t._s(t.info.company_name))])]),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("客户联系人")]),i("div",{staticClass:"context"},[t._v(t._s(t.info.contacts))])])]),i("div",{staticClass:"line"},[i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("联系电话")]),i("div",{staticClass:"context"},[t._v(t._s(t.info.customer_service_telephone_numbers))])]),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("联系邮箱")]),i("div",{staticClass:"context"},[t._v(t._s(t.info.mailbox))])])])]),i("div",{staticClass:"info"},[i("div",{staticClass:"line"},[i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("酒店")]),i("div",{staticClass:"context"},[t._v(t._s(t.info.hotel_name))])]),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("联系人")]),i("div",{staticClass:"context"},[t._v(t._s(t.info.myinfo.contacts))])])]),i("div",{staticClass:"line"},[i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("联系电话")]),i("div",{staticClass:"context"},[t._v(t._s(t.info.myinfo.telephone))])]),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("联系邮箱")]),i("div",{staticClass:"context"},[t._v(t._s(t.info.myinfo.email))])])])]),i("div",{staticClass:"info"},[t._m(0),i("div",{staticClass:"line"},[i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("客房需求")]),i("div",{staticClass:"context"},t._l(t.info.inquiry_sheet_room,(function(e){return i("div",{key:e.id,staticClass:"hyxq_item"},[i("div",{staticClass:"date"},[t._v(t._s(t._f("date_day")(e.date)))]),t._l(e.roomlist,(function(e){return i("div",{key:e.id,staticClass:"c_item"},[t._v(t._s(e.roomtypename)+":"+t._s(e.roomcount)+" 间")])})),e.roomlist.length>0&&e.roomlist[0].otherrequirements?i("div",{staticClass:"otherrequirements"},[t._v(" 其他需求："+t._s(e.roomlist[0].otherrequirements)+" ")]):t._e()],2)})),0)]),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("会议需求")]),i("div",{staticClass:"context"},t._l(t.info.inquiry_sheet_conference,(function(e){return i("div",{key:e.id,staticClass:"hyxq_item"},[i("div",{staticClass:"date"},[t._v(t._s(t._f("date_day")(e.conferencedate)))]),t._l(e.conferencelist,(function(s){return i("div",{key:s.id,staticClass:"c_item"},[1==s.type?i("div",[t._v(" "+t._s(s.item+s.order_name)+" "+t._s(s.starttime)+"-"+t._s(s.endtime)+" "+t._s(s.roomsetuptype)+" "+t._s(s.attendees)+" 人，会场面积范围："+t._s(s.min_area)+"~"+t._s(s.max_area)+" sqm ")]):2==s.type?i("div",[t._v(" "+t._s(s.item+s.typename)+" "+t._s(t._f("date_day")(e.conferencedate))+" "+t._s(s.starttime)+"~"+t._s(t._f("date_day")(e.conferencedate))+" "+t._s(s.endtime)+" "+t._s(s.related_information)+" ")]):t._e(),2==s.type?i("div",{staticClass:"otherrequirements"},[t._v("需求备注："+t._s(s.describe))]):t._e(),3==s.type?i("div",[i("div",{staticClass:"date"},[t._v(t._s(t._f("date_day")(e.conferencedate))+" "+t._s(s.item))]),t._v(" "+t._s(s.equipment)+" "),i("div",{staticClass:"otherrequirements"},[t._v("需求备注："+t._s(s.microphonedescribe))])]):t._e()])}))],2)})),0)])]),i("div",{staticClass:"line"},[i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("酒店内用餐需求")]),i("div",{staticClass:"context"},t._l(t.info.inquiry_sheet_food,(function(e){return i("div",{key:e.id,staticClass:"hyxq_item"},[i("div",{staticClass:"date"},[t._v(t._s(t._f("date_day")(e.date)))]),t._l(e.foodlist,(function(s,a){return i("div",{key:s.id,staticClass:"c_item"},[i("span",[t._v(t._s(s.foodtypename))]),t._v(" "+t._s(s.usetype?`[${s.usetype}]`:"")+" "+t._s(s.personcount)+" 人 "),1==s.addresstype?i("span",{staticClass:"outsidethehotel"},[t._v("酒店外")]):t._e(),a==e.foodlist.length-1?i("div",{staticClass:"otherrequirements"},[t._v("需求备注："+t._s(s.comments))]):t._e()])}))],2)})),0)]),i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("其它需求信息或者注意事项")]),i("div",{staticClass:"context"},[i("span",[t._v(t._s(t.info.other))])])])]),i("div",{staticClass:"line"}),i("div",{staticClass:"line"},[i("div",{staticClass:"item"},[i("div",{staticClass:"label"},[t._v("附件")]),t._l(t.info.inquiry_sheet_attach,(function(e){return i("div",{key:e.id,staticClass:"context"},[i("a",{attrs:{target:"_blank",href:t.info.domain+e.filepath,download:""}},[t._v(t._s(e.filename))])])}))],2)])]),("0012-1"===t.info.status||"0012-6"===t.info.status)&&Date.parse(t.info.offerenddate)>new Date?i("div",{staticClass:"btn-group"},["0012-1"===t.info.status?i("el-button",{attrs:{type:"primary"},on:{click:t.goquotedprice}},[t._v("开始报价")]):i("el-button",{attrs:{type:"primary"},on:{click:function(i){return t.goquotedprice(1)}}},[t._v("重新报价")]),i("el-button",{attrs:{type:"danger"},on:{click:t.refusequoted}},[t._v("谢绝报价")])],1):t._e(),t.info.history_quotationprice&&t.info.history_quotationprice.length>0?i("div",{staticClass:"info"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"header clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("您提交过"+t._s(t.info.history_quotationprice.length)+"次报价，以下为报价记录：")])]),t._l(t.info.history_quotationprice,(function(e,s){return i("div",{key:e.id,staticClass:"text item"},[t._v(" 第"+t._s(s+1)+"次报价 "),t._v(" ,总金额￥"+t._s(t.positiveFloat(e.total_amount))+"元，[ "+t._s(t._f("date_ex")(e.offer_data))+" ] "),i("el-link",{staticClass:"quotedprice",attrs:{name:"quotedprice"},on:{click:function(i){return t.Quotedprice(e.id,0)}}},[t._v(" 查看报价单 "),i("i",{staticClass:"el-icon-view el-icon--right"})])],1)}))],2)],1):t._e(),i("el-dialog",{attrs:{title:"添加项目",visible:t.addProjectStatus,"before-close":t=>{this.itemData=null,t()},width:"700px"},on:{"update:visible":function(i){t.addProjectStatus=i}}},[t.addProjectStatus?i("projectAdded",{attrs:{"item-data":t.itemData},on:{onColse:t.projectSave}}):t._e()],1)],1)])},a=[function(){var t=this,i=t._self._c;return i("div",{staticClass:"line"},[i("div",{staticClass:"item"},[i("div",{staticClass:"label",staticStyle:{width:"100%","justify-content":"left"}},[t._v("客户需求")])])])}],n=(e("6470"),e("4170"),e("97aa")),o=e("cf45"),c={name:"ItineraryInfo",components:{projectAdded:n["a"]},data(){return{info:{},addProjectStatus:!1,itemData:null}},methods:{positiveFloat(t){return Object(o["m"])(t)},projectSave(t){this.$api.projectsave(t,"POST").then(i=>{this.$message({message:t.id?"修改成功！":"添加成功！",type:"success"}),this.$router.push({name:"ItineraryManagement",params:{id:this.info.project_id}})})},checkquotation(){let t=this.info.history_quotationprice.at(-1).id,i=this.$router.resolve({name:"quotedprice",params:{id:t,isSubmit:0}});window.open(i.href,"_blank")},Quotedprice(t,i){let e=this.$router.resolve({name:"quotedprice",params:{id:t,isSubmit:i}});window.open(e.href,"_blank")},Orderform(){this.$router.push({name:"orderInfo_Hotel",params:{id:this.info.orderform_id}})},project(){this.info.project_id?this.$router.push({name:"ItineraryManagement",params:{id:this.info.project_id}}):this.addProjectStatus=!0},refusequoted(){this.$prompt("请输入您谢绝报价的理由","谢绝报价",{confirmButtonText:"确定谢绝报价",showCancelButton:!1,inputPattern:/\S/,inputErrorMessage:"请填写谢绝报价的理由",inputType:"textarea"}).then(({value:t})=>{this.$api.inquirysheetRefusequoted({id:this.info.object_id,reason:t},"POST").then(t=>{this.$message({message:"已拒绝报价",type:"success"}),location.reload()})}).catch(()=>{})},goquotedprice(t){this.$router.push({name:"quotedprice",params:{id:this.info.object_id,isSubmit:1,type:t}})},anewquotation(){let t=this;t.$confirm("是否确定更新报价?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{t.$api.AnewQuotation({id:t.info.object_id},"POST").then(i=>{i?t.goquotedprice(t.info.object_id):this.$message({message:"不能修改报价单!",type:"error"})})})}},mounted(){this.$api.inquirysheetInfo({id:this.$route.params.id},"POST").then(t=>{this.info=t})}},r=c,d=(e("0cd2"),e("0b56")),l=Object(d["a"])(r,s,a,!1,null,"312082a1",null);i["default"]=l.exports}}]);