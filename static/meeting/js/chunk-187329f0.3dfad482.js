(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-187329f0"],{"06c1":function(e,t,i){var o=i("17e9"),n=String,r=TypeError;e.exports=function(e){if("object"==typeof e||o(e))return e;throw r("Can't set "+n(e)+" as a prototype")}},"0e5c":function(e,t,i){"use strict";var o=i("5829"),n=i("8642");t["a"]=function(e){return new Promise((function(t,i){let r=[],s={},a=e.length;console.log(e.length,e);const c=()=>0==e.length?t(r):String(e[0].file).IsPicture()?(e.shift(),c()):void o["a"].upload({file:e[0].file},"POST",{type:"form"}).then(i=>{console.log(i);var o=!0;if(void 0!=i&&""==i.FilePath&&""==i.OriginalFileName&&(console.log("重复了"),i=void 0,o=!1),void 0==i&&o){n["default"].prototype.$alert("网络不稳定, 文件上传失败, 请重新上传","提示",{confirmButtonText:"确定",callback:e=>{n["default"].prototype.$message({message:"上传失败的文件已标记",type:"warning"})}});let i=a-e.length;return t({tag:i,uploadImageList:r})}s=i,r.push(s),e.shift(),c()});c()}))}},2654:function(e,t,i){"use strict";i.d(t,"j",(function(){return o})),i.d(t,"k",(function(){return n})),i.d(t,"i",(function(){return r})),i.d(t,"h",(function(){return s})),i.d(t,"l",(function(){return a})),i.d(t,"e",(function(){return c})),i.d(t,"f",(function(){return l})),i.d(t,"b",(function(){return d})),i.d(t,"g",(function(){return f})),i.d(t,"a",(function(){return _})),i.d(t,"c",(function(){return u})),i.d(t,"d",(function(){return p}));i("9b2a");function o(e,t,i){const o=/^((0\d{2,3}-\d{7,8})|(1[34578]\d{9}))$/;""==t||void 0==t||null==t||o.test(t)||""==t?i():i(new Error("请输入正确的电话号码或者固话号码"))}function n(e,t,i){const o=/0\d{2}-\d{7,8}/;""==t||void 0==t||null==t||o.test(t)||""==t?i():i(new Error("请输入正确的固话（格式：区号+号码,如010-1234567）"))}function r(e,t,i){const o=/^[1][3,4,5,7,8][0-9]{9}$/;""==t||void 0==t||null==t||o.test(t)||""==t?i():i(new Error("请输入正确的电话号码"))}function s(e,t,i){const o=/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;""==t||void 0==t||null==t||o.test(t)?i():i(new Error("请输入正确的邮箱地址"))}function a(e,t,i){const o=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/;""==t||void 0==t||null==t||o.test(t)?i():i(new Error("请输入正确的URL"))}function c(e,t,i){if(!t)return i(new Error("输入不可以为空"));setTimeout(()=>{if(Number(t)){const e=/^[0-9]*[1-9][0-9]*$/,o=e.test(t);o?i():i(new Error("请输入正整数"))}else i(new Error("请输入正整数"))},0)}function l(e,t,i){t||i(),setTimeout(()=>{if(Number(t)){const e=/^[0-9]*[1-9][0-9]*$/,o=e.test(t);o?i():i(new Error("请输入正整数"))}else i(new Error("请输入正整数"))},1e3)}function d(e,t){let i={},o=[];if(e=Array.isArray(e)?e:[],t)for(let n=0;n<e.length;n++)if(i[e[n].date]){for(let t=0;t<o.length;t++)if(e[n].date===o[t].date){o[t].settlement+=Number("object"==typeof e[n].settlement_total_price?e[n].settlement_total_price.value:e[n].settlement_total_price),o[t].orgSettlement+=Number("object"==typeof e[n].total_price?e[n].total_price.value:e[n].total_price),o[t].data.push(e[n]);break}}else o.push({date:e[n].date,settlement:Number("object"==typeof e[n].settlement_total_price?e[n].settlement_total_price.value:e[n].settlement_total_price),orgSettlement:Number("object"==typeof e[n].total_price?e[n].total_price.value:e[n].total_price),data:[e[n]]}),i[e[n].date]=e[n];else for(let n=0;n<e.length;n++)if(i[e[n].date]){for(let t=0;t<o.length;t++)if(e[n].date===o[t].date){o[t].settlement+="object"==typeof e[n].settlement_price?e[n].settlement_price.value:e[n].settlement_price,o[t].orgSettlement+="object"==typeof e[n].price?e[n].price.value:e[n].price,o[t].data.push(e[n]);break}}else o.push({date:e[n].date,settlement:"object"==typeof e[n].settlement_price?e[n].settlement_price.value:e[n].settlement_price,orgSettlement:"object"==typeof e[n].price?e[n].price.value:e[n].price,data:[e[n]]}),i[e[n].date]=e[n];return o}function f(e){let t={},i=[];e=Array.isArray(e)?e:[];for(let o=0;o<e.length;o++)if(t[e[o].checkindate]){for(let t=0;t<i.length;t++)if(e[o].checkindate===i[t].checkindate){"大床房"==e[o].roomtype?(i[t].bigBedNum=e[o].roomcount,i[t].totalNum+=e[o].roomcount):"双床房"==e[o].roomtype?(i[t].doubleBedNum=e[o].roomcount,i[t].totalNum+=e[o].roomcount):(i[t].suiteNum=e[o].roomcount,i[t].totalNum+=e[o].roomcount);break}}else e[o].bigBedNum=0,e[o].doubleBedNum=0,e[o].suiteNum=0,e[o].totalNum=0,"大床房"==e[o].roomtype?(e[o].bigBedNum=e[o].roomcount,e[o].totalNum+=e[o].roomcount):"双床房"==e[o].roomtype?(e[o].doubleBedNum=e[o].roomcount,e[o].totalNum+=e[o].roomcount):(e[o].suiteNum=e[o].roomcount,e[o].totalNum+=e[o].roomcount),i.push(e[o]),t[e[o].checkindate]=e[o];return i}function _(e){let t={},i=[];for(let o=0;o<e.length;o++){let n=(e[o].build?e[o].build.price:0)+(e[o].rentalCosts?e[o].rentalCosts.price:0);if(e[o].equipment&&e[o].equipment.forEach(e=>{n+=e.price||0}),t[e[o].rentalCosts.time]){for(let t=0;t<i.length;t++)if(e[o].rentalCosts.time===i[t].time){i[t].totalPrice+=(e[o].build?e[o].build.price:0)+(e[o].rentalCosts?e[o].rentalCosts.price:0),e[o].equipment&&e[o].equipment.forEach(e=>{i[t].totalPrice+=e.price||0}),i[t].data.push(e[o]);break}}else i.push({time:e[o].rentalCosts.time,totalPrice:n,data:[e[o]]}),t[e[o].rentalCosts.time]=e[o]}return i}function u(e,t="time"){let i={},o=[];e=e||[];for(let n=0;n<e.length;n++)if(i[e[n][t]]){for(let i=0;i<o.length;i++)if(e[n][t]===o[i].time){o[i].data.push(e[n]),o[i].car.push(e[n]);break}}else o.push({time:e[n][t],car_date:e[n][t].substring(0,10),breakfast:e[n].breakfast,networks:e[n].networks,describe:e[n].describe,otherrequirements:e[n].otherrequirements,type:e[n].type,room_budget:e[n].room_budget,purpose:e[n].purpose,offer_remarks:e[n].offer_remarks,comments:e[n].comments,data:[e[n]],car:[e[n]]}),i[e[n][t]]=e[n];return o}function p(e,t="time"){let i={},o=[];e=e||[];for(let n=0;n<e.length;n++)o.push({time:e[n][t],car_date:e[n][t].substring(0,10),breakfast:e[n].breakfast,networks:e[n].networks,describe:e[n].describe,otherrequirements:e[n].otherrequirements,type:e[n].type,room_budget:e[n].room_budget,purpose:e[n].purpose,offer_remarks:e[n].offer_remarks,comments:e[n].comments,data:[e[n]],car:[e[n]]}),i[e[n][t]]=e[n];return o}},3471:function(e,t,i){var o=i("17e9"),n=i("de03"),r=i("78a8");e.exports=function(e,t,i){var s,a;return r&&o(s=t.constructor)&&s!==i&&n(a=s.prototype)&&a!==i.prototype&&r(e,a),e}},"672b":function(e,t,i){var o=i("b23f"),n=Function.prototype,r=n.apply,s=n.call;e.exports="object"==typeof Reflect&&Reflect.apply||(o?s.bind(r):function(){return s.apply(r,arguments)})},"6d49":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"quotedprice"},[t("div",{staticClass:"path"},[t("ul",[t("li",{staticStyle:{color:"#409eff",cursor:"pointer"},on:{click:function(t){return e.$router.replace({path:"/activityInquiry/orderList"})}}},[e._v(" 活动询价订单列表 ")]),t("li",{staticStyle:{color:"#7c7f82"}},[e._v(">")]),t("li",{staticStyle:{color:"#409eff",cursor:"pointer"},on:{click:function(t){return e.$router.replace({path:"/activityInquiry/DMCorderList/"+e.info.inquiry_sheet_object_id})}}},[e._v(" 活动询价订单详情 ")]),t("li",{staticStyle:{color:"#7c7f82"}},[e._v(">")]),t("li",{staticStyle:{color:"#7c7f82"}},[e._v("活动询价订单报价")])])]),e.info?t("div",{staticClass:"content"},[t("p",{staticStyle:{color:"#169bd5","font-weight":"bold","margin-top":"20px"}},[e._v("RFP信息")]),t("div",{staticClass:"info"},[t("div",{staticClass:"line"},[t("div",{staticClass:"item"},[t("div",{staticClass:"label"},[e._v("询价单号")]),t("div",{staticClass:"context"},[e._v(e._s(e.info.inquiry_sheet_code))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"label"},[e._v("报名截至日期")]),t("div",{staticClass:"context"},[e._v(e._s(e._f("date_ex")(e.info.offerenddate)))])])]),t("div",{staticClass:"line"},[t("div",{staticClass:"item"},[t("div",{staticClass:"label"},[e._v("活动名称")]),t("div",{staticClass:"context"},[e._v(e._s(e.info.activity_name))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"label"},[e._v("城市")]),t("div",{staticClass:"context"},[e._v(e._s(e.info.event_city))])])]),t("div",{staticClass:"line"},[t("div",{staticClass:"item"},[t("div",{staticClass:"label"},[e._v("最多活动人数")]),t("div",{staticClass:"context"},[e._v(e._s(e.info.activity_count))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"label"},[e._v("活动日期")]),t("div",{staticClass:"context"},[e._v(" "+e._s(e._f("date_day")(e.info.activity_startdate))+" 至 "+e._s(e._f("date_day")(e.info.activity_enddate))+" "+e._s(1==e.info.isadjustdate?"[会议日期可以调整]":"[会议日期不可调整]")+" ")])])]),t("div",{staticClass:"line"},[t("div",{staticClass:"item"},[t("div",{staticClass:"label"},[e._v("公司名称")]),t("div",{staticClass:"context"},[e._v(e._s(e.info.company_name))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"label"},[e._v("联系人")]),t("div",{staticClass:"context"},[e._v(e._s(e.info.contacts))])])]),t("div",{staticClass:"line"},[t("div",{staticClass:"item"},[t("div",{staticClass:"label"},[e._v("联系邮箱")]),t("div",{staticClass:"context"},[e._v(e._s(e.info.mailbox))])]),t("div",{staticClass:"item"},[t("div",{staticClass:"label"},[e._v("联系电话")]),t("div",{staticClass:"context"},[e._v(" "+e._s(e.info.customer_service_telephone_numbers)+" ")])])])]),t("p",{staticStyle:{color:"#169bd5","font-weight":"bold","margin-top":"20px"}},[e._v(" 您的信息 ")]),t("div",{staticClass:"info"},[t("div",{staticClass:"line"},[t("div",{staticClass:"item"},[t("div",{staticClass:"label"},[e._v("供应商")]),t("div",{staticClass:"context"},[e._v(e._s(e.info.hotelname))])]),t("div",{staticClass:"item"},[e._m(0),t("div",{staticClass:"context contextSel"},[t("el-select",{attrs:{disabled:e.readonly,placeholder:"请选择"},on:{change:e.changeSel},model:{value:e.contractsId,callback:function(t){e.contractsId=t},expression:"contractsId"}},e._l(e.info.contactslist,(function(e){return t("el-option",{key:e.id,attrs:{label:e.contacts,value:e.id}})})),1),t("el-input",{attrs:{disabled:e.disabled||e.readonly,placeholder:"请输入您的姓名"},model:{value:e.info.biddername,callback:function(t){e.$set(e.info,"biddername",t)},expression:"info.biddername"}})],1)])]),t("div",{staticClass:"line"},[t("div",{staticClass:"item"},[e._m(1),t("div",{staticClass:"context"},[t("el-input",{attrs:{disabled:e.disabled||e.readonly,placeholder:"请输入您的联系电话"},model:{value:e.info.biddertel,callback:function(t){e.$set(e.info,"biddertel",t)},expression:"info.biddertel"}})],1)]),t("div",{staticClass:"item"},[e._m(2),t("div",{staticClass:"context"},[t("el-input",{attrs:{disabled:e.disabled||e.readonly,placeholder:"请输入您的联系邮箱"},model:{value:e.info.bidderemail,callback:function(t){e.$set(e.info,"bidderemail",t)},expression:"info.bidderemail"}})],1)])])]),t("div",{staticClass:"excel"},[e._m(3),0==this.$route.params.isSubmit?t("a",{staticStyle:{cursor:"pointer"},attrs:{download:""},on:{click:e.excelexport}},[e._v("下载excel")]):e._e()]),e.hotelVisible?t("div",{staticClass:"title_item"},[e._v("采购酒店")]):e._e(),e.hotelVisible?t("div",{staticClass:"section",staticStyle:{display:"flex","justify-content":"space-between"}},[t("div",{staticStyle:{width:"50%"}},[t("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入采购酒店",size:"small",readonly:e.readonly},model:{value:e.info.hotel_name,callback:function(t){e.$set(e.info,"hotel_name",t)},expression:"info.hotel_name"}}),t("el-checkbox",{staticStyle:{"line-height":"30px","margin-left":"20px"},attrs:{"true-label":1,"false-label":0},model:{value:e.info.isuser_preferred_hotel,callback:function(t){e.$set(e.info,"isuser_preferred_hotel",t)},expression:"info.isuser_preferred_hotel"}},[e._v("是否使用首选酒店")])],1),1==e.info.event_info_configure.bjqrisdisplay&&0==this.$route.params.isSubmit?t("span",{staticStyle:{color:"rgb(22, 155, 213)","line-height":"30px",cursor:"pointer"},on:{click:e.downloadOfferConfirm}},[e._v(" 下载报价确认单 ")]):e._e()]):e._e(),e.roomVisible?t("div",{staticClass:"title_item title_item_sel"},[t("div",[e._v("客房需求 Guest Rooms")]),t("div",[e._v("房标 Room Standard："+e._s(e.info.night_budget)+" /夜/间")]),t("div",[t("span",[e._v(" "+e._s(e.info.is_breakfast?"需要含早餐":"不需要含早餐")+" ")]),t("span",[e._v(" "+e._s(e.info.is_networks?"需要宽带":"不需要宽带")+" ")])]),t("div"),t("div",{},[t("el-checkbox",{attrs:{disabled:"","true-label":1,"false-label":0},model:{value:e.info.event_info_configure.room_inquiry_isnotservice,callback:function(t){e.$set(e.info.event_info_configure,"room_inquiry_isnotservice",t)},expression:"info.event_info_configure.room_inquiry_isnotservice"}},[e._v("计入服务费")])],1)]):e._e(),e.roomVisible?t("div",{staticClass:"section"},[e._l(e.info.quoted_price_room,(function(i,o){return t("table",{key:"kefang"+o},[i.room_list&&i.room_list.length>0?t("thead",[t("tr",{staticClass:"color_1"},[t("th",{staticClass:"topleft datecolor",attrs:{colspan:"4"}},[e._v(" 日期: "+e._s(e._f("date_day_ex")(i.date))+" "),0!=o&&1==e.$route.params.isSubmit?t("el-button",{staticClass:"copy",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.copyRoomDay(o)}}},[e._v("复制上一天")]):e._e()],1),t("th",{staticClass:"topleft"},[e._v(" 一天总金额 ￥"+e._s(e.dayMoney(i.room_list).toFixed(2))+" ")])]),e._m(4,!0)]):e._e(),t("tbody",[e._l(i.room_list,(function(o,n){return t("tr",{key:"c_"+n},[t("td",[null!=o.inquiry_sheet_room_id?[e._v(" "+e._s(o.roomtypename)+" ")]:t("el-select",{attrs:{size:"small",filterable:""},on:{change:function(t){return e.changeCostProject(t,o)}},model:{value:o.roomtype,callback:function(t){e.$set(o,"roomtype",t)},expression:"item_c.roomtype"}},e._l(e.roomcostProjects,(function(e){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:"0"!==e.detail_type,expression:"rc.detail_type !== '0'"}],key:e.code,attrs:{label:e.name,value:e.code}})})),1)],2),t("td",[e._v(e._s(o.roomcount))]),t("td",[t("el-input",{class:{difference:e.roomProvideCountDifference(o)},attrs:{readonly:e.readonly},on:{input:function(t){o.provide_count=e.formatNum(o.provide_count,3)}},model:{value:o.provide_count,callback:function(t){e.$set(o,"provide_count",t)},expression:"item_c.provide_count"}})],1),t("td",[t("el-input",{class:{difference:e.roomDifference(o)},attrs:{readonly:e.readonly},on:{input:function(t){o.unitprice=e.formatNum(o.unitprice,2)}},model:{value:o.unitprice,callback:function(t){e.$set(o,"unitprice",t)},expression:"item_c.unitprice"}})],1),t("td",[t("el-input",{class:{room_line:!o.inquiry_sheet_room_id},attrs:{readonly:e.readonly},model:{value:o.remarks,callback:function(t){e.$set(o,"remarks",t)},expression:"item_c.remarks"}}),o.inquiry_sheet_room_id||1!=e.$route.params.isSubmit?e._e():t("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini"},on:{click:function(t){return e.delNewRoomType(i,n)}}})],1)])})),1==e.$route.params.isSubmit?t("tr",[t("td",[e._v("其他要求")]),t("td",{attrs:{colspan:"3"}},[i.room_list.length>0?[e._v(" "+e._s(i.room_list[0].otherrequirements)+" ")]:e._e()],2),t("td",{staticStyle:{"text-align":"center"}},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.addNewRoomType(i.room_list)}}},[e._v("添加新房型")])],1)]):e._e()],2)])})),t("div",{staticClass:"total"},[t("div",[e._v(" 客房报价总价: "),t("span",[e._v("￥"+e._s(e.positiveFloat(e.allMoney)))])]),t("div",[e._v(" 客房报价总备注： "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.room_remarks,expression:"info.room_remarks"}],attrs:{type:"text",placeholder:"请备注您的客房优势",readonly:e.readonly},domProps:{value:e.info.room_remarks},on:{input:function(t){t.target.composing||e.$set(e.info,"room_remarks",t.target.value)}}})])])],2):e._e(),e.conferenceVisible?t("div",{staticClass:"title_item title_item_sel"},[t("div",[e._v("会场需求 Conference Rooms")]),t("div",{},[t("el-checkbox",{attrs:{disabled:"","true-label":1,"false-label":0},model:{value:e.info.event_info_configure.conference_inquiry_isnotservice,callback:function(t){e.$set(e.info.event_info_configure,"conference_inquiry_isnotservice",t)},expression:"info.event_info_configure.conference_inquiry_isnotservice"}},[e._v("计入服务费")])],1)]):e._e(),e.conferenceVisible?t("div",{staticClass:"section"},[e._l(e.info.quoted_price_conference,(function(i,o){return t("table",{key:o},[t("thead",[t("tr",{staticClass:"color_1"},[t("th",{staticClass:"topleft datecolor",attrs:{colspan:"3"}},[e._v(" 日期: "+e._s(e._f("date_day_ex")(i.date))+" ")]),t("th",{staticClass:"topleft",attrs:{colspan:"2"}},[e._v(" 一天总金额 ￥"+e._s(e.meetingDayMoney(i.conference_list).toFixed(2))+" ")])]),e._m(5,!0)]),t("tbody",e._l(i.conference_list,(function(o,n){return t("tr",{key:"c_"+n},[t("td",[1==o.type?[e._v(" "+e._s("场租-会场"+o.order_name+" ("+o.roomsetuptypename+")")+" ")]:e._e(),2==o.type?[e._v(" "+e._s("会场搭建费-"+o.related_information+" ("+o.roomsetuptypename+")")+" ")]:e._e(),3==o.type?[e._v(" "+e._s("设备-会场"+o.order_name+" ("+o.roomsetuptypename+")")+" ")]:e._e(),4==o.type?[t("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.conferenceTypeChange(o)}},model:{value:o.quoted_code,callback:function(t){e.$set(o,"quoted_code",t)},expression:"item_c.quoted_code"}},e._l(e.addConferenceSelects,(function(e){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:"0"!==e.detail_type,expression:"option.detail_type !== '0'"}],key:e.code,attrs:{label:e.name,value:e.code}})})),1)]:e._e()],2),t("td",[1==o.type?[t("p",[e._v("会议时间:"+e._s(o.starttime)+"~"+e._s(o.endtime))]),t("p",[e._v("出席人数: "+e._s(o.attendees)+"人")]),t("p",[e._v("会场台型: "+e._s(o.roomsetuptypename))]),t("p",[e._v(" 会场面积范围:"+e._s(o.min_area)+"~"+e._s(o.max_area)+" sqm ")])]:e._e(),2==o.type?[t("p",[e._v(" "+e._s(e._f("date_day")(i.date))+" "+e._s(o.starttime)+"~"+e._s(e._f("date_day")(o.advance_date))+" "+e._s(o.endtime)+" "),t("br"),e._v(" "+e._s(o.related_information)+" ")])]:e._e(),3==o.type?[t("p",[e._v(e._s(o.equipment))])]:e._e(),4==o.type?[t("div",[e._v(" 数量： "),t("el-input-number",{staticStyle:{width:"50%"},attrs:{controls:!1,precision:0,placeholder:"请输入数量",readonly:e.readonly},model:{value:o.count,callback:function(t){e.$set(o,"count",e._n(t))},expression:"item_c.count"}})],1)]:e._e()],2),t("td",[1==o.type?[e._v(" "+e._s(o.describe)+" ")]:e._e(),2==o.type?[e._v(" "+e._s(o.describe)+" ")]:e._e(),3==o.type?[e._v(" "+e._s(o.microphonedescribe)+" ")]:e._e(),4==o.type?[t("div",[e._v(" 单价： ￥ "),t("el-input",{staticStyle:{width:"60%"},attrs:{readonly:e.readonly},on:{input:function(t){o.price=e.formatNum(o.price,2)}},model:{value:o.price,callback:function(t){e.$set(o,"price",t)},expression:"item_c.price"}})],1)]:e._e()],2),t("td",{staticStyle:{width:"150px"}},[4==o.type?[e._v(" ￥ "+e._s(e.positiveFloat(o.price*o.count))+" ")]:[t("el-input",{class:{difference:e.conferenceDifference(o)},attrs:{readonly:e.readonly},on:{input:function(t){o.price=e.formatNum(o.price,2)}},model:{value:o.price,callback:function(t){e.$set(o,"price",t)},expression:"item_c.price"}})]],2),t("td",[t("el-input",{staticStyle:{width:"auto"},attrs:{readonly:e.readonly},model:{value:o.comments,callback:function(t){e.$set(o,"comments",t)},expression:"item_c.comments"}}),1==o.type?t("span",{staticStyle:{"margin-left":"10px",color:"#409eff",cursor:"pointer"},on:{click:function(t){return e.addConferenceOther(i,o,n)}}},[e._v("添加其他费用")]):e._e(),4==o.type?t("span",{staticStyle:{"margin-left":"10px",color:"#409eff",cursor:"pointer"},on:{click:function(t){return e.delConferenceOther(i,o,n)}}},[e._v("删除")]):e._e()],1)])})),0)])})),t("div",{staticClass:"total"},[t("div",[e._v(" 会场报价总计: "),t("span",[e._v("￥"+e._s(e.positiveFloat(e.meetingAllMoney)))])]),t("div",[e._v(" 会议报价总备注： "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.conference_remarks,expression:"info.conference_remarks"}],attrs:{type:"text",placeholder:"您可以填写详细的报价备注",readonly:e.readonly},domProps:{value:e.info.conference_remarks},on:{input:function(t){t.target.composing||e.$set(e.info,"conference_remarks",t.target.value)}}})])])],2):e._e(),e.foodVisible?t("div",{staticClass:"title_item title_item_sel"},[t("div",[e._v("酒店内餐饮需求 Hotel Food & Beverage")]),t("div",[e._v("餐标Dining Standard:￥"+e._s(e.positiveFloat(e.info.food_limit)))]),t("div",{},[t("el-checkbox",{attrs:{disabled:"","true-label":1,"false-label":0},model:{value:e.info.event_info_configure.hotel_food_inquiry_isnotservice,callback:function(t){e.$set(e.info.event_info_configure,"hotel_food_inquiry_isnotservice",t)},expression:"info.event_info_configure.hotel_food_inquiry_isnotservice"}},[e._v("计入服务费")])],1)]):e._e(),e.foodVisible?t("div",{staticClass:"section"},[e._l(e.info.quoted_price_food,(function(i,o){return t("table",{key:o},[t("thead",[t("tr",{staticClass:"color_1"},[t("th",{staticClass:"topleft datecolor",attrs:{colspan:"4"}},[t("div",{staticClass:"flex_row justify_between"},[t("div",[e._v("日期: "+e._s(e._f("date_day_ex")(i.date)))]),t("div",[e._v(" 一天总金额 ￥"+e._s(e.repastDayMoney(i.food_list).toFixed(2))+" ")])])])]),e._m(6,!0)]),t("tbody",[e._l(i.food_list,(function(i,o){return t("tr",{key:"c_"+o},[t("td",[e._v(" "+e._s(i.foodtypename)+" "),i.usetypename?t("span",[e._v("["+e._s(i.usetypename)+"]")]):e._e()]),t("td",[e._v(e._s(i.personcount))]),t("td",[t("el-input",{class:{difference:e.foodDifference(i)},attrs:{type:"text",readonly:e.readonly},on:{input:function(t){i.price=e.formatNum(i.price,2)}},model:{value:i.price,callback:function(t){e.$set(i,"price",t)},expression:"item_c.price"}})],1),t("td",[1==i.addresstype?t("el-input",{attrs:{readonly:e.readonly,placeholder:"请注明餐厅名称或其他备注"},model:{value:i.offer_remarks,callback:function(t){e.$set(i,"offer_remarks",t)},expression:"item_c.offer_remarks"}}):t("el-input",{attrs:{placeholder:"请填写针对这个项目的特殊备注",readonly:e.readonly},model:{value:i.offer_remarks,callback:function(t){e.$set(i,"offer_remarks",t)},expression:"item_c.offer_remarks"}})],1)])})),t("tr",[t("td",{attrs:{colspan:"4"}},[e._v(" 客户特殊要求: "+e._s(i.food_list[0].comments)+" ")])])],2)])})),t("div",{staticClass:"total"},[t("div",[e._v(" 酒店内餐饮报价总计: "),t("span",[e._v("￥"+e._s(e.positiveFloat(e.repastAllMoney)))])]),t("div",[e._v(" 酒店内餐饮报价总备注: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.food_remarks,expression:"info.food_remarks"}],attrs:{type:"text",placeholder:"您可以填写详细的报价备注",readonly:e.readonly},domProps:{value:e.info.food_remarks},on:{input:function(t){t.target.composing||e.$set(e.info,"food_remarks",t.target.value)}}})])])],2):e._e(),e.foodOutsideVisible?t("div",{staticClass:"title_item title_item_sel"},[t("div",[e._v("酒店外餐饮需求 Others Food & Beverage")]),t("div",[e._v("餐标Dining Standard:￥"+e._s(e.positiveFloat(e.info.food_limit)))]),t("div",{},[t("el-checkbox",{attrs:{disabled:"","true-label":1,"false-label":0},model:{value:e.info.event_info_configure.others_food_inquiry_isnotservice,callback:function(t){e.$set(e.info.event_info_configure,"others_food_inquiry_isnotservice",t)},expression:"info.event_info_configure.others_food_inquiry_isnotservice"}},[e._v("计入服务费")])],1)]):e._e(),e.foodOutsideVisible?t("div",{staticClass:"section"},[e._l(e.info.quoted_price_outside_food,(function(i,o){return t("table",{key:o},[t("thead",[t("tr",{staticClass:"color_1"},[t("th",{staticClass:"topleft datecolor",attrs:{colspan:"5"}},[t("div",{staticClass:"flex_row justify_between"},[t("div",[e._v("日期: "+e._s(e._f("date_day_ex")(i.date)))]),t("div",[e._v(" 一天总金额 ￥"+e._s(e.otherFoodDayMoney(i.food_list).toFixed(2))+" ")])])])]),e._m(7,!0)]),t("tbody",e._l(i.food_list,(function(i,o){return t("tr",{key:"c_"+o},[t("td",[e._v(" "+e._s(i.foodtypename)+" "),i.usetypename?t("span",[e._v("["+e._s(i.usetypename)+"]")]):e._e()]),t("td",[e._v(e._s(i.personcount))]),t("td",[e._v(e._s(i.comments))]),t("td",[t("el-input",{class:{difference:e.othersFoodDifference(i)},attrs:{type:"text",readonly:e.readonly},on:{input:function(t){i.price=e.formatNum(i.price,2)}},model:{value:i.price,callback:function(t){e.$set(i,"price",t)},expression:"item_c.price"}})],1),t("td",[1==i.addresstype?t("el-input",{attrs:{readonly:e.readonly,placeholder:"请注明餐厅名称或其他备注"},model:{value:i.offer_remarks,callback:function(t){e.$set(i,"offer_remarks",t)},expression:"item_c.offer_remarks"}}):t("el-input",{attrs:{placeholder:"请填写针对这个项目的特殊备注",readonly:e.readonly},model:{value:i.offer_remarks,callback:function(t){e.$set(i,"offer_remarks",t)},expression:"item_c.offer_remarks"}})],1)])})),0)])})),t("div",{staticClass:"total"},[t("div",[e._v(" 酒店外餐饮报价总计: "),t("span",[e._v("￥"+e._s(e.positiveFloat(e.otherFoodAllMoney)))])]),t("div",[e._v(" 酒店外餐饮报价总备注: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.food_qutside_remarks,expression:"info.food_qutside_remarks"}],attrs:{type:"text",placeholder:"您可以填写详细的报价备注",readonly:e.readonly},domProps:{value:e.info.food_qutside_remarks},on:{input:function(t){t.target.composing||e.$set(e.info,"food_qutside_remarks",t.target.value)}}})])])],2):e._e(),e.transportationVisible?t("div",{staticClass:"title_item title_item_sel"},[t("div",[e._v("大交通需求")]),t("div",[t("el-checkbox",{attrs:{disabled:"","true-label":1,"false-label":0},model:{value:e.info.event_info_configure.transportation_inquiry_isnotservice,callback:function(t){e.$set(e.info.event_info_configure,"transportation_inquiry_isnotservice",t)},expression:"\n              info.event_info_configure.transportation_inquiry_isnotservice\n            "}},[e._v("计入服务费")])],1)]):e._e(),e.transportationVisible?t("div",{staticClass:"section"},[e._l(e.info.quoted_price_transportation,(function(i,o){return t("table",{key:o},[t("thead",[t("tr",{staticClass:"color_1"},[t("th",{staticClass:"topleft datecolor",attrs:{colspan:"9"}},[e._v(" 日期: "+e._s(e._f("date_day_ex")(i.date))+" ")]),t("th",{staticClass:"topleft",attrs:{colspan:"2"}},[e._v(" 一天总金额 ￥"+e._s(e.IntercityTransportationDayMoney(i.transportation_list).toFixed(2))+" ")])]),e._m(8,!0)]),t("tbody",e._l(i.transportation_list,(function(i,o){return t("tr",{key:"c_"+o},[t("td",[e._v(e._s(i.origincity)+" - "+e._s(i.destinationcity))]),t("td",[e._v(e._s(i.transtypename))]),t("td",[e._v(e._s(i.seatclassesname))]),t("td",[e._v(e._s(i.specialpricename))]),t("td",[e._v(e._s(i.passengercount))]),t("td",[e._v(e._s(i.arrivetime))]),t("td",[t("el-input",{class:{difference:e.transportationDifference(i)},attrs:{readonly:e.readonly},on:{input:function(t){i.unitprice=e.formatNum(i.unitprice,2)}},model:{value:i.unitprice,callback:function(t){e.$set(i,"unitprice",t)},expression:"item_c.unitprice"}})],1),t("td",[e._v(" ￥"+e._s(e.positiveFloat(e.positiveInteger(i.passengercount)*e.positiveFloatSix(i.unitprice)))+" ")]),t("td",[e._v(e._s(i.requirement))]),t("td",[t("el-input",{attrs:{readonly:e.readonly},model:{value:i.offerremarks,callback:function(t){e.$set(i,"offerremarks",t)},expression:"item_c.offerremarks"}})],1),t("td",[e._v(" "+e._s(e.positiveFloat(e.positiveInteger(i.passengercount)*e.positiveFloatSix(i.unitprice)))+" ")])])})),0)])})),t("div",{staticClass:"total"},[t("div",[e._v(" 大交通报价总计: "),t("span",[e._v("￥"+e._s(e.positiveFloat(e.IntercityTransportationAllMoney)))])]),t("div",[e._v(" 大交通报价总备注: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.transportation_remarks,expression:"info.transportation_remarks"}],attrs:{type:"text",placeholder:"您可以填写详细的报价备注",readonly:e.readonly},domProps:{value:e.info.transportation_remarks},on:{input:function(t){t.target.composing||e.$set(e.info,"transportation_remarks",t.target.value)}}})])])],2):e._e(),e.carVisible?t("div",{staticClass:"title_item title_item_sel"},[t("div",[e._v("地面交通 Ground Transportation")]),t("div",[t("el-checkbox",{attrs:{disabled:"","true-label":1,"false-label":0},model:{value:e.info.event_info_configure.car_inquiry_isnotservice,callback:function(t){e.$set(e.info.event_info_configure,"car_inquiry_isnotservice",t)},expression:"info.event_info_configure.car_inquiry_isnotservice"}},[e._v("计入服务费")])],1)]):e._e(),e.carVisible?t("div",{staticClass:"section"},[e._l(e.info.quoted_price_car,(function(i,o){return t("table",{key:o},[t("thead",[t("tr",{staticClass:"color_1"},[t("th",{staticClass:"topleft datecolor",attrs:{colspan:"6"}},[t("div",{staticClass:"flex_row justify_between"},[t("div",[e._v("日期: "+e._s(e._f("date_day_ex")(i.date)))]),t("div",[e._v(" 一天总金额 ￥"+e._s(e.CityDayMoney(i.carlist).toFixed(2))+" ")])])])]),e._m(9,!0)]),t("tbody",e._l(i.carlist,(function(i,o){return t("tr",{key:"c_"+o},[t("td",[e._v(e._s(i.purposename))]),t("td",[t("p",[e._v(e._s(i.vehicletypename))]),i.vehiclecount?t("p",[e._v(" 搭乘人数："+e._s(i.vehiclecount)+" ")]):e._e(),i.city?t("p",[e._v("用车城市： "+e._s(i.city))]):e._e()]),t("td",[e._v(e._s(i.explain))]),t("td",[e._v(e._s(i.carcount))]),t("td",[t("el-input",{class:{difference:e.carDifference(i)},attrs:{type:"text",readonly:e.readonly},on:{input:function(t){i.price=e.formatNum(i.price,2)}},model:{value:i.price,callback:function(t){e.$set(i,"price",t)},expression:"item_c.price"}})],1),t("td",[t("el-input",{attrs:{readonly:e.readonly},model:{value:i.offer_remarks,callback:function(t){e.$set(i,"offer_remarks",t)},expression:"item_c.offer_remarks"}})],1)])})),0)])})),t("div",{staticClass:"total"},[t("div",[e._v(" 地面交通报价总计: "),t("span",[e._v("￥"+e._s(e.positiveFloat(e.CityAllMoney)))])]),t("div",[e._v(" 地面交通报价总备注: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.car_remarks,expression:"info.car_remarks"}],attrs:{type:"text",placeholder:"您可以填写详细的报价备注",readonly:e.readonly},domProps:{value:e.info.car_remarks},on:{input:function(t){t.target.composing||e.$set(e.info,"car_remarks",t.target.value)}}})])])],2):e._e(),e.otherVisible?t("div",{staticClass:"title_item title_item_sel"},[t("div",[e._v("其他服务 Other")])]):e._e(),e.otherVisible?t("div",{staticClass:"section"},[t("table",[e._m(10),t("tbody",[e._l(e.info.quoted_price_other,(function(i,o){return t("tr",{key:"c_"+o},[t("td",[i.inquiry_sheet_other_id?t("span",[e._v(e._s(i.servicetypename))]):[t("el-select",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"small"},on:{change:function(t){return e.addOtherChange(i)}},model:{value:i.other_code,callback:function(t){e.$set(i,"other_code",t)},expression:"item_c.other_code"}},e._l(e.addOtherSelects,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)]],2),t("td",[i.inquiry_sheet_other_id?t("span",[e._v(e._s(i.describe))]):[t("el-select",{directives:[{name:"show",rawName:"v-show",value:["009-5","009-6","009-7","009-11","009-12"].includes(i.other_code),expression:"\n                      ['009-5', '009-6', '009-7', '009-11', '009-12'].includes(\n                        item_c.other_code\n                      )\n                    "}],staticStyle:{width:"200px"},attrs:{clearable:"",size:"small"},model:{value:i.two_level_code,callback:function(t){e.$set(i,"two_level_code",t)},expression:"item_c.two_level_code"}},e._l(i.detail,(function(e){return t("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),1)]],2),t("td",[t("el-input",{staticClass:"line",class:{difference:e.otherNumDifference(i)},attrs:{disabled:null!=i.inquiry_sheet_other_id},on:{input:function(t){i.offerparticipatecount=e.formatNum(i.offerparticipatecount,1)}},model:{value:i.offerparticipatecount,callback:function(t){e.$set(i,"offerparticipatecount",t)},expression:"item_c.offerparticipatecount"}})],1),t("td",[e._v(" ￥ "),t("el-input",{class:{difference:e.otherDifference(i)},staticStyle:{width:"90%"},attrs:{type:"text",readonly:e.readonly},on:{input:function(t){i.price=e.formatNum(i.price,2)}},model:{value:i.price,callback:function(t){e.$set(i,"price",t)},expression:"item_c.price"}})],1),t("td",[t("el-input",{attrs:{readonly:e.readonly},model:{value:i.offer_remarks,callback:function(t){e.$set(i,"offer_remarks",t)},expression:"item_c.offer_remarks"}})],1),t("td",[t("el-checkbox",{attrs:{disabled:"009-12"!=i.other_code,"true-label":1,"false-label":0},model:{value:i.isnotservice,callback:function(t){e.$set(i,"isnotservice",t)},expression:"item_c.isnotservice"}},[e._v("计入服务费")]),i.inquiry_sheet_other_id?e._e():t("span",{staticStyle:{"margin-left":"10px",color:"#409eff",cursor:"pointer"},on:{click:function(t){return e.delOther(i,o)}}},[e._v("删除")])],1)])})),t("tr",[t("td",{attrs:{colspan:4}},[e._v("其他需求备注：")]),t("td",{attrs:{colspan:2}},[t("span",{staticStyle:{"margin-left":"10px",color:"#409eff",cursor:"pointer"},on:{click:function(t){return e.addOther()}}},[e._v(" 添加其他服务 ")])])])],2)]),t("div",{staticClass:"total"},[t("div",[e._v(" 其他服务报价总计: "),t("span",[e._v("￥"+e._s(e.otherAllMoney.toFixed(2)))])]),t("div",[e._v(" 其他服务报价总备注: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.info.other_remarks,expression:"info.other_remarks"}],attrs:{type:"text",placeholder:"您可以填写详细的报价备注",readonly:e.readonly},domProps:{value:e.info.other_remarks},on:{input:function(t){t.target.composing||e.$set(e.info,"other_remarks",t.target.value)}}})])])]):e._e(),e.hotelVisible?t("div",{staticClass:"title_item"},[e._v("服务费")]):e._e(),e.hotelVisible?t("div",{staticClass:"section"},[t("table",[e._m(11),t("tbody",[1==e.info.event_info_configure.service_fee_calculation_method?e._l(e.info.event_info_ladder_taxrates,(function(i,o){return t("tr",{key:o},[t("td",{attrs:{colspan:"2"}},[t("span",[e._v("阶梯"+e._s(o+1)+"：")]),t("el-input",{staticClass:"line",staticStyle:{width:"100px"},attrs:{readonly:0==o,disabled:!e.info.event_info_configure.servicecanedit,type:"text",size:"mini",placeholder:""},on:{input:function(t){i.ladder_min=e.formatNum(i.ladder_min)}},model:{value:i.ladder_min,callback:function(t){e.$set(i,"ladder_min",t)},expression:"item.ladder_min"}}),e._v(" ~ "),t("el-input",{staticClass:"line",staticStyle:{width:"100px"},attrs:{disabled:!e.info.event_info_configure.servicecanedit,type:"text",size:"mini",placeholder:""},on:{input:function(t){i.ladder_max=e.formatNum(i.ladder_max)}},model:{value:i.ladder_max,callback:function(t){e.$set(i,"ladder_max",t)},expression:"item.ladder_max"}}),e._v(" * "),t("el-input",{staticClass:"line",attrs:{size:"mini",disabled:!e.info.event_info_configure.servicecanedit},on:{input:function(t){i.ladder_taxrate=e.formatNum(i.ladder_taxrate)}},model:{value:i.ladder_taxrate,callback:function(t){e.$set(i,"ladder_taxrate",t)},expression:"item.ladder_taxrate"}}),e._v(" % (请输入阶梯金额范围和服务费比例) "),e.info.event_info_configure.service_fee_ratio&&o==e.info.event_info_ladder_taxrates.length-1?t("span",[e._v(" * "),t("el-input",{staticClass:"line",attrs:{size:"mini",readonly:e.readonly},on:{input:function(t){e.info.fzc_service=e.formatNum(e.info.fzc_service)}},model:{value:e.info.fzc_service,callback:function(t){e.$set(e.info,"fzc_service",t)},expression:"info.fzc_service"}}),e._v(" % ")],1):e._e()],1),t("td",[e._v("￥"+e._s(e.positiveFloat(e.severEveryMoneyList[o]||0).toFixed(2)))])])})):e._e(),2==e.info.event_info_configure.service_fee_calculation_method?[t("td",{attrs:{colspan:"2"}},[e._v(" "+e._s(e.serviceTotalMoney)+" * "+e._s(e.grade_taxrate)+"% "),e.info.event_info_configure.service_fee_ratio?t("span",[e._v(" * "),t("el-input",{staticClass:"line",attrs:{size:"mini",readonly:e.readonly},model:{value:e.info.fzc_service,callback:function(t){e.$set(e.info,"fzc_service",t)},expression:"info.fzc_service"}}),e._v(" % ")],1):e._e()]),t("td",[1==e.info.event_info_configure.minimum_service_fee&&e.info.feizhicai_service<=e.info.event_info_configure.minimum_service_fee_money?t("span",[e._v(" ￥ "+e._s(e.positiveFloat(e.info.event_info_configure.minimum_service_fee_money))+" ")]):t("span",[e._v(e._s(e.positiveFloat(e.grade_taxrate*e.serviceTotalMoney/100*e.info.fzc_service/100)))])])]:e._e(),1==e.info.zhicai_service?t("tr",[t("td",{attrs:{colspan:"2"}},[t("div",{staticStyle:{display:"flex"}},[t("p",{staticStyle:{width:"30%"}},[e._v("直采服务费")]),t("div",e._l(e.info.event_quoted_price_zhicai_service,(function(i,o){return t("p",{key:o,staticStyle:{display:"flex","justify-content":"space-between",margin:"10px 0","line-height":"32px"}},[t("span",[e._v(" "+e._s(i.grade_name)+" ")]),t("span",{staticStyle:{margin:"0 30px"}},[e._v("￥ "+e._s(i.grade_price)+" ")]),t("span",[e._v(" * "),t("el-input",{staticStyle:{width:"100px"},attrs:{type:"number",size:"small",placeholder:"请输入数量"},on:{input:function(t){i.grade_count=e.positiveFloatOne(i.grade_count)}},model:{value:i.grade_count,callback:function(t){e.$set(i,"grade_count",e._n(t))},expression:"item.grade_count"}})],1)])})),0)])]),t("td",[e._v("￥"+e._s(e.positiveFloat(e.baierSeversMoney)))])]):t("tr",[t("td",{attrs:{colspan:"2"}},[e._v(" 直采服务费 "),t("el-input",{staticClass:"line",attrs:{size:"mini",readonly:e.readonly},on:{input:function(t){e.info.advance_amount=e.formatNum(e.info.advance_amount)}},model:{value:e.info.advance_amount,callback:function(t){e.$set(e.info,"advance_amount",t)},expression:"info.advance_amount"}}),e._v("* "),t("el-input",{staticClass:"line",attrs:{size:"mini",readonly:e.readonly},on:{input:function(t){e.info.advance_proportion=e.formatNum(e.info.advance_proportion)}},model:{value:e.info.advance_proportion,callback:function(t){e.$set(e.info,"advance_proportion",t)},expression:"info.advance_proportion"}}),e._v(" % ")],1),t("td",[e._v("￥"+e._s(e.positiveFloat(e.OutsideHotelMoney)))])])],2)])]):e._e(),t("div",{staticClass:"title_item"},[e._v("VAT")]),t("div",{staticClass:"section"},[t("table",[e._m(12),t("tbody",[t("tr",[t("td",["VAT"==e.info.taxtype?[e._v(" (￥"+e._s(e.positiveFloat(e.money))+" + ￥"+e._s(e.positiveFloat(e.serveAllMoney-(0==e.info.event_info_configure.fzc_service_fee_money?e.info.feizhicai_service:0)))+") ")]:e._e()],2),t("td",[e._v(" *"),t("el-input",{staticClass:"line",attrs:{readonly:e.readonly,size:"mini",disabled:0==e.info.event_info_configure.vatcanedit},on:{input:function(t){e.info.taxrate=e.formatNum(e.info.taxrate)}},model:{value:e.info.taxrate,callback:function(t){e.$set(e.info,"taxrate",t)},expression:"info.taxrate"}}),e._v(" % ")],1),t("td",{attrs:{rowspan:"2"}},[e._v("￥"+e._s(e.positiveFloat(e.Taxes).toFixed(2)))])])])])]),t("div",{staticClass:"section"},[t("div",{staticClass:"total"},[t("div",[0==this.$route.params.isSubmit?t("a",{staticStyle:{cursor:"pointer",color:"#428bca","font-size":"17px","margin-right":"30px"},attrs:{download:""},on:{click:e.excelexport}},[e._v("下载excel")]):e._e(),t("span",{staticStyle:{"font-size":"32px"}},[e._v("RFP总报价: ￥"+e._s((e.positiveFloat(e.money)+e.positiveFloat(e.serveAllMoney)+e.positiveFloat(e.Taxes)).toFixed(2)))])])])]),t("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"a_click",attrs:{href:e.downloadUrl,target:"_blank",download:""}}),t("div",{staticClass:"title_item"},[e._v("报价书、报价说明（付款条件及其他备注）")]),t("div",{staticClass:"section"},[t("div",{staticClass:"uploadFile"},[t("span",[e._v("上传报价书：")]),t("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"on-change":(t,i)=>{e.handleChangeAttach(t,i)},"on-remove":(t,i)=>{e.handleRemoveAttach(t,i)},"on-preview":e.handlePreview,"auto-upload":!1,"file-list":this.fileList,multiple:!1,action:"",disabled:e.readonly}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择文件")])],1)],1),t("div",{staticClass:"remark"},[e._v(" 您可以上传您的官方报价书给终端客户。这份报价书将为保存保证此次交易的合规性。 ")]),t("div",{staticClass:"selDate"},[t("span",[e._v("*")]),e._v(" 报价有效期： "),t("div",{staticClass:"block"},[t("el-date-picker",{attrs:{readonly:e.readonly,type:"datetime",placeholder:"选择日期时间"},on:{change:e.dataChange},model:{value:e.info.quotationenddate,callback:function(t){e.$set(e.info,"quotationenddate",t)},expression:"info.quotationenddate"}})],1)]),t("div",{staticClass:"explain"},[e._v("报价说明（付款条件及其他备注）")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.info.offer_remarks,expression:"info.offer_remarks"}],staticClass:"bz",attrs:{placeholder:"请填写会场可使用面积、订金比例、订金支付和尾款结算方式等。"},domProps:{value:e.info.offer_remarks},on:{input:function(t){t.target.composing||e.$set(e.info,"offer_remarks",t.target.value)}}})]),1==this.$route.params.isSubmit?t("div",{staticClass:"section btn_sec"},[t("el-button",{staticClass:"btn",attrs:{type:"cancel"},on:{click:e.saveAndDownload}},[e._v("保存草稿，下载报价单")]),t("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交报价")])],1):e._e()]):e._e()])},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"label"},[t("span",[e._v("*")]),e._v(" 报价人 ")])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"label"},[t("span",[e._v("*")]),e._v(" 联系电话 ")])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"label"},[t("span",[e._v("*")]),e._v(" 联系邮箱 ")])},function(){var e=this,t=e._self._c;return t("span",{staticStyle:{color:"#169bd5","font-weight":"bold"}},[e._v("采购需求报价 "),t("span",{staticStyle:{color:"#999","font-size":"14px","font-weight":"400","padding-left":"30px"}},[e._v("所有标红星内容都需要填写，如果这个内容是免费的，请填写“0”")])])},function(){var e=this,t=e._self._c;return t("tr",{staticClass:"color_2"},[t("th",[e._v("房型")]),t("th",[e._v("所需数量")]),t("th",[e._v("酒店可提供数量")]),t("th",[e._v("单价")]),t("th",[e._v("报价备注")])])},function(){var e=this,t=e._self._c;return t("tr",{staticClass:"color_2"},[t("th",[e._v("项目")]),t("th",[e._v("需求")]),t("th",[e._v("需求备注")]),t("th",[e._v("报价")]),t("th",[e._v("报价备注")])])},function(){var e=this,t=e._self._c;return t("tr",{staticClass:"color_2"},[t("th",[e._v("项目")]),t("th",[e._v("人数/人次")]),t("th",[e._v("单价（RMB/人）")]),t("th",[e._v("报价备注")])])},function(){var e=this,t=e._self._c;return t("tr",{staticClass:"color_2"},[t("th",[e._v("项目")]),t("th",[e._v("人数/人次")]),t("th",[e._v("需求备注")]),t("th",[e._v("单价（RMB/人）")]),t("th",[e._v("报价备注")])])},function(){var e=this,t=e._self._c;return t("tr",{staticClass:"color_2"},[t("th",[e._v("目的地")]),t("th",[e._v("交通工具")]),t("th",[e._v("座位等级")]),t("th",[e._v("票价/折扣")]),t("th",[e._v("搭乘人数")]),t("th",[e._v("抵达时间")]),t("th",[e._v("单价（RMB/人）")]),t("th",[e._v("小计")]),t("th",[e._v("备注")]),t("th",[e._v("报价备注")]),t("th",[e._v("总价（¥）")])])},function(){var e=this,t=e._self._c;return t("tr",{staticClass:"color_2"},[t("th",[e._v("项目")]),t("th",[e._v("需求")]),t("th",[e._v("需求备注")]),t("th",[e._v("数量")]),t("th",[e._v("单价（RMB/车次）")]),t("th",[e._v("报价备注")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"color_2"},[t("th",[e._v("项目")]),t("th",[e._v("需求备注")]),t("th",[e._v("数量")]),t("th",[e._v("单价")]),t("th",[e._v("报价备注")]),t("th",[e._v("服务费")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"color_2"},[t("th",{attrs:{colspan:"2"}},[e._v("服务费")]),t("th",[e._v("金额")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"color_2"},[t("th",{attrs:{colspan:"2"}},[e._v("VAT")]),t("th",[e._v("金额")])])])}],r=i("2654"),s=(i("b587"),i("0e5c")),a=i("cf45"),c=i("acd6"),l=i("df68"),d={data(){return{info:{event_info_configure:{},fzc_service:100},severEveryMoneyList:[],grade_taxrate:0,serviceTotalMoney:0,hotelList:[],rules:{IntegerNotMust:[{validator:r["f"],trigger:"change"}]},readonly:!1,loading:!1,addConferenceSelects:[],addOtherSelects:[],errormsg:[],demandList:{},warningmsg:"",foodlimitwarningmsg:[],selVat:"",info:{},contractsId:"",fileList:[],roomOut:1,conferenceOut:1,foodOut:1,transportationOut:1,carOut:1,otherOut:1,disabled:!0,downloadUrl:"",roomcostProjects:[]}},methods:{guid:a["k"],positiveInteger:a["q"],positiveFloatSix:a["o"],positiveFloatOne:a["n"],positiveFloat:a["m"],formatNum:a["e"],formatDate:a["d"],getNextDateFormat:a["i"],excelExport:c["a"],getFormatDate:a["g"],CompareDate:a["a"],limitsEffect:l["a"],excelExport:c["a"],downloadOfferConfirm(){var e="报价确认单";this.excelExport("/Template/GetTemplate",{eventid:this.info.activity_id,type:5,param:this.info.id},e)},addConferenceOther(e,t,i){let o=0;e.conference_list.forEach(e=>{4==e.type&&(o+=1)});let n={quoted_firstid:t.inquiry_sheet_conference_id,order_name:t.order_name,date:t.date,indexs:o+1,type:4,quoted_code:"",quoted_name:"",count:"",price:"",comments:""};e.conference_list.splice(i+o+1,0,n)},delConferenceOther(e,t,i){let o=0;e.conference_list.splice(i,1),e.conference_list.forEach(e=>{4==e.type&&(o+=1,e.indexs=o)})},addOther(){let e={type:4,other_code:"",servicetypename:"",two_level_code:"",offerparticipatecount:"",price:"",offer_remarks:"",isnotservice:0,detail:[],indexs:this.info.quoted_price_other.length+1};this.info.quoted_price_other.push(e)},delOther(e,t){this.info.quoted_price_other.splice(t,1),this.info.quoted_price_other.forEach((e,t)=>{e.indexs=t+1})},addOtherChange(e){this.addOtherSelects.forEach(t=>{t.code==e.other_code&&(e.detail=t.detail.filter(e=>"0"!==e.detail_type),console.log(e.detail),e.two_level_code="",e.isnotservice=t.isnotservice)})},searchSelectOption(e){this.$api.getCostProjects({code:e,meetingid:this.info.meeting_id},"POST").then(t=>{"0049"==e?this.addConferenceSelects=t:(this.addOtherSelects=t,this.info.quoted_price_other.forEach(e=>{this.addOtherSelects.forEach(t=>{t.code!=e.other_code||e.inquiry_sheet_other_id||(e.detail=t.detail.filter(e=>"0"!==e.detail_type),console.log(e.detail),e.isnotservice=t.isnotservice)})}))})},conferenceTypeChange(e){this.addConferenceSelects.forEach(t=>{e.quoted_code==t.code&&(e.quoted_name=t.name)})},excelexport(){var e="DMC报价单"+this.info.id;this.excelExport("/Template/GetTemplate",{eventid:this.info.activity_id,type:3,param:this.info.id},e)},saveAndDownload(){this.info.status="0014-5",this.save()},dataChange(e){this.info.quotationenddate=this.formatDate("YYYY-mm-dd HH:MM:SS",e)},changeCostProject(e,t){t.roomtypename=t.custom_roomtype=this.roomcostProjects.filter(t=>t.code==e)[0].name,t.custom_roomtypeid=e,t.roomtypid=e},changeSel(e){this.info.contactslist.forEach((t,i)=>{e==t.id&&(this.info.bidder=t.id,this.info.biddername=t.contacts,this.info.biddertel=t.telephone,this.info.bidderemail=t.email,this.disabled=!0),e==t.id&&"其他"==t.contacts&&(this.disabled=!1,this.info.bidder=null,this.info.biddername="")})},initVat(){null==this.info.roomtaxid&&(this.info.roomtaxid=this.info.taxlist[0].id),null==this.info.conferencetaxid&&(this.info.conferencetaxid=this.info.taxlist[0].id),null==this.info.foodtaxid&&this.info.taxlist.forEach((e,t)=>{1==e.outtaxrate&&1==e.invoicetype&&(this.info.foodtaxid=e.id)}),this.info.taxlist.forEach((e,t)=>{e.id==this.info.roomtaxid&&(this.roomOut=e.outtaxrate),e.id==this.info.conferencetaxid&&(this.conferenceOut=e.outtaxrate),e.id==this.info.foodtaxid&&(this.foodOut=e.outtaxrate),e.id==this.info.transportationtaxid&&(this.transportationOut=e.outtaxrate),e.id==this.info.cartaxid&&(this.carOut=e.outtaxrate),e.id==this.info.othertaxid&&(this.otherOut=e.outtaxrate)})},roomVat(e){this.info.taxlist.forEach((t,i)=>{t.id==e&&(this.roomOut=t.outtaxrate)}),this.info.roomtaxid=e},conferenceVat(e){this.info.taxlist.forEach((t,i)=>{t.id==e&&(this.conferenceOut=t.outtaxrate)}),this.info.conferencetaxid=e},foodVat(e){this.info.taxlist.forEach((t,i)=>{t.id==e&&(this.foodOut=t.outtaxrate)}),this.info.foodtaxid=e},transportationVat(e){this.info.taxlist.forEach((t,i)=>{t.id==e&&(this.transportationOut=t.outtaxrate)}),this.info.transportationtaxid=e},carVat(e){this.info.taxlist.forEach((t,i)=>{t.id==e&&(this.carOut=t.outtaxrate)}),this.info.cartaxid=e},otherVat(e){this.info.taxlist.forEach((t,i)=>{t.id==e&&(this.otherOut=t.outtaxrate)}),this.info.othertaxid=e},handleChangeAttach(e,t){const i=e.size/1024/1024<30;if(this.limitsEffect(e))return i?void(this.fileList=t):(this.$message.error("上传附件大小不能超过 30MB!"),void this.$refs.upload.handleRemove(e,t));this.$refs.upload.handleRemove(e,t)},handleRemoveAttach(e,t){this.fileList=t},handlePreview(e){if(!e.url)return;let t=e.url.substring(e.url.lastIndexOf(".")+1),i=["pdf","jpeg","jpg","png","txt"],o=["docx","doc","xls","xlsx","xlsm","ppt","pptx"];e.url=e.url.replace(/http:/,"https:"),this.downloadUrl=e.url,o.includes(t)?this.downloadUrl="https://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(e.url):i.includes(t)?this.downloadUrl=e.url:this.$message.info("文件格式不支持预览，下载后查看"),setTimeout(()=>{this.$refs.a_click.click()},100)},remoteMethod(e){this.loading=!0,this.$api.hotelList({Page:1,Rows:99,keyword:e},"POST").then(e=>{this.loading=!1,this.hotelList=e.List})},addNewRoomType(e){e.push({roomtypename:"免房",provide_count:0,remarks:"",unitprice:0,roomtype:"0034-4",custom_roomtype:"免房",custom_roomtypeid:"0034-4"})},delNewRoomType(e,t){e.room_list.splice(t,1)},copyRoomDay(e){this.info.quoted_price_room[e-1].room_list.forEach((t,i)=>{this.info.quoted_price_room[e].room_list.forEach((e,i)=>{t.roomtype==e.roomtype&&(e.provide_count=t.provide_count,e.unitprice=t.unitprice,e.remarks=t.remarks)})})},differenceShowErrorMessage:function(){let e="";this.errormsg.forEach(t=>{e+="<p style='padding:5px;'>"+t+"</p>"}),this.$message({message:e,dangerouslyUseHTMLString:!0,type:"error",lockScroll:!1})},addroomProvidecountwarningmsg:function(){this.warningmsg="";let e=!1,t=[],i=[],o=[],n=[],r=[];if(this.info.quoted_price_room&&this.info.quoted_price_room.length>0&&(this.info.quoted_price_room.forEach(e=>{e.room_list&&e.room_list.length>0&&e.room_list.forEach((e,n)=>{t.push(e),e.inquiry_sheet_room_id&&!i.includes(e.roomtypename)&&i.push(e.roomtypename),e.inquiry_sheet_room_id||o.includes(e.roomtypename)||o.push(e.roomtypename)})}),i.length>0&&i.forEach(i=>{let o=0,r=0,s=t.filter(e=>e.roomtypename==i);s.length>0&&s.forEach(e=>{o+=Object(a["q"])(e.roomcount),r+=Object(a["q"])(e.provide_count)}),r<o&&(e=!0),n.push({name:i,roomcount:o,provide_count:r})}),o.length>0&&o.forEach(e=>{let i=0,o=t.filter(t=>t.roomtypename==e);o.length>0&&o.forEach(e=>{i+=Object(a["q"])(e.provide_count)}),r.push({name:e,provide_count:i})}),e)){let e="",t="";n.forEach((i,o)=>{e+=i.name+i.roomcount.toString(),t+=i.name+i.provide_count.toString(),o<n.length-1&&(e+=" ",t+=" "),console.log(e)}),r.length>0&&(""!=t&&(t+=" "),r.forEach((e,i)=>{t+=e.name+e.provide_count.toString(),i<r.length-1&&(t+=" ")}));let i="<p>客户所需客房数量<"+e+"></p>",o="<p>与您填写的数量<"+t+"></p>";this.warningmsg=i+o}this.foodlimitwarningmsg.length>0&&this.foodlimitwarningmsg.forEach(e=>{this.warningmsg+="<p>"+e+"</p>"}),""!=this.warningmsg&&(this.warningmsg+="<p>确认提交当前报价吗？</p>")},validate:function(){return this.errormsg=[],this.checkRoomDifference,this.checkConferenceDifference,this.checkFoodDifference,this.checkTransportationDifference,this.checkCarDifference,this.checkOtherDifference,this.errormsg.length>0&&this.differenceShowErrorMessage(),0==this.errormsg.length},submit(){if(!this.disabled){var e=/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;if(!(this.info.biddername&&this.info.biddertel&&this.info.bidderemail))return void this.$message.error("姓名、手机、邮箱缺一不可！");if(!e.test(this.info.bidderemail))return void this.$message.error("邮箱格式不正确！")}null!=this.info.roomtaxid&&null!=this.info.conferencetaxid&&null!=this.info.foodtaxid?this.info.quotationenddate?this.CompareDate(this.info.quotationenddate,this.formatDate("YYYY-mm-dd HH:MM:SS",new Date))?this.validate()&&(this.addroomProvidecountwarningmsg(),this.info.status="0014-6",""==this.warningmsg?this.save():this.$confirm(this.warningmsg,"提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定提交",cancelButtonText:"返回修改",type:"warning"}).then(()=>{this.save()}).catch(()=>{})):this.$message.error("有效期不允许在当前日期之前!"):this.$message.error("报价有效期未填写!"):this.$message.error("税率未选择！")},save(){let e=[],t=this.fileList.filter(e=>""!=e.uid);this.fileList.length>0&&t.forEach(t=>{e.push({key:t.uid,file:t.raw})}),console.log(e),Object(s["a"])(e).then(e=>{this.info.attachlist&&this.info.attachlist.length>0&&this.info.attachlist.forEach(e=>{0==this.fileList.filter(t=>t.id==e.id).length&&(this.fileList.filter(t=>(console.log(t.id,e.id,this.fileList.filter(t=>t.id==e.id).length),t.id==e.id)),e.delete=!0)}),e.forEach(e=>{e&&this.info.attachlist.push({filepath:e.FilePath,filename:e.OriginalFileName,filetype:1})});let t=this.positiveFloat(this.quotedPrice);this.$confirm("您报价￥"+t+"元,确认提交?","提示",{confirmButtonText:"确定提交报价",cancelButtonText:"取消",type:"warning"}).then(()=>{"非VAT"==this.info.taxtype&&(this.info.taxrate=0),1==this.info.zhicai_service&&(this.info.advance_amount=this.baierSeversMoney,this.info.advance_proportion=100);let e=this.info.quoted_price_room;for(let t=0;t<e.length;t++){let i=e[t].room_list;for(let e=0;e<i.length;e++)i[e].TableName?(0==this.info.is_Inside_outside&&(i[e].inside_roomcount=0,i[e].outside_roomcount=i[e].provide_count),1==this.info.is_Inside_outside&&(i[e].provide_count<=i[e].outside_roomcount?(i[e].outside_roomcount=i[e].provide_count,i[e].inside_roomcount=0):i[e].provide_count>i[e].outside_roomcount&&(i[e].inside_roomcount=i[e].provide_count-i[e].outside_roomcount))):(i[e].indexs=e+1,i[e].inside_roomcount=0,i[e].outside_roomcount=i[e].provide_count)}this.info.total_amount&&(this.info.total_amount=this.positiveFloat(this.info.total_amount),console.log(this.info)),this.$api.quotationsubmit(this.info,"POST").then(async e=>{if(e){if("0014-5"==this.info.status){let t="DMC报价单"+e.event_quoted_price_id;this.excelExport("/Template/GetTemplate",{eventid:this.info.activity_id,type:3,param:e.event_quoted_price_id},t)}this.$router.push({name:"DMCactivityOrderInfo",params:{id:this.info.inquiry_sheet_object_id}})}else this.$message({message:"提交失败",type:"fail"})})}).catch(()=>{})})},addLadder(){this.info.event_info_ladder_taxrates[this.info.event_info_ladder_taxrates.length-1].ladder_max?this.info.event_info_ladder_taxrates.push({event_info_id:this.info.activity_id,id:this.guid(),ladder_min:1*this.info.event_info_ladder_taxrates[this.info.event_info_ladder_taxrates.length-1].ladder_max+1,ladder_max:0,ladder_taxrate:8}):this.$message.error("请将上一阶梯信息填写完整")},delLadder(e){this.info.event_info_ladder_taxrates.splice(e,1)}},computed:{formateDate:()=>function(e){return Object(a["d"])("YYYY年mm月dd日",new Date(e))},hotelVisible:function(){return 1==this.info.inquirysheetType},roomVisible:function(){return this.info.quoted_price_room&&this.info.quoted_price_room.length>0},conferenceVisible:function(){return this.info.quoted_price_conference&&this.info.quoted_price_conference.length>0},foodVisible:function(){return this.info.quoted_price_food&&this.info.quoted_price_food.length>0},foodOutsideVisible:function(){return this.info.quoted_price_outside_food&&this.info.quoted_price_outside_food.length>0},transportationVisible:function(){return this.info.quoted_price_transportation&&this.info.quoted_price_transportation.length>0},carVisible:function(){return this.info.quoted_price_car&&this.info.quoted_price_car.length>0},otherVisible:function(){return this.info.quoted_price_other&&this.info.quoted_price_other.length>0},adddifferenceerrormsg:()=>function(e,t,i){let o="";1==e?o=this.formateDate(t)+"客房,第"+i+"行,单价未填写,请填写单价":2==e?o=this.formateDate(t)+"会场,第"+i+"行,报价未填写,请填写报价":3==e?o=this.formateDate(t)+"餐饮,第"+i+"行,单价未填写,请填写单价":4==e?o=this.formateDate(t)+"大交通,第"+i+"单价未填写,请填写单价":5==e?o=this.formateDate(t)+"地面交通,第"+i+"行,单价未填写,请填写单价":6==e?o="其他服务,第"+i+"行,单价未填写,请填写单价":7==e&&(o="其他服务,第"+i+"行,数量未填写,请填写数量"),this.errormsg.push(o)},addnewitemerrormsg:()=>function(e,t,i){let o="";1==e?o=this.formateDate(t)+"新增客房,第"+i+"行,消费项目名称为必填项,请填写房型":2==e?o=this.formateDate(t)+"新增会场,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":3==e?o=this.formateDate(t)+"新增餐饮,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":4==e?o=this.formateDate(t)+"新增大交通,第"+i+"行,消费项目名称为必填项,请填写消费项目名称":5==e&&(o=this.formateDate(t)+"新增地面交通,第"+i+"行,消费项目名称为必填项,请填写消费项目名称"),this.errormsg.push(o)},addfoodlimiterrormsg:()=>function(e,t,i){let o="";3==e&&(o=this.formateDate(t)+"酒店内餐饮,第"+i+"行,超过餐标"),this.foodlimitwarningmsg.push(o)},roomProvideCountDifference:()=>function(e){return Object(a["q"])(e.provide_count)<Object(a["q"])(e.roomcount)},roomDifference:()=>function(e){return""===e.unitprice},checkRoomDifference:function(){let e=!1;this.info.quoted_price_room&&this.info.quoted_price_room.length>0&&this.info.quoted_price_room.forEach(t=>{if(t.room_list&&t.room_list.length>0){t.room_list.forEach((i,o)=>{e=this.roomDifference(i),e&&this.adddifferenceerrormsg(1,t.date,o+1)});let i=t.room_list.filter(e=>null==e.inquiry_sheet_room_id&&""==e.roomtypename);i.length>0&&i.forEach((e,i)=>{this.addnewitemerrormsg(1,t.date,i+1)})}})},dayMoney:()=>function(e){let t=0;return e.forEach(e=>{let i=0;i=e.provide_count<0?Number(e.provide_count):this.positiveInteger(e.provide_count),t+=i*this.positiveFloatSix(e.unitprice)}),this.positiveFloatSix(t*parseFloat(this.roomOut))},allMoney:function(){let e=0;return this.info.quoted_price_room&&this.info.quoted_price_room.length>0&&this.info.quoted_price_room.forEach(t=>{e+=this.positiveFloatSix(this.dayMoney(t.room_list))}),this.positiveFloatSix(e)},meetingDayMoney:()=>function(e){let t=0;return e.forEach(e=>{var i;t+=this.positiveFloatSix(e.price*(null!==(i=e.count)&&void 0!==i?i:0))}),this.positiveFloatSix(t*parseFloat(this.conferenceOut))},meetingAllMoney:function(){let e=0;return this.info.quoted_price_conference&&this.info.quoted_price_conference.length>0&&this.info.quoted_price_conference.forEach(t=>{e+=this.meetingDayMoney(t.conference_list)}),this.positiveFloatSix(e)},conferenceDifference:()=>function(e){return""===e.price},checkConferenceDifference:function(){let e=!1;this.info.quoted_price_conference&&this.info.quoted_price_conference.length>0&&this.info.quoted_price_conference.forEach(t=>{t.conference_list&&t.conference_list.length>0&&t.conference_list.forEach((i,o)=>{e=this.conferenceDifference(i),e&&this.adddifferenceerrormsg(2,t.date,o+1)})})},repastDayMoney:()=>function(e){let t=0;return e.forEach(e=>{t+=this.positiveInteger(e.personcount)*this.positiveFloatSix(e.price)}),this.positiveFloatSix(t*parseFloat(this.foodOut))},repastAllMoney:function(){let e=0;return this.info.quoted_price_food&&this.info.quoted_price_food.length>0&&this.info.quoted_price_food.forEach(t=>{e+=this.repastDayMoney(t.food_list)}),this.positiveFloatSix(e)},foodDifference:()=>function(e){return""===e.price},foodLimit:()=>function(e,t){return parseFloat(e.price)>parseFloat(t)},checkFoodDifference:function(){let e=!1,t=!1;this.foodlimitwarningmsg=[],this.info.quoted_price_food&&this.info.quoted_price_food.length>0&&this.info.quoted_price_food.forEach(i=>{i.food_list&&i.food_list.length>0&&i.food_list.forEach((o,n)=>{e=this.foodDifference(o),e&&this.adddifferenceerrormsg(3,i.date,n+1),t=this.foodLimit(o,this.info.food_limit),t&&this.addfoodlimiterrormsg(3,i.date,n+1)})})},otherFoodDayMoney:()=>function(e){let t=0;return e.forEach(e=>{t+=this.positiveInteger(e.personcount)*this.positiveFloatSix(e.price)}),this.positiveFloatSix(t)},otherFoodAllMoney:function(){let e=0;return this.info.quoted_price_outside_food&&this.info.quoted_price_outside_food.length>0&&this.info.quoted_price_outside_food.forEach(t=>{e+=this.otherFoodDayMoney(t.food_list)}),this.positiveFloatSix(e)},otherFoodTaxMoney:function(){let e=0;return e=this.otherFoodAllMoney*(this.info.event_info_configure.others_food_inquiry_taxrate/100),this.positiveFloatSix(e)},othersFoodDifference:()=>function(e){return""===e.price},checkOthersFoodDifference:function(){let e=!1,t=!1;this.info.quoted_price_outside_food&&this.info.quoted_price_outside_food.length>0&&this.info.quoted_price_outside_food.forEach(i=>{i.food_list&&i.food_list.length>0&&i.food_list.forEach((o,n)=>{e=this.othersFoodDifference(o),e&&this.adddifferenceerrormsg(4,i.date,n+1),t=this.foodLimit(o,this.event_info.food_limit),t&&this.addfoodOutsidelimiterrormsg(3,i.date,n+1)})})},IntercityTransportationDayMoney:()=>function(e){let t=0;return e.forEach(e=>{t+=this.positiveInteger(e.passengercount)*this.positiveFloatSix(e.unitprice)}),this.positiveFloatSix(t)},IntercityTransportationAllMoney:function(){let e=0;return this.info.quoted_price_transportation&&this.info.quoted_price_transportation.length>0&&this.info.quoted_price_transportation.forEach(t=>{e+=this.IntercityTransportationDayMoney(t.transportation_list)}),this.positiveFloatSix(e*parseFloat(this.transportationOut))},transportationDifference:()=>function(e){return""===e.unitprice},checkTransportationDifference:function(){let e=!1;this.info.quoted_price_transportation&&this.info.quoted_price_transportation.length>0&&this.info.quoted_price_transportation.forEach(t=>{t.transportation_list&&t.transportation_list.length>0&&t.transportation_list.forEach((i,o)=>{e=this.transportationDifference(i),e&&this.adddifferenceerrormsg(4,t.date,o+1)})})},CityDayMoney:()=>function(e){let t=0;return e.forEach(e=>{t+=this.positiveInteger(e.carcount)*this.positiveFloatSix(e.price)}),this.positiveFloatSix(t)},CityAllMoney:function(){let e=0;return this.info.quoted_price_car&&this.info.quoted_price_car.length>0&&this.info.quoted_price_car.forEach(t=>{e+=this.CityDayMoney(t.carlist)}),this.positiveFloatSix(e*parseFloat(this.carOut))},carDifference:()=>function(e){return""===e.price},checkCarDifference:function(){let e=!1;this.info.quoted_price_car&&this.info.quoted_price_car.length>0&&this.info.quoted_price_car.forEach(t=>{t.car_list&&t.car_list.length>0&&t.car_list.forEach((i,o)=>{e=this.carDifference(i),e&&this.adddifferenceerrormsg(5,t.date,o+1)})})},otherAllMoney:function(){let e=0;return this.info.quoted_price_other&&this.info.quoted_price_other.length>0&&this.info.quoted_price_other.forEach(t=>{e+=this.positiveInteger(t.offerparticipatecount)*this.positiveFloatSix(t.price)}),this.positiveFloatSix(e*parseFloat(this.otherOut))},otherDifference:()=>function(e){return""===e.price},otherNumDifference:()=>function(e){return""==e.offerparticipatecount},checkOtherDifference:function(){let e=!1;this.info.quoted_price_other&&this.info.quoted_price_other.length>0&&this.info.quoted_price_other.forEach((t,i)=>{e=this.otherDifference(t),e&&this.adddifferenceerrormsg(6,null,i+1),""==t.offerparticipatecount&&this.adddifferenceerrormsg(7,null,i+1)})},money:function(){return this.info.total_price=Object(a["o"])(this.allMoney)+Object(a["o"])(this.meetingAllMoney)+Object(a["o"])(this.repastAllMoney)+Object(a["o"])(this.otherFoodAllMoney)+Object(a["o"])(this.IntercityTransportationAllMoney)+Object(a["o"])(this.CityAllMoney)+Object(a["o"])(this.otherAllMoney),Object(a["o"])(this.info.total_price)},InTheHotelMoney:function(){let e=0;return this.info.quoted_price_food&&this.info.quoted_price_food.length>0&&this.info.quoted_price_food.forEach(t=>{t.food_list.forEach(t=>{0==t.addresstype&&(e+=this.positiveInteger(t.personcount)*this.positiveFloatSix(t.price))})}),this.info.travelagency_payment_money=Object(a["o"])(this.allMoney)+Object(a["o"])(this.meetingAllMoney)+Object(a["o"])(e),this.positiveFloatSix(this.info.travelagency_payment_money)},OutsideTheHotelMoney:function(){let e=0,t=0;return this.info.quoted_price_food&&this.info.quoted_price_food.length>0&&this.info.quoted_price_food.forEach(t=>{t.food_list.forEach(t=>{1==t.addresstype&&(e+=this.positiveInteger(t.personcount)*this.positiveFloatSix(t.price))})}),this.info.quoted_price_other&&this.info.quoted_price_other.length>0&&this.info.quoted_price_other.forEach(e=>{1!=e.islocalguide&&(t+=this.positiveInteger(e.offerparticipatecount)*this.positiveInteger(e.offerservicedaycount)*this.positiveFloatSix(e.price))}),this.info.off_hotel_expenses=Object(a["o"])(this.IntercityTransportationAllMoney)+Object(a["o"])(this.CityAllMoney)+e+t,this.positiveFloatSix(this.info.off_hotel_expenses)},TravelAgencyMoney:function(){return this.positiveFloatSix(Object(a["o"])(this.InTheHotelMoney)*(this.positiveFloatSix(this.info.travelagency_payment_proportion)/100))},AdvancesMoney:function(){return Object(a["o"])(this.positiveFloatSix(this.info.advance_amount)*(this.positiveFloatSix(this.info.advance_proportion)/100))},OutsideHotelMoney:function(){return Object(a["o"])(this.info.advance_amount*(this.positiveFloatSix(this.info.advance_proportion)/100))},serviceAllMoney:function(){return Object(a["o"])(this.TravelAgencyMoney+this.AdvancesMoney+this.OutsideHotelMoney)},baierSeversMoney(){let e=0;return this.info.event_quoted_price_zhicai_service.forEach(t=>{var i;e+=null!==(i=t.grade_price*t.grade_count)&&void 0!==i?i:0}),e},serveAllMoney:function(){let e=0;if(0==this.info.event_info_configure.service_fee_calculation_method)e=this.allMoney.toFixed(2)*(this.info.event_info_configure.room_inquiry_service_taxrate/100)+this.meetingAllMoney.toFixed(2)*(this.info.event_info_configure.conference_inquiry_service_taxrate/100)+this.repastAllMoney.toFixed(2)*(this.info.event_info_configure.hotel_food_inquiry_service_taxrate/100)+this.otherFoodAllMoney.toFixed(2)*(this.info.event_info_configure.others_food_inquiry_service_taxrate/100)+this.IntercityTransportationAllMoney.toFixed(2)*(this.info.event_info_configure.transportation_inquiry_service_taxrate/100)+this.CityAllMoney.toFixed(2)*(this.info.event_info_configure.car_inquiry_service_taxrate/100),this.offline_quoted_price_others.forEach(t=>{e+=t.offerparticipatecount*t.price*t.service_taxrate/100});else if(1==this.info.event_info_configure.service_fee_calculation_method){let t=0;t+=this.info.event_info_configure.room_inquiry_isnotservice?this.allMoney:0,t+=this.info.event_info_configure.conference_inquiry_isnotservice?this.meetingAllMoney:0,t+=this.info.event_info_configure.hotel_food_inquiry_isnotservice?this.repastAllMoney:0,t+=this.info.event_info_configure.others_food_inquiry_isnotservice?this.otherFoodAllMoney:0,t+=this.info.event_info_configure.transportation_inquiry_isnotservice?this.IntercityTransportationAllMoney:0,t+=this.info.event_info_configure.car_inquiry_isnotservice?this.CityAllMoney:0,this.info.quoted_price_other.forEach(e=>{t+=e.isnotservice?e.offerparticipatecount*e.price:0}),this.severEveryMoneyList=[],this.info.event_info_ladder_taxrates.forEach((i,o)=>{t<=i.ladder_min||(t>=i.ladder_min&&t<=i.ladder_max?(e+=(t-i.ladder_min+(0==o?0:1))*i.ladder_taxrate/100,this.severEveryMoneyList.push(Object(a["o"])((t-i.ladder_min+(0==o?0:1))*i.ladder_taxrate/100*this.info.fzc_service/100))):t>i.ladder_max&&this.info.event_info_ladder_taxrates[o+1]?(this.severEveryMoneyList.push(Object(a["o"])((i.ladder_max-i.ladder_min+(0==o?0:1))*i.ladder_taxrate/100*this.info.fzc_service/100)),e+=(i.ladder_max-i.ladder_min+(0==o?0:1))*i.ladder_taxrate/100):t>=i.ladder_max&&!this.info.event_info_ladder_taxrates[o+1]&&(this.severEveryMoneyList.push(Object(a["o"])((t-i.ladder_min+(0==o?0:1))*i.ladder_taxrate/100*this.info.fzc_service/100)),e+=(t-i.ladder_min+(0==o?0:1))*i.ladder_taxrate/100))})}else if(2==this.info.event_info_configure.service_fee_calculation_method){let i=0;i+=this.info.event_info_configure.room_inquiry_isnotservice?this.allMoney:0,i+=this.info.event_info_configure.conference_inquiry_isnotservice?this.meetingAllMoney:0,i+=this.info.event_info_configure.hotel_food_inquiry_isnotservice?this.repastAllMoney:0,i+=this.info.event_info_configure.others_food_inquiry_isnotservice?this.otherFoodAllMoney:0,i+=this.info.event_info_configure.transportation_inquiry_isnotservice?this.IntercityTransportationAllMoney:0,i+=this.info.event_info_configure.car_inquiry_isnotservice?this.CityAllMoney:0,this.info.quoted_price_other.forEach(e=>{i+=e.isnotservice?e.offerparticipatecount*e.price:0}),this.serviceTotalMoney=i;for(var t=0;t<this.info.event_info_grade_taxrates.length;t++)if(t==this.info.event_info_grade_taxrates.length-1||i>=this.info.event_info_grade_taxrates[t].grade_money&&i<this.info.event_info_grade_taxrates[t+1].grade_money){e=i*this.info.event_info_grade_taxrates[t].grade_taxrate/100,this.grade_taxrate=this.info.event_info_grade_taxrates[t].grade_taxrate;break}}return e*=this.info.fzc_service/100,1==this.info.event_info_configure.minimum_service_fee&&e<this.info.event_info_configure.minimum_service_fee_money&&(e=this.info.event_info_configure.minimum_service_fee_money),this.info.feizhicai_service=e,1==this.info.zhicai_service?e+=this.baierSeversMoney:e+=this.info.advance_amount*this.info.advance_proportion/100,e},Taxes:function(){let e=0;return"VAT"==this.info.taxtype?(e=0==this.info.event_info_configure.fzc_service_fee_money?(this.money+this.serveAllMoney-this.info.feizhicai_service)*this.positiveFloatSix(this.info.taxrate)/100:(this.money+this.serveAllMoney)*this.positiveFloatSix(this.info.taxrate)/100,e):0*(this.money+this.serveAllMoney)},quotedPrice:function(){this.info.taxation=this.Taxes||0;let e=this.positiveFloat(this.money)+this.positiveFloat(this.serveAllMoney)+this.positiveFloat(this.Taxes);return this.info.total_amount=e,this.info.total_amount}},mounted(){this.$api.getCostProjects({code:"0034"},"POST").then(e=>{this.roomcostProjects=e}),0==this.$route.params.isSubmit&&(this.readonly=!0),this.$api.hotelList({Page:1,Rows:99},"POST").then(e=>{this.hotelList=e.List}),this.$api.quotationInfo({id:this.$route.params.id,type:this.$route.params.type||""},"POST").then(e=>{null!=e.quotationenddate&&(e.quotationenddate=this.getFormatDate(e.quotationenddate)),1==this.$route.params.isSubmit&&(e.quotationenddate=this.getNextDateFormat(new Date,10)),e.quoted_price_other.forEach(e=>{e.isnotservice=Boolean(e.isnotservice)}),this.info=e,0!=this.info.event_info_configure.service_fee_ratio&&null!=this.info.fzc_service||(this.info.fzc_service=100),void 0!=this.info.bidder&&(this.contractsId=this.info.bidder),0==this.info.event_info_ladder_taxrates.length?this.info.event_info_ladder_taxrates=[{ladder_min:0,ladder_max:1e5,ladder_taxrate:8}]:this.info.event_info_ladder_taxrates[0].ladder_min=0,null==this.info.id&&this.info.quoted_price_room.forEach(e=>{e.room_list.forEach(e=>{e.provide_count=e.roomcount})}),this.initVat(),this.info.attachlist&&this.info.attachlist.forEach(e=>{this.fileList.push({name:e.filename,url:this.info.quotationfile_domin+e.filepath,id:e.id})}),this.searchSelectOption("0049"),this.searchSelectOption("009")})}},f=d,_=(i("7ece"),i("0b56")),u=Object(_["a"])(f,o,n,!1,null,"5fc4dd6d",null);t["default"]=u.exports},"76b8":function(e,t,i){var o=i("de03"),n=i("9c10");e.exports=function(e,t){o(t)&&"cause"in t&&n(e,"cause",t.cause)}},"78a8":function(e,t,i){var o=i("5d05"),n=i("50b4"),r=i("06c1");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{e=o(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(i,[]),t=i instanceof Array}catch(s){}return function(i,o){return n(i),r(o),t?e(i,o):i.__proto__=o,i}}():void 0)},"7ece":function(e,t,i){"use strict";i("b416")},"956c":function(e,t,i){var o=i("f44b"),n=String;e.exports=function(e){if("Symbol"===o(e))throw TypeError("Cannot convert a Symbol value to a string");return n(e)}},"9b2a":function(e,t,i){var o=i("ebdc"),n=i("c8a2"),r=i("672b"),s=i("b438"),a="WebAssembly",c=n[a],l=7!==Error("e",{cause:7}).cause,d=function(e,t){var i={};i[e]=s(e,t,l),o({global:!0,constructor:!0,arity:1,forced:l},i)},f=function(e,t){if(c&&c[e]){var i={};i[e]=s(a+"."+e,t,l),o({target:a,stat:!0,constructor:!0,arity:1,forced:l},i)}};d("Error",(function(e){return function(t){return r(e,this,arguments)}})),d("EvalError",(function(e){return function(t){return r(e,this,arguments)}})),d("RangeError",(function(e){return function(t){return r(e,this,arguments)}})),d("ReferenceError",(function(e){return function(t){return r(e,this,arguments)}})),d("SyntaxError",(function(e){return function(t){return r(e,this,arguments)}})),d("TypeError",(function(e){return function(t){return r(e,this,arguments)}})),d("URIError",(function(e){return function(t){return r(e,this,arguments)}})),f("CompileError",(function(e){return function(t){return r(e,this,arguments)}})),f("LinkError",(function(e){return function(t){return r(e,this,arguments)}})),f("RuntimeError",(function(e){return function(t){return r(e,this,arguments)}}))},a3d4:function(e,t,i){var o=i("5557").f;e.exports=function(e,t,i){i in e||o(e,i,{configurable:!0,get:function(){return t[i]},set:function(e){t[i]=e}})}},acd6:function(e,t,i){"use strict";var o=i("4ff3"),n=i.n(o),r=i("f121");const s=r["b"];t["a"]=function(e,t,i){return new Promise((function(o,r){const a=()=>{"/Template/GetTemplate"==e?n()({method:"post",url:s+e,data:t,headers:{"Content-Type":"application/json;charset=utf-8"}}).then(e=>{let o=document.createElement("a"),n=e.data.path.substring(e.data.path.lastIndexOf("."));fetch(e.data.path).then(e=>e.blob()).then(e=>{o.href=URL.createObjectURL(e),console.log(o.href),5==t.type||t.type,o.download=i+n,document.body.appendChild(o),o.click()})}):n()({method:"post",url:s+e,data:t,responseType:"blob",headers:{"Content-Type":"application/json;charset=utf-8"}}).then(o=>{console.log(o);let n=o.data;const r=new FileReader;r.readAsDataURL(n),r.onload=o=>{let n=document.createElement("a");n.style.display="none","/quotation/exportexcel"==e||"/SettlementSheet/ExportExcel1"==e||"/orderform/exportexcel"==e||"/Quotation/ExportExcel"==e?n.download=i+".xls":"/Template/GetTemplate"==e?5==t.type||6==t.type?n.download=i+".docx":n.download=i+".xls":"/Reporting/GetExcel"==e&&(n.download=i+".xls"),n.href=o.target.result;document.body;document.body.appendChild(n),n.click(),document.body.removeChild(n)}})};a()}))}},b416:function(e,t,i){},b438:function(e,t,i){"use strict";var o=i("3726"),n=i("e72e"),r=i("9c10"),s=i("70b8"),a=i("78a8"),c=i("6ac1"),l=i("a3d4"),d=i("3471"),f=i("dbbd"),_=i("76b8"),u=i("c436"),p=i("dc0f"),h=i("8d06"),v=i("3f11");e.exports=function(e,t,i,m){var y="stackTraceLimit",g=m?2:1,x=e.split("."),b=x[x.length-1],k=o.apply(null,x);if(k){var q=k.prototype;if(!v&&n(q,"cause")&&delete q.cause,!i)return k;var C=o("Error"),S=t((function(e,t){var i=f(m?t:e,void 0),o=m?new k(e):new k;return void 0!==i&&r(o,"message",i),p&&r(o,"stack",u(o.stack,2)),this&&s(q,this)&&d(o,this,S),arguments.length>g&&_(o,arguments[g]),o}));if(S.prototype=q,"Error"!==b?a?a(S,C):c(S,C,{name:!0}):h&&y in k&&(l(S,k,y),l(S,k,"prepareStackTrace")),c(S,k),!v)try{q.name!==b&&r(q,"name",b),q.constructor=S}catch(w){}return S}}},b587:function(e,t,i){"use strict";var o=i("8642");function n(e,t,i,o){function n(){let e=t.value;if(i.modifiers.float){if(e=e.replace(/[^\d.]/g,""),e=e.replace(/[^\d.]/g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(/^\./g,"0."),"undefined"!==typeof i.value){let t=0;if("string"!==typeof i.value&&"number"!==typeof i.value||(t=parseInt(i.value)),!isNaN(t)){(!Number.isInteger(t)||t<0)&&(t=0);const i="^(\\d+)\\.(\\d{"+t+"}).*$",o=new RegExp(i);e=0===t?e.replace(o,"$1"):e.replace(o,"$1.$2")}}}else e=e.replace(/[^\d]/g,"");e.split(".").length-1>1&&(e=e.substring(0,e.length-1)),t.value=e}return n}const r={bind(e,t,i){const o="INPUT"===e.tagName?e:e.querySelector("input");o.addEventListener("input",n(e,o,t,i),!1)}};o["default"].directive("number-input",r)},c3c0:function(e,t,i){var o=i("ecc1"),n=o("toStringTag"),r={};r[n]="z",e.exports="[object z]"===String(r)},c436:function(e,t,i){var o=i("5d05"),n=Error,r=o("".replace),s=function(e){return String(n(e).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(s);e.exports=function(e,t){if(c&&"string"==typeof e&&!n.prepareStackTrace)while(t--)e=r(e,a,"");return e}},dbbd:function(e,t,i){var o=i("956c");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:o(e)}},dc0f:function(e,t,i){var o=i("071a"),n=i("4d51");e.exports=!o((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",n(1,7)),7!==e.stack)}))},f44b:function(e,t,i){var o=i("c3c0"),n=i("17e9"),r=i("7ea6"),s=i("ecc1"),a=s("toStringTag"),c=Object,l="Arguments"==r(function(){return arguments}()),d=function(e,t){try{return e[t]}catch(i){}};e.exports=o?r:function(e){var t,i,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=d(t=c(e),a))?i:l?r(t):"Object"==(o=r(t))&&n(t.callee)?"Arguments":o}}}]);