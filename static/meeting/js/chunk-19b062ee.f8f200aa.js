(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19b062ee"],{"0e5c":function(t,e,s){"use strict";var i=s("5829"),a=s("8642");e["a"]=function(t){return new Promise((function(e,s){let l=[],o={},r=t.length;console.log(t.length,t);const n=()=>0==t.length?e(l):String(t[0].file).IsPicture()?(t.shift(),n()):void i["a"].upload({file:t[0].file},"POST",{type:"form"}).then(s=>{console.log(s);var i=!0;if(void 0!=s&&""==s.FilePath&&""==s.OriginalFileName&&(console.log("重复了"),s=void 0,i=!1),void 0==s&&i){a["default"].prototype.$alert("网络不稳定, 文件上传失败, 请重新上传","提示",{confirmButtonText:"确定",callback:t=>{a["default"].prototype.$message({message:"上传失败的文件已标记",type:"warning"})}});let s=r-t.length;return e({tag:s,uploadImageList:l})}o=s,l.push(o),t.shift(),n()});n()}))}},"2ea2":function(t,e,s){"use strict";s("5e8e")},"4f1b":function(t,e,s){},"5e8e":function(t,e,s){},9853:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"qualification-added"},[e("el-form",{ref:"ruleForm",attrs:{"label-width":"110px",model:t.FormData,rules:t.rules}},[e("el-form-item",{attrs:{label:"资质名称",prop:"type"}},[e("el-radio-group",{model:{value:t.FormData.type,callback:function(e){t.$set(t.FormData,"type",e)},expression:"FormData.type"}},t._l(t.namesData,(function(s){return e("el-radio",{key:s.name,attrs:{label:s.code}},[t._v(t._s(s.name))])})),1)],1),e("el-form-item",{attrs:{label:"资质名称",prop:"name"}},[e("el-input",{attrs:{placeholder:"资质名称"},model:{value:t.FormData.name,callback:function(e){t.$set(t.FormData,"name",e)},expression:"FormData.name"}})],1),e("el-form-item",{attrs:{label:"上传资质图片",prop:"picture"}},[e("el-upload",{ref:"upload",attrs:{action:"","on-change":t.handleChangeAttach,"on-remove":t.handleRemoveAttach,"auto-upload":!1,"file-list":this.waitUpload,multiple:!1,accept:".jpg,.jpeg,.png"}},[e("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("从电脑选择文件")]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件,大小不超过2M ")]),e("div",{staticClass:"yl"},[t.FormData.picture?e("img",{attrs:{src:t.FormData.picture,alt:""}}):t._e()])],1)],1),e("div",{staticClass:"btnGroup"},[e("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v(t._s(null==t.itemData?"立即添加":"确认修改"))])],1)],1)],1)},a=[],l=s("0e5c"),o={props:{itemData:null|JSON,namesData:null|JSON},data(){return{FormData:{name:"",picture:""},waitUpload:[],rules:{name:[{required:!0,message:"请输入资质名称",trigger:"change"}]}}},mounted(){null!=this.itemData&&(this.FormData=JSON.parse(JSON.stringify(this.itemData)),this.FormData.picture=this.FormData.picture.split(","))},methods:{add(){this.$refs["ruleForm"].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t=[];this.waitUpload.forEach((e,s)=>{const i={key:s,file:e.raw};t.push(i)}),Object(l["a"])(t).then(t=>{console.log(t);let e=[];t.forEach(t=>{e.push(t.FilePath)}),this.FormData.picture=e.toString(),this.$emit("onColse",this.FormData)})}})},handleChangeAttach(t,e){const s="image/jpeg"===t.raw.type,i="image/png"===t.raw.type,a=t.size/1024/1024<2;if(console.log(s),console.log(i),console.log(a),!s&&!i||!a)return s&&i?this.$message.error("上传图片大小不能超过 2MB!"):this.$message.error("上传图片只能是 JPG 或者 PNG 格式!"),void this.$refs.upload.handleRemove(t);this.waitUpload=e},handleRemoveAttach(t,e){this.waitUpload=e}}},r=o,n=(s("2ea2"),s("0b56")),c=Object(n["a"])(r,i,a,!1,null,"7057475c",null);e["a"]=c.exports},"9c98":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"hotleIndex"},[e("div",{staticClass:"section"},[e("div",{staticClass:"path"},[e("ul",[e("li",{staticStyle:{color:"#409EFF",cursor:"pointer"},on:{click:function(e){return t.$router.go(-1)}}},[t._v(" 采购需求 ")]),e("li",{staticStyle:{color:"#7c7f82"}},[t._v(">")]),e("li",{staticStyle:{color:"#7c7f82"}},[t._v("找服务商")])])]),e("div",{staticClass:"search"},[e("a",{class:{select:!t.listFormData.isagreement},attrs:{href:"javascript:void(0)"},on:{click:t.searchall}},[t._v("所有服务商")]),e("a",{class:{select:t.listFormData.isagreement},attrs:{href:"javascript:void(0)"},on:{click:t.searchagreement}},[t._v("公司协议服务商")]),e("div",{staticClass:"R global-search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.listFormData.keyword,expression:"listFormData.keyword"}],staticClass:"text br2 new-search-input",attrs:{placeholder:"输入服务商名称或关键词",type:"text",name:"keyword"},domProps:{value:t.listFormData.keyword},on:{input:function(e){e.target.composing||t.$set(t.listFormData,"keyword",e.target.value)}}}),e("i",{staticClass:"el-icon-search"}),e("input",{staticClass:"btn br4 btn-primary",attrs:{type:"submit",id:"top_search",value:"搜索"},on:{click:t.getList}})]),e("div",{staticClass:"clear"})]),e("div",{staticClass:"typeList"},[null!=t.type.city?e("div",{staticClass:"item"},[e("div",{staticClass:"name"},[t._v("选择城市")]),e("div",{staticClass:"context"},[e("div",{staticClass:"item",class:{current:0==t.listFormData.city.length},on:{click:function(e){return t.selectedCity()}}},[t._v(" 不限 ")]),t._l(t.type.city[0].city_list,(function(s){return e("div",{key:s.code,staticClass:"item",class:{current:-1!=t.listFormData.city.findIndex(t=>t.code==s.code)},on:{click:function(e){return t.selectedCity(s.code)}}},[t._v(" "+t._s(s.AbbreviationName)+" ")])})),t._l(t.type.city,(function(s){return["热门"!=s.Key&&t.statusList.cityStatus?e("div",{key:s.Key,staticClass:"more"},[e("div",{staticClass:"moreTitle"},[t._v(t._s(s.Key))]),e("div",{staticClass:"moreItems"},t._l(s.city_list,(function(s){return e("div",{key:s.code,staticClass:"item",class:{current:-1!=t.listFormData.city.findIndex(t=>t.code==s.code)},on:{click:function(e){return t.selectedCity(s.code)}}},[t._v(" "+t._s(s.AbbreviationName)+" ")])})),0)]):t._e()]}))],2),e("div",{staticClass:"opt"},[e("el-button",{attrs:{type:t.statusList.cityStatus?"warning":"success",size:"mini"},on:{click:function(e){t.statusList.cityStatus=!t.statusList.cityStatus}}},[t._v(" "+t._s(t.statusList.cityStatus?"收起":"展开")+" ")])],1)]):t._e()]),e("div",{staticClass:"botContext"},[e("div",{staticClass:"hotelList"},[e("div",{staticClass:"number"},[t._v(" 共 "),e("span",[t._v(t._s(t.hotel.Counts))]),t._v(" 家服务商 ")]),e("div",{staticClass:"list"},t._l(t.hotel.List,(function(s){return e("div",{key:s.id,staticClass:"item"},[e("img",{attrs:{src:s.company_logo,alt:""}}),e("div",{staticClass:"center"},[e("div",{staticClass:"name"},[t._v(t._s(s.company_name))]),e("div",{staticClass:"address"},[t._v("服务范围: "+t._s(s.cityname))]),e("div",{staticClass:"other"},[e("p",[t._m(0,!0),t._v(" "+t._s(s.customer_service_name)+" ")]),e("p",[t._m(1,!0),t._v(" "+t._s(s.customer_service_telephone_numbers)+" ")]),e("p",[t._m(2,!0),t._v(" "+t._s(s.company_email)+" ")])]),e("div",{staticClass:"profile"},[t._v(t._s(s.company_profile))])]),e("div",{staticClass:"right"},[t._e(),t.routeType?e("div",{staticClass:"bottom"},[-1==t.HotelSelectedList.findIndex(t=>t.id==s.id)?e("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.selected(s)}}},[t._v("邀请询价")]):e("el-button",{attrs:{type:"info"},on:{click:function(e){return t.selected(s)}}},[t._v("取消邀请")])],1):t._e()])])})),0),e("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next",total:t.hotel.Counts},on:{"current-change":t.sizeChange}})],1),t.routeType?e("div",{staticClass:"right"},[e("div",{staticClass:"selectedHotel"},[e("div",{staticClass:"title"},[t._v("已选择目标服务商")]),e("div",{staticClass:"context"},[0==t.HotelSelectedList.length?e("div",{staticClass:"tips"},[t._v("暂未选择目标服务商")]):t._e(),t._l(t.HotelSelectedList,(function(s){return e("div",{key:""+s.id,staticClass:"item"},[e("div",{staticClass:"company_name"},[t._v(t._s(s.company_name))]),e("i",{staticClass:"el-icon-delete-solid",on:{click:function(e){return t.cancel(s)}}})])}))],2),e("div",{staticClass:"buttons"},[e("el-button",{staticStyle:{width:"100%"},attrs:{type:"warning"},on:{click:t.Inquiry}},[t._v("一键询价")])],1)])]):t._e()])])])},a=[function(){var t=this,e=t._self._c;return e("span",[e("i",{staticClass:"el-icon-user"})])},function(){var t=this,e=t._self._c;return e("span",[e("i",{staticClass:"el-icon-phone-outline"})])},function(){var t=this,e=t._self._c;return e("span",[e("i",{staticClass:"el-icon-upload2"})])}],l=s("9853"),o={name:"Qualification",components:{qualificationAdded:l["a"]},data(){return{routeType:null,HotelSelectedList:[],type:{city:null,sitetype:null,brand:null,venuearea:null,venuepeoplenumber:null,roomprice:null},statusList:{cityStatus:!1,brandStatus:!1},listFormData:{city:[],keyword:"",isagreement:!1,Page:1,Rows:10},hotel:{Counts:0,CurrentPage:0,List:[],PageCount:0},test:100}},computed:{},methods:{Inquiry(){0!==this.HotelSelectedList.length?this.$api.selectserviceprovider({serviceprovider:this.HotelSelectedList},"POST").then(t=>{this.$router.push({name:"ServiceProviderProcurement",params:{id:this.$route.params.id,type:this.$route.params.type}})}):this.$message({message:"至少选择一家服务商",type:"warning"})},cancel(t){let e=this.HotelSelectedList.findIndex(e=>e.id==t.id);e>-1&&this.HotelSelectedList.splice(e,1)},selected(t){let e=this.HotelSelectedList.findIndex(e=>e.id==t.id);-1==e?this.HotelSelectedList.push({id:t.id,company_name:t.company_name,company_email:t.company_email}):this.HotelSelectedList.splice(e,1)},jumpInfo(t){},getList(){this.$api.serviceproviderlist(this.listFormData,"POST").then(t=>{this.hotel=t})},sizeChange(t){this.listFormData.Page=t,this.getList()},selectedCity(t){t?-1==this.listFormData.city.findIndex(e=>e.code===t)?this.listFormData.city.push({code:t}):this.listFormData.city=this.listFormData.city.filter(e=>e.code!=t):this.listFormData.city=[],this.listFormData.Page=1,this.getList()},searchall(){this.listFormData.Page=1,this.listFormData.isagreement=!1,this.getList()},searchagreement(){this.listFormData.Page=1,this.listFormData.isagreement=!0,this.getList()}},mounted(){this.routeCity=this.$route.params.city,this.routeCity&&this.selectedCity(this.routeCity),this.routeType=this.$route.params.type,this.routeType&&this.$api.getserviceprovider({},"POST").then(t=>{t.length>0?this.HotelSelectedList=t:this.HotelSelectedList=[]}),this.getList(),this.$api.serviceprovidercity({},"POST").then(t=>{this.type.city=t.city})}},r=o,n=(s("be62"),s("0b56")),c=Object(n["a"])(r,i,a,!1,null,"3032fb5b",null);e["default"]=c.exports},be62:function(t,e,s){"use strict";s("4f1b")}}]);