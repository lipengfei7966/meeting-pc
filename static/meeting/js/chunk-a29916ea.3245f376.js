(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a29916ea"],{"0359":function(t,s,e){var i=e("3726");t.exports=i("document","documentElement")},"18ab":function(t,s,e){var i,a=e("50b4"),n=e("322a"),o=e("321e"),c=e("3940"),r=e("0359"),d=e("52c7"),l=e("006e"),_=">",v="<",u="prototype",f="script",p=l("IE_PROTO"),m=function(){},C=function(t){return v+f+_+t+v+"/"+f+_},y=function(t){t.write(C("")),t.close();var s=t.parentWindow.Object;return t=null,s},h=function(){var t,s=d("iframe"),e="java"+f+":";return s.style.display="none",r.appendChild(s),s.src=String(e),t=s.contentWindow.document,t.open(),t.write(C("document.F=Object")),t.close(),t.F},b=function(){try{i=new ActiveXObject("htmlfile")}catch(s){}b="undefined"!=typeof document?document.domain&&i?y(i):h():y(i);var t=o.length;while(t--)delete b[u][o[t]];return b()};c[p]=!0,t.exports=Object.create||function(t,s){var e;return null!==t?(m[u]=a(t),e=new m,m[u]=null,e[p]=t):e=b(),void 0===s?e:n.f(e,s)}},"322a":function(t,s,e){var i=e("8d06"),a=e("d5d3"),n=e("5557"),o=e("50b4"),c=e("efb2"),r=e("a2a9");s.f=i&&!a?Object.defineProperties:function(t,s){o(t);var e,i=c(s),a=r(s),d=a.length,l=0;while(d>l)n.f(t,e=a[l++],i[e]);return t}},4170:function(t,s,e){"use strict";var i=e("ebdc"),a=e("5d05"),n=e("da1c"),o=e("6134"),c=e("956c"),r=e("071a"),d=a("".charAt),l=r((function(){return"\ud842"!=="𠮷".at(-2)}));i({target:"String",proto:!0,forced:l},{at:function(t){var s=c(n(this)),e=s.length,i=o(t),a=i>=0?i:e+i;return a<0||a>=e?void 0:d(s,a)}})},6470:function(t,s,e){"use strict";var i=e("ebdc"),a=e("ae11"),n=e("e7b6"),o=e("6134"),c=e("c221");i({target:"Array",proto:!0},{at:function(t){var s=a(this),e=n(s),i=o(t),c=i>=0?i:e+i;return c<0||c>=e?void 0:s[c]}}),c("at")},7657:function(t,s,e){},"8eb5":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"activityOrderInfo"},[s("div",{staticClass:"title",staticStyle:{"padding-left":"20px"}},[t._v("活动询价订单 - "+t._s(t.info.activity_name))]),s("div",{staticClass:"content"},["0012-1"===t.info.status&&Date.parse(t.info.offerenddate)>new Date?s("div",{staticClass:"tips"},[s("p",[t._v("请尽快给客户报价吧")]),s("p",[t._v(" 请查看以下订单详情，如果客户需要使用会议室等场地，请为客户预留档期 ")]),s("el-button",{on:{click:t.goquotedprice}},[t._v("立即报价")])],1):"0012-2"===t.info.status?s("div",{staticClass:"tips"},[s("p",[t._v("等待客户决定")]),s("p",[t._v(" 请查看以下订单详情，如果客户需要使用会议室等场地，请为客户预留档期 ")]),s("el-button",{on:{click:t.anewquotation}},[t._v("更新报价")]),s("el-button",{staticStyle:{"margin-left":"20px"},on:{click:t.checkquotation}},[t._v("查看报价")])],1):"0012-3"===t.info.status?s("div",[s("div",{staticClass:"tips3"},[s("p",[t._v(" 恭喜您，已经中标！请尽快与客户联系确定相关事宜。 "),s("el-button",{attrs:{type:"warning"},on:{click:t.Orderform}},[t._v("查看关联订单")])],1)]),s("div",{staticClass:"tips_bttton_info"},[s("el-button",{attrs:{type:"primary"},on:{click:t.project}},[t._v(t._s(t.info.project_id?"查看行程":"添加行程"))])],1)]):"0012-4"===t.info.status?s("div",{staticClass:"tips"},[s("p",[t._v("您已谢绝了此询价单，无法再进行报价。")])]):"0012-5"===t.info.status?s("div",{staticClass:"tips2"},[s("p",[t._v("很遗憾，未中标")]),s("p",[t._v("客户谢绝了报价(谢绝报价)")])]):t._e(),"0012-6"===t.info.status&&Date.parse(t.info.offerenddate)>new Date?s("div",{staticClass:"tips"},[s("p",[t._v(" 客户请您重新报价，再优惠一些吧！ "),s("el-button",{attrs:{type:"primary"},on:{click:function(s){return t.goquotedprice(1)}}},[t._v("重新报价")])],1),s("p",[t._v("原因："+t._s(t.info.message.message))])]):("0012-1"===t.info.status||"0012-6"===t.info.status||"0012-8"===t.info.status)&&Date.parse(t.info.offerenddate)<=new Date?s("div",{staticClass:"tips2"},[s("p",[t._v("很遗憾，已经超过报价截止日期，无法再报价了。")]),s("el-button",{staticStyle:{cursor:"pointer","text-decoration":"underline"},on:{click:t.checkquotation}},[t._v("查看报价（草稿）")])],1):t._e(),"0012-8"===t.info.status&&Date.parse(t.info.offerenddate)>new Date?s("div",{staticClass:"tips"},[s("p",[t._v("请尽快给客户报价吧")]),s("p",[t._v(" 请查看以下订单详情，如果客户需要使用会议室等场地，请为客户预留档期 ")]),s("el-button",{on:{click:t.goquotedprice}},[t._v("立即报价（草稿）")])],1):t._e(),s("p",{staticClass:"tab_title"},[t._v(" RFP信息")]),s("div",{staticClass:"info"},[s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("询价单号")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.inquiry_sheet_code))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("活动名称")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.activity_name))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("报名截至日期")]),s("div",{staticClass:"context"},[t._v(t._s(t._f("date_ex_day")(t.info.offerenddate)))])])]),s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("城市")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.event_city))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("最多活动人数")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.activity_count))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("活动日期")]),s("div",{staticClass:"context"},[t._v(" "+t._s(t._f("date_day")(t.info.activity_startdate))+" 至 "+t._s(t._f("date_day")(t.info.activity_enddate))+t._s(t.info.isadjustdate)+" ")])])]),s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("公司名称")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.company_name))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("联系人")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.contacts))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("联系方式")]),s("div",{staticClass:"context"},[t._v(" "+t._s(t.info.customer_service_telephone_numbers)+" / "+t._s(t.info.mailbox))])])])]),s("p",{staticClass:"tab_title"},[t._v(" 您的信息 ")]),s("div",{staticClass:"info"},[s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("供应商")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.hotel_name))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("联系人")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.myinfo.contacts))])]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("联系方式")]),s("div",{staticClass:"context"},[t._v(t._s(t.info.myinfo.telephone)+" / "+t._s(t.info.myinfo.email))])])])]),s("p",{staticClass:"tab_title"},[t._v(" 采购需求 ")]),s("div",{staticClass:"tabel_info purchase"},[t._m(0),s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("客房需求")]),s("div",{staticClass:"context"},t._l(t.info.inquiry_sheet_room,(function(e){return s("div",{key:e.id,staticClass:"hyxq_item"},[s("div",{staticClass:"date"},[t._v(t._s(t._f("date_day")(e.date)))]),t._l(e.roomlist,(function(e){return s("div",{key:e.id,staticClass:"c_item"},[t._v(" "+t._s(e.roomtypename)+":"+t._s(e.roomcount)+" 间 ")])})),e.roomlist.length>0&&e.roomlist[0].otherrequirements?s("div",{staticClass:"otherrequirements"},[t._v(" 其他需求："+t._s(e.roomlist[0].otherrequirements)+" ")]):t._e()],2)})),0)]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("会议需求")]),s("div",{staticClass:"context"},t._l(t.info.inquiry_sheet_conference,(function(e){return s("div",{key:e.id,staticClass:"hyxq_item"},[s("div",{staticClass:"date"},[t._v(t._s(t._f("date_day")(e.conferencedate)))]),t._l(e.conferencelist,(function(i){return s("div",{key:i.id,staticClass:"c_item"},[1==i.type?s("div",[t._v(" "+t._s(i.item+i.order_name)+" "+t._s(i.starttime)+"-"+t._s(i.endtime)+" "+t._s(i.roomsetuptype)+" "+t._s(i.attendees)+" 人，会场面积范围："+t._s(i.min_area)+"~"+t._s(i.max_area)+" sqm ")]):2==i.type?s("div",[t._v(" "+t._s(i.related_information)+" "),t._v(" "+t._s(t._f("date_day")(e.conferencedate))+" "+t._s(i.starttime)+"~ "+t._s(t._f("date_day")(e.conferencedate))+" "+t._s(i.endtime)+" ")]):t._e(),2==i.type?s("div",{staticClass:"otherrequirements"},[s("span",{staticClass:"remarks"},[t._v("需求备注：")]),t._v(t._s(i.describe)+" ")]):t._e(),3==i.type?s("div",[s("div",{staticClass:"date"},[t._v(" "+t._s(t._f("date_day")(e.conferencedate))+" "+t._s(i.item)+" ")]),t._v(" "+t._s(i.equipment)+" "),s("div",{staticClass:"otherrequirements"},[s("span",{staticClass:"remarks"},[t._v("需求备注：")]),t._v(t._s(i.microphonedescribe)+" ")])]):t._e()])}))],2)})),0)])]),s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("酒店内用餐需求")]),s("div",{staticClass:"context"},t._l(t.info.inquiry_sheet_food,(function(e){return s("div",{key:e.id,staticClass:"hyxq_item"},[s("div",{staticClass:"date"},[t._v(t._s(t._f("date_day")(e.date)))]),t._l(e.foodlist,(function(i,a){return s("div",{key:i.id,staticClass:"c_item"},[s("span",[t._v(t._s(i.foodtypename))]),t._v(" "+t._s(i.usetype?`[${i.usetype}]`:"")+" "+t._s(i.personcount)+" 人 "),1==i.addresstype?s("span",{staticClass:"outsidethehotel"},[t._v("酒店外")]):t._e(),a==e.foodlist.length-1?s("div",{staticClass:"otherrequirements"},[s("span",{staticClass:"remarks"},[t._v("需求备注：")]),t._v(t._s(i.comments)+" ")]):t._e()])}))],2)})),0)]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("酒店外用餐需求")]),s("div",{staticClass:"context"},t._l(t.info.inquiry_sheet_outside_food,(function(e){return s("div",{key:e.id,staticClass:"hyxq_item"},[s("div",{staticClass:"date"},[t._v(t._s(t._f("date_day")(e.date)))]),t._l(e.foodlist,(function(i,a){return s("div",{key:i.id,staticClass:"c_item"},[s("span",[t._v(t._s(i.foodtypename))]),t._v(" "+t._s(i.usetype?`[${i.usetype}]`:"")+" "+t._s(i.personcount)+" 人 "),a==e.foodlist.length-1?s("div",{staticClass:"otherrequirements"},[s("span",{staticClass:"remarks"},[t._v("需求备注：")]),t._v(t._s(i.comments)+" ")]):t._e()])}))],2)})),0)])]),s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("交通需求")]),s("div",{staticClass:"context"},[t._l(t.info.inquiry_sheet_transportation,(function(e){return s("div",{key:e.id,staticClass:"hyxq_item"},[s("div",{staticClass:"date"},[t._v(t._s(t._f("date_day")(e.date))+" 大交通")]),t._l(e.transportationlist,(function(e){return s("div",{key:e.id,staticClass:"c_item"},[s("span",[t._v(t._s(e.origincity)+" - "+t._s(e.destinationcity))]),t._v(" "+t._s(e.transtype)+" "+t._s(e.seatclasses)+" "+t._s(e.specialprice)+" "+t._s(e.passengercount)+" 人 ")])}))],2)})),t._l(t.info.inquiry_sheet_car,(function(e){return s("div",{key:e.id,staticClass:"hyxq_item"},[s("div",{staticClass:"date"},[t._v(t._s(t._f("date_day")(e.date))+" 地面交通")]),t._l(e.carlist,(function(e){return s("div",{key:e.id,staticClass:"c_item"},[s("p",[s("span",[t._v(t._s(e.purposename))]),t._v(" "+t._s(e.vehicletypename)+" "+t._s(e.carcount)+" 辆 ")]),e.city?s("p",[s("span",[t._v("用车城市")]),t._v(" "+t._s(e.city))]):t._e()])}))],2)}))],2)]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("其它需求")]),s("div",{staticClass:"context"},t._l(t.info.inquiry_sheet_other,(function(e,i){return s("div",{key:i,staticClass:"hyxq_item"},[s("p",[s("span",{staticClass:"other"},[t._v(t._s(e.custom_servicetypename)+"("+t._s(e.participatecount)+") ")])]),e.describe?s("p",[s("span",{staticClass:"remarks"},[t._v("需求备注：")]),t._v(t._s(e.describe))]):t._e()])})),0)])]),s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("附件")]),s("div",{staticClass:"box"},t._l(t.info.inquiry_sheet_attach,(function(e){return s("div",{key:e.id,staticClass:"context"},[s("a",{attrs:{target:"_blank",href:t.info.domain+e.filepath,download:""}},[t._v(t._s(e.filename))])])})),0)]),s("div",{staticClass:"item"},[s("div",{staticClass:"label"},[t._v("其它需求信息或者注意事项")]),s("div",{staticClass:"context"},[s("span",[t._v(t._s(t.info.other))])])])])]),("0012-1"===t.info.status||"0012-6"===t.info.status)&&Date.parse(t.info.offerenddate)>new Date?s("div",{staticClass:"btn-group"},["0012-1"===t.info.status?s("el-button",{attrs:{type:"primary"},on:{click:t.goquotedprice}},[t._v("开始报价")]):s("el-button",{attrs:{type:"primary"},on:{click:function(s){return t.goquotedprice(1)}}},[t._v("重新报价")]),s("el-button",{attrs:{type:"danger"},on:{click:t.refusequoted}},[t._v("谢绝报价")])],1):t._e(),t.info.history_quotationprice&&t.info.history_quotationprice.length>0?s("div",{staticClass:"info"},[s("div",{staticClass:"box-card"},[s("div",{staticClass:"header tab_title clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("您提交过"+t._s(t.info.history_quotationprice.length)+"次报价，以下为报价记录：")])]),t._l(t.info.history_quotationprice,(function(e,i){return s("div",{key:e.id,staticClass:"text item"},[t._v(" 第"+t._s(i+1)+"次报价 "),t._v(" ,总金额￥"+t._s(t.positiveFloat(e.total_amount).toFixed(2))+"元，[ "+t._s(t._f("date_ex")(e.offer_data))+" ] "),s("span",{staticClass:"checkQuotedprice",attrs:{name:"quotedprice"},on:{click:function(s){return t.Quotedprice(e.id,0)}}},[t._v(" 查看报价单 ")])])}))],2)]):t._e(),s("el-dialog",{attrs:{title:"添加项目",visible:t.addProjectStatus,"before-close":t=>{this.itemData=null,t()},width:"700px"},on:{"update:visible":function(s){t.addProjectStatus=s}}},[t.addProjectStatus?s("projectAdded",{attrs:{"item-data":t.itemData},on:{onColse:t.projectSave}}):t._e()],1)],1)])},a=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"line"},[s("div",{staticClass:"item"},[s("div",{staticClass:"label",staticStyle:{width:"100%","justify-content":"left"}},[t._v(" 客户需求 ")])])])}],n=(e("6470"),e("4170"),e("97aa")),o=e("cf45"),c={name:"ItineraryInfo",components:{projectAdded:n["a"]},data(){return{info:{},addProjectStatus:!1,itemData:null}},methods:{positiveFloat:o["m"],anewquotation(){let t=this;t.$confirm("是否确定更新报价?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{t.$api.AnewQuotation({id:t.info.object_id},"POST").then(s=>{s?t.goquotedprice():this.$message({message:"不能修改报价单!",type:"error"})})})},checkquotation(){let t=this.info.history_quotationprice.at(-1).id,s=this.$router.resolve({name:"DMCquotedprice",params:{id:t,isSubmit:0}});window.open(s.href,"_blank")},projectSave(t){this.$api.projectsave(t,"POST").then(s=>{this.$message({message:t.id?"修改成功！":"添加成功！",type:"success"}),this.$router.push({name:"ItineraryManagement",params:{id:this.info.project_id}})})},Quotedprice(t,s){let e=this.$router.resolve({name:"DMCquotedprice",params:{id:t,isSubmit:s}});window.open(e.href,"_blank")},Orderform(){this.$router.push({name:"orderInfo",params:{id:this.info.orderform_id}})},project(){this.info.project_id?this.$router.push({name:"ItineraryManagement",params:{id:this.info.project_id}}):this.addProjectStatus=!0},refusequoted(){this.$prompt("请输入您谢绝报价的理由","谢绝报价",{confirmButtonText:"确定谢绝报价",showCancelButton:!1,inputPattern:/\S/,inputErrorMessage:"请填写谢绝报价的理由",inputType:"textarea"}).then(({value:t})=>{this.$api.inquirysheetRefusequoted({id:this.info.object_id,reason:t},"POST").then(t=>{this.$message({message:"已拒绝报价",type:"success"}),location.reload()})}).catch(()=>{})},goquotedprice(t){this.$router.push({name:"DMCquotedprice",params:{id:this.info.object_id,isSubmit:1,type:t}})}},mounted(){this.$api.inquirysheetInfo({id:this.$route.params.id},"POST").then(t=>{this.info=t})}},r=c,d=(e("a3e6"),e("0b56")),l=Object(d["a"])(r,i,a,!1,null,"0e5e9aa9",null);s["default"]=l.exports},a2a9:function(t,s,e){var i=e("eaba"),a=e("321e");t.exports=Object.keys||function(t){return i(t,a)}},a3e6:function(t,s,e){"use strict";e("7657")},c221:function(t,s,e){var i=e("ecc1"),a=e("18ab"),n=e("5557").f,o=i("unscopables"),c=Array.prototype;void 0==c[o]&&n(c,o,{configurable:!0,value:a(null)}),t.exports=function(t){c[o][t]=!0}}}]);