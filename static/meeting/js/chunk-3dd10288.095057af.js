(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dd10288"],{"0e5c":function(t,e,o){"use strict";o("d3b7");var i=o("5829"),n=o("2b0e");e["a"]=function(t){return new Promise((function(e,o){var r=[],a={},s=t.length;console.log(t.length,t);var c=function o(){return 0==t.length?e(r):String(t[0].file).IsPicture()?(t.shift(),o()):void i["a"].upload({file:t[0].file},"POST",{type:"form"}).then((function(i){console.log(i);var c=!0;if(void 0!=i&&""==i.FilePath&&""==i.OriginalFileName&&(console.log("重复了"),i=void 0,c=!1),void 0==i&&c){n["default"].prototype.$alert("网络不稳定, 文件上传失败, 请重新上传","提示",{confirmButtonText:"确定",callback:function(t){n["default"].prototype.$message({message:"上传失败的文件已标记",type:"warning"})}});var l=s-t.length;return e({tag:l,uploadImageList:r})}a=i,r.push(a),t.shift(),o()}))};c()}))}},2654:function(t,e,o){"use strict";o.d(e,"j",(function(){return n})),o.d(e,"k",(function(){return r})),o.d(e,"i",(function(){return a})),o.d(e,"h",(function(){return s})),o.d(e,"l",(function(){return c})),o.d(e,"e",(function(){return l})),o.d(e,"f",(function(){return d})),o.d(e,"b",(function(){return f})),o.d(e,"g",(function(){return u})),o.d(e,"a",(function(){return p})),o.d(e,"c",(function(){return m})),o.d(e,"d",(function(){return _}));o("a4d3"),o("e01a"),o("d3b7"),o("d28b"),o("3ca3"),o("ddb0");function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}o("ac1f"),o("00b4"),o("d9e2"),o("a9e3"),o("159b");function n(t,e,o){var i=/^((0\d{2,3}-\d{7,8})|(1[34578]\d{9}))$/;""==e||void 0==e||null==e||i.test(e)||""==e?o():o(new Error("请输入正确的电话号码或者固话号码"))}function r(t,e,o){var i=/0\d{2}-\d{7,8}/;""==e||void 0==e||null==e||i.test(e)||""==e?o():o(new Error("请输入正确的固话（格式：区号+号码,如010-1234567）"))}function a(t,e,o){var i=/^[1][3,4,5,7,8][0-9]{9}$/;""==e||void 0==e||null==e||i.test(e)||""==e?o():o(new Error("请输入正确的电话号码"))}function s(t,e,o){var i=/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;""==e||void 0==e||null==e||i.test(e)?o():o(new Error("请输入正确的邮箱地址"))}function c(t,e,o){var i=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/;""==e||void 0==e||null==e||i.test(e)?o():o(new Error("请输入正确的URL"))}function l(t,e,o){if(!e)return o(new Error("输入不可以为空"));setTimeout((function(){if(Number(e)){var t=/^[0-9]*[1-9][0-9]*$/,i=t.test(e);i?o():o(new Error("请输入正整数"))}else o(new Error("请输入正整数"))}),0)}function d(t,e,o){e||o(),setTimeout((function(){if(Number(e)){var t=/^[0-9]*[1-9][0-9]*$/,i=t.test(e);i?o():o(new Error("请输入正整数"))}else o(new Error("请输入正整数"))}),1e3)}function f(t,e){var o={},n=[];if(t=Array.isArray(t)?t:[],e)for(var r=0;r<t.length;r++)if(o[t[r].date]){for(var a=0;a<n.length;a++)if(t[r].date===n[a].date){n[a].settlement+=Number("object"==i(t[r].settlement_total_price)?t[r].settlement_total_price.value:t[r].settlement_total_price),n[a].orgSettlement+=Number("object"==i(t[r].total_price)?t[r].total_price.value:t[r].total_price),n[a].data.push(t[r]);break}}else n.push({date:t[r].date,settlement:Number("object"==i(t[r].settlement_total_price)?t[r].settlement_total_price.value:t[r].settlement_total_price),orgSettlement:Number("object"==i(t[r].total_price)?t[r].total_price.value:t[r].total_price),data:[t[r]]}),o[t[r].date]=t[r];else for(var s=0;s<t.length;s++)if(o[t[s].date]){for(var c=0;c<n.length;c++)if(t[s].date===n[c].date){n[c].settlement+="object"==i(t[s].settlement_price)?t[s].settlement_price.value:t[s].settlement_price,n[c].orgSettlement+="object"==i(t[s].price)?t[s].price.value:t[s].price,n[c].data.push(t[s]);break}}else n.push({date:t[s].date,settlement:"object"==i(t[s].settlement_price)?t[s].settlement_price.value:t[s].settlement_price,orgSettlement:"object"==i(t[s].price)?t[s].price.value:t[s].price,data:[t[s]]}),o[t[s].date]=t[s];return n}function u(t){var e={},o=[];t=Array.isArray(t)?t:[];for(var i=0;i<t.length;i++)if(e[t[i].checkindate]){for(var n=0;n<o.length;n++)if(t[i].checkindate===o[n].checkindate){"大床房"==t[i].roomtype?(o[n].bigBedNum=t[i].roomcount,o[n].totalNum+=t[i].roomcount):"双床房"==t[i].roomtype?(o[n].doubleBedNum=t[i].roomcount,o[n].totalNum+=t[i].roomcount):(o[n].suiteNum=t[i].roomcount,o[n].totalNum+=t[i].roomcount);break}}else t[i].bigBedNum=0,t[i].doubleBedNum=0,t[i].suiteNum=0,t[i].totalNum=0,"大床房"==t[i].roomtype?(t[i].bigBedNum=t[i].roomcount,t[i].totalNum+=t[i].roomcount):"双床房"==t[i].roomtype?(t[i].doubleBedNum=t[i].roomcount,t[i].totalNum+=t[i].roomcount):(t[i].suiteNum=t[i].roomcount,t[i].totalNum+=t[i].roomcount),o.push(t[i]),e[t[i].checkindate]=t[i];return o}function p(t){for(var e={},o=[],i=0;i<t.length;i++){var n=(t[i].build?t[i].build.price:0)+(t[i].rentalCosts?t[i].rentalCosts.price:0);if(t[i].equipment&&t[i].equipment.forEach((function(t){n+=t.price||0})),e[t[i].rentalCosts.time])for(var r=function(e){if(t[i].rentalCosts.time===o[e].time)return o[e].totalPrice+=(t[i].build?t[i].build.price:0)+(t[i].rentalCosts?t[i].rentalCosts.price:0),t[i].equipment&&t[i].equipment.forEach((function(t){o[e].totalPrice+=t.price||0})),o[e].data.push(t[i]),"break"},a=0;a<o.length;a++){var s=r(a);if("break"===s)break}else o.push({time:t[i].rentalCosts.time,totalPrice:n,data:[t[i]]}),e[t[i].rentalCosts.time]=t[i]}return o}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time",o={},i=[];t=t||[];for(var n=0;n<t.length;n++)if(o[t[n][e]]){for(var r=0;r<i.length;r++)if(t[n][e]===i[r].time){i[r].data.push(t[n]),i[r].car.push(t[n]);break}}else i.push({time:t[n][e],car_date:t[n][e].substring(0,10),breakfast:t[n].breakfast,networks:t[n].networks,describe:t[n].describe,otherrequirements:t[n].otherrequirements,type:t[n].type,room_budget:t[n].room_budget,purpose:t[n].purpose,offer_remarks:t[n].offer_remarks,comments:t[n].comments,data:[t[n]],car:[t[n]]}),o[t[n][e]]=t[n];return i}function _(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time",o={},i=[];t=t||[];for(var n=0;n<t.length;n++)i.push({time:t[n][e],car_date:t[n][e].substring(0,10),breakfast:t[n].breakfast,networks:t[n].networks,describe:t[n].describe,otherrequirements:t[n].otherrequirements,type:t[n].type,room_budget:t[n].room_budget,purpose:t[n].purpose,offer_remarks:t[n].offer_remarks,comments:t[n].comments,data:[t[n]],car:[t[n]]}),o[t[n][e]]=t[n];return i}},7538:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"quotedprice"},[o("div",{staticClass:"path"},[o("ul",[o("li",{staticStyle:{color:"#409EFF",cursor:"pointer"},on:{click:function(e){return t.$router.replace({path:"/activityInquiry/orderList"})}}},[t._v("活动询价订单列表")]),o("li",{staticStyle:{color:"#7c7f82"}},[t._v(">")]),o("li",{staticStyle:{color:"#409EFF",cursor:"pointer"},on:{click:function(e){return t.$router.replace({path:"/activityInquiry/orderList/"+t.info.inquiry_sheet_object_id})}}},[t._v("活动询价订单详情")]),o("li",{staticStyle:{color:"#7c7f82"}},[t._v(">")]),o("li",{staticStyle:{color:"#7c7f82"}},[t._v("活动询价订单报价")])])]),t.info?o("div",{staticClass:"content"},[o("div",{staticClass:"info"},[o("div",{staticClass:"line"},[o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("询价单号")]),o("div",{staticClass:"context"},[t._v(t._s(t.info.inquiry_sheet_code))])]),o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("报名截至日期")]),o("div",{staticClass:"context"},[t._v(t._s(t._f("date_ex")(t.info.offerenddate)))])])]),o("div",{staticClass:"line"},[o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("活动名称")]),o("div",{staticClass:"context"},[t._v(t._s(t.info.activity_name))])]),o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("城市")]),o("div",{staticClass:"context"},[t._v(t._s(t.info.event_city))])])]),o("div",{staticClass:"line"},[o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("最多活动人数")]),o("div",{staticClass:"context"},[t._v(t._s(t.info.activity_count))])]),o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("活动日期")]),o("div",{staticClass:"context"},[t._v(" "+t._s(t._f("date_day")(t.info.activity_startdate))+" 至 "+t._s(t._f("date_day")(t.info.activity_enddate))+" "+t._s(1==t.info.isadjustdate?"[会议日期可以调整]":"[会议日期不可调整]")+" ")])])]),o("div",{staticClass:"line"},[o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("公司名称")]),o("div",{staticClass:"context"},[t._v(t._s(t.info.company_name))])]),o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("联系人")]),o("div",{staticClass:"context"},[t._v(t._s(t.info.contacts))])])]),o("div",{staticClass:"line"},[o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("联系邮箱")]),o("div",{staticClass:"context"},[t._v(t._s(t.info.mailbox))])]),o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("联系电话")]),o("div",{staticClass:"context"},[t._v(t._s(t.info.customer_service_telephone_numbers))])])])]),o("div",{staticClass:"info"},[o("div",{staticClass:"line"},[o("div",{staticClass:"item"},[o("div",{staticClass:"label"},[t._v("酒店")]),o("div",{staticClass:"context"},[t._v(t._s(t.info.hotelname))])]),o("div",{staticClass:"item"},[t._m(0),o("div",{staticClass:"context contextSel"},[o("el-select",{attrs:{disabled:t.readonly,placeholder:"请选择"},on:{change:t.changeSel},model:{value:t.contractsId,callback:function(e){t.contractsId=e},expression:"contractsId"}},t._l(t.info.contactslist,(function(t){return o("el-option",{key:t.id,attrs:{label:t.contacts,value:t.id}})})),1),o("el-input",{attrs:{disabled:t.disabled||t.readonly,placeholder:"请输入您的姓名"},model:{value:t.info.biddername,callback:function(e){t.$set(t.info,"biddername",e)},expression:"info.biddername"}})],1)])]),o("div",{staticClass:"line"},[o("div",{staticClass:"item"},[t._m(1),o("div",{staticClass:"context"},[o("el-input",{attrs:{disabled:t.disabled||t.readonly,placeholder:"请输入您的联系电话"},model:{value:t.info.biddertel,callback:function(e){t.$set(t.info,"biddertel",e)},expression:"info.biddertel"}})],1)]),o("div",{staticClass:"item"},[t._m(2),o("div",{staticClass:"context"},[o("el-input",{attrs:{disabled:t.disabled||t.readonly,placeholder:"请输入您的联系邮箱"},model:{value:t.info.bidderemail,callback:function(e){t.$set(t.info,"bidderemail",e)},expression:"info.bidderemail"}})],1)])])]),o("div",{staticClass:"excel"},[o("span",[t._v("采购需求报价")]),0==this.$route.params.isSubmit?o("a",{staticStyle:{cursor:"pointer"},attrs:{download:""},on:{click:t.excelexport}},[t._v("下载excel")]):t._e()]),t.hotelVisible?o("div",{staticClass:"title_item"},[t._v("采购酒店")]):t._e(),t.hotelVisible?o("div",{staticClass:"section"},[o("el-select",{attrs:{remote:"",filterable:"","reserve-keyword":"",placeholder:"请选择采购酒店","remote-method":t.remoteMethod,loading:t.loading},model:{value:t.info.hotel_id,callback:function(e){t.$set(t.info,"hotel_id",e)},expression:"info.hotel_id"}},t._l(t.hotelList,(function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),1==t.info.event_info_configure.bjqrisdisplay?o("span",{staticStyle:{color:"rgb(22, 155, 213)","line-height":"30px",cursor:"pointer",float:"right"},on:{click:t.downloadOfferConfirm}},[t._v("下载报价确认单")]):t._e()],1):t._e(),t.roomVisible?o("div",{staticClass:"title_item title_item_sel"},[o("div",[t._v("客房需求")]),o("div",{staticClass:"sel_el"},[o("el-select",{staticStyle:{width:"100%"},attrs:{disabled:t.readonly,size:"medium",placeholder:"请选择"},on:{change:function(e){return t.roomVat(e)}},model:{value:t.info.roomtaxid,callback:function(e){t.$set(t.info,"roomtaxid",e)},expression:"info.roomtaxid"}},t._l(t.info.taxlist,(function(t){return o("el-option",{key:t.id,attrs:{label:t.taxname,value:t.id}})})),1)],1)]):t._e(),t.roomVisible?o("div",{staticClass:"section"},[t._l(t.info.quoted_price_room,(function(e,i){return o("table",{key:"kefang"+i},[e.room_list&&e.room_list.length>0?o("thead",[o("tr",{staticClass:"color_1"},[o("th",{staticClass:"topleft datecolor",attrs:{colspan:"4"}},[t._v(" 日期: "+t._s(t._f("date_day_ex")(e.date))+" "),0!=i&&1==t.$route.params.isSubmit?o("el-button",{staticClass:"copy",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.copyRoomDay(i)}}},[t._v("复制上一天")]):t._e()],1),o("th",{staticClass:"topleft"},[t._v("一天总金额 ￥"+t._s(t.dayMoney(e.room_list).toFixed(2)))])]),t._m(3,!0)]):t._e(),o("tbody",[t._l(e.room_list,(function(i,n){return o("tr",{key:"c_"+n},[o("td",[null!=i.inquiry_sheet_room_id?[t._v(" "+t._s(i.roomtypename)+" ")]:o("el-select",{attrs:{size:"small",filterable:""},on:{change:function(e){return t.changeCostProject(e,i)}},model:{value:i.roomtype,callback:function(e){t.$set(i,"roomtype",e)},expression:"item_c.roomtype"}},t._l(t.roomcostProjects,(function(t){return o("el-option",{directives:[{name:"show",rawName:"v-show",value:"0"!==t.detail_type,expression:"rc.detail_type !== '0'"}],key:t.code,attrs:{label:t.name,value:t.code}})})),1)],2),o("td",[t._v(t._s(i.roomcount))]),o("td",[o("el-input",{class:{difference:t.roomProvideCountDifference(i)},attrs:{readonly:t.readonly},on:{input:function(e){i.provide_count=t.formatNum(i.provide_count,3)}},model:{value:i.provide_count,callback:function(e){t.$set(i,"provide_count",e)},expression:"item_c.provide_count"}})],1),o("td",[o("el-input",{class:{difference:t.roomDifference(i)},attrs:{readonly:t.readonly},on:{input:function(e){i.unitprice=t.formatNum(i.unitprice,2)}},model:{value:i.unitprice,callback:function(e){t.$set(i,"unitprice",e)},expression:"item_c.unitprice"}})],1),o("td",[o("el-input",{class:{room_line:!i.inquiry_sheet_room_id},attrs:{readonly:t.readonly},model:{value:i.remarks,callback:function(e){t.$set(i,"remarks",e)},expression:"item_c.remarks"}}),i.inquiry_sheet_room_id||1!=t.$route.params.isSubmit?t._e():o("el-button",{attrs:{icon:"el-icon-delete",type:"danger",circle:"",size:"mini"},on:{click:function(o){return t.delNewRoomType(e,n)}}})],1)])})),1==t.$route.params.isSubmit?o("tr",[o("td",[t._v("其他要求")]),o("td",{attrs:{colspan:"3"}},[e.room_list.length>0?[t._v(" "+t._s(e.room_list[0].otherrequirements)+" ")]:t._e()],2),o("td",{staticStyle:{"text-align":"center"}},[o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(o){return t.addNewRoomType(e.room_list)}}},[t._v("添加新房型")])],1)]):t._e()],2)])})),o("div",{staticClass:"total"},[o("div",[t._v(" 客房报价总价: "),o("span",[t._v("￥"+t._s(t.allMoney.toFixed(2)))])]),o("div",[t._v(" 客房报价总备注： "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.info.room_remarks,expression:"info.room_remarks"}],attrs:{type:"text",placeholder:"请备注您的客房优势",readonly:t.readonly},domProps:{value:t.info.room_remarks},on:{input:function(e){e.target.composing||t.$set(t.info,"room_remarks",e.target.value)}}})])])],2):t._e(),t.conferenceVisible?o("div",{staticClass:"title_item title_item_sel"},[o("div",[t._v("会场需求")]),o("div",{staticClass:"sel_el"},[o("el-select",{staticStyle:{width:"100%"},attrs:{disabled:t.readonly,size:"medium",placeholder:"请选择"},on:{change:function(e){return t.conferenceVat(e)}},model:{value:t.info.conferencetaxid,callback:function(e){t.$set(t.info,"conferencetaxid",e)},expression:"info.conferencetaxid"}},t._l(t.info.taxlist,(function(t){return o("el-option",{key:t.id,attrs:{label:t.taxname,value:t.id}})})),1)],1)]):t._e(),t.conferenceVisible?o("div",{staticClass:"section"},[t._l(t.info.quoted_price_conference,(function(e,i){return o("table",{key:i},[o("thead",[o("tr",{staticClass:"color_1"},[o("th",{staticClass:"topleft datecolor",attrs:{colspan:"3"}},[t._v("日期: "+t._s(t._f("date_day_ex")(e.date)))]),o("th",{staticClass:"topleft",attrs:{colspan:"2"}},[t._v("一天总金额 ￥"+t._s(t.meetingDayMoney(e.conference_list).toFixed(2)))])]),t._m(4,!0)]),o("tbody",t._l(e.conference_list,(function(i,n){return o("tr",{key:"c_"+n},[o("td",[1==i.type?[t._v(" "+t._s(0==i.is_important?"主会场":"子会场")+"-场租 ")]:t._e(),2==i.type?[t._v(" "+t._s(0==i.is_important?"主会场":"子会场")+"-搭建 ")]:t._e(),3==i.type?[t._v(" "+t._s(0==i.is_important?"主会场":"子会场")+"-设备 ")]:t._e(),4==i.type?[o("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.conferenceTypeChange(i)}},model:{value:i.quoted_code,callback:function(e){t.$set(i,"quoted_code",e)},expression:"item_c.quoted_code"}},t._l(t.addConferenceSelects,(function(t){return o("el-option",{directives:[{name:"show",rawName:"v-show",value:"0"!==t.detail_type,expression:"option.detail_type !== '0'"}],key:t.code,attrs:{label:t.name,value:t.code}})})),1)]:t._e()],2),o("td",[1==i.type?[o("p",[t._v("会议时间:"+t._s(i.starttime)+"~"+t._s(i.endtime))]),o("p",[t._v("出席人数: "+t._s(i.attendees)+"人")]),o("p",[t._v("会场台型: "+t._s(i.roomsetuptypename))]),o("p",[t._v("会场面积范围:"+t._s(i.min_area)+"~"+t._s(i.max_area)+" sqm")])]:t._e(),2==i.type?[o("p",[t._v(t._s(t._f("date_day")(e.date))+" "+t._s(i.starttime)+"~"+t._s(t._f("date_day")(i.advance_date))+" "+t._s(i.endtime)+" "),o("br"),t._v(" "+t._s(i.related_information))])]:t._e(),3==i.type?[o("p",[t._v(t._s(i.equipment))])]:t._e(),4==i.type?[o("div",[t._v(" 数量： "),o("el-input-number",{staticStyle:{width:"50%"},attrs:{controls:!1,precision:0,placeholder:"请输入数量",readonly:t.readonly},model:{value:i.count,callback:function(e){t.$set(i,"count",t._n(e))},expression:"item_c.count"}})],1)]:t._e()],2),o("td",[2==i.type?[t._v(" "+t._s(i.describe)+" ")]:t._e(),3==i.type?[t._v(" "+t._s(i.microphonedescribe)+" ")]:t._e(),4==i.type?[o("div",[t._v(" 单价： ￥ "),o("el-input",{staticStyle:{width:"60%"},attrs:{readonly:t.readonly},on:{input:function(e){i.price=t.formatNum(i.price,2)}},model:{value:i.price,callback:function(e){t.$set(i,"price",e)},expression:"item_c.price"}})],1)]:t._e()],2),o("td",[4==i.type?[t._v(" ￥ "+t._s((i.price*i.count).toFixed(2))+" ")]:[o("el-input",{class:{difference:t.conferenceDifference(i)},attrs:{readonly:t.readonly},on:{input:function(e){i.price=t.formatNum(i.price,2)}},model:{value:i.price,callback:function(e){t.$set(i,"price",e)},expression:"item_c.price"}})]],2),o("td",[o("el-input",{staticStyle:{width:"auto"},attrs:{readonly:t.readonly},model:{value:i.comments,callback:function(e){t.$set(i,"comments",e)},expression:"item_c.comments"}}),1==i.type?o("span",{staticStyle:{"margin-left":"10px",color:"#409eff",cursor:"pointer"},on:{click:function(o){return t.addConferenceOther(e,i,n)}}},[t._v("添加其他费用")]):t._e(),4==i.type?o("span",{staticStyle:{"margin-left":"10px",color:"#409eff",cursor:"pointer"},on:{click:function(o){return t.delConferenceOther(e,i,n)}}},[t._v("删除")]):t._e()],1)])})),0)])})),o("div",{staticClass:"total"},[o("div",[t._v(" 会场报价总计: "),o("span",[t._v("￥"+t._s(t.meetingAllMoney.toFixed(2)))])]),o("div",[t._v(" 会议报价总备注： "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.info.conference_remarks,expression:"info.conference_remarks"}],attrs:{type:"text",placeholder:"您可以填写详细的报价备注",readonly:t.readonly},domProps:{value:t.info.conference_remarks},on:{input:function(e){e.target.composing||t.$set(t.info,"conference_remarks",e.target.value)}}})])])],2):t._e(),t.foodVisible?o("div",{staticClass:"title_item title_item_sel"},[o("div",[t._v("酒店内餐饮需求")]),o("div",[t._v("餐标Dining Standard:￥"+t._s(t.positiveFloatSix(t.info.food_limit).toFixed(2))+" ")]),o("div",{staticClass:"sel_el"},[o("el-select",{staticStyle:{width:"100%"},attrs:{disabled:t.readonly,size:"medium",placeholder:"请选择"},on:{change:function(e){return t.foodVat(e)}},model:{value:t.info.foodtaxid,callback:function(e){t.$set(t.info,"foodtaxid",e)},expression:"info.foodtaxid"}},t._l(t.info.taxlist,(function(t){return o("el-option",{key:t.id,attrs:{label:t.taxname,value:t.id}})})),1)],1)]):t._e(),t.foodVisible?o("div",{staticClass:"section"},[t._l(t.info.quoted_price_food,(function(e,i){return o("table",{key:i},[o("thead",[o("tr",{staticClass:"color_1"},[o("th",{staticClass:"topleft datecolor",attrs:{colspan:"4"}},[t._v("日期: "+t._s(t._f("date_day_ex")(e.date)))]),o("th",{staticClass:"topleft",attrs:{colspan:"2"}},[t._v("一天总金额 ￥"+t._s(t.repastDayMoney(e.food_list).toFixed(2)))])]),t._m(5,!0)]),o("tbody",t._l(e.food_list,(function(e,i){return o("tr",{key:"c_"+i},[o("td",[t._v(" "+t._s(e.foodtypename)+" "),e.usetypename?o("span",[t._v("["+t._s(e.usetypename)+"]")]):t._e()]),o("td",[t._v(t._s(e.personcount))]),o("td",[t._v(t._s(e.comments))]),o("td",[o("el-input",{class:{difference:t.foodDifference(e)},attrs:{type:"text",readonly:t.readonly},on:{input:function(o){e.price=t.formatNum(e.price,2)}},model:{value:e.price,callback:function(o){t.$set(e,"price",o)},expression:"item_c.price"}})],1),o("td",[1==e.addresstype?o("el-input",{attrs:{readonly:t.readonly,placeholder:"请注明餐厅名称或其他备注"},model:{value:e.offer_remarks,callback:function(o){t.$set(e,"offer_remarks",o)},expression:"item_c.offer_remarks"}}):o("el-input",{attrs:{placeholder:"请填写针对这个项目的特殊备注",readonly:t.readonly},model:{value:e.offer_remarks,callback:function(o){t.$set(e,"offer_remarks",o)},expression:"item_c.offer_remarks"}})],1),o("td",[t._v(t._s(t.positiveFloatSix(t.positiveInteger(e.personcount)*t.positiveFloatSix(e.price)).toFixed(2)))])])})),0)])})),o("div",{staticClass:"total"},[o("div",[t._v(" 酒店内餐饮报价总计: "),o("span",[t._v("￥"+t._s(t.repastAllMoney.toFixed(2)))])]),o("div",[t._v(" 酒店内餐饮报价总备注: "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.info.food_remarks,expression:"info.food_remarks"}],attrs:{type:"text",placeholder:"您可以填写详细的报价备注",readonly:t.readonly},domProps:{value:t.info.food_remarks},on:{input:function(e){e.target.composing||t.$set(t.info,"food_remarks",e.target.value)}}})])])],2):t._e(),o("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"a_click",attrs:{href:t.downloadUrl,target:"_blank",download:""}}),o("div",{staticClass:"title_item"},[t._v("报价书、报价说明（付款条件及其他备注）")]),o("div",{staticClass:"section"},[o("div",{staticClass:"uploadFile"},[o("span",[t._v("上传报价书：")]),o("el-upload",{staticClass:"upload-demo",attrs:{"on-change":function(e,o){t.handleChangeAttach(e,o)},"on-remove":function(e,o){t.handleRemoveAttach(e,o)},"on-preview":t.handlePreview,"auto-upload":!1,"file-list":this.fileList,multiple:!1,action:"",disabled:t.readonly}},[o("el-button",{attrs:{size:"small",type:"primary"}},[t._v("选择文件")])],1)],1),o("div",{staticClass:"remark"},[t._v("您可以上传您的官方报价书给终端客户。这份报价书将为保存保证此次交易的合规性。")]),o("div",{staticClass:"selDate"},[o("span",[t._v("*")]),t._v(" 报价有效期： "),o("div",{staticClass:"block"},[o("el-date-picker",{attrs:{readonly:t.readonly,type:"datetime",placeholder:"选择日期时间"},on:{change:t.dataChange},model:{value:t.info.quotationenddate,callback:function(e){t.$set(t.info,"quotationenddate",e)},expression:"info.quotationenddate"}})],1)]),o("div",{staticClass:"explain"},[t._v("报价说明（付款条件及其他备注）")]),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.info.offer_remarks,expression:"info.offer_remarks"}],staticClass:"bz",attrs:{placeholder:"请填写会场可使用面积、订金比例、订金支付和尾款结算方式等。"},domProps:{value:t.info.offer_remarks},on:{input:function(e){e.target.composing||t.$set(t.info,"offer_remarks",e.target.value)}}})]),o("div",{staticClass:"title_item"}),o("div",{staticClass:"section"},[o("div",{staticClass:"total"},[o("div",[o("span",{staticStyle:{"font-size":"32px"}},[t._v("总报价: ￥"+t._s(t.quotedPrice.toFixed(2)))])])])]),1==this.$route.params.isSubmit?o("div",{staticClass:"section btn_sec"},[o("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交报价")])],1):t._e()]):t._e()])},n=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"label"},[o("span",[t._v("*")]),t._v(" 报价人 ")])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"label"},[o("span",[t._v("*")]),t._v(" 联系电话 ")])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"label"},[o("span",[t._v("*")]),t._v(" 联系邮箱 ")])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("tr",{staticClass:"color_2"},[o("th",[t._v("房型")]),o("th",[t._v("所需数量")]),o("th",[t._v("酒店可提供数量")]),o("th",[t._v("单价")]),o("th",[t._v("报价备注")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("tr",{staticClass:"color_2"},[o("th",[t._v("项目")]),o("th",[t._v("需求")]),o("th",[t._v("需求备注")]),o("th",[t._v("报价")]),o("th",[t._v("报价备注")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("tr",{staticClass:"color_2"},[o("th",[t._v("项目")]),o("th",[t._v("人数/人次")]),o("th",[t._v("需求备注")]),o("th",[t._v("单价（RMB/人）")]),o("th",[t._v("报价备注")]),o("th",[t._v("总价（¥）")])])}],r=o("ade3"),a=(o("d3b7"),o("159b"),o("a434"),o("b0c0"),o("4de4"),o("ac1f"),o("5319"),o("caad"),o("25f0"),o("00b4"),o("b680"),o("a9e3"),o("2654")),s=(o("b587"),o("0e5c")),c=o("cf45"),l=o("acd6"),d={data:function(){var t;return t={info:{},hotelList:[],rules:{IntegerNotMust:[{validator:a["f"],trigger:"change"}]},readonly:!1,loading:!1,addConferenceSelects:[],errormsg:[],warningmsg:"",foodlimitwarningmsg:[],selVat:""},Object(r["a"])(t,"info",{}),Object(r["a"])(t,"contractsId",""),Object(r["a"])(t,"fileList",[]),Object(r["a"])(t,"roomOut",1),Object(r["a"])(t,"conferenceOut",1),Object(r["a"])(t,"foodOut",1),Object(r["a"])(t,"transportationOut",1),Object(r["a"])(t,"carOut",1),Object(r["a"])(t,"otherOut",1),Object(r["a"])(t,"disabled",!0),Object(r["a"])(t,"downloadUrl",""),Object(r["a"])(t,"roomcostProjects",[]),t},methods:{positiveInteger:c["q"],positiveFloatSix:c["o"],formatNum:c["e"],formatDate:c["d"],getNextDateFormat:c["i"],excelExport:l["a"],getFormatDate:c["g"],CompareDate:c["a"],downloadOfferConfirm:function(){var t="报价确认单";this.excelExport("/Template/GetTemplate",{eventid:this.info.activity_id,type:5,param:this.info.id},t)},addConferenceOther:function(t,e,o){var i=0;t.conference_list.forEach((function(t){4==t.type&&(i+=1)}));var n={quoted_firstid:e.inquiry_sheet_conference_id,order_name:e.order_name,date:e.date,indexs:i+1,type:4,quoted_code:"",quoted_name:"",count:"",price:"",comments:""};t.conference_list.splice(o+i+1,0,n)},delConferenceOther:function(t,e,o){var i=0;t.conference_list.splice(o,1),t.conference_list.forEach((function(t){4==t.type&&(i+=1,t.indexs=i)}))},searchSelectOption:function(){var t=this;this.$api.getCostProjects({code:"0049"},"POST").then((function(e){t.addConferenceSelects=e}))},conferenceTypeChange:function(t){this.addConferenceSelects.forEach((function(e){t.quoted_code==e.code&&(t.quoted_name=e.name)}))},excelexport:function(){var t="报价单"+this.info.id;this.excelExport("/quotation/exportexcel",{eventId:this.info.activity_id},t)},dataChange:function(t){this.info.quotationenddate=this.formatDate("YYYY-mm-dd HH:MM:SS",t)},changeCostProject:function(t,e){e.roomtypename=e.custom_roomtype=this.roomcostProjects.filter((function(e){return e.code==t}))[0].name,e.custom_roomtypeid=t,e.roomtypid=t},changeSel:function(t){var e=this;this.info.contactslist.forEach((function(o,i){t==o.id&&(e.info.bidder=o.id,e.info.biddername=o.contacts,e.info.biddertel=o.telephone,e.info.bidderemail=o.email,e.disabled=!0),t==o.id&&"其他"==o.contacts&&(e.disabled=!1,e.info.biddername="")}))},initVat:function(){var t=this;null==this.info.roomtaxid&&(this.info.roomtaxid=this.info.taxlist[0].id),null==this.info.conferencetaxid&&(this.info.conferencetaxid=this.info.taxlist[0].id),null==this.info.foodtaxid&&this.info.taxlist.forEach((function(e,o){1==e.outtaxrate&&1==e.invoicetype&&(t.info.foodtaxid=e.id)})),this.info.taxlist.forEach((function(e,o){e.id==t.info.roomtaxid&&(t.roomOut=e.outtaxrate),e.id==t.info.conferencetaxid&&(t.conferenceOut=e.outtaxrate),e.id==t.info.foodtaxid&&(t.foodOut=e.outtaxrate),e.id==t.info.transportationtaxid&&(t.transportationOut=e.outtaxrate),e.id==t.info.cartaxid&&(t.carOut=e.outtaxrate),e.id==t.info.othertaxid&&(t.otherOut=e.outtaxrate)}))},roomVat:function(t){var e=this;this.info.taxlist.forEach((function(o,i){o.id==t&&(e.roomOut=o.outtaxrate)})),this.info.roomtaxid=t},conferenceVat:function(t){var e=this;this.info.taxlist.forEach((function(o,i){o.id==t&&(e.conferenceOut=o.outtaxrate)})),this.info.conferencetaxid=t},foodVat:function(t){var e=this;this.info.taxlist.forEach((function(o,i){o.id==t&&(e.foodOut=o.outtaxrate)})),this.info.foodtaxid=t},transportationVat:function(t){var e=this;this.info.taxlist.forEach((function(o,i){o.id==t&&(e.transportationOut=o.outtaxrate)})),this.info.transportationtaxid=t},carVat:function(t){var e=this;this.info.taxlist.forEach((function(o,i){o.id==t&&(e.carOut=o.outtaxrate)})),this.info.cartaxid=t},otherVat:function(t){var e=this;this.info.taxlist.forEach((function(o,i){o.id==t&&(e.otherOut=o.outtaxrate)})),this.info.othertaxid=t},handleChangeAttach:function(t,e){var o=t.size/1024/1024<10;if(!o)return this.$message.error("上传附件大小不能超过 10MB!"),void this.$refs.upload.handleRemove(t);this.fileList=e},handleRemoveAttach:function(t,e){this.fileList=e},handlePreview:function(t){var e=this;if(t.url){var o=t.url.substring(t.url.lastIndexOf(".")+1),i=["pdf","jpeg","jpg","png","txt"],n=["docx","doc","xls","xlsx","xlsm","ppt","pptx"];t.url=t.url.replace(/http:/,"https:"),this.downloadUrl=t.url,n.includes(o)?this.downloadUrl="https://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(t.url):i.includes(o)?this.downloadUrl=t.url:this.$message.info("文件格式不支持预览，下载后查看"),setTimeout((function(){e.$refs.a_click.click()}),100)}},remoteMethod:function(t){var e=this;this.loading=!0,this.$api.hotelList({Page:1,Rows:99,keyword:t},"POST").then((function(t){e.loading=!1,e.hotelList=t.List}))},addNewRoomType:function(t){t.push({roomtypename:"免房",provide_count:0,remarks:"",unitprice:0,roomtype:"0034-4",custom_roomtype:"免房",custom_roomtypeid:"0034-4"})},delNewRoomType:function(t,e){t.room_list.splice(e,1)},copyRoomDay:function(t){var e=this;this.info.quoted_price_room[t-1].room_list.forEach((function(o,i){e.info.quoted_price_room[t].room_list.forEach((function(t,e){t.roomtype==o.roomtype&&(t.roomtypename=o.roomtypename,t.provide_count=o.provide_count,t.remarks=o.remarks,t.unitprice=o.unitprice)}))}))},differenceShowErrorMessage:function(){var t="";this.errormsg.forEach((function(e){t+="<p style='padding:5px;'>"+e+"</p>"})),this.$message({message:t,dangerouslyUseHTMLString:!0,type:"error",lockScroll:!1})},addroomProvidecountwarningmsg:function(){var t=this;this.warningmsg="";var e=!1,o=[],i=[],n=[],r=[],a=[];if(this.info.quoted_price_room&&this.info.quoted_price_room.length>0&&(this.info.quoted_price_room.forEach((function(t){t.room_list&&t.room_list.length>0&&t.room_list.forEach((function(t,e){o.push(t),t.inquiry_sheet_room_id&&!i.includes(t.roomtypename)&&i.push(t.roomtypename),t.inquiry_sheet_room_id||n.includes(t.roomtypename)||n.push(t.roomtypename)}))})),i.length>0&&i.forEach((function(t){var i=0,n=0,a=o.filter((function(e){return e.roomtypename==t}));a.length>0&&a.forEach((function(t){i+=Object(c["q"])(t.roomcount),n+=Object(c["q"])(t.provide_count)})),n<i&&(e=!0),r.push({name:t,roomcount:i,provide_count:n})})),n.length>0&&n.forEach((function(t){var e=0,i=o.filter((function(e){return e.roomtypename==t}));i.length>0&&i.forEach((function(t){e+=Object(c["q"])(t.provide_count)})),a.push({name:t,provide_count:e})})),e)){var s="",l="";r.forEach((function(t,e){s+=t.name+t.roomcount.toString(),l+=t.name+t.provide_count.toString(),e<r.length-1&&(s+=" ",l+=" "),console.log(s)})),a.length>0&&(""!=l&&(l+=" "),a.forEach((function(t,e){l+=t.name+t.provide_count.toString(),e<a.length-1&&(l+=" ")})));var d="<p>客户所需客房数量<"+s+"></p>",f="<p>与您填写的数量<"+l+"></p>";this.warningmsg=d+f}this.foodlimitwarningmsg.length>0&&this.foodlimitwarningmsg.forEach((function(e){t.warningmsg+="<p>"+e+"</p>"})),""!=this.warningmsg&&(this.warningmsg+="<p>确认提交当前报价吗？</p>")},validate:function(){return this.errormsg=[],this.checkRoomDifference,this.checkConferenceDifference,this.checkFoodDifference,this.checkTransportationDifference,this.checkCarDifference,this.checkOtherDifference,this.errormsg.length>0&&this.differenceShowErrorMessage(),0==this.errormsg.length},submit:function(){var t=this;if(!this.disabled){var e=/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;if(!(this.info.biddername&&this.info.biddertel&&this.info.bidderemail))return void this.$message.error("姓名、手机、邮箱缺一不可！");if(!e.test(this.info.bidderemail))return void this.$message.error("邮箱格式不正确！")}null!=this.info.roomtaxid&&null!=this.info.conferencetaxid&&null!=this.info.foodtaxid?this.info.quotationenddate?this.CompareDate(this.info.quotationenddate,this.formatDate("YYYY-mm-dd HH:MM:SS",new Date))?this.validate()&&(this.addroomProvidecountwarningmsg(),""==this.warningmsg?this.save():this.$confirm(this.warningmsg,"提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定提交",cancelButtonText:"返回修改",type:"warning"}).then((function(){t.save()})).catch((function(){}))):this.$message.error("有效期不允许在当前日期之前!"):this.$message.error("报价有效期未填写!"):this.$message.error("税率未选择！")},save:function(){var t=this,e=[],o=this.fileList.filter((function(t){return""!=t.uid}));this.fileList.length>0&&o.forEach((function(t){e.push({key:t.uid,file:t.raw})})),console.log(e),Object(s["a"])(e).then((function(e){t.info.attachlist&&t.info.attachlist.length>0&&t.info.attachlist.forEach((function(e){0==t.fileList.filter((function(t){return t.id==e.id})).length&&(e.delete=!0)})),e.forEach((function(e){e&&t.info.attachlist.push({filepath:e.FilePath,filename:e.OriginalFileName,filetype:1})}));var o=t.quotedPrice.toFixed(2);t.$confirm("您报价￥"+o+"元,确认提交?","提示",{confirmButtonText:"确定提交报价",cancelButtonText:"取消",type:"warning"}).then((function(){"非VAT"==t.info.taxtype&&(t.info.taxrate=0);for(var e=t.info.quoted_price_room,o=0;o<e.length;o++)for(var i=e[o].room_list,n=0;n<i.length;n++)i[n].TableName?(0==t.info.is_Inside_outside&&(i[n].inside_roomcount=0,i[n].outside_roomcount=i[n].provide_count),1==t.info.is_Inside_outside&&(i[n].provide_count<=i[n].outside_roomcount?(i[n].outside_roomcount=i[n].provide_count,i[n].inside_roomcount=0):i[n].provide_count>i[n].outside_roomcount&&(i[n].inside_roomcount=i[n].provide_count-i[n].outside_roomcount))):(i[n].indexs=n+1,i[n].inside_roomcount=0,i[n].outside_roomcount=i[n].provide_count);t.$api.quotationsubmit(t.info,"POST").then((function(e){if(e){console.log(e);var o=e.event_quoted_price_id;return console.log(o),t.$api.SendQuotation({QuotationId:o},"POST").then((function(e){t.$router.push({name:"activityOrderInfo",params:{id:t.$route.params.id}})}))}t.$message({message:"提交失败",type:"fail"})}))})).catch((function(){}))}))}},computed:{formateDate:function(){return function(t){return Object(c["d"])("YYYY年mm月dd日",new Date(t))}},hotelVisible:function(){return 1==this.info.inquirysheetType},roomVisible:function(){return this.info.quoted_price_room&&this.info.quoted_price_room.length>0},conferenceVisible:function(){return this.info.quoted_price_conference&&this.info.quoted_price_conference.length>0},foodVisible:function(){return this.info.quoted_price_food&&this.info.quoted_price_food.length>0},transportationVisible:function(){return this.info.quoted_price_transportation&&this.info.quoted_price_transportation.length>0},carVisible:function(){return this.info.quoted_price_car&&this.info.quoted_price_car.length>0},otherVisible:function(){return this.info.quoted_price_other&&this.info.quoted_price_other.length>0},adddifferenceerrormsg:function(){return function(t,e,o){var i="";1==t?i=this.formateDate(e)+"客房,第"+o+"行,单价未填写,请填写单价":2==t?i=this.formateDate(e)+"会场,第"+o+"行,报价未填写,请填写报价":3==t?i=this.formateDate(e)+"餐饮,第"+o+"行,单价未填写,请填写单价":4==t?i=this.formateDate(e)+"大交通,第"+o+"单价未填写,请填写单价":5==t?i=this.formateDate(e)+"地面交通,第"+o+"行,单价未填写,请填写单价":6==t&&(i="其他服务,第"+o+"行,单价未填写,请填写单价"),this.errormsg.push(i)}},addnewitemerrormsg:function(){return function(t,e,o){var i="";1==t?i=this.formateDate(e)+"新增客房,第"+o+"行,消费项目名称为必填项,请填写房型":2==t?i=this.formateDate(e)+"新增会场,第"+o+"行,消费项目名称为必填项,请填写消费项目名称":3==t?i=this.formateDate(e)+"新增餐饮,第"+o+"行,消费项目名称为必填项,请填写消费项目名称":4==t?i=this.formateDate(e)+"新增大交通,第"+o+"行,消费项目名称为必填项,请填写消费项目名称":5==t&&(i=this.formateDate(e)+"新增地面交通,第"+o+"行,消费项目名称为必填项,请填写消费项目名称"),this.errormsg.push(i)}},addfoodlimiterrormsg:function(){return function(t,e,o){var i="";3==t&&(i=this.formateDate(e)+"酒店内餐饮,第"+o+"行,超过餐标"),this.foodlimitwarningmsg.push(i)}},roomProvideCountDifference:function(){return function(t){return Object(c["q"])(t.provide_count)<Object(c["q"])(t.roomcount)}},roomDifference:function(){return function(t){return""===t.unitprice}},checkRoomDifference:function(){var t=this,e=!1;this.info.quoted_price_room&&this.info.quoted_price_room.length>0&&this.info.quoted_price_room.forEach((function(o){if(o.room_list&&o.room_list.length>0){o.room_list.forEach((function(i,n){e=t.roomDifference(i),e&&t.adddifferenceerrormsg(1,o.date,n+1)}));var i=o.room_list.filter((function(t){return null==t.inquiry_sheet_room_id&&""==t.roomtypename}));i.length>0&&i.forEach((function(e,i){t.addnewitemerrormsg(1,o.date,i+1)}))}}))},dayMoney:function(){return function(t){var e=this,o=0;return t.forEach((function(t){var i=0;i=t.provide_count<0?Number(t.provide_count):e.positiveInteger(t.provide_count),o+=i*e.positiveFloatSix(t.unitprice)})),this.positiveFloatSix(o*parseFloat(this.roomOut))}},allMoney:function(){var t=this,e=0;return this.info.quoted_price_room&&this.info.quoted_price_room.length>0&&this.info.quoted_price_room.forEach((function(o){e+=t.positiveFloatSix(t.dayMoney(o.room_list))})),this.positiveFloatSix(e)},meetingDayMoney:function(){return function(t){var e=this,o=0;return t.forEach((function(t){var i;o+=e.positiveFloatSix(t.price*(null!==(i=t.count)&&void 0!==i?i:0))})),this.positiveFloatSix(o*parseFloat(this.conferenceOut))}},meetingAllMoney:function(){var t=this,e=0;return this.info.quoted_price_conference&&this.info.quoted_price_conference.length>0&&this.info.quoted_price_conference.forEach((function(o){e+=t.meetingDayMoney(o.conference_list)})),this.positiveFloatSix(e)},conferenceDifference:function(){return function(t){return""===t.price}},checkConferenceDifference:function(){var t=this,e=!1;this.info.quoted_price_conference&&this.info.quoted_price_conference.length>0&&this.info.quoted_price_conference.forEach((function(o){o.conference_list&&o.conference_list.length>0&&o.conference_list.forEach((function(i,n){e=t.conferenceDifference(i),e&&t.adddifferenceerrormsg(2,o.date,n+1)}))}))},repastDayMoney:function(){return function(t){var e=this,o=0;return t.forEach((function(t){o+=e.positiveInteger(t.personcount)*e.positiveFloatSix(t.price)})),this.positiveFloatSix(o*parseFloat(this.foodOut))}},repastAllMoney:function(){var t=this,e=0;return this.info.quoted_price_food&&this.info.quoted_price_food.length>0&&this.info.quoted_price_food.forEach((function(o){e+=t.repastDayMoney(o.food_list)})),this.positiveFloatSix(e)},foodDifference:function(){return function(t){return""===t.price}},foodLimit:function(){return function(t,e){return parseFloat(t.price)>parseFloat(e)}},checkFoodDifference:function(){var t=this,e=!1,o=!1;this.foodlimitwarningmsg=[],this.info.quoted_price_food&&this.info.quoted_price_food.length>0&&this.info.quoted_price_food.forEach((function(i){i.food_list&&i.food_list.length>0&&i.food_list.forEach((function(n,r){e=t.foodDifference(n),e&&t.adddifferenceerrormsg(3,i.date,r+1),o=t.foodLimit(n,t.info.food_limit),o&&t.addfoodlimiterrormsg(3,i.date,r+1)}))}))},IntercityTransportationDayMoney:function(){return function(t){var e=this,o=0;return t.forEach((function(t){o+=e.positiveInteger(t.passengercount)*e.positiveFloatSix(t.unitprice)})),this.positiveFloatSix(o)}},IntercityTransportationAllMoney:function(){var t=this,e=0;return this.info.quoted_price_transportation&&this.info.quoted_price_transportation.length>0&&this.info.quoted_price_transportation.forEach((function(o){e+=t.IntercityTransportationDayMoney(o.transportation_list)})),this.positiveFloatSix(e*parseFloat(this.transportationOut))},transportationDifference:function(){return function(t){return""===t.unitprice}},checkTransportationDifference:function(){var t=this,e=!1;this.info.quoted_price_transportation&&this.info.quoted_price_transportation.length>0&&this.info.quoted_price_transportation.forEach((function(o){o.transportation_list&&o.transportation_list.length>0&&o.transportation_list.forEach((function(i,n){e=t.transportationDifference(i),e&&t.adddifferenceerrormsg(4,o.date,n+1)}))}))},CityDayMoney:function(){return function(t){var e=this,o=0;return t.forEach((function(t){o+=e.positiveInteger(t.carcount)*e.positiveFloatSix(t.price)})),this.positiveFloatSix(o)}},CityAllMoney:function(){var t=this,e=0;return this.info.quoted_price_car&&this.info.quoted_price_car.length>0&&this.info.quoted_price_car.forEach((function(o){e+=t.CityDayMoney(o.carlist)})),this.positiveFloatSix(e*parseFloat(this.carOut))},carDifference:function(){return function(t){return""===t.price}},checkCarDifference:function(){var t=this,e=!1;this.info.quoted_price_car&&this.info.quoted_price_car.length>0&&this.info.quoted_price_car.forEach((function(o){o.car_list&&o.car_list.length>0&&o.car_list.forEach((function(i,n){e=t.carDifference(i),e&&t.adddifferenceerrormsg(5,o.date,n+1)}))}))},otherAllMoney:function(){var t=this,e=0;return this.info.quoted_price_other&&this.info.quoted_price_other.length>0&&this.info.quoted_price_other.forEach((function(o){e+=t.positiveInteger(o.offerparticipatecount)*t.positiveInteger(o.offerservicedaycount)*t.positiveFloatSix(o.price)})),this.positiveFloatSix(e*parseFloat(this.otherOut))},otherDifference:function(){return function(t){return""===t.price}},checkOtherDifference:function(){var t=this,e=!1;this.info.quoted_price_other&&this.info.quoted_price_other.length>0&&this.info.quoted_price_other.forEach((function(o,i){e=t.otherDifference(o),e&&t.adddifferenceerrormsg(6,null,i+1)}))},money:function(){return this.info.total_price=Object(c["o"])(this.allMoney)+Object(c["o"])(this.meetingAllMoney)+Object(c["o"])(this.repastAllMoney),Object(c["o"])(this.info.total_price)},quotedPrice:function(){return this.info.feizhicai_service=0,this.info.taxation=0,this.info.total_amount=Object(c["o"])(this.money),this.info.total_amount}},mounted:function(){var t=this;this.$api.getCostProjects({code:"0034"},"POST").then((function(e){t.roomcostProjects=e})),0==this.$route.params.isSubmit&&(this.readonly=!0),this.searchSelectOption(),this.$api.hotelList({Page:1,Rows:99},"POST").then((function(e){t.hotelList=e.List})),this.$api.quotationInfo({id:this.$route.params.id,type:this.$route.params.type||""},"POST").then((function(e){null!=e.quotationenddate&&(e.quotationenddate=t.getFormatDate(e.quotationenddate)),1==t.$route.params.isSubmit&&(e.quotationenddate=t.getNextDateFormat(new Date,10)),t.info=e,void 0!=t.info.bidder&&(t.contractsId=t.info.bidder),null==t.info.id&&t.info.quoted_price_room.forEach((function(t){t.room_list.forEach((function(t){t.provide_count=t.roomcount}))})),t.initVat(),t.info.attachlist&&t.info.attachlist.forEach((function(e){t.fileList.push({name:e.filename,url:t.info.quotationfile_domin+e.filepath,id:e.id})}))}))}},f=d,u=(o("93b6"),o("2877")),p=Object(u["a"])(f,i,n,!1,null,"7b6736cf",null);e["default"]=p.exports},"8ba4":function(t,e,o){var i=o("23e7"),n=o("eac5");i({target:"Number",stat:!0},{isInteger:n})},"93b6":function(t,e,o){"use strict";o("dcc8")},a434:function(t,e,o){"use strict";var i=o("23e7"),n=o("da84"),r=o("23cb"),a=o("5926"),s=o("07fa"),c=o("7b0b"),l=o("65f0"),d=o("8418"),f=o("1dde"),u=f("splice"),p=n.TypeError,m=Math.max,_=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var o,i,n,f,u,y,g=c(this),b=s(g),x=r(t,b),C=arguments.length;if(0===C?o=i=0:1===C?(o=0,i=b-x):(o=C-2,i=_(m(a(e),0),b-x)),b+o-i>h)throw p(v);for(n=l(g,i),f=0;f<i;f++)u=x+f,u in g&&d(n,f,g[u]);if(n.length=i,o<i){for(f=x;f<b-i;f++)u=f+i,y=f+o,u in g?g[y]=g[u]:delete g[y];for(f=b;f>b-i+o;f--)delete g[f-1]}else if(o>i)for(f=b-i;f>x;f--)u=f+i-1,y=f+o-1,u in g?g[y]=g[u]:delete g[y];for(f=0;f<o;f++)g[f+x]=arguments[f+2];return g.length=b-i+o,n}})},acd6:function(t,e,o){"use strict";o("d3b7"),o("3ca3"),o("ddb0"),o("2b3d"),o("9861");var i=o("bc3a"),n=o.n(i),r=o("f121"),a=r["b"];e["a"]=function(t,e,o){return new Promise((function(i,r){var s=function(){"/Template/GetTemplate"==t?n()({method:"post",url:a+t,data:e,headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(t){var i=document.createElement("a"),n=t.data.path.substring(t.data.path.lastIndexOf("."));fetch(t.data.path).then((function(t){return t.blob()})).then((function(t){i.href=URL.createObjectURL(t),console.log(i.href),5==e.type||e.type,i.download=o+n,document.body.appendChild(i),i.click()}))})):n()({method:"post",url:a+t,data:e,responseType:"blob",headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(i){console.log(i);var n=i.data,r=new FileReader;r.readAsDataURL(n),r.onload=function(i){var n=document.createElement("a");n.style.display="none","/quotation/exportexcel"==t||"/SettlementSheet/ExportExcel1"==t||"/orderform/exportexcel"==t||"/Quotation/ExportExcel"==t?n.download=o+".xls":"/Template/GetTemplate"==t?5==e.type||6==e.type?n.download=o+".docx":n.download=o+".xls":"/Reporting/GetExcel"==t&&(n.download=o+".xls"),n.href=i.target.result;document.body;document.body.appendChild(n),n.click(),document.body.removeChild(n)}}))};s()}))}},b587:function(t,e,o){"use strict";o("ac1f"),o("5319"),o("8ba4"),o("a9e3"),o("4d63"),o("c607"),o("2c3e"),o("25f0"),o("1276");var i=o("2b0e");function n(t,e,o,i){function n(){var t=e.value;if(o.modifiers.float){if(t=t.replace(/[^\d.]/g,""),t=t.replace(/[^\d.]/g,""),t=t.replace(/\.{2,}/g,"."),t=t.replace(/^\./g,"0."),"undefined"!==typeof o.value){var i=0;if("string"!==typeof o.value&&"number"!==typeof o.value||(i=parseInt(o.value)),!isNaN(i)){(!Number.isInteger(i)||i<0)&&(i=0);var n="^(\\d+)\\.(\\d{"+i+"}).*$",r=new RegExp(n);t=0===i?t.replace(r,"$1"):t.replace(r,"$1.$2")}}}else t=t.replace(/[^\d]/g,"");t.split(".").length-1>1&&(t=t.substring(0,t.length-1)),e.value=t}return n}var r={bind:function(t,e,o){var i="INPUT"===t.tagName?t:t.querySelector("input");i.addEventListener("input",n(t,i,e,o),!1)}};i["default"].directive("number-input",r)},dcc8:function(t,e,o){},eac5:function(t,e,o){var i=o("861d"),n=Math.floor;t.exports=Number.isInteger||function(t){return!i(t)&&isFinite(t)&&n(t)===t}}}]);